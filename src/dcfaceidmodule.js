/* eslint-disable */
const _0x106a=['currentAction','msg','scanLoaded','absolute','rgba(255,160,24,0.5)','Received:','lastCommand','detector','recognizeGlobal','innerHtml','onpause','substring','analizer','callCardDetectedEvent','pitch','current','commander','changeStep','getStep','/img/face.jpg','videoHeight','errors','actionWaitTime','log','getImageFromURL','id_back','js/deepfaceworker.js','error','onStartDownCount','startTime','scanner','result','server','webWorker','smile','mrzOptions','NONE','30px','fillStyle','text','url','getTracks','finished','show','onStepChanged','scanned','loading','finishWaitTime','currentCommand','lastDetectedTime','dim','forward','object','none','options','maskSize','getCurrentStep','hideTextArea','startSession','request','RIGHT','3BCkolg','notify','__canvas','outOfBounds','getLaplacianVariance','Error:','assign','lineTo','name','lineWidth','loadCard','pass_main','action','putImageData','callback','save','scale','getElementById','drawStreamToCanvas','normalizing','faceDetected','right','SUCCESS','postMessage','SCANNING','clearRect','closePath','round','noFace','FORWARD','curFrame','cropAndResizeCanvas','start','onCameraLoaded','string','observers','analyzeAfterOpen','paused','POST','DIV','streams','clearSnapshots','Please\x20follow\x20the\x20commands','moveTo','isSafari','1589912WMHeeu','croppedSize','onStreamLoaded','getLandmark','isPlaying','serverRequestDelay','onmessage','detectTime','recognizeLocal','errorWaitTime','worker','strokeStyle','join','lastScanned','callCommandChange','ACTIONS','FINISH','source-over','ID_FRONT','scan_worker_path','detectTimer','keys','image','height','success','getSize','testDetect','startingWaitTime','getCoordY','collect','detector\x20result','setOptions','playsinline','debug','results','canvas','parentElement','START','init','actualCanvas','toDataURL','toFixed','verify','onFrameUpdated','actionWaitBeforeCheck','landMarks','imageDataToCanvas','dpr','headers','lastResult','image/png','camera','host','onCommandResult','filter','faceWebWorker','autoplay','serverDelay','mrzcheck','drawMask','onFaceResult','detectionLocked','remove','tid','411988pqwCQt','getBox','look\x20up','isReady','isOffscreenCanvasSupport','hasCommand','getCoordX','area','resWidth','forEach','fill','raf','20px\x20Arial','noface','stop','/verify','detectedFaceCountDownBeforeStart','manyFace','manyfaces','appendChild','fixedTime','ctx','defineCommands','toVerify','down','bbox','onloadeddata','rect','checkPosAndActions','actionText','drawArea','getVideoTracks','setText','getSnapshots','landmark','worker_path','checkSize','fireCommand','Initializing','originalSize','snapshotlist','onCameraStart','function','quadraticCurveTo','canvasToBase64','getTimeDiff','applyConstraints','isErrorExist','showTextArea','onplaying','798115jcQwwr','blinking','slice','defineScanFace','stream','SHOW','add','pass_front','onTinyFaceResult','1320457DujRTh','docType','createDeepFace','curScan','open','apply','globalAlpha','scanning','top','offsetHeight','scanWebWorker','onMRZDetected','catch','visual','interval','indexOf','SMILE','LEFT','parseObject','checkScanResult','act2Command','globalCompositeOperation','onStart','onFaceDetected','setDim','index','roll','Error\x20loading\x20','analyser','white','width','callError','getUserMedia','defineContainer','look\x20left','hide','fillOnMobile','Worker','stringify','draw','onCommand','drawPath','__canvas_original','actionArea','docFace','div','face\x20laplacian','Your\x20browser\x20doesn\x27t\x20support\x20web\x20workers.','setAttribute','highlight','textAlign','Starting','isAllScanned','5TlIVyG','toOriginalSize','draw\x20mask\x20layer','reset','errorTime','14px\x20Arial','class','38636TcksoB','currentActionList','1738645UNmWsx','setFace','lastDetected','commandText','status','videoSize','inputSize','commands','opacity','count','fit2Size','floor','left','toosmall','score','onFinished','kind','cutEdge','crossOrigin','serverSide','net','INIT','Computing\x20for\x20finishing','getLastDetected','toLowerCase','callStepChange','callDetectedEvent','notifyAll','canvas2grayscale','box','some','videoWidth','data\x20processing,\x20please\x20wait...','append','fillText','onStep','getTinyFace','drawImage','checkCurrentCommandAction','checkURI','classList','sessionTime','sessionTimeCount','blankCanvas','getInstance','js/deepscanworker.min.js','lowlight','delete','useServerSide','mirrored','isMobile','drawFaces','match','devices','finishTime','TOO_SMALL','bind','face','position','beginPath','max','rgb(66,109,139)','rear\x20camera\x20used','onCameraStop','lastScannedTime','srcObject','number','DOWN','yaw','getTime','userAgent','getContext','finish','timeID','id_front','facingMode','font','devicePixelRatio','card/ready','onLoaded','getArea','random','session\x20timeout','application/json','scans','setCommand','headpos','onload','REJECT','stroke','1OJmdzF','onError','json','canvasToImageData','onInit','innerHTML','dom','chooselist','mrz','cropCanvas','orange','lock','srcDim','defineStream','enumerateDevices','valid','getCard','resizeCanvas','bottom','Lines','push','sourceDim','setup','onerror','clear','CANVAS','onDetected','tID','block','getPassTime','sizeKoef','recognize','observe','time','look\x20down','videoinput','createTextArea','state','addActionTime','environment','faceMask','scan','onScanResult','defineCurrentAction','src','fillRect','loaded','textContent','onWorkerMessage','maskInited','PASS_FRONT','video-layer','web\x20camera\x20exception!','list','streamSize','backgroundColor','image/jpeg','defineScanType','single','initWorker','atan2','cardImage','play','pos','then','snapshot','onScanLoaded','js/deeptinyfaceworker.min.js','ID_BACK','next','video','muted','includes','tagName','path','loadedTID','Card\x20model\x20loaded','face_worker_path','tinyFaceDetected','unlock','testSource','webgl','commandArea','scan-worker','4828653sFGRZD','calculate','onStop','isRearCameraUsed','command','rgba(0,\x200,\x200,\x201)','PASSPORT','display','getFace','media\x20devices','isWebGLExist','undefined','delay','load','currentStepActive','GET','end','step','restore','cutLastSlash','anonymous','onCardDetected','currentPosition','imageToCanvas','detect','drawCard','getImageB64','createElement','length','style','card','resHeight','ellipse','substr','mediaDevices','getImageData','frontCamera','type','initContainer','passport','close','Finished','data'];const _0x1dea=function(_0x7cb501,_0x5be92e){_0x7cb501=_0x7cb501-0x16c;let _0x106a50=_0x106a[_0x7cb501];return _0x106a50;};const _0x3e4a2e=_0x1dea;(function(_0x12ae9c,_0xce66be){const _0x28e4e4=_0x1dea;while(!![]){try{const _0x1a593f=-parseInt(_0x28e4e4(0x2f2))*parseInt(_0x28e4e4(0x34c))+-parseInt(_0x28e4e4(0x239))+-parseInt(_0x28e4e4(0x2f0))*-parseInt(_0x28e4e4(0x2e9))+-parseInt(_0x28e4e4(0x2ab))+parseInt(_0x28e4e4(0x2b4))+-parseInt(_0x28e4e4(0x279))*parseInt(_0x28e4e4(0x20c))+parseInt(_0x28e4e4(0x1a4));if(_0x1a593f===_0xce66be)break;else _0x12ae9c['push'](_0x12ae9c['shift']());}catch(_0x2fda70){_0x12ae9c['push'](_0x12ae9c['shift']());}}}(_0x106a,0xef2c6));const deepMerge=(_0x5dfcf6,_0x57e8ea)=>{const _0x2a251c=_0x1dea;for(let _0x174bdb of Object[_0x2a251c(0x24e)](_0x57e8ea)){_0x57e8ea[_0x174bdb]instanceof Object&&Object[_0x2a251c(0x212)](_0x57e8ea[_0x174bdb],deepMerge(_0x5dfcf6[_0x174bdb]||{},_0x57e8ea[_0x174bdb]));}return Object[_0x2a251c(0x212)](_0x5dfcf6||{},_0x57e8ea),_0x5dfcf6;},canvasRoundRect=(_0x32f8de,_0x2a514e,_0x5a570f,_0x4d839a,_0x1e765c,_0x22f5c7,_0x124875,_0x342fe0)=>{const _0x340052=_0x1dea;typeof _0x342fe0===_0x340052(0x1af)&&(_0x342fe0=!![]);typeof _0x22f5c7==='undefined'&&(_0x22f5c7=0x5);if(typeof _0x22f5c7===_0x340052(0x334))_0x22f5c7={'tl':_0x22f5c7,'tr':_0x22f5c7,'br':_0x22f5c7,'bl':_0x22f5c7};else{var _0x50299c={'tl':0x0,'tr':0x0,'br':0x0,'bl':0x0};for(var _0x29acf8 in _0x50299c){_0x22f5c7[_0x29acf8]=_0x22f5c7[_0x29acf8]||_0x50299c[_0x29acf8];}}_0x32f8de[_0x340052(0x32d)](),_0x32f8de['moveTo'](_0x2a514e+_0x22f5c7['tl'],_0x5a570f),_0x32f8de['lineTo'](_0x2a514e+_0x4d839a-_0x22f5c7['tr'],_0x5a570f),_0x32f8de[_0x340052(0x2a4)](_0x2a514e+_0x4d839a,_0x5a570f,_0x2a514e+_0x4d839a,_0x5a570f+_0x22f5c7['tr']),_0x32f8de[_0x340052(0x213)](_0x2a514e+_0x4d839a,_0x5a570f+_0x1e765c-_0x22f5c7['br']),_0x32f8de[_0x340052(0x2a4)](_0x2a514e+_0x4d839a,_0x5a570f+_0x1e765c,_0x2a514e+_0x4d839a-_0x22f5c7['br'],_0x5a570f+_0x1e765c),_0x32f8de[_0x340052(0x213)](_0x2a514e+_0x22f5c7['bl'],_0x5a570f+_0x1e765c),_0x32f8de[_0x340052(0x2a4)](_0x2a514e,_0x5a570f+_0x1e765c,_0x2a514e,_0x5a570f+_0x1e765c-_0x22f5c7['bl']),_0x32f8de[_0x340052(0x213)](_0x2a514e,_0x5a570f+_0x22f5c7['tl']),_0x32f8de[_0x340052(0x2a4)](_0x2a514e,_0x5a570f,_0x2a514e+_0x22f5c7['tl'],_0x5a570f),_0x32f8de[_0x340052(0x226)](),_0x124875&&_0x32f8de[_0x340052(0x283)](),_0x342fe0&&_0x32f8de[_0x340052(0x34b)]();};class StringExtra{static[_0x3e4a2e(0x1b7)](_0x5c8fc6){const _0x28bbab=_0x3e4a2e;if(_0x5c8fc6[_0x28bbab(0x1c5)](_0x5c8fc6[_0x28bbab(0x1c0)]-0x1)==='/')return _0x5c8fc6[_0x28bbab(0x2ad)](0x0,-0x1);return _0x5c8fc6;}};class DataModel{constructor(_0x2a276c='',_0x11eebd={}){const _0x1346f5=_0x3e4a2e;this[_0x1346f5(0x1f7)]=_0x2a276c,this[_0x1346f5(0x205)]={'headers':{}},this['options']=deepMerge(this[_0x1346f5(0x205)],_0x11eebd);}[_0x3e4a2e(0x290)](_0x52b5e6,_0x13048d){const _0x20d4d6=_0x3e4a2e;if(_0x52b5e6==null)return;if(_0x52b5e6['scanner']!=null&&_0x52b5e6['face']==null){let _0xcad6a4={'docType':_0x52b5e6[_0x20d4d6(0x1ed)][_0x20d4d6(0x2b5)]||null,'scans':[],'tid':_0x52b5e6[_0x20d4d6(0x1ed)][_0x20d4d6(0x367)]};for(let _0x57b92c in _0x52b5e6['scanner'][_0x20d4d6(0x346)]){_0xcad6a4[_0x20d4d6(0x346)][_0x20d4d6(0x360)]({'docFace':_0x52b5e6[_0x20d4d6(0x1ed)][_0x20d4d6(0x346)][_0x57b92c]['docFace']||null,'image':_0x52b5e6[_0x20d4d6(0x1ed)]['scans'][_0x57b92c][_0x20d4d6(0x24f)]});}let _0xfcb10a=deepMerge({'Content-Type':'application/json'},this['options'][_0x20d4d6(0x269)]||{});fetch(StringExtra[_0x20d4d6(0x1b7)](this[_0x20d4d6(0x1f7)])+_0x20d4d6(0x288),{'method':_0x20d4d6(0x232),'headers':_0xfcb10a,'body':JSON[_0x20d4d6(0x2da)](_0xcad6a4)})[_0x20d4d6(0x190)](_0x4265d2=>_0x4265d2[_0x20d4d6(0x34e)]())['then'](_0x345325=>{const _0x14a7c0=_0x20d4d6;if(typeof _0x13048d===_0x14a7c0(0x2a3)){let _0x5450ad={'success':_0x345325[_0x14a7c0(0x251)],'data':_0x345325[_0x14a7c0(0x1ce)]||null,'msg':_0x345325[_0x14a7c0(0x1d0)]||null};_0x13048d(_0x5450ad);}})[_0x20d4d6(0x2c0)](_0x3547a5=>{const _0x399d33=_0x20d4d6;console['error'](_0x399d33(0x211),_0x3547a5),typeof _0x13048d===_0x399d33(0x2a3)&&_0x13048d({'success':![],'error':_0x3547a5});});}}};class CameraVisualLayer{constructor(_0x275f80){const _0x40e12a=_0x3e4a2e;this[_0x40e12a(0x25c)]=_0x275f80;}[_0x3e4a2e(0x256)](){}['showCollection'](){}[_0x3e4a2e(0x313)](){}[_0x3e4a2e(0x20a)](){}};class OSPlus{static[_0x3e4a2e(0x324)](){const _0x18488b=_0x3e4a2e,_0x17b2a6=[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i];return _0x17b2a6[_0x18488b(0x310)](_0x21f1e3=>{const _0xcccb1a=_0x18488b;return navigator[_0xcccb1a(0x338)][_0xcccb1a(0x326)](_0x21f1e3);});}static[_0x3e4a2e(0x1ae)](){const _0x67834f=_0x3e4a2e;try{let _0x592d48=document[_0x67834f(0x1bf)](_0x67834f(0x25c));_0x592d48[_0x67834f(0x339)](_0x67834f(0x1a1));}catch(_0x5ac01f){return![];}return!![];}static[_0x3e4a2e(0x27d)](){const _0x4619e3=_0x3e4a2e;return typeof OffscreenCanvas===_0x4619e3(0x2a3);}static['isSafari'](){const _0x473d99=_0x3e4a2e;let _0x340cbf=navigator['userAgent'][_0x473d99(0x30a)]();return _0x340cbf[_0x473d99(0x2c3)]('safari')!==-0x1&&_0x340cbf[_0x473d99(0x2c3)]('chrome')===-0x1;}};let instance=null;class Logger{constructor(_0x1e0595={}){const _0x22f2b7=_0x3e4a2e;if(!instance)instance=this;else return instance;this[_0x22f2b7(0x205)]={'debug':![]},this[_0x22f2b7(0x258)](_0x1e0595);}static[_0x3e4a2e(0x31e)](_0x5b341f=null){const _0x252306=_0x3e4a2e;if(!instance)instance=new Logger(_0x5b341f||{});else{if(_0x5b341f!=null)instance[_0x252306(0x258)](_0x5b341f);return instance;}}[_0x3e4a2e(0x258)](_0xd37e2d={}){const _0x2ec31a=_0x3e4a2e;this['options']=deepMerge(this[_0x2ec31a(0x205)],_0xd37e2d);}[_0x3e4a2e(0x1e6)](){const _0x8c21ff=_0x3e4a2e;this[_0x8c21ff(0x205)][_0x8c21ff(0x25a)]&&console[_0x8c21ff(0x1e6)][_0x8c21ff(0x2b9)](null,arguments);}}const helper_logger=Logger;;class DCCamera{constructor(_0x213ae0,_0x23eec8={}){const _0x33681=_0x3e4a2e;this[_0x33681(0x352)]=null,this[_0x33681(0x25c)]=null,this[_0x33681(0x20e)]=null,this[_0x33681(0x2de)]=null,this[_0x33681(0x196)]=null,this[_0x33681(0x2af)]=null,this[_0x33681(0x2c1)]=null,this[_0x33681(0x284)]=null,this[_0x33681(0x186)]={'width':0x0,'height':0x0},this['sourceDim']={'k':0x1,'dx':0x0,'dy':0x0,'dw':0x0,'dh':0x0},this[_0x33681(0x2a1)]=[],this[_0x33681(0x327)]=[],this['frontCamera']=!![],this[_0x33681(0x268)]=0x1,this[_0x33681(0x205)]={'src':null,'sourceType':null,'width':0x280,'height':0x1e0,'resWidth':0x500,'resHeight':0x2d0,'fill':![],'fillOnMobile':!![],'cutEdge':![],'onLoaded':null,'onError':null,'onStop':null,'onStart':null,'onFrameUpdated':null},this[_0x33681(0x205)]=deepMerge(this[_0x33681(0x205)],_0x23eec8),this['defineContainer'](_0x213ae0),this[_0x33681(0x362)]();}[_0x3e4a2e(0x2d5)](_0x512148){const _0x24e481=_0x3e4a2e;this['dpr']=window[_0x24e481(0x33f)]||0x1;if(typeof _0x512148==_0x24e481(0x22e)){let _0x23110f=document[_0x24e481(0x21d)](_0x512148);if(_0x23110f&&_0x23110f[_0x24e481(0x199)]){if(_0x23110f[_0x24e481(0x199)]===_0x24e481(0x233))this['dom']=_0x23110f,this[_0x24e481(0x352)][_0x24e481(0x351)]='',this[_0x24e481(0x25c)]=document[_0x24e481(0x1bf)](_0x24e481(0x365)),this[_0x24e481(0x25c)][_0x24e481(0x2d2)]=this[_0x24e481(0x205)][_0x24e481(0x2d2)],this[_0x24e481(0x25c)][_0x24e481(0x250)]=this[_0x24e481(0x205)][_0x24e481(0x250)],this[_0x24e481(0x352)]['appendChild'](this[_0x24e481(0x25c)]);else _0x23110f[_0x24e481(0x199)]===_0x24e481(0x365)&&(this[_0x24e481(0x25c)]=_0x23110f,this['dom']=document[_0x24e481(0x1bf)]('DIV'),this[_0x24e481(0x25c)][_0x24e481(0x25d)]['insertBefore'](this[_0x24e481(0x352)],this[_0x24e481(0x25c)]),this['dom'][_0x24e481(0x28c)](this[_0x24e481(0x25c)]));this['dom']&&(this[_0x24e481(0x352)][_0x24e481(0x31a)][_0x24e481(0x2b1)]('df-container'),this[_0x24e481(0x352)]['style']['width']=this[_0x24e481(0x205)][_0x24e481(0x2d2)]+'px',this[_0x24e481(0x352)]['style'][_0x24e481(0x250)]=this['options'][_0x24e481(0x250)]+'px');}this['canvas']&&(this[_0x24e481(0x25c)]['classList'][_0x24e481(0x2b1)](_0x24e481(0x183)),this[_0x24e481(0x25c)][_0x24e481(0x1c1)][_0x24e481(0x187)]='gray');}this[_0x24e481(0x20e)]=document[_0x24e481(0x1bf)](_0x24e481(0x365)),this[_0x24e481(0x20e)][_0x24e481(0x2d2)]=this[_0x24e481(0x205)][_0x24e481(0x2d2)],this[_0x24e481(0x20e)][_0x24e481(0x250)]=this['options']['height'],this['__canvas_original']=document[_0x24e481(0x1bf)](_0x24e481(0x365)),this[_0x24e481(0x2de)][_0x24e481(0x2d2)]=this[_0x24e481(0x205)][_0x24e481(0x2d2)],this[_0x24e481(0x2de)]['height']=this['options'][_0x24e481(0x250)];}[_0x3e4a2e(0x362)](){const _0xe2229a=_0x3e4a2e;this['visual']=new CameraVisualLayer(this[_0xe2229a(0x25c)]);}[_0x3e4a2e(0x22c)](){const _0xbc3c99=_0x3e4a2e;(this[_0xbc3c99(0x196)]==null||!this[_0xbc3c99(0x23d)]())&&this[_0xbc3c99(0x359)]();}['stop'](){const _0x246a62=_0x3e4a2e;this[_0x246a62(0x2af)]&&this[_0x246a62(0x2af)][_0x246a62(0x1f8)]()[_0x246a62(0x1c0)]>0x0&&(this[_0x246a62(0x2af)][_0x246a62(0x1f8)]()[0x0][_0x246a62(0x287)](),this[_0x246a62(0x2af)]=null);}[_0x3e4a2e(0x359)](){const _0x33f60c=_0x3e4a2e;OSPlus[_0x33f60c(0x324)]()&&this[_0x33f60c(0x205)]['fillOnMobile']===!![]&&(this[_0x33f60c(0x205)][_0x33f60c(0x283)]=!![]);this[_0x33f60c(0x205)]['src']==null?this['stream']==null?navigator[_0x33f60c(0x1c6)]&&navigator['mediaDevices'][_0x33f60c(0x2d4)]&&(this['video']===null&&(this[_0x33f60c(0x196)]=document[_0x33f60c(0x1bf)](_0x33f60c(0x196)),this['video'][_0x33f60c(0x2e4)](_0x33f60c(0x271),''),this[_0x33f60c(0x196)][_0x33f60c(0x2e4)](_0x33f60c(0x197),''),this[_0x33f60c(0x196)]['setAttribute'](_0x33f60c(0x259),''),this[_0x33f60c(0x196)]['style'][_0x33f60c(0x2d2)]=_0x33f60c(0x1f4),this[_0x33f60c(0x196)][_0x33f60c(0x1c1)]['height']='30px',this[_0x33f60c(0x196)][_0x33f60c(0x1c1)][_0x33f60c(0x32c)]=_0x33f60c(0x1d2),this['dom']['appendChild'](this[_0x33f60c(0x196)]),this[_0x33f60c(0x196)]['style'][_0x33f60c(0x2fa)]='0.5'),this[_0x33f60c(0x284)]=null,navigator[_0x33f60c(0x1c6)][_0x33f60c(0x35a)]()[_0x33f60c(0x190)](_0x5a3f67=>{const _0x3e78e7=_0x33f60c;helper_logger['getInstance']()[_0x3e78e7(0x1e6)](_0x3e78e7(0x1ad),_0x5a3f67),this[_0x3e78e7(0x327)]=_0x5a3f67;}),navigator[_0x33f60c(0x1c6)][_0x33f60c(0x2d4)]({'audio':![],'video':{'facingMode':_0x33f60c(0x177),'width':{'ideal':this[_0x33f60c(0x205)][_0x33f60c(0x281)]},'height':{'ideal':this[_0x33f60c(0x205)][_0x33f60c(0x1c3)]}}})[_0x33f60c(0x190)](_0x148633=>{const _0x29d231=_0x33f60c;this[_0x29d231(0x2af)]=_0x148633,this[_0x29d231(0x196)][_0x29d231(0x333)]=_0x148633;let _0x4b72fe=_0x148633[_0x29d231(0x298)]()[0x0];_0x4b72fe[_0x29d231(0x2a7)]({'focusMode':'auto','focusDistance':0.33}),this[_0x29d231(0x1a7)]()&&(helper_logger['getInstance']()[_0x29d231(0x1e6)](_0x29d231(0x330)),this[_0x29d231(0x1c8)]=![]),_0x4daab3(),this[_0x29d231(0x196)][_0x29d231(0x18e)]();})[_0x33f60c(0x2c0)](_0x56f14d=>{const _0x23f78e=_0x33f60c;helper_logger['getInstance']()[_0x23f78e(0x1e6)](_0x23f78e(0x184),_0x56f14d),this[_0x23f78e(0x34d)](_0x56f14d);})):this[_0x33f60c(0x196)][_0x33f60c(0x18e)]():(this[_0x33f60c(0x196)][_0x33f60c(0x17c)]=this[_0x33f60c(0x205)][_0x33f60c(0x17c)],this[_0x33f60c(0x196)][_0x33f60c(0x18e)]());let _0x4daab3=()=>{const _0x2b56aa=_0x33f60c;this[_0x2b56aa(0x196)][_0x2b56aa(0x293)]=()=>{const _0x131b01=_0x2b56aa;this[_0x131b01(0x23b)]();},this[_0x2b56aa(0x196)][_0x2b56aa(0x2aa)]=()=>{const _0x2271a3=_0x2b56aa;this[_0x2271a3(0x20e)]['width']=this['video']['videoWidth'],this[_0x2271a3(0x20e)][_0x2271a3(0x250)]=this[_0x2271a3(0x196)][_0x2271a3(0x1e3)],this[_0x2271a3(0x2de)][_0x2271a3(0x2d2)]=this[_0x2271a3(0x196)][_0x2271a3(0x311)],this['__canvas_original'][_0x2271a3(0x250)]=this[_0x2271a3(0x196)][_0x2271a3(0x1e3)];let _0x2f7220=this[_0x2271a3(0x196)][_0x2271a3(0x311)],_0xa7edf0=this[_0x2271a3(0x196)][_0x2271a3(0x1e3)],_0x3eee02=0x1;this[_0x2271a3(0x361)]['dw']=this[_0x2271a3(0x25c)]['width'],this[_0x2271a3(0x361)]['dh']=this[_0x2271a3(0x25c)]['height'];this[_0x2271a3(0x205)]['fill']?this[_0x2271a3(0x25c)][_0x2271a3(0x250)]/_0xa7edf0<this[_0x2271a3(0x25c)][_0x2271a3(0x2d2)]/_0x2f7220?(_0x3eee02=this[_0x2271a3(0x25c)][_0x2271a3(0x2d2)]/_0x2f7220,this[_0x2271a3(0x361)]['dh']=Math['round'](_0x3eee02*_0xa7edf0),this['sourceDim']['dy']=0x0,this['options'][_0x2271a3(0x303)]&&(this[_0x2271a3(0x2de)]['height']=this['canvas'][_0x2271a3(0x250)]/_0x3eee02,this[_0x2271a3(0x20e)][_0x2271a3(0x250)]=this[_0x2271a3(0x25c)]['height']/_0x3eee02)):(_0x3eee02=this['canvas'][_0x2271a3(0x250)]/_0xa7edf0,this[_0x2271a3(0x361)]['dw']=Math[_0x2271a3(0x227)](_0x3eee02*_0x2f7220),this[_0x2271a3(0x361)]['dx']=0x0,this[_0x2271a3(0x205)][_0x2271a3(0x303)]&&(this[_0x2271a3(0x2de)]['width']=this[_0x2271a3(0x25c)]['width']/_0x3eee02,this['__canvas'][_0x2271a3(0x2d2)]=this[_0x2271a3(0x25c)][_0x2271a3(0x2d2)]/_0x3eee02)):this[_0x2271a3(0x25c)][_0x2271a3(0x250)]/_0xa7edf0<this['canvas'][_0x2271a3(0x2d2)]/_0x2f7220?(_0x3eee02=this[_0x2271a3(0x25c)][_0x2271a3(0x250)]/_0xa7edf0,this[_0x2271a3(0x361)]['dw']=Math['round'](_0x3eee02*_0x2f7220),this[_0x2271a3(0x361)]['dx']=(this['canvas'][_0x2271a3(0x2d2)]-this[_0x2271a3(0x361)]['dw'])/0x2):(_0x3eee02=this['canvas'][_0x2271a3(0x2d2)]/_0x2f7220,this[_0x2271a3(0x361)]['dh']=Math['round'](_0x3eee02*_0xa7edf0),this[_0x2271a3(0x361)]['dy']=(this[_0x2271a3(0x25c)][_0x2271a3(0x250)]-this[_0x2271a3(0x361)]['dh'])/0x2);this[_0x2271a3(0x361)]['k']=_0x3eee02;if(this[_0x2271a3(0x284)]!=null)cancelAnimationFrame(this[_0x2271a3(0x284)]);this['raf']=requestAnimationFrame(this[_0x2271a3(0x21e)]['bind'](this)),this[_0x2271a3(0x186)]={'width':this[_0x2271a3(0x196)][_0x2271a3(0x311)],'height':this[_0x2271a3(0x196)][_0x2271a3(0x1e3)]},this[_0x2271a3(0x2ca)]();},this[_0x2b56aa(0x196)][_0x2b56aa(0x1d9)]=()=>{const _0x1eac30=_0x2b56aa;cancelAnimationFrame(this['raf']),this[_0x1eac30(0x1a6)]();};};}async[_0x3e4a2e(0x21e)](){const _0x51e470=_0x3e4a2e;let _0x5de5d2=this['frontCamera']?-0x1:0x1,_0x2e264a=this[_0x51e470(0x361)],_0x15288d=this[_0x51e470(0x196)][_0x51e470(0x311)],_0x519cf2=this[_0x51e470(0x196)]['videoHeight'],_0x5d7bdc=this['__canvas_original']['getContext']('2d');_0x5d7bdc[_0x51e470(0x21b)](),_0x5d7bdc[_0x51e470(0x21c)](0x1,0x1);this[_0x51e470(0x205)][_0x51e470(0x283)]&&this[_0x51e470(0x205)][_0x51e470(0x303)]?_0x5d7bdc[_0x51e470(0x317)](this['video'],(this[_0x51e470(0x2de)][_0x51e470(0x2d2)]-_0x15288d)/0x2,(this[_0x51e470(0x2de)][_0x51e470(0x250)]-_0x519cf2)/0x2,_0x15288d,_0x519cf2):_0x5d7bdc[_0x51e470(0x317)](this[_0x51e470(0x196)],0x0,0x0,this['__canvas_original'][_0x51e470(0x2d2)],this['__canvas_original'][_0x51e470(0x250)]);_0x5d7bdc[_0x51e470(0x1b6)]();let _0x4c5e4c=this['__canvas'][_0x51e470(0x339)]('2d');_0x4c5e4c[_0x51e470(0x21b)](),_0x4c5e4c[_0x51e470(0x21c)](_0x5de5d2,0x1);this[_0x51e470(0x205)][_0x51e470(0x283)]&&this['options']['cutEdge']?_0x4c5e4c[_0x51e470(0x317)](this[_0x51e470(0x196)],_0x5de5d2*(this[_0x51e470(0x20e)][_0x51e470(0x2d2)]-_0x15288d)/0x2+(_0x5de5d2===-0x1?_0x5de5d2*_0x15288d:0x0),(this['__canvas'][_0x51e470(0x250)]-_0x519cf2)/0x2,_0x15288d,_0x519cf2):_0x4c5e4c[_0x51e470(0x317)](this[_0x51e470(0x196)],_0x5de5d2===-0x1?_0x5de5d2*_0x15288d:0x0,0x0,this[_0x51e470(0x20e)][_0x51e470(0x2d2)],this[_0x51e470(0x20e)]['height']);_0x4c5e4c[_0x51e470(0x1b6)]();let _0x1536ee=this['canvas'][_0x51e470(0x339)]('2d'),_0x348d9a=(this['canvas'][_0x51e470(0x2d2)]-this[_0x51e470(0x361)]['dw'])/0x2,_0x4508f6=(this[_0x51e470(0x25c)][_0x51e470(0x250)]-this[_0x51e470(0x361)]['dh'])/0x2;_0x1536ee[_0x51e470(0x225)](0x0,0x0,this[_0x51e470(0x25c)][_0x51e470(0x2d2)],this[_0x51e470(0x25c)][_0x51e470(0x250)]),_0x1536ee[_0x51e470(0x21b)](),_0x1536ee[_0x51e470(0x21c)](_0x5de5d2*0x1,0x1),_0x1536ee[_0x51e470(0x317)](this[_0x51e470(0x196)],_0x5de5d2*_0x348d9a+(_0x5de5d2===-0x1?_0x5de5d2*_0x2e264a['dw']:0x0),_0x4508f6,_0x2e264a['dw'],_0x2e264a['dh']),_0x1536ee[_0x51e470(0x1b6)]();if(this[_0x51e470(0x2af)]==null)return;this[_0x51e470(0x264)](),this[_0x51e470(0x284)]=requestAnimationFrame(this[_0x51e470(0x21e)][_0x51e470(0x32a)](this));}[_0x3e4a2e(0x1a7)](){const _0x52bc4c=_0x3e4a2e;let _0x45785c=[];for(let _0x11fc38 in this[_0x52bc4c(0x327)]){this['devices'][_0x11fc38][_0x52bc4c(0x302)]===_0x52bc4c(0x173)&&_0x45785c[_0x52bc4c(0x360)](this[_0x52bc4c(0x327)][_0x11fc38]);}let _0x1669ce=this['stream']?this['stream'][_0x52bc4c(0x298)]()[0x0]['getSettings']()[_0x52bc4c(0x33d)]||null:null;helper_logger[_0x52bc4c(0x31e)]()['log'](_0x52bc4c(0x327),this[_0x52bc4c(0x327)]),helper_logger[_0x52bc4c(0x31e)]()[_0x52bc4c(0x1e6)](_0x52bc4c(0x33d),_0x1669ce);if(_0x1669ce===_0x52bc4c(0x177))return!![];return![];}[_0x3e4a2e(0x23d)](){const _0x3a560c=_0x3e4a2e;return this[_0x3a560c(0x2af)]&&this['video']&&!this['video'][_0x3a560c(0x231)];}[_0x3e4a2e(0x1c7)](){const _0x17b829=_0x3e4a2e;let _0x1e4824=this[_0x17b829(0x20e)][_0x17b829(0x339)]('2d');return _0x1e4824[_0x17b829(0x1c7)](0x0,0x0,this[_0x17b829(0x20e)][_0x17b829(0x2d2)],this['__canvas'][_0x17b829(0x250)]);}[_0x3e4a2e(0x1be)](){const _0x2188d4=_0x3e4a2e;return this[_0x2188d4(0x20e)]['toDataURL']();}[_0x3e4a2e(0x29a)](){return this['snapshotlist'];}[_0x3e4a2e(0x191)](){const _0x5dd32d=_0x3e4a2e;this['snapshotlist']['push'](this[_0x5dd32d(0x1be)]());}[_0x3e4a2e(0x235)](){this['snapshotlist']=[];}[_0x3e4a2e(0x34d)](_0x51bcd4){const _0x39870e=_0x3e4a2e;typeof this[_0x39870e(0x205)][_0x39870e(0x34d)]===_0x39870e(0x2a3)&&this[_0x39870e(0x205)][_0x39870e(0x34d)](_0x51bcd4);}[_0x3e4a2e(0x23b)](){const _0x478da1=_0x3e4a2e;typeof this[_0x478da1(0x205)][_0x478da1(0x341)]==='function'&&this[_0x478da1(0x205)][_0x478da1(0x341)](this[_0x478da1(0x196)],this[_0x478da1(0x361)]);}['onStop'](){const _0x2b9a59=_0x3e4a2e;typeof this[_0x2b9a59(0x205)][_0x2b9a59(0x1a6)]===_0x2b9a59(0x2a3)&&this[_0x2b9a59(0x205)][_0x2b9a59(0x1a6)]();}[_0x3e4a2e(0x2ca)](){const _0x512162=_0x3e4a2e;typeof this[_0x512162(0x205)][_0x512162(0x2ca)]==='function'&&this[_0x512162(0x205)][_0x512162(0x2ca)]();}['onFrameUpdated'](){const _0x567ac4=_0x3e4a2e;typeof this[_0x567ac4(0x205)][_0x567ac4(0x264)]===_0x567ac4(0x2a3)&&this[_0x567ac4(0x205)][_0x567ac4(0x264)]();}}const camera=DCCamera;;class CoordConverter{constructor(_0x1927fa={'k':0x1,'dx':0x0,'dy':0x0,'dw':0x0,'dh':0x0}){const _0x1b03fe=_0x3e4a2e;this[_0x1b03fe(0x201)]=_0x1927fa;}['setDim'](_0x293355){const _0x49b28f=_0x3e4a2e;this[_0x49b28f(0x201)]=_0x293355;}['getCoord'](_0x5e3b1a,_0x4d211f){const _0x519096=_0x3e4a2e;return{'x':_0x5e3b1a*this[_0x519096(0x201)]['k']+this['dim']['dx'],'y':_0x4d211f*this['dim']['k']+this[_0x519096(0x201)]['dy']};}[_0x3e4a2e(0x27f)](_0x14d0cc){const _0x1cd069=_0x3e4a2e;return _0x14d0cc*this[_0x1cd069(0x201)]['k']+this[_0x1cd069(0x201)]['dx'];}[_0x3e4a2e(0x255)](_0x2d4d95){const _0x3757b7=_0x3e4a2e;return _0x2d4d95*this[_0x3757b7(0x201)]['k']+this['dim']['dy'];}[_0x3e4a2e(0x252)](_0x29498c){const _0x466bd1=_0x3e4a2e;return _0x29498c*this[_0x466bd1(0x201)]['k'];}['toRealCoordX'](_0x12da1a){const _0x34acc5=_0x3e4a2e;return _0x12da1a/this['dim']['k']-this[_0x34acc5(0x201)]['dx'];}['toRealCoordY'](_0x3142dc){const _0x9320e1=_0x3e4a2e;return _0x3142dc/this[_0x9320e1(0x201)]['k']-this[_0x9320e1(0x201)]['dy'];}};class MaskLayer{constructor(_0x4d328c,_0x5ee1d9={'width':0x0,'height':0x0},_0x4448cc={'width':0x0,'height':0x0}){const _0x59cc80=_0x3e4a2e;this[_0x59cc80(0x352)]=_0x4d328c,this[_0x59cc80(0x25c)]=null,this['ctx']=null,this[_0x59cc80(0x2f5)]=null,this[_0x59cc80(0x296)]=null,this[_0x59cc80(0x2f7)]=_0x5ee1d9,this[_0x59cc80(0x206)]=_0x4448cc,this[_0x59cc80(0x181)]=![],this['sizeKoef']={'h':0.4,'v':0.6},(this[_0x59cc80(0x206)]['width']===0x0||this['maskSize']['height']===0x0)&&(this[_0x59cc80(0x206)]={'width':this[_0x59cc80(0x2f7)]['width']*this['sizeKoef']['h'],'height':this[_0x59cc80(0x2f7)][_0x59cc80(0x2d2)]*this[_0x59cc80(0x16e)]['v']}),this[_0x59cc80(0x362)]();}['setup'](){const _0x419592=_0x3e4a2e;this[_0x419592(0x352)]!=null&&(this[_0x419592(0x25c)]=document[_0x419592(0x1bf)]('CANVAS'),this[_0x419592(0x25c)]['id']='maskLayer',this[_0x419592(0x25c)][_0x419592(0x2d2)]=this[_0x419592(0x2f7)]['width'],this[_0x419592(0x25c)][_0x419592(0x250)]=this[_0x419592(0x2f7)][_0x419592(0x250)],this[_0x419592(0x352)][_0x419592(0x28c)](this[_0x419592(0x25c)]),this[_0x419592(0x28e)]=this[_0x419592(0x25c)][_0x419592(0x339)]('2d'));}[_0x3e4a2e(0x174)](){const _0x4b9892=_0x3e4a2e;if(!this['commandText']){this[_0x4b9892(0x2f5)]=document['createElement'](_0x4b9892(0x2e1)),this['commandText']['id']=_0x4b9892(0x1a2);let _0x2f1f44=document[_0x4b9892(0x1bf)]('P');_0x2f1f44['textContent']='',this[_0x4b9892(0x2f5)]['appendChild'](_0x2f1f44),this[_0x4b9892(0x352)]['appendChild'](this['commandText']);let _0x40e03e=((this[_0x4b9892(0x25c)][_0x4b9892(0x250)]-this[_0x4b9892(0x206)][_0x4b9892(0x250)])/0x2-this[_0x4b9892(0x2f5)]['offsetHeight'])/0x2;this[_0x4b9892(0x2f5)][_0x4b9892(0x1c1)][_0x4b9892(0x2bc)]=_0x40e03e+'px';}else this[_0x4b9892(0x2f5)][_0x4b9892(0x1c1)][_0x4b9892(0x1ab)]=_0x4b9892(0x16c);if(!this[_0x4b9892(0x296)]){this['actionText']=document['createElement'](_0x4b9892(0x2e1)),this[_0x4b9892(0x296)]['id']=_0x4b9892(0x2df);let _0x4b4194=document[_0x4b9892(0x1bf)]('P');_0x4b4194[_0x4b9892(0x17f)]='',this['actionText']['appendChild'](_0x4b4194),this[_0x4b9892(0x352)]['appendChild'](this['actionText']);let _0x2aa015=((this[_0x4b9892(0x25c)][_0x4b9892(0x250)]-this[_0x4b9892(0x206)][_0x4b9892(0x250)])/0x2-this[_0x4b9892(0x2f5)][_0x4b9892(0x2bd)])/0x2;this[_0x4b9892(0x296)][_0x4b9892(0x1c1)][_0x4b9892(0x35e)]=_0x2aa015+'px';}else this[_0x4b9892(0x296)][_0x4b9892(0x1c1)][_0x4b9892(0x1ab)]='block';}[_0x3e4a2e(0x2a9)](){const _0x4c60de=_0x3e4a2e;if(this[_0x4c60de(0x2f5)])this[_0x4c60de(0x2f5)][_0x4c60de(0x1c1)][_0x4c60de(0x1ab)]='';if(this['actionText'])this['actionText'][_0x4c60de(0x1c1)][_0x4c60de(0x1ab)]='';}['hideTextArea'](){const _0x54c1f5=_0x3e4a2e;if(this['commandText'])this['commandText'][_0x54c1f5(0x1c1)][_0x54c1f5(0x1ab)]=_0x54c1f5(0x204);if(this[_0x54c1f5(0x296)])this[_0x54c1f5(0x296)]['style'][_0x54c1f5(0x1ab)]=_0x54c1f5(0x204);}[_0x3e4a2e(0x299)](_0xb607c9){const _0x523a0b=_0x3e4a2e;if(this[_0x523a0b(0x296)])this['actionText'][_0x523a0b(0x1d8)]=_0xb607c9;}[_0x3e4a2e(0x347)](_0x1bb28b){const _0x110727=_0x3e4a2e;if(this['commandText'])this[_0x110727(0x2f5)][_0x110727(0x1d8)]=_0x1bb28b;}[_0x3e4a2e(0x342)](){const _0x3b4440=_0x3e4a2e;return{'x':this[_0x3b4440(0x25c)][_0x3b4440(0x2d2)]/0x2-this[_0x3b4440(0x206)][_0x3b4440(0x2d2)]/0x2-0x14,'y':this[_0x3b4440(0x25c)][_0x3b4440(0x250)]/0x2-this[_0x3b4440(0x206)]['width']/0x2-0x14,'width':this['maskSize'][_0x3b4440(0x2d2)],'height':this[_0x3b4440(0x206)]['height']};}[_0x3e4a2e(0x2db)](){const _0x2bc380=_0x3e4a2e;if(!this[_0x2bc380(0x181)]){console[_0x2bc380(0x1e6)](_0x2bc380(0x2eb)),this[_0x2bc380(0x28e)]['save'](),this[_0x2bc380(0x28e)][_0x2bc380(0x32d)](),this[_0x2bc380(0x28e)][_0x2bc380(0x1c4)](this['canvas']['width']/0x2,this[_0x2bc380(0x25c)][_0x2bc380(0x250)]/0x2,this[_0x2bc380(0x206)][_0x2bc380(0x2d2)]/0x2,this['maskSize'][_0x2bc380(0x250)]/0x2,Math['PI'],0x0,0x2*Math['PI']),this['ctx'][_0x2bc380(0x1f5)]=_0x2bc380(0x32f),this[_0x2bc380(0x28e)]['fill'](),this['ctx'][_0x2bc380(0x2c9)]='xor',this[_0x2bc380(0x28e)][_0x2bc380(0x32d)](),this[_0x2bc380(0x28e)][_0x2bc380(0x294)](0x0,0x0,this[_0x2bc380(0x25c)][_0x2bc380(0x2d2)],this[_0x2bc380(0x25c)][_0x2bc380(0x250)]),this['ctx']['fillStyle']=_0x2bc380(0x1a9),this[_0x2bc380(0x28e)][_0x2bc380(0x226)](),this[_0x2bc380(0x28e)]['fill'](),this[_0x2bc380(0x28e)][_0x2bc380(0x2ba)]=0.5;let _0x2b56fa=this[_0x2bc380(0x25c)][_0x2bc380(0x261)]();this[_0x2bc380(0x28e)][_0x2bc380(0x2c9)]=_0x2bc380(0x24a);let _0x326547=new Image();_0x326547[_0x2bc380(0x349)]=()=>{const _0x2545ed=_0x2bc380;this['ctx']['clearRect'](0x0,0x0,this['canvas']['width'],this[_0x2545ed(0x25c)][_0x2545ed(0x250)]),this[_0x2545ed(0x28e)]['drawImage'](_0x326547,0x0,0x0);},_0x326547['src']=_0x2b56fa,this[_0x2bc380(0x181)]=!![],this['createTextArea']();}}[_0x3e4a2e(0x1fa)](){const _0x4b5018=_0x3e4a2e;!this['maskInited']?(this[_0x4b5018(0x2db)](),this[_0x4b5018(0x25c)][_0x4b5018(0x1c1)]['display']=_0x4b5018(0x16c)):(this['showTextArea'](),this[_0x4b5018(0x25c)][_0x4b5018(0x1c1)]['display']=_0x4b5018(0x16c));}[_0x3e4a2e(0x2d7)](){const _0x52a9c5=_0x3e4a2e;this[_0x52a9c5(0x208)](),this[_0x52a9c5(0x25c)]['style'][_0x52a9c5(0x1ab)]='none';}[_0x3e4a2e(0x321)](){const _0x22de4b=_0x3e4a2e;this[_0x22de4b(0x28e)]['clearRect'](0x0,0x0,this[_0x22de4b(0x25c)][_0x22de4b(0x2d2)],this['canvas'][_0x22de4b(0x250)]),this[_0x22de4b(0x28e)][_0x22de4b(0x1b6)]();}};class VisualLayer{constructor(_0x5e67e1,_0x28cf1f={}){const _0x447947=_0x3e4a2e;this[_0x447947(0x25c)]=_0x5e67e1,this['options']={'srcDim':{'k':0x1,'dx':0x0,'dy':0x0,'dw':0x0,'dh':0x0}},this[_0x447947(0x205)]=deepMerge(this[_0x447947(0x205)],_0x28cf1f),this['cc']=new CoordConverter(this['options']['srcDim']);}[_0x3e4a2e(0x2dd)](_0x328862,_0x45177a,_0x6a9d58){const _0x4b8f71=_0x3e4a2e,_0x25ab29=new Path2D();_0x25ab29[_0x4b8f71(0x237)](_0x45177a[0x0][0x0],_0x45177a[0x0][0x1]);for(let _0x2bc76a=0x1;_0x2bc76a<_0x45177a[_0x4b8f71(0x1c0)];_0x2bc76a++){const _0x53ec1e=_0x45177a[_0x2bc76a];_0x25ab29['lineTo'](_0x53ec1e[0x0],_0x53ec1e[0x1]);}_0x6a9d58&&_0x25ab29[_0x4b8f71(0x226)](),_0x328862[_0x4b8f71(0x34b)](_0x25ab29);}[_0x3e4a2e(0x325)](_0x1f481e){const _0x2fdf3d=_0x3e4a2e;let _0x2451d0=this[_0x2fdf3d(0x205)]['srcDim']['k'],_0x1fe20e=null,_0x17a5a1=null,_0x4f0ae0={'x':0x0,'y':0x0,'w':0x0,'h':0x0},_0x28eeb7=this['canvas'][_0x2fdf3d(0x339)]('2d');_0x28eeb7[_0x2fdf3d(0x21b)]();for(let _0x3c4f2c=0x0;_0x3c4f2c<_0x1f481e['length'];_0x3c4f2c++){_0x17a5a1=_0x1f481e[_0x3c4f2c][_0x2fdf3d(0x266)];for(let _0x23befe=0x0;_0x23befe<_0x17a5a1['length'];_0x23befe++){const _0x1c7217=_0x17a5a1[_0x23befe][0x0],_0x411312=_0x17a5a1[_0x23befe][0x1];_0x28eeb7[_0x2fdf3d(0x32d)](),_0x28eeb7['arc'](this['cc']['getCoordX'](_0x1c7217),this['cc']['getCoordY'](_0x411312),0x1,0x0,0x2*Math['PI']),_0x28eeb7[_0x2fdf3d(0x283)](),_0x28eeb7[_0x2fdf3d(0x226)]();}}_0x28eeb7[_0x2fdf3d(0x1b6)]();}};class PipeStream{constructor(_0x5e3e92){const _0x19fdd6=_0x3e4a2e;this[_0x19fdd6(0x214)]=_0x5e3e92,this[_0x19fdd6(0x22f)]={};}['on'](_0x2ba9d3,_0x56d054){const _0xbd672f=_0x3e4a2e;if(this['observers'][_0x2ba9d3]===undefined)this['observers'][_0x2ba9d3]=[];if(typeof _0x56d054=='function')this[_0xbd672f(0x22f)][_0x2ba9d3][_0xbd672f(0x360)](_0x56d054);}['remove'](_0x5040f6,_0x4a506c){const _0x22bef5=_0x3e4a2e;for(const _0x12bd34 in this[_0x22bef5(0x22f)]){this[_0x22bef5(0x22f)][_0x12bd34]=this[_0x22bef5(0x22f)][_0x12bd34][_0x22bef5(0x26f)](_0x546353=>_0x546353!==_0x4a506c);}}[_0x3e4a2e(0x20d)](_0x28e8a0,_0x69b50f){const _0x4369b2=_0x3e4a2e;this[_0x4369b2(0x22f)][_0x28e8a0]&&this[_0x4369b2(0x22f)][_0x28e8a0][_0x4369b2(0x282)](_0x35131e=>{if(typeof _0x35131e=='function')_0x35131e(_0x69b50f);});}[_0x3e4a2e(0x30d)](_0x3300af){const _0x194a3f=_0x3e4a2e;this[_0x194a3f(0x22f)][_0x194a3f(0x282)](_0x5a4d48=>{const _0x131700=_0x194a3f;_0x5a4d48[_0x131700(0x282)](_0xc6a709=>{typeof _0xc6a709=='function'&&_0xc6a709(_0x3300af);});});}};class Pipe{constructor(){const _0x433217=_0x3e4a2e;this[_0x433217(0x234)]={};}['open'](_0x56a133){const _0x3d5a07=_0x3e4a2e;return!this[_0x3d5a07(0x234)][_0x56a133]&&(this[_0x3d5a07(0x234)][_0x56a133]=new PipeStream(_0x56a133)),this[_0x3d5a07(0x234)][_0x56a133];}}const pipe=new Pipe(),stream=pipe;;class ImageProcessing{constructor(){}static[_0x3e4a2e(0x355)](_0xed1a35,_0x48b5c6,_0xeffc31,_0x321802,_0x5daae6){const _0x58ad66=_0x3e4a2e;let _0x576e41=document[_0x58ad66(0x1bf)](_0x58ad66(0x365));_0x576e41[_0x58ad66(0x2d2)]=_0x321802,_0x576e41['height']=_0x5daae6;let _0x1b33b1=_0x576e41['getContext']('2d');return _0x1b33b1[_0x58ad66(0x317)](_0xed1a35,_0x48b5c6,_0xeffc31,_0x321802,_0x5daae6,0x0,0x0,_0x321802,_0x5daae6),_0x576e41;}static[_0x3e4a2e(0x35d)](_0x5a2f31,_0x2a382e={'w':null,'h':null}){const _0x2d1338=_0x3e4a2e;let _0xcdfbe2=document[_0x2d1338(0x1bf)](_0x2d1338(0x365));if(_0x2a382e['w']==null&&_0x2a382e['h']==null)_0xcdfbe2['width']=_0x5a2f31['width'],_0xcdfbe2[_0x2d1338(0x250)]=_0x5a2f31[_0x2d1338(0x250)];else{if(_0x2a382e['w']==null)_0xcdfbe2[_0x2d1338(0x250)]=_0x2a382e['h'],_0xcdfbe2['width']=_0x2a382e['h']/_0x5a2f31[_0x2d1338(0x250)]*_0x5a2f31[_0x2d1338(0x2d2)];else _0x2a382e['h']==null?(_0xcdfbe2['width']=_0x2a382e['w'],_0xcdfbe2[_0x2d1338(0x250)]=_0x2a382e['w']/_0x5a2f31['width']*_0x5a2f31[_0x2d1338(0x250)]):(_0xcdfbe2[_0x2d1338(0x2d2)]=_0x2a382e['w'],_0xcdfbe2[_0x2d1338(0x250)]=_0x2a382e['h']);}let _0x560486=_0xcdfbe2['getContext']('2d');return _0x560486[_0x2d1338(0x317)](_0x5a2f31,0x0,0x0,_0xcdfbe2[_0x2d1338(0x2d2)],_0xcdfbe2[_0x2d1338(0x250)]),_0xcdfbe2;}static['cropAndResizeCanvas'](_0x10d847,_0x27925b,_0x33efa8,_0xb8d60e,_0x20489e,_0x589eb7,_0x3780d6){const _0x2ebfaa=_0x3e4a2e;let _0x270168=document['createElement']('CANVAS');_0x270168['width']=_0x589eb7,_0x270168[_0x2ebfaa(0x250)]=_0x3780d6;let _0x2784fc=_0x270168['getContext']('2d');return _0x2784fc['drawImage'](_0x10d847,_0x27925b,_0x33efa8,_0xb8d60e,_0x20489e,0x0,0x0,_0x589eb7,_0x3780d6),_0x270168;}static[_0x3e4a2e(0x267)](_0x312226){const _0x3ebc36=_0x3e4a2e;let _0x3980d0=document[_0x3ebc36(0x1bf)](_0x3ebc36(0x365));_0x3980d0[_0x3ebc36(0x2d2)]=_0x312226[_0x3ebc36(0x2d2)],_0x3980d0[_0x3ebc36(0x250)]=_0x312226[_0x3ebc36(0x250)];let _0x317061=_0x3980d0[_0x3ebc36(0x339)]('2d');return _0x317061[_0x3ebc36(0x219)](_0x312226,0x0,0x0),_0x3980d0;}static[_0x3e4a2e(0x1bb)](_0x4f02fd){const _0x53b54b=_0x3e4a2e;let _0x440675=document[_0x53b54b(0x1bf)](_0x53b54b(0x365));_0x440675[_0x53b54b(0x2d2)]=_0x4f02fd[_0x53b54b(0x2d2)],_0x440675['height']=_0x4f02fd[_0x53b54b(0x250)];let _0x6e02cc=_0x440675[_0x53b54b(0x339)]('2d');return _0x6e02cc['drawImage'](_0x4f02fd,0x0,0x0),_0x440675;}static[_0x3e4a2e(0x34f)](_0xa511f0){const _0x10e580=_0x3e4a2e;let _0x1cf751=_0xa511f0[_0x10e580(0x339)]('2d'),_0x519e8d=_0x1cf751['getImageData'](0x0,0x0,_0xa511f0[_0x10e580(0x2d2)],_0xa511f0[_0x10e580(0x250)]);return _0x519e8d;}static['canvasToBase64'](_0x2c2fef,_0x53cdd1=_0x3e4a2e(0x26b),_0x13d631=0.92){return _0x2c2fef['toDataURL'](_0x53cdd1,_0x13d631);}static['canvas2IMG'](_0x16dab2,_0x14bcdf=_0x3e4a2e(0x26b),_0x31aad7=0.92){return new Promise(function(_0x2a69b2,_0x7269c){const _0x61bf9d=_0x1dea;let _0x157420=new Image();_0x157420[_0x61bf9d(0x2e4)](_0x61bf9d(0x304),_0x61bf9d(0x1b8)),_0x157420[_0x61bf9d(0x349)]=()=>{_0x2a69b2(_0x157420);},_0x157420[_0x61bf9d(0x363)]=_0x34e5a3=>{const _0x4a1d02=_0x61bf9d;_0x7269c(_0x4a1d02(0x2cf)+_0x34e5a3);},_0x157420['src']=ImageProcessing[_0x61bf9d(0x2a5)](_0x16dab2,_0x14bcdf,_0x31aad7);});}static[_0x3e4a2e(0x30e)](_0x501c55){const _0x5dc7f2=_0x3e4a2e;let _0x12caed=_0x501c55[_0x5dc7f2(0x339)]('2d'),_0x40d559=_0x12caed[_0x5dc7f2(0x1c7)](0x0,0x0,_0x501c55[_0x5dc7f2(0x2d2)],_0x501c55['height']),_0x362ed2=_0x40d559[_0x5dc7f2(0x1ce)],_0x16511a=_0x501c55[_0x5dc7f2(0x2d2)]*_0x501c55[_0x5dc7f2(0x250)]*0x4;for(let _0xa08bfb=_0x16511a-0x1;_0xa08bfb>0x0;_0xa08bfb-=0x4){let _0x16932d=0.3*_0x362ed2[_0xa08bfb-0x3]+0.59*_0x362ed2[_0xa08bfb-0x2]+0.11*_0x362ed2[_0xa08bfb-0x1];_0x362ed2[_0xa08bfb-0x3]=_0x16932d,_0x362ed2[_0xa08bfb-0x2]=_0x16932d,_0x362ed2[_0xa08bfb-0x1]=_0x16932d;}let _0x348c22=document[_0x5dc7f2(0x1bf)](_0x5dc7f2(0x365)),_0x643aa3=_0x348c22[_0x5dc7f2(0x339)]('2d');return _0x643aa3[_0x5dc7f2(0x219)](_0x40d559,0x0,0x0),_0x348c22;}static[_0x3e4a2e(0x31d)](_0x45bd2f,_0xe54594,_0x1fa9d8='black'){const _0x55b3a1=_0x3e4a2e;let _0x23c8e4=document['createElement']('CANVAS');_0x23c8e4[_0x55b3a1(0x2d2)]=_0x45bd2f,_0x23c8e4[_0x55b3a1(0x250)]=_0xe54594;let _0x2a94dc=_0x23c8e4['getContext']('2d');return _0x2a94dc[_0x55b3a1(0x1f5)]=_0x1fa9d8,_0x2a94dc[_0x55b3a1(0x17d)](0x0,0x0,_0x45bd2f,_0xe54594),_0x23c8e4;}static['getLaplacianVariance'](_0x4187e2,_0x3d14a8=0x1e){const _0x18f71b=_0x3e4a2e;let _0x56179f=_0x4187e2[_0x18f71b(0x339)]('2d'),_0xc2be17=_0x56179f[_0x18f71b(0x1c7)](0x0,0x0,_0x4187e2[_0x18f71b(0x2d2)],_0x4187e2[_0x18f71b(0x250)]),_0x1171d4=_0xc2be17[_0x18f71b(0x1ce)],_0x473582=[[0x0,0x1,0x0],[0x1,-0x4,0x1],[0x0,0x1,0x0]],_0x368935=_0x4187e2[_0x18f71b(0x2d2)]*0x4,_0x592bba=0x0,_0x42d020=0x3,_0x5c8f52=Math[_0x18f71b(0x2fd)](_0x42d020/0x2),_0x3845d3=0x0,_0x390301=0x0;for(let _0x11730f=0x1;_0x11730f<_0x4187e2['height']-0x1;_0x11730f++){for(let _0x5e53c9=0x4;_0x5e53c9<_0x368935-0x4;_0x5e53c9+=0x4){_0x3845d3=0x0;for(let _0x4f4061=0x0;_0x4f4061<_0x42d020;_0x4f4061++){for(let _0x3699f6=0x0;_0x3699f6<_0x42d020;_0x3699f6++){_0x592bba=_0x368935*(_0x11730f+_0x4f4061-_0x5c8f52)+_0x5e53c9+(_0x3699f6-_0x5c8f52)*0x4;let _0x33f972=0.3*_0x1171d4[_0x592bba]+0.59*_0x1171d4[_0x592bba+0x1]+0.11*_0x1171d4[_0x592bba+0x2];_0x3845d3+=_0x33f972*_0x473582[_0x4f4061][_0x3699f6];}}_0x3845d3>_0x3d14a8&&(_0x390301+=0x1);}}return _0x390301;}static[_0x3e4a2e(0x1e7)](_0xdb9cc1){return new Promise(function(_0x46dca8,_0x2cdd3d){const _0x3aa96e=_0x1dea;let _0x2cf143=new Image();_0x2cf143[_0x3aa96e(0x2e4)](_0x3aa96e(0x304),'anonymous'),_0x2cf143['onload']=()=>{_0x46dca8(_0x2cf143);},_0x2cf143[_0x3aa96e(0x363)]=()=>{_0x2cdd3d('Error\x20loading\x20'+_0xdb9cc1);},_0x2cf143['src']=_0xdb9cc1;});}};class WebWorker{constructor(_0x232bdc={}){const _0x5af9e5=_0x3e4a2e;this[_0x5af9e5(0x243)]=null,this[_0x5af9e5(0x2af)]=null,this[_0x5af9e5(0x205)]={'path':null},this[_0x5af9e5(0x205)]=deepMerge(this['options'],_0x232bdc),this[_0x5af9e5(0x362)]();}[_0x3e4a2e(0x362)](){const _0x1fdd8c=_0x3e4a2e;this[_0x1fdd8c(0x2af)]=stream[_0x1fdd8c(0x2b8)](_0x1fdd8c(0x243)),this[_0x1fdd8c(0x2af)]['on'](_0x1fdd8c(0x1ac),this['getFace'][_0x1fdd8c(0x32a)](this)),this['stream']['on']('getTinyFace',this[_0x1fdd8c(0x316)][_0x1fdd8c(0x32a)](this)),this[_0x1fdd8c(0x2af)]['on']('loadCard',this[_0x1fdd8c(0x216)]['bind'](this)),this[_0x1fdd8c(0x2af)]['on'](_0x1fdd8c(0x35c),this['getCard'][_0x1fdd8c(0x32a)](this)),window[_0x1fdd8c(0x2d9)]&&this[_0x1fdd8c(0x205)][_0x1fdd8c(0x19a)]!=null?(this['worker']=new Worker(this[_0x1fdd8c(0x205)][_0x1fdd8c(0x19a)]),this[_0x1fdd8c(0x243)][_0x1fdd8c(0x23f)]=this[_0x1fdd8c(0x180)][_0x1fdd8c(0x32a)](this)):console[_0x1fdd8c(0x1e6)]('Your\x20browser\x20doesn\x27t\x20support\x20web\x20workers.');}[_0x3e4a2e(0x1ac)](_0x31c6d0){const _0x99d0b1=_0x3e4a2e;let _0x88261c=null;if(_0x31c6d0 instanceof HTMLCanvasElement){let _0x368123=_0x31c6d0[_0x99d0b1(0x339)]('2d');_0x88261c=_0x368123[_0x99d0b1(0x1c7)](0x0,0x0,_0x31c6d0[_0x99d0b1(0x2d2)],_0x31c6d0[_0x99d0b1(0x250)]);}else{if(_0x31c6d0 instanceof HTMLImageElement){let _0x1ac3a0=document['createElement']('canvas'),_0x1f60d3=_0x1ac3a0[_0x99d0b1(0x339)]('2d');_0x1ac3a0[_0x99d0b1(0x2d2)]=_0x31c6d0[_0x99d0b1(0x2d2)],_0x1ac3a0['height']=_0x31c6d0['height'],_0x1f60d3[_0x99d0b1(0x317)](_0x31c6d0,0x0,0x0),_0x88261c=_0x1f60d3['getImageData'](0x0,0x0,_0x31c6d0[_0x99d0b1(0x2d2)],_0x31c6d0[_0x99d0b1(0x250)]);}}this['worker']['postMessage']({'type':_0x99d0b1(0x32b),'action':_0x99d0b1(0x1ac),'data':_0x88261c});}['getTinyFace'](_0x56b59a){const _0x312044=_0x3e4a2e;let _0x3e4539=null;if(_0x56b59a instanceof HTMLCanvasElement){let _0x2fa544=_0x56b59a[_0x312044(0x339)]('2d');_0x3e4539=_0x2fa544[_0x312044(0x1c7)](0x0,0x0,_0x56b59a[_0x312044(0x2d2)],_0x56b59a['height']);}else{if(_0x56b59a instanceof HTMLImageElement){let _0x21cfe6=document['createElement']('canvas'),_0x2d0999=_0x21cfe6[_0x312044(0x339)]('2d');_0x21cfe6['width']=_0x56b59a[_0x312044(0x2d2)],_0x21cfe6[_0x312044(0x250)]=_0x56b59a['height'],_0x2d0999[_0x312044(0x317)](_0x56b59a,0x0,0x0),_0x3e4539=_0x2d0999[_0x312044(0x1c7)](0x0,0x0,_0x56b59a['width'],_0x56b59a['height']);}}this['worker'][_0x312044(0x223)]({'type':_0x312044(0x32b),'action':_0x312044(0x316),'data':_0x3e4539});}['getCard'](_0x538022){const _0x5c7a32=_0x3e4a2e;let _0x4b3b3d=null;if(_0x538022 instanceof HTMLCanvasElement)_0x4b3b3d=ImageProcessing[_0x5c7a32(0x34f)](_0x538022);else _0x538022 instanceof HTMLImageElement&&(_0x4b3b3d=ImageProcessing[_0x5c7a32(0x1bb)](_0x538022));this['worker']['postMessage']({'type':_0x5c7a32(0x179),'action':'getCard','data':_0x4b3b3d});}[_0x3e4a2e(0x216)](){const _0x58ba26=_0x3e4a2e;this['worker'][_0x58ba26(0x223)]({'type':_0x58ba26(0x179),'action':'loadCard'});}['onWorkerMessage'](_0x2bf51e){const _0x1ade3b=_0x3e4a2e;let _0x387394=_0x2bf51e[_0x1ade3b(0x1ce)]['type'],_0x1c1db2=_0x2bf51e[_0x1ade3b(0x1ce)][_0x1ade3b(0x218)],_0x3b3366=_0x2bf51e[_0x1ade3b(0x1ce)]['data'];switch(_0x387394){case _0x1ade3b(0x32b):if(_0x1c1db2===_0x1ade3b(0x220))this[_0x1ade3b(0x2af)]['notify'](_0x1ade3b(0x275),_0x3b3366);else _0x1c1db2===_0x1ade3b(0x19e)&&this[_0x1ade3b(0x2af)][_0x1ade3b(0x20d)](_0x1ade3b(0x2b3),_0x3b3366);break;case _0x1ade3b(0x179):this[_0x1ade3b(0x2af)][_0x1ade3b(0x20d)]('onScanResult',_0x3b3366);break;case _0x1ade3b(0x1d1):this['stream'][_0x1ade3b(0x20d)]('onScanLoaded',_0x3b3366);break;case'other':break;default:break;}}};class HeadPos{constructor(){const _0x5c39ac=_0x3e4a2e;this[_0x5c39ac(0x306)]=null,this[_0x5c39ac(0x30f)]={'x':0x0,'y':0x0,'width':0x0,'height':0x0},this[_0x5c39ac(0x29b)]=[],this['face']=null,this[_0x5c39ac(0x336)]=0x0,this['pitch']=0x0,this[_0x5c39ac(0x2ce)]=0x0;}[_0x3e4a2e(0x2f3)](_0x3c6285){const _0xc2b1ec=_0x3e4a2e;this['face']=_0x3c6285,this[_0xc2b1ec(0x30f)]={'x':_0x3c6285['x'],'y':_0x3c6285['y'],'height':_0x3c6285[_0xc2b1ec(0x250)],'width':_0x3c6285[_0xc2b1ec(0x2d2)]},this[_0xc2b1ec(0x29b)]=_0x3c6285[_0xc2b1ec(0x266)],this[_0xc2b1ec(0x1a5)]();}[_0x3e4a2e(0x364)](){const _0x3890d6=_0x3e4a2e;this[_0x3890d6(0x306)]=null,this[_0x3890d6(0x30f)]={'x':0x0,'y':0x0,'width':0x0,'height':0x0},this['landmark']=[],this['face']=null,this['yaw']=0x0,this[_0x3890d6(0x1dd)]=0x0,this[_0x3890d6(0x2ce)]=0x0;}[_0x3e4a2e(0x1a5)](){const _0x19d4ff=_0x3e4a2e;let _0x511212=this[_0x19d4ff(0x32b)][_0x19d4ff(0x266)][0xea],_0x54ab70=this[_0x19d4ff(0x32b)][_0x19d4ff(0x266)][0x1c6],_0xfa5eab=this[_0x19d4ff(0x32b)][_0x19d4ff(0x266)][0xa],_0x4b86ce=this['face']['landMarks'][0x98];this[_0x19d4ff(0x336)]=Math[_0x19d4ff(0x18c)](_0x54ab70[0x2]-_0x511212[0x2],_0x54ab70[0x0]-_0x511212[0x0])*0xb4/Math['PI'],this[_0x19d4ff(0x1dd)]=Math[_0x19d4ff(0x18c)](_0x4b86ce[0x0]-_0xfa5eab[0x0],_0x4b86ce[0x2]-_0xfa5eab[0x2])*0xb4/Math['PI'],this['roll']=Math[_0x19d4ff(0x18c)](_0x54ab70[0x1]-_0x511212[0x1],_0x54ab70[0x0]-_0x511212[0x0])*0xb4/Math['PI'];}['getPose'](){}[_0x3e4a2e(0x27a)](){const _0xc9c4a7=_0x3e4a2e;return this[_0xc9c4a7(0x30f)];}[_0x3e4a2e(0x23c)](){const _0xfba469=_0x3e4a2e;return this[_0xfba469(0x29b)];}}const headpos=HeadPos;;const FaceCommands={'FORWARD':_0x3e4a2e(0x202),'LEFT':_0x3e4a2e(0x2fe),'RIGHT':_0x3e4a2e(0x221),'UP':'up','DOWN':_0x3e4a2e(0x291),'SMILE':_0x3e4a2e(0x1f1),'BLINKING':_0x3e4a2e(0x2ac),'NONE':_0x3e4a2e(0x204)};class Commander{constructor(){const _0x441fef=_0x3e4a2e;this[_0x441fef(0x2f9)]=[],this[_0x441fef(0x2fb)]=0x2,this[_0x441fef(0x353)]=[FaceCommands[_0x441fef(0x2c5)],FaceCommands[_0x441fef(0x20b)],FaceCommands['UP'],FaceCommands[_0x441fef(0x335)],FaceCommands[_0x441fef(0x2c4)]],this[_0x441fef(0x2cd)]=0x0;}['shuffle'](){const _0x1d24c8=_0x3e4a2e;this[_0x1d24c8(0x364)]();for(let _0x3ab84e=0x0;_0x3ab84e<this[_0x1d24c8(0x2fb)];_0x3ab84e++){this[_0x1d24c8(0x2f9)][_0x1d24c8(0x360)]({'name':FaceCommands[_0x1d24c8(0x229)]});}return this[_0x1d24c8(0x2f9)];}['next'](){const _0x36dab3=_0x3e4a2e;return this[_0x36dab3(0x2cd)]<this[_0x36dab3(0x2f9)][_0x36dab3(0x1c0)]-0x1?(this[_0x36dab3(0x2cd)]++,this['commands'][this[_0x36dab3(0x2cd)]]):null;}[_0x3e4a2e(0x1de)](){const _0x2ce35b=_0x3e4a2e;return this[_0x2ce35b(0x2f9)][this['index']];}['hasCommand'](){const _0x4c317e=_0x3e4a2e;return this[_0x4c317e(0x2cd)]<this[_0x4c317e(0x2f9)][_0x4c317e(0x1c0)]-0x1;}[_0x3e4a2e(0x364)](){this['index']=0x0,this['commands']=[];}};const DCFaceError={'NO_FACE':_0x3e4a2e(0x286),'MANY_FACES':_0x3e4a2e(0x28b),'LOW_LIGHT':_0x3e4a2e(0x320),'HIGH_LIGHT':'highlight','OUT_OF_BOUNDS':'outofbounds'},DCFacePos={'NONE':'none','UP':'up','DOWN':'down','FORWARD':'forward','LEFT':_0x3e4a2e(0x2fe),'RIGHT':'right'},FaceActionSteps={'NONE':_0x3e4a2e(0x204),'INIT':_0x3e4a2e(0x25f),'START':_0x3e4a2e(0x22c),'ACTIONS':'actions','FINISH':_0x3e4a2e(0x33a)},CommandResult={'SUCCESS':_0x3e4a2e(0x251),'NONE':_0x3e4a2e(0x204),'REJECT':'reject'};class FaceAnalyser{constructor(_0x5d41f7,_0x37044d={}){const _0x1dd278=_0x3e4a2e;this[_0x1dd278(0x25c)]=_0x5d41f7,this[_0x1dd278(0x205)]={'video':null,'area':{'x':0x0,'y':0x0,'width':0x0,'height':0x0},'detectTime':0x64,'startingWaitTime':0x7d0,'onFaceDetected':null,'onError':null,'onFinished':null,'onCommand':null,'onCommandResult':null,'onStep':null,'onStartDownCount':null},this[_0x1dd278(0x205)]=deepMerge(this['options'],_0x37044d),this['detectTimer']=null,this[_0x1dd278(0x1e4)]={'lowLight':![],'highLight':![],'noFace':![],'manyFace':![],'outOfBounds':![]},this[_0x1dd278(0x1ba)]=DCFacePos['NONE'],this['stream']=null,this[_0x1dd278(0x348)]=new headpos(),this[_0x1dd278(0x1df)]=new Commander(),this[_0x1dd278(0x357)]=![],this[_0x1dd278(0x2f4)]=[],this['step']=FaceActionSteps[_0x1dd278(0x1f3)],this[_0x1dd278(0x289)]=0x3,this[_0x1dd278(0x28d)]=0x0,this[_0x1dd278(0x2ed)]=0x0,this[_0x1dd278(0x242)]=0x7d0,this[_0x1dd278(0x1e5)]=0x1770,this[_0x1dd278(0x265)]=0x3e8,this[_0x1dd278(0x1fe)]=0x7d0,this['currentStepActive']=![],this[_0x1dd278(0x278)]=null,this[_0x1dd278(0x25b)]=[],this[_0x1dd278(0x1ff)]=FaceCommands[_0x1dd278(0x1f3)],this[_0x1dd278(0x1cf)]=DCFacePos[_0x1dd278(0x1f3)],this[_0x1dd278(0x2f1)]=[],this['cc']=null,this[_0x1dd278(0x18b)]();}[_0x3e4a2e(0x18b)](){const _0x2e4f11=_0x3e4a2e;this['stream']=stream[_0x2e4f11(0x2b8)]('worker'),this[_0x2e4f11(0x2af)]['on'](_0x2e4f11(0x275),_0x5d3e73=>{const _0x141f7a=_0x2e4f11;this[_0x141f7a(0x24d)]!=null&&(this[_0x141f7a(0x2cb)](_0x5d3e73),this[_0x141f7a(0x357)]=![]);});}['start'](){const _0x15a8c9=_0x3e4a2e;this[_0x15a8c9(0x357)]=![],this[_0x15a8c9(0x2f4)]=[],this['currentStepActive']=![],this[_0x15a8c9(0x1b5)]=FaceActionSteps[_0x15a8c9(0x307)],this['results']=[],this[_0x15a8c9(0x289)]=0x3,this[_0x15a8c9(0x278)]=new Date()['getTime'](),this[_0x15a8c9(0x28f)](),this['callStepChange'](this['step']),clearTimeout(this[_0x15a8c9(0x24d)]),this[_0x15a8c9(0x24d)]=setTimeout(this[_0x15a8c9(0x170)][_0x15a8c9(0x32a)](this),this['options'][_0x15a8c9(0x240)]);}[_0x3e4a2e(0x287)](){const _0x2066f7=_0x3e4a2e;this[_0x2066f7(0x278)]=null,clearTimeout(this['detectTimer']),this[_0x2066f7(0x24d)]=null,this[_0x2066f7(0x357)]=![],this[_0x2066f7(0x364)]();}['clear'](){const _0xb632d9=_0x3e4a2e;this[_0xb632d9(0x2f4)]=[],this[_0xb632d9(0x1b5)]=FaceActionSteps[_0xb632d9(0x1f3)],this[_0xb632d9(0x289)]=0x3,this[_0xb632d9(0x1cf)]=DCFacePos['NONE'],this[_0xb632d9(0x2f1)]=[],this[_0xb632d9(0x1b2)]=![];}[_0x3e4a2e(0x28f)](){const _0x2a225c=_0x3e4a2e;let _0x5050b8=this[_0x2a225c(0x1df)]['shuffle']();for(let _0x33dfd6 in _0x5050b8){this['results'][_0x2a225c(0x360)]({'pos':DCFacePos[_0x2a225c(0x1f3)],'image':null,'command':FaceCommands[_0x2a225c(0x1f3)],'status':![]});}helper_logger[_0x2a225c(0x31e)]()['log'](_0x2a225c(0x28f),_0x5050b8);}[_0x3e4a2e(0x170)](){const _0x438c54=_0x3e4a2e;!this[_0x438c54(0x357)]&&(this[_0x438c54(0x2af)][_0x438c54(0x20d)](_0x438c54(0x1ac),this[_0x438c54(0x25c)]),this['lock']=!![]),this['detectTimer']=setTimeout(this[_0x438c54(0x170)][_0x438c54(0x32a)](this),this[_0x438c54(0x205)][_0x438c54(0x240)]);}[_0x3e4a2e(0x2cb)](_0x39c3f2){const _0xef0a42=_0x3e4a2e;this['errors'][_0xef0a42(0x228)]=![],this[_0xef0a42(0x1e4)][_0xef0a42(0x28a)]=![],this[_0xef0a42(0x1ba)]=DCFacePos[_0xef0a42(0x1f3)];if(_0x39c3f2['length']>0x1)this[_0xef0a42(0x1e4)][_0xef0a42(0x28a)]=!![];else{if(_0x39c3f2[_0xef0a42(0x1c0)]===0x0){this['errors'][_0xef0a42(0x228)]=!![];if(typeof this[_0xef0a42(0x205)]['onFaceDetected']===_0xef0a42(0x2a3))this['options']['onFaceDetected']([]);this[_0xef0a42(0x357)]=![];return;}}this[_0xef0a42(0x2f4)]=_0x39c3f2;if(typeof this['options'][_0xef0a42(0x2cb)]===_0xef0a42(0x2a3))this['options'][_0xef0a42(0x2cb)](_0x39c3f2);this['detectedFaceCountDownBeforeStart']>0x0?(this[_0xef0a42(0x289)]--,this['fixedTime']=new Date()['getTime'](),this[_0xef0a42(0x2ed)]=new Date()[_0xef0a42(0x337)]()):(this[_0xef0a42(0x348)]['setFace'](_0x39c3f2[0x0]),this[_0xef0a42(0x17b)](),this[_0xef0a42(0x318)]()),this['lock']=![];}['finish'](_0x14e7d5,_0x59e2cd){const _0x291140=_0x3e4a2e;if(this[_0x291140(0x278)]==null)return![];let _0x18cf63={'tid':this[_0x291140(0x278)],'status':_0x59e2cd,'results':this['results'],'image':null};for(let _0xce00ce in this[_0x291140(0x25b)]){if(this[_0x291140(0x25b)][_0xce00ce][_0x291140(0x1a8)]===FaceCommands[_0x291140(0x229)]&&this[_0x291140(0x25b)][_0xce00ce][_0x291140(0x2f6)]===!![]){_0x18cf63[_0xce00ce]['image']=this[_0x291140(0x25b)][_0xce00ce][_0x291140(0x24f)];break;}}typeof this['options'][_0x291140(0x301)]===_0x291140(0x2a3)&&this[_0x291140(0x205)][_0x291140(0x301)](_0x18cf63),this[_0x291140(0x287)]();}[_0x3e4a2e(0x17b)](){const _0x181c53=_0x3e4a2e;let _0x26602c=this[_0x181c53(0x348)][_0x181c53(0x27a)](),_0x33c226={'x':this['cc'][_0x181c53(0x27f)](_0x26602c['x']),'y':this['cc']['getCoordY'](_0x26602c['y']),'width':this['cc']['getSize'](_0x26602c[_0x181c53(0x2d2)]),'height':this['cc'][_0x181c53(0x252)](_0x26602c[_0x181c53(0x250)])},_0x4a41da=this[_0x181c53(0x205)]['area']['width']*0.3,_0x3a236e=this['options'][_0x181c53(0x280)][_0x181c53(0x250)]*0.3,_0x1e1dd6=_0x33c226['x']+_0x33c226['width'],_0x4ae8c6=_0x33c226['y']+_0x33c226[_0x181c53(0x250)];if(_0x33c226['x']>this['options'][_0x181c53(0x280)]['x']-_0x4a41da&&_0x33c226['y']>this[_0x181c53(0x205)][_0x181c53(0x280)]['y']-_0x3a236e&&_0x1e1dd6<this[_0x181c53(0x205)][_0x181c53(0x280)]['x']+this['options']['area']['width']+_0x4a41da&&_0x4ae8c6<this[_0x181c53(0x205)][_0x181c53(0x280)]['y']+this[_0x181c53(0x205)]['area']['height']+_0x3a236e)this[_0x181c53(0x1e4)][_0x181c53(0x20f)]=![];else return this[_0x181c53(0x1e4)]['outOfBounds']=!![],![];this[_0x181c53(0x348)]['roll']<0xc&&this['headpos'][_0x181c53(0x2ce)]>-0xc&&this[_0x181c53(0x348)]['pitch']<=-0x14&&this[_0x181c53(0x348)][_0x181c53(0x1dd)]>=-0x82&&this[_0x181c53(0x348)][_0x181c53(0x336)]>=-0xa&&this[_0x181c53(0x348)][_0x181c53(0x336)]<=0xa&&(this[_0x181c53(0x1cf)]=DCFacePos[_0x181c53(0x229)]),this[_0x181c53(0x348)]['roll']<0xc&&this[_0x181c53(0x348)][_0x181c53(0x2ce)]>-0xc&&this[_0x181c53(0x348)]['yaw']<-0xa&&(this[_0x181c53(0x1cf)]=DCFacePos[_0x181c53(0x2c5)]),this[_0x181c53(0x348)]['roll']<0xc&&this[_0x181c53(0x348)][_0x181c53(0x2ce)]>-0xc&&this['headpos'][_0x181c53(0x336)]>0xa&&(this[_0x181c53(0x1cf)]=DCFacePos[_0x181c53(0x20b)]),this[_0x181c53(0x348)][_0x181c53(0x2ce)]<0xc&&this['headpos']['roll']>-0xc&&this[_0x181c53(0x348)][_0x181c53(0x1dd)]<-0x82&&(this['currentAction']=DCFacePos['UP']),this[_0x181c53(0x348)]['roll']<0xc&&this['headpos'][_0x181c53(0x2ce)]>-0xc&&this[_0x181c53(0x348)][_0x181c53(0x1dd)]>-0x14&&(this[_0x181c53(0x1cf)]=DCFacePos[_0x181c53(0x335)]);}['checkCurrentCommandAction'](){const _0x36a58a=_0x3e4a2e;let _0x19dc19=this[_0x36a58a(0x2a8)](),_0x829cfa=this[_0x36a58a(0x2a6)](this[_0x36a58a(0x28d)]);_0x19dc19?(this[_0x36a58a(0x1ba)]=DCFacePos[_0x36a58a(0x1f3)],this['callError'](this['errors'])):this[_0x36a58a(0x2ed)]=new Date()[_0x36a58a(0x337)]();this[_0x36a58a(0x1b5)]===FaceActionSteps[_0x36a58a(0x307)]&&(this[_0x36a58a(0x1b2)]=![],this[_0x36a58a(0x1b5)]=FaceActionSteps['START'],this[_0x36a58a(0x30b)](this['step']));if(this[_0x36a58a(0x1b5)]===FaceActionSteps[_0x36a58a(0x25e)]){let _0x488468=Math[_0x36a58a(0x227)]((this[_0x36a58a(0x205)][_0x36a58a(0x254)]-_0x829cfa)/0x3e8);if(_0x488468>0x0){if(typeof this[_0x36a58a(0x205)][_0x36a58a(0x1eb)]===_0x36a58a(0x2a3))this[_0x36a58a(0x205)][_0x36a58a(0x1eb)](_0x488468);}else this[_0x36a58a(0x1b5)]=FaceActionSteps[_0x36a58a(0x248)],this[_0x36a58a(0x1b2)]=![],this[_0x36a58a(0x28d)]=new Date()['getTime'](),this['sessionTime']=new Date()[_0x36a58a(0x337)](),this['callStepChange'](this['step']);}if(this[_0x36a58a(0x1b5)]===FaceActionSteps[_0x36a58a(0x248)]&&(_0x19dc19===![]||this[_0x36a58a(0x242)]===0x0)){let _0x389876=this['commander']['index'],_0xec7c2f=this[_0x36a58a(0x1df)][_0x36a58a(0x1de)]();this['currentCommand']!==_0xec7c2f[_0x36a58a(0x214)]&&(this[_0x36a58a(0x1ff)]=_0xec7c2f[_0x36a58a(0x214)],this[_0x36a58a(0x2f1)]=[],this[_0x36a58a(0x247)](_0xec7c2f[_0x36a58a(0x214)]));_0x829cfa>0x0&&this[_0x36a58a(0x2f1)][_0x36a58a(0x360)]({'pos':this[_0x36a58a(0x1cf)],'posPitch':this[_0x36a58a(0x348)][_0x36a58a(0x1dd)],'posYaw':this[_0x36a58a(0x348)]['yaw'],'time':new Date()[_0x36a58a(0x337)](),'valid':!![],'command':_0xec7c2f});let _0x3760c7=this['actionWaitTime']+this['actionWaitBeforeCheck']-_0x829cfa,_0x4d5591=_0x829cfa>this[_0x36a58a(0x265)]?this[_0x36a58a(0x295)](_0xec7c2f[_0x36a58a(0x214)],this['currentAction']):CommandResult[_0x36a58a(0x1f3)];if(_0x3760c7>0x0&&_0x4d5591===CommandResult[_0x36a58a(0x1f3)]){}else{if(_0x829cfa>this[_0x36a58a(0x265)]){let _0x2f85f6=ImageProcessing['cropCanvas'](this[_0x36a58a(0x25c)],this[_0x36a58a(0x348)]['box']['x'],this[_0x36a58a(0x348)]['box']['y'],this['headpos'][_0x36a58a(0x30f)][_0x36a58a(0x2d2)],this[_0x36a58a(0x348)][_0x36a58a(0x30f)][_0x36a58a(0x250)]);_0x4d5591===CommandResult[_0x36a58a(0x222)]?this[_0x36a58a(0x25b)][_0x389876]={'pos':this[_0x36a58a(0x1cf)],'command':_0xec7c2f,'status':!![],'image':_0x2f85f6}:this[_0x36a58a(0x25b)][_0x389876]={'pos':this[_0x36a58a(0x1cf)],'command':_0xec7c2f,'status':![],'image':_0x2f85f6},this['callCommandResult'](this[_0x36a58a(0x25b)][_0x389876]),this[_0x36a58a(0x1df)][_0x36a58a(0x27e)]()?this[_0x36a58a(0x1df)][_0x36a58a(0x195)]():(this[_0x36a58a(0x1b5)]=FaceActionSteps[_0x36a58a(0x249)],this[_0x36a58a(0x348)][_0x36a58a(0x364)](),this['callStepChange'](this[_0x36a58a(0x1b5)])),this[_0x36a58a(0x28d)]=new Date()[_0x36a58a(0x337)]();}}}if(this['step']===FaceActionSteps[_0x36a58a(0x249)]){let _0x2c9440=this['finishWaitTime']-_0x829cfa;if(_0x2c9440>0x0){}else this[_0x36a58a(0x1b5)]=FaceActionSteps[_0x36a58a(0x249)],this[_0x36a58a(0x28d)]=new Date()[_0x36a58a(0x337)](),this['finish'](!![],!![]);}}[_0x3e4a2e(0x295)](_0x1fe6c5,_0x2b5f0b){const _0x2d472a=_0x3e4a2e;let _0x301a3a={},_0x258b12=FaceCommands[_0x2d472a(0x1f3)],_0x51df5d=FaceCommands['NONE'],_0x5c5b9e={};for(let _0x398801 in this[_0x2d472a(0x2f1)]){let _0xbd9189=this[_0x2d472a(0x2f1)][_0x398801];_0xbd9189!=null&&_0xbd9189[_0x2d472a(0x35b)]&&(_0xbd9189[_0x2d472a(0x18f)]!=null&&(_0x258b12=this[_0x2d472a(0x2c8)](_0xbd9189['pos'])),_0x301a3a[_0x258b12]==null&&(_0x301a3a[_0x258b12]={'list':[],'max':0x0}),_0x301a3a[_0x258b12]=this[_0x2d472a(0x176)](_0x301a3a[_0x258b12],_0xbd9189,_0x51df5d!==_0x258b12),_0x5c5b9e[_0x258b12]=(_0x5c5b9e[_0x258b12]||0x0)+0x1,_0x51df5d=_0x258b12);}let _0xdde714=_0x5c5b9e['length'];if(_0x1fe6c5===FaceCommands['LEFT']||_0x1fe6c5===FaceCommands['UP']||_0x1fe6c5===FaceCommands[_0x2d472a(0x20b)]||_0x1fe6c5===FaceCommands[_0x2d472a(0x335)]){if(_0xdde714>0x3)return CommandResult['REJECT'];if(_0x301a3a[_0x1fe6c5]!=null&&_0x301a3a[_0x1fe6c5][_0x2d472a(0x32e)]>0x3e8)return CommandResult[_0x2d472a(0x222)];}if(_0x1fe6c5===FaceCommands[_0x2d472a(0x229)]){if(_0xdde714>=0x3)return CommandResult[_0x2d472a(0x34a)];if(_0x301a3a[_0x1fe6c5]!=null&&_0x301a3a[_0x1fe6c5][_0x2d472a(0x32e)]>0x3e8)return CommandResult['SUCCESS'];}return CommandResult[_0x2d472a(0x1f3)];}['callStepChange'](_0x139c33){const _0x568198=_0x3e4a2e;typeof this['options'][_0x568198(0x315)]===_0x568198(0x2a3)&&this[_0x568198(0x205)][_0x568198(0x315)](_0x139c33);}['callError'](_0x8808cf){const _0x59bbd2=_0x3e4a2e;typeof this[_0x59bbd2(0x205)]['onError']===_0x59bbd2(0x2a3)&&this[_0x59bbd2(0x205)][_0x59bbd2(0x34d)](_0x8808cf);}['callCommandChange'](_0x6ed4d0){const _0x463a5d=_0x3e4a2e;typeof this[_0x463a5d(0x205)][_0x463a5d(0x2dc)]===_0x463a5d(0x2a3)&&this['options'][_0x463a5d(0x2dc)](_0x6ed4d0);}['callCommandResult'](_0x4bbe30){const _0x470335=_0x3e4a2e;typeof this[_0x470335(0x205)][_0x470335(0x26e)]===_0x470335(0x2a3)&&this[_0x470335(0x205)][_0x470335(0x26e)](_0x4bbe30);}[_0x3e4a2e(0x309)](){const _0x51ef34=_0x3e4a2e;return this[_0x51ef34(0x2f4)];}['isErrorExist'](){const _0x3e242c=_0x3e4a2e;for(const _0x5e1507 in this[_0x3e242c(0x1e4)]){if(this[_0x3e242c(0x1e4)][_0x5e1507]===!![])return!![];}return![];}[_0x3e4a2e(0x2a6)](_0x4e691a){const _0x27a9b0=_0x3e4a2e;let _0x58a8fc=new Date()[_0x27a9b0(0x337)]();return _0x58a8fc-_0x4e691a;}[_0x3e4a2e(0x2c8)](_0x572d4b){const _0x313572=_0x3e4a2e;switch(_0x572d4b){case DCFacePos[_0x313572(0x2c5)]:return FaceCommands[_0x313572(0x2c5)];case DCFacePos['UP']:return FaceCommands['UP'];case DCFacePos[_0x313572(0x20b)]:return FaceCommands[_0x313572(0x20b)];case DCFacePos[_0x313572(0x335)]:return FaceCommands[_0x313572(0x335)];case DCFacePos[_0x313572(0x229)]:return FaceCommands[_0x313572(0x229)];default:return FaceCommands['NONE'];}}[_0x3e4a2e(0x176)](_0xf1179,_0xb886af,_0x2f0a4d){const _0xedbd1e=_0x3e4a2e;let _0x1220f3=_0xf1179,_0x4fc373=0x0;return _0x1220f3[_0xedbd1e(0x185)][_0xedbd1e(0x1c0)]>0x0&&_0x1220f3[_0xedbd1e(0x185)][_0x4fc373][_0xedbd1e(0x22c)]!=null&&_0x2f0a4d?(_0x4fc373=_0x1220f3[_0xedbd1e(0x185)][_0xedbd1e(0x1c0)]-0x1,_0xb886af[_0xedbd1e(0x171)]!=null&&(_0x1220f3[_0xedbd1e(0x185)][_0x4fc373][_0xedbd1e(0x1b4)]=_0xb886af['time'],_0x1220f3['list'][_0x4fc373][_0xedbd1e(0x2c2)]=_0xb886af[_0xedbd1e(0x171)]-_0x1220f3[_0xedbd1e(0x185)][_0x4fc373][_0xedbd1e(0x22c)],_0x1220f3[_0xedbd1e(0x32e)]=(_0x1220f3[_0xedbd1e(0x185)][_0x4fc373][_0xedbd1e(0x2c2)]||0x0)>_0x1220f3[_0xedbd1e(0x32e)]?_0x1220f3[_0xedbd1e(0x185)][_0x4fc373][_0xedbd1e(0x2c2)]||0x0:_0x1220f3['max'])):_0x1220f3[_0xedbd1e(0x185)][_0xedbd1e(0x360)]({'start':_0xb886af[_0xedbd1e(0x171)],'end':null,'interval':null}),_0x1220f3;}};class DeepFace{constructor(_0x366d80,_0x5274bd={}){const _0x6f0bf4=_0x3e4a2e;this[_0x6f0bf4(0x352)]=null,this[_0x6f0bf4(0x25c)]=null,this[_0x6f0bf4(0x26c)]=null,this['state']={'start':![],'detectInit':![],'analyzeAfterOpen':![]},this[_0x6f0bf4(0x205)]={'src':null,'sourceType':null,'width':0x280,'height':0x1e0,'liveness':!![],'onFrameCaptured':null,'detectTime':0x64,'onFinished':null,'worker_path':_0x6f0bf4(0x1e9)},this[_0x6f0bf4(0x205)]=deepMerge(this[_0x6f0bf4(0x205)],_0x5274bd),this['initContainer'](_0x366d80),this['setup']();}[_0x3e4a2e(0x1ca)](_0x58456d){const _0x55a874=_0x3e4a2e;this[_0x55a874(0x26c)]=new camera(_0x58456d,{'src':this[_0x55a874(0x205)]['src'],'width':this[_0x55a874(0x205)]['width'],'height':this['options'][_0x55a874(0x250)],'onFrameUpdated':this[_0x55a874(0x264)][_0x55a874(0x32a)](this),'onLoaded':this[_0x55a874(0x22d)][_0x55a874(0x32a)](this),'onStart':this[_0x55a874(0x2a2)][_0x55a874(0x32a)](this),'onStop':this[_0x55a874(0x331)][_0x55a874(0x32a)](this)}),this[_0x55a874(0x352)]=this[_0x55a874(0x26c)][_0x55a874(0x352)],this[_0x55a874(0x25c)]=this[_0x55a874(0x26c)]['canvas'];}['setup'](){const _0x4e4156=_0x3e4a2e;this['cc']=new CoordConverter(this[_0x4e4156(0x26c)][_0x4e4156(0x361)]),this['faceMask']=new MaskLayer(this[_0x4e4156(0x352)],{'width':this[_0x4e4156(0x205)][_0x4e4156(0x2d2)],'height':this[_0x4e4156(0x205)][_0x4e4156(0x250)]}),this[_0x4e4156(0x2c1)]=new VisualLayer(this['canvas']),this[_0x4e4156(0x1f0)]=new WebWorker({'path':this['options'][_0x4e4156(0x29c)]}),this['analyser']=new FaceAnalyser(this[_0x4e4156(0x26c)][_0x4e4156(0x20e)],{'area':this[_0x4e4156(0x178)][_0x4e4156(0x342)](),'detectTime':this[_0x4e4156(0x205)][_0x4e4156(0x240)],'onFaceDetected':this[_0x4e4156(0x2cb)][_0x4e4156(0x32a)](this),'onError':this['onError']['bind'](this),'onFinished':this[_0x4e4156(0x301)][_0x4e4156(0x32a)](this),'onCommand':this[_0x4e4156(0x2dc)]['bind'](this),'onCommandResult':this['onCommandResult'][_0x4e4156(0x32a)](this),'onStep':this['onStep'][_0x4e4156(0x32a)](this),'onStartDownCount':this[_0x4e4156(0x1eb)][_0x4e4156(0x32a)](this)}),this[_0x4e4156(0x2d0)]['cc']=this['cc'];}[_0x3e4a2e(0x2b8)](){const _0x5ad4f6=_0x3e4a2e;!this[_0x5ad4f6(0x26c)]['isPlaying']()&&(this[_0x5ad4f6(0x26c)]['start'](),this[_0x5ad4f6(0x178)][_0x5ad4f6(0x1fa)]());}['close'](){const _0x3234b7=_0x3e4a2e;this['stop'](),this[_0x3234b7(0x26c)]['stop'](),this[_0x3234b7(0x178)][_0x3234b7(0x2d7)]();}[_0x3e4a2e(0x22c)](){const _0x14565d=_0x3e4a2e;!this[_0x14565d(0x26c)]['isPlaying']()?(this[_0x14565d(0x2b8)](),this[_0x14565d(0x175)][_0x14565d(0x230)]=!![]):(this[_0x14565d(0x175)][_0x14565d(0x22c)]=!![],this[_0x14565d(0x2d0)]['start']());}['stop'](){const _0x48a102=_0x3e4a2e;this[_0x48a102(0x175)]['start']=![],this[_0x48a102(0x2d0)]['stop'](),this['state'][_0x48a102(0x230)]=![];}[_0x3e4a2e(0x301)](_0x385c07,_0x24703d){const _0x829321=_0x3e4a2e;helper_logger[_0x829321(0x31e)]()[_0x829321(0x1e6)](_0x829321(0x1f9)),this[_0x829321(0x178)][_0x829321(0x347)](_0x829321(0x1cd)),typeof this[_0x829321(0x205)][_0x829321(0x301)]==_0x829321(0x2a3)&&this['options'][_0x829321(0x301)](_0x385c07,_0x24703d);}['onFaceDetected'](_0x504a17){}[_0x3e4a2e(0x2dc)](_0x3ab7b7){const _0xd7542c=_0x3e4a2e;helper_logger[_0xd7542c(0x31e)]()[_0xd7542c(0x1e6)](_0xd7542c(0x2dc),_0x3ab7b7);let _0x182198='';switch(_0x3ab7b7){case FaceCommands[_0xd7542c(0x229)]:_0x182198='look\x20forward';break;case FaceCommands[_0xd7542c(0x2c5)]:_0x182198=_0xd7542c(0x2d6);break;case FaceCommands[_0xd7542c(0x20b)]:_0x182198='look\x20right';break;case FaceCommands['UP']:_0x182198=_0xd7542c(0x27b);break;case FaceCommands[_0xd7542c(0x335)]:_0x182198=_0xd7542c(0x172);break;default:_0x182198='';}this[_0xd7542c(0x178)][_0xd7542c(0x347)](_0x182198);}[_0x3e4a2e(0x26e)](){}[_0x3e4a2e(0x315)](_0x57e748){const _0x9c62eb=_0x3e4a2e;helper_logger['getInstance']()[_0x9c62eb(0x1e6)](_0x9c62eb(0x1fb),_0x57e748);let _0x2bef3e='';switch(_0x57e748){case FaceActionSteps[_0x9c62eb(0x307)]:_0x2bef3e=_0x9c62eb(0x29f);break;case FaceActionSteps[_0x9c62eb(0x25e)]:_0x2bef3e=_0x9c62eb(0x2e7);break;case FaceActionSteps[_0x9c62eb(0x248)]:_0x2bef3e=_0x9c62eb(0x236);break;case FaceActionSteps[_0x9c62eb(0x249)]:_0x2bef3e=_0x9c62eb(0x308);break;default:_0x2bef3e='';}this[_0x9c62eb(0x178)]['setCommand'](_0x2bef3e);}[_0x3e4a2e(0x1eb)](_0x5aaf5e){const _0x201b2a=_0x3e4a2e;helper_logger[_0x201b2a(0x31e)]()[_0x201b2a(0x1e6)](_0x201b2a(0x1eb),_0x5aaf5e);}[_0x3e4a2e(0x34d)](_0x117c1d){const _0xde7ea2=_0x3e4a2e;helper_logger['getInstance']()[_0xde7ea2(0x1e6)]('onError',_0x117c1d);}[_0x3e4a2e(0x264)](){const _0x5832d3=_0x3e4a2e;let _0x2ee611=this['analyser'][_0x5832d3(0x309)]();this[_0x5832d3(0x2c1)]['drawFaces'](_0x2ee611);}[_0x3e4a2e(0x22d)](_0x47ccc7,_0x173e18){const _0x579990=_0x3e4a2e;this['cc'][_0x579990(0x2cc)](_0x173e18),this[_0x579990(0x2c1)]['cc'][_0x579990(0x2cc)](_0x173e18),this[_0x579990(0x2d0)]['options'][_0x579990(0x196)]=_0x47ccc7;}['onCameraStart'](){const _0x3a987e=_0x3e4a2e;this[_0x3a987e(0x175)][_0x3a987e(0x230)]&&(this[_0x3a987e(0x175)][_0x3a987e(0x230)]=![],this[_0x3a987e(0x22c)]());}[_0x3e4a2e(0x331)](){}['showProcessing'](_0xf3fee9){const _0x46c06c=_0x3e4a2e;this[_0x46c06c(0x352)]&&(this[_0x46c06c(0x352)][_0x46c06c(0x31a)][_0x46c06c(0x277)](_0x46c06c(0x1fd)),this['dom'][_0x46c06c(0x31a)]['remove']('blur'),_0xf3fee9&&(this['dom'][_0x46c06c(0x31a)][_0x46c06c(0x2b1)](_0x46c06c(0x1fd)),this[_0x46c06c(0x352)][_0x46c06c(0x31a)][_0x46c06c(0x2b1)]('blur')));}};class CardDetector{constructor(_0x373ed9={}){const _0x52010b=_0x3e4a2e;this['options']={'host':null,'headers':null,'serverSide':null,'modelUrl':null,'mirrored':!![],'single':!![]},this[_0x52010b(0x21a)]=null,this[_0x52010b(0x17e)]=![],this[_0x52010b(0x19b)]=null,this[_0x52010b(0x205)]=deepMerge(this['options'],_0x373ed9),this['originalSize']={'width':0x0,'height':0x0},this[_0x52010b(0x23a)]={'x':0x0,'y':0x0,'width':0x0,'height':0x0},this[_0x52010b(0x2f8)]={'width':0x12c,'height':0x12c};if(!this[_0x52010b(0x205)][_0x52010b(0x305)])this[_0x52010b(0x18b)]();else{}}['defineProcess'](){const _0x4b1dfd=_0x3e4a2e;this[_0x4b1dfd(0x205)]['serverSide']=OSPlus[_0x4b1dfd(0x324)]()||OSPlus[_0x4b1dfd(0x238)]();}[_0x3e4a2e(0x18b)](){const _0x4f408f=_0x3e4a2e;this[_0x4f408f(0x2af)]=stream[_0x4f408f(0x2b8)](_0x4f408f(0x1a3)),this[_0x4f408f(0x2af)]['on'](_0x4f408f(0x17a),_0x1d3e28=>{const _0x29f9a7=_0x4f408f;if(typeof this['callback']===_0x29f9a7(0x2a3)){let _0x2571ac=this[_0x29f9a7(0x21f)](_0x1d3e28,!![]);this[_0x29f9a7(0x21a)](_0x2571ac);}}),this[_0x4f408f(0x2af)]['on'](_0x4f408f(0x192),_0x12f9cc=>{const _0x3f0813=_0x4f408f;helper_logger[_0x3f0813(0x31e)]()[_0x3f0813(0x1e6)](_0x3f0813(0x19c)),this[_0x3f0813(0x17e)]=_0x12f9cc;});}[_0x3e4a2e(0x1b1)](){const _0x1265fc=_0x3e4a2e;if(!this['options']['serverSide'])this[_0x1265fc(0x2af)][_0x1265fc(0x20d)]('loadCard');else{let _0x228dcd=this[_0x1265fc(0x205)][_0x1265fc(0x26d)]!=null?StringExtra[_0x1265fc(0x1b7)](this[_0x1265fc(0x205)][_0x1265fc(0x26d)]):'',_0x268722=_0x228dcd+'/'+_0x1265fc(0x340),_0xe77523=deepMerge({'Content-Type':_0x1265fc(0x345)},this['options']['headers']||{});fetch(_0x268722,{'method':_0x1265fc(0x1b3),'headers':_0xe77523})[_0x1265fc(0x190)](_0x3ec146=>_0x3ec146[_0x1265fc(0x34e)]())[_0x1265fc(0x190)](_0x1d8d0b=>{const _0x566c25=_0x1265fc;this['loaded']=_0x1d8d0b[_0x566c25(0x251)],helper_logger[_0x566c25(0x31e)]()['log']('Success:',_0x1d8d0b);})[_0x1265fc(0x2c0)](_0x1065cd=>{const _0x535732=_0x1265fc;this[_0x535732(0x17e)]=![],helper_logger[_0x535732(0x31e)]()[_0x535732(0x1e6)]('Error:',_0x1065cd);});}}[_0x3e4a2e(0x209)](_0x9616f9=null){const _0x18b3fa=_0x3e4a2e;let _0x49821b=this[_0x18b3fa(0x205)][_0x18b3fa(0x26d)]!=null?StringExtra[_0x18b3fa(0x1b7)](this[_0x18b3fa(0x205)][_0x18b3fa(0x26d)]):'',_0x172736=_0x49821b+'/'+'start',_0xc9477d=deepMerge({'Content-Type':_0x18b3fa(0x345)},this[_0x18b3fa(0x205)][_0x18b3fa(0x269)]||{});fetch(_0x172736,{'method':'GET','headers':_0xc9477d})[_0x18b3fa(0x190)](_0x14301f=>_0x14301f[_0x18b3fa(0x34e)]())['then'](_0x3450a9=>{const _0x1165c4=_0x18b3fa;this[_0x1165c4(0x19b)]=_0x3450a9[_0x1165c4(0x278)]||null,helper_logger[_0x1165c4(0x31e)]()[_0x1165c4(0x1e6)]('Success:',_0x3450a9),typeof _0x9616f9===_0x1165c4(0x2a3)&&_0x9616f9(this[_0x1165c4(0x17e)],this[_0x1165c4(0x19b)]);})[_0x18b3fa(0x2c0)](_0x3a11aa=>{const _0x586204=_0x18b3fa;this['loadedTID']=null,helper_logger[_0x586204(0x31e)]()[_0x586204(0x1e6)]('Error:',_0x3a11aa);});}[_0x3e4a2e(0x1bc)](_0x485ff3,_0x48d62b,_0x4749cf){const _0x35b0d5=_0x3e4a2e;if(!this['options'][_0x35b0d5(0x305)]){this['callback']=_0x4749cf;let _0x28aeab=this[_0x35b0d5(0x2fc)](_0x485ff3);this[_0x35b0d5(0x2af)][_0x35b0d5(0x20d)]('getCard',_0x28aeab);}else{let _0x5b4df7=ImageProcessing[_0x35b0d5(0x2a5)](_0x485ff3,_0x35b0d5(0x188),0.95),_0x2744c0=new FormData();_0x2744c0[_0x35b0d5(0x313)](_0x35b0d5(0x24f),_0x5b4df7),_0x2744c0[_0x35b0d5(0x313)]('type','0'),_0x2744c0[_0x35b0d5(0x313)](_0x35b0d5(0x278),_0x48d62b);let _0x17fcc1=this[_0x35b0d5(0x205)]['host']!=null?StringExtra[_0x35b0d5(0x1b7)](this[_0x35b0d5(0x205)]['host']):'',_0x1660a7=_0x17fcc1+'/'+'card/detect',_0x1e38b0=deepMerge({},this['options']['headers']||{});fetch(_0x1660a7,{'method':'POST','body':_0x2744c0,'headers':_0x1e38b0})[_0x35b0d5(0x190)](function(_0x4fa507){const _0x38dbdb=_0x35b0d5;if(_0x4fa507['ok'])return _0x4fa507[_0x38dbdb(0x34e)]();console[_0x38dbdb(0x1ea)]('Error:',_0x4fa507),typeof _0x4749cf==='function'&&_0x4749cf(null);})[_0x35b0d5(0x190)](_0x270f39=>{const _0x35df33=_0x35b0d5;helper_logger['getInstance']()['log'](_0x35df33(0x1d4),_0x270f39);let _0x20d7a8=[];_0x270f39[_0x35df33(0x251)]===!![]&&_0x270f39[_0x35df33(0x1ce)]!==undefined&&(_0x20d7a8=_0x270f39['data']);if(_0x20d7a8[_0x35df33(0x1c0)]>0x0){}if(typeof _0x4749cf==='function'){let _0x2a35bd=this[_0x35df33(0x21f)](_0x20d7a8);_0x4749cf(_0x2a35bd);}})[_0x35b0d5(0x2c0)](_0x9162ad=>{const _0x41b153=_0x35b0d5;console[_0x41b153(0x1ea)]('Error:',_0x9162ad),typeof _0x4749cf===_0x41b153(0x2a3)&&_0x4749cf(null);});}}[_0x3e4a2e(0x27c)](){const _0x3178ea=_0x3e4a2e;return this[_0x3178ea(0x17e)];}['fit2Size'](_0x331dde){const _0x54c141=_0x3e4a2e;let _0x51d068={'x':0x0,'y':0x0,'w':_0x331dde[_0x54c141(0x2d2)],'h':_0x331dde[_0x54c141(0x250)]};return _0x331dde[_0x54c141(0x2d2)]>_0x331dde[_0x54c141(0x250)]?(_0x51d068['w']=_0x331dde[_0x54c141(0x250)],_0x51d068['x']=(_0x331dde[_0x54c141(0x2d2)]-_0x51d068['w'])/0x2):(_0x51d068['h']=_0x331dde[_0x54c141(0x2d2)],_0x51d068['y']=(_0x331dde[_0x54c141(0x250)]-_0x51d068['h'])/0x2),this[_0x54c141(0x2a0)]={'x':_0x331dde[_0x54c141(0x2d2)],'y':_0x331dde[_0x54c141(0x250)]},this[_0x54c141(0x23a)]=_0x51d068,ImageProcessing[_0x54c141(0x22b)](_0x331dde,_0x51d068['x'],_0x51d068['y'],_0x51d068['w'],_0x51d068['h'],this[_0x54c141(0x2f8)]['width'],this[_0x54c141(0x2f8)][_0x54c141(0x250)]);}[_0x3e4a2e(0x2ea)](_0x948c1,_0x36ed85){const _0x3461ef=_0x3e4a2e;let _0x345712=0x1;switch(_0x36ed85){case'x':_0x345712=this[_0x3461ef(0x23a)]['w']/this['inputSize'][_0x3461ef(0x2d2)];return _0x948c1*_0x345712+this[_0x3461ef(0x23a)]['x'];case'y':_0x345712=this[_0x3461ef(0x23a)]['h']/this[_0x3461ef(0x2f8)][_0x3461ef(0x250)];return _0x948c1*_0x345712+this[_0x3461ef(0x23a)]['y'];case _0x3461ef(0x2d2):_0x345712=this[_0x3461ef(0x23a)]['w']/this[_0x3461ef(0x2f8)][_0x3461ef(0x2d2)];return _0x948c1*_0x345712;case _0x3461ef(0x250):_0x345712=this[_0x3461ef(0x23a)]['h']/this[_0x3461ef(0x2f8)][_0x3461ef(0x250)];return _0x948c1*_0x345712;}}[_0x3e4a2e(0x21f)](_0x2b4401,_0x48b77c=![]){const _0x381fe0=_0x3e4a2e;let _0x203220=[],_0x57c44d=null,_0x37e9dc=![];for(let _0x2313a5 in _0x2b4401){_0x57c44d=_0x2b4401[_0x2313a5];_0x48b77c&&(_0x57c44d[_0x381fe0(0x292)][0x0]=this[_0x381fe0(0x2ea)](_0x57c44d[_0x381fe0(0x292)][0x0],'x'),_0x57c44d[_0x381fe0(0x292)][0x1]=this[_0x381fe0(0x2ea)](_0x57c44d[_0x381fe0(0x292)][0x1],'y'),_0x57c44d[_0x381fe0(0x292)][0x2]=this[_0x381fe0(0x2ea)](_0x57c44d[_0x381fe0(0x292)][0x2],_0x381fe0(0x2d2)),_0x57c44d[_0x381fe0(0x292)][0x3]=this[_0x381fe0(0x2ea)](_0x57c44d[_0x381fe0(0x292)][0x3],_0x381fe0(0x250)));_0x37e9dc=![];for(let _0x4b7a40 in _0x203220){if(_0x203220[_0x4b7a40][_0x381fe0(0x2ef)]===_0x57c44d['class']){let _0x2dcc8c=_0x203220[_0x4b7a40],_0x1d9344=_0x57c44d,_0x4acc38=0x0,_0x392586=0x0;if(_0x1d9344[_0x381fe0(0x292)][0x0]>_0x2dcc8c['bbox'][0x0]&&_0x1d9344[_0x381fe0(0x292)][0x0]<_0x2dcc8c[_0x381fe0(0x292)][0x0]+_0x2dcc8c['bbox'][0x2])_0x4acc38=_0x2dcc8c[_0x381fe0(0x292)][0x0]+_0x2dcc8c[_0x381fe0(0x292)][0x2]-_0x1d9344[_0x381fe0(0x292)][0x0],_0x392586=_0x4acc38/_0x1d9344['bbox'][0x2];else _0x2dcc8c[_0x381fe0(0x292)][0x0]>_0x1d9344['bbox'][0x0]&&_0x2dcc8c[_0x381fe0(0x292)][0x0]<_0x1d9344[_0x381fe0(0x292)][0x0]+_0x1d9344[_0x381fe0(0x292)][0x2]&&(_0x4acc38=_0x1d9344[_0x381fe0(0x292)][0x0]+_0x1d9344[_0x381fe0(0x292)][0x2]-_0x2dcc8c['bbox'][0x0],_0x392586=_0x4acc38/_0x2dcc8c['bbox'][0x2]);let _0x42c33d=0x0,_0x915558=0x0;if(_0x1d9344[_0x381fe0(0x292)][0x1]>_0x2dcc8c[_0x381fe0(0x292)][0x1]&&_0x1d9344[_0x381fe0(0x292)][0x1]<_0x2dcc8c[_0x381fe0(0x292)][0x1]+_0x2dcc8c[_0x381fe0(0x292)][0x3])_0x42c33d=_0x2dcc8c['bbox'][0x1]+_0x2dcc8c[_0x381fe0(0x292)][0x3]-_0x1d9344['bbox'][0x1],_0x915558=_0x4acc38/_0x1d9344['bbox'][0x3];else _0x2dcc8c[_0x381fe0(0x292)][0x1]>_0x1d9344['bbox'][0x1]&&_0x2dcc8c[_0x381fe0(0x292)][0x1]<_0x1d9344[_0x381fe0(0x292)][0x1]+_0x1d9344['bbox'][0x3]&&(_0x42c33d=_0x1d9344[_0x381fe0(0x292)][0x1]+_0x1d9344[_0x381fe0(0x292)][0x3]-_0x2dcc8c['bbox'][0x1],_0x915558=_0x4acc38/_0x2dcc8c[_0x381fe0(0x292)][0x3]);_0x392586>0.6&&_0x915558>0.6&&(_0x37e9dc=!![],_0x1d9344[_0x381fe0(0x300)]>_0x2dcc8c['score']&&(_0x203220[_0x4b7a40]=_0x57c44d));}}!_0x37e9dc&&_0x203220['push'](_0x2b4401[_0x2313a5]);}if(this[_0x381fe0(0x205)][_0x381fe0(0x18a)]&&_0x203220[_0x381fe0(0x1c0)]>0x0){let _0x173748=0x0,_0x433d9c=0x0;for(let _0xb290b3 in _0x203220){_0x203220[_0xb290b3][_0x381fe0(0x300)]>_0x173748&&(_0x173748=_0x203220[_0xb290b3][_0x381fe0(0x300)],_0x433d9c=_0xb290b3);}return[_0x203220[_0x433d9c]];}return _0x203220;}['reset'](){const _0x305849=_0x3e4a2e;this[_0x305849(0x19b)]=null;}};class MRZReader{constructor(_0x44e382={}){const _0x3539b2=_0x3e4a2e;this[_0x3539b2(0x205)]={'server':!![],'url':null,'host':null,'checkURI':null},this[_0x3539b2(0x205)]=deepMerge(this[_0x3539b2(0x205)],_0x44e382);if(this[_0x3539b2(0x205)][_0x3539b2(0x319)]==null)this[_0x3539b2(0x205)][_0x3539b2(0x319)]=_0x3539b2(0x273);this[_0x3539b2(0x17e)]=![],this[_0x3539b2(0x362)]();}[_0x3e4a2e(0x362)](){const _0x3c1946=_0x3e4a2e;if(!this['options'][_0x3c1946(0x1ef)]){}}[_0x3e4a2e(0x1b1)](){const _0x57604f=_0x3e4a2e;if(this[_0x57604f(0x205)][_0x57604f(0x1ef)])this[_0x57604f(0x17e)]=!![];else{}}[_0x3e4a2e(0x16f)](_0x413e37,_0x471747,_0x33cdff){const _0x46bf2c=_0x3e4a2e;if(this[_0x46bf2c(0x205)][_0x46bf2c(0x1ef)])this['recognizeGlobal'](_0x413e37,_0x471747,_0x33cdff);else{}}[_0x3e4a2e(0x1d7)](_0x51a900,_0x72e889,_0x1e2050){const _0x14d352=_0x3e4a2e;let _0x5cfa30=ImageProcessing[_0x14d352(0x2a5)](_0x51a900,_0x14d352(0x188),0.9),_0x5ac15c=new FormData();_0x5ac15c[_0x14d352(0x313)](_0x14d352(0x24f),_0x5cfa30),_0x5ac15c[_0x14d352(0x313)]('tid',_0x72e889);let _0x404bc4=this['options'][_0x14d352(0x26d)]!=null?StringExtra[_0x14d352(0x1b7)](this['options'][_0x14d352(0x26d)]):'',_0x18d9bc=this[_0x14d352(0x205)][_0x14d352(0x1f7)]!=null?this[_0x14d352(0x205)]['url']:_0x404bc4+'/'+this[_0x14d352(0x205)][_0x14d352(0x319)];fetch(_0x18d9bc,{'method':'POST','body':_0x5ac15c})[_0x14d352(0x190)](_0xab4dd6=>_0xab4dd6[_0x14d352(0x34e)]())[_0x14d352(0x190)](_0x85d4e5=>{const _0x5bc937=_0x14d352;helper_logger[_0x5bc937(0x31e)]()['log'](_0x5bc937(0x1d4),_0x85d4e5);let _0xbd2b98=MRZReader[_0x5bc937(0x2c6)](_0x85d4e5[_0x5bc937(0x1ce)]);_0x85d4e5[_0x5bc937(0x251)]===![]&&(_0xbd2b98[_0x5bc937(0x1c9)]=null),typeof _0x1e2050==='function'&&_0x1e2050(_0xbd2b98);})[_0x14d352(0x2c0)](_0x2f0b7f=>{const _0x6ac2c4=_0x14d352;console[_0x6ac2c4(0x1ea)](_0x6ac2c4(0x211),_0x2f0b7f),typeof _0x1e2050===_0x6ac2c4(0x2a3)&&_0x1e2050(null);});}[_0x3e4a2e(0x241)](_0x2781ab,_0x28ce88){}['parse'](_0x3c3fc8){const _0x313de8=_0x3e4a2e;let _0x265c76={'type':null,'text':_0x3c3fc8,'object':null};if(_0x265c76[_0x313de8(0x2fb)]>0x4b){const _0x42cb1c=_0x3c3fc8[_0x313de8(0x1da)](0x0,0x3);if(_0x42cb1c[_0x313de8(0x198)]('I<')||_0x42cb1c[_0x313de8(0x198)]('1<'))_0x265c76[_0x313de8(0x1c9)]='I';else(_0x42cb1c['includes']('P<')||_0x42cb1c[_0x313de8(0x198)]('PC'))&&(_0x265c76['type']='P');}return _0x265c76;}static['parseObject'](_0x475c60){const _0x44ca5f=_0x3e4a2e;let _0x80c7da={'type':null,'text':_0x475c60[_0x44ca5f(0x35f)][_0x44ca5f(0x245)](''),'object':_0x475c60};if(_0x80c7da[_0x44ca5f(0x1f6)][_0x44ca5f(0x1c0)]>0x4b){const _0x49b2cf=_0x475c60['Type'];if(_0x49b2cf[_0x44ca5f(0x198)]('I<')||_0x49b2cf['includes']('1<'))_0x80c7da['type']='I';else(_0x49b2cf[_0x44ca5f(0x198)]('P<')||_0x49b2cf[_0x44ca5f(0x198)]('PC'))&&(_0x80c7da[_0x44ca5f(0x1c9)]='P');}return _0x80c7da;}};const DCScanError={'NO_CARD':'nocard','MANY_CARDS':'manycards','LOW_LIGHT':'lowlight','HIGH_LIGHT':_0x3e4a2e(0x2e5),'TOO_SMALL':_0x3e4a2e(0x2ff)},DCScanDocType={'NONE':_0x3e4a2e(0x204),'ID':'id','PASSPORT':_0x3e4a2e(0x1cb)},DCScanDocFaces={'NONE':_0x3e4a2e(0x204),'ID_FRONT':'id_front','ID_BACK':'id_back','PASS_FRONT':_0x3e4a2e(0x2b2)},DCScanCommand={'NONE':_0x3e4a2e(0x204),'SHOW':_0x3e4a2e(0x1fa),'ID_BACK':_0x3e4a2e(0x1e8),'FINISH':_0x3e4a2e(0x33a)},DCScanSteps={'NONE':_0x3e4a2e(0x204),'SCANNING':_0x3e4a2e(0x2bb),'FINISH':_0x3e4a2e(0x33a)};class ScanAnalyser{constructor(_0x3796d9,_0x37b18a={}){const _0x596954=_0x3e4a2e;this['canvas']=_0x3796d9,this[_0x596954(0x205)]={'host':null,'headers':null,'mrzOptions':null,'detector':null,'video':null,'area':{'x':0x0,'y':0x0,'width':0x0,'height':0x0},'detectTime':0x64,'useServerSide':null,'onCardDetected':null,'onFaceDetected':null,'onMRZDetected':null,'onDetected':null,'onError':null,'onFinished':null,'onCommand':null,'onCommandResult':null,'onStepChanged':null,'mirrored':!![],'delay':0x1f4,'serverDelay':0x1f4,'cardMinSize':{'width':0x46,'height':0x37}},this[_0x596954(0x205)]=deepMerge(this[_0x596954(0x205)],_0x37b18a),this['stream']=null,this[_0x596954(0x276)]=![],this[_0x596954(0x33b)]=null,this[_0x596954(0x1b5)]=DCScanSteps[_0x596954(0x1f3)],this['curScan']=null,this['scanned']={},this[_0x596954(0x1ee)]={},this['curFrame']=null,this[_0x596954(0x260)]=null,this[_0x596954(0x18d)]=null,this[_0x596954(0x1ec)]=null,this['finishTime']=null,this['delay']=this[_0x596954(0x205)][_0x596954(0x1b0)],this[_0x596954(0x367)]=null,this[_0x596954(0x205)][_0x596954(0x322)]&&(this[_0x596954(0x1b0)]=this[_0x596954(0x205)][_0x596954(0x272)]),this['detector']=new CardDetector({'mirrored':this[_0x596954(0x205)][_0x596954(0x323)],'single':!![],'serverSide':this['options'][_0x596954(0x322)],'host':this[_0x596954(0x205)]['host'],'headers':this[_0x596954(0x205)]['headers']}),this[_0x596954(0x354)]=new MRZReader({'host':this[_0x596954(0x205)][_0x596954(0x26d)],'url':this['options']['mrzOptions']?this['options']['mrzOptions'][_0x596954(0x1f7)]||null:null}),this['cc']=null,this[_0x596954(0x2ec)](),!this['options']['useServerSide']&&this[_0x596954(0x18b)]();}[_0x3e4a2e(0x25f)](){const _0x3bed5a=_0x3e4a2e;this[_0x3bed5a(0x1d6)][_0x3bed5a(0x1b1)](),this[_0x3bed5a(0x354)][_0x3bed5a(0x1b1)](),this[_0x3bed5a(0x2af)]!=null&&ImageProcessing[_0x3bed5a(0x1e7)](_0x3bed5a(0x1e2))[_0x3bed5a(0x190)](_0x4b1448=>{const _0x234524=_0x3bed5a;this[_0x234524(0x2af)][_0x234524(0x20d)](_0x234524(0x316),_0x4b1448);});}[_0x3e4a2e(0x18b)](){const _0x3c95b6=_0x3e4a2e;this[_0x3c95b6(0x2af)]=stream[_0x3c95b6(0x2b8)]('worker'),this[_0x3c95b6(0x2af)]['on'](_0x3c95b6(0x2b3),_0x5ba362=>{const _0x574a3b=_0x3c95b6;helper_logger[_0x574a3b(0x31e)]()[_0x574a3b(0x1e6)](_0x574a3b(0x275),_0x5ba362),this['step']===DCScanSteps['SCANNING']&&this[_0x574a3b(0x2b7)]!=null&&this[_0x574a3b(0x2cb)](_0x5ba362);});}[_0x3e4a2e(0x253)](_0x43d90f,_0xf5ab9b){const _0x134266=_0x3e4a2e;this[_0x134266(0x1d6)][_0x134266(0x27c)]()&&this['detector'][_0x134266(0x1bc)](_0x43d90f,_0x1b86f9=>{const _0x36e42a=_0x134266;typeof _0xf5ab9b===_0x36e42a(0x2a3)&&_0xf5ab9b(_0x1b86f9);});}[_0x3e4a2e(0x170)](){const _0x228482=_0x3e4a2e;if(!this[_0x228482(0x1d6)][_0x228482(0x27c)]()||this[_0x228482(0x367)]==null)return;else{let _0x5c1a8e=new Date()[_0x228482(0x337)]();if(this[_0x228482(0x1b5)]===DCScanSteps[_0x228482(0x1f3)]&&_0x5c1a8e-this['startTime']>0x3e8)this[_0x228482(0x1b5)]=DCScanSteps[_0x228482(0x224)],this[_0x228482(0x29e)](DCScanCommand[_0x228482(0x2b0)]);else{if(this[_0x228482(0x1b5)]===DCScanSteps['NONE'])return;else{if(this['step']===DCScanCommand[_0x228482(0x249)]){this[_0x228482(0x328)]!=null&&_0x5c1a8e-this[_0x228482(0x328)]>0x7d0&&(this['finish'](),this[_0x228482(0x328)]=null);return;}}}}!this[_0x228482(0x276)]&&(this['curScan']=null,this['scanned']={'card':![],'face':![],'mrz':![]},this[_0x228482(0x276)]=!![],this[_0x228482(0x260)]=this[_0x228482(0x25c)],this[_0x228482(0x22a)]=ImageProcessing['canvasToImageData'](this[_0x228482(0x260)]),this[_0x228482(0x1d6)]['detect'](this['actualCanvas'],this[_0x228482(0x367)],_0x25e5f9=>{const _0x1651d5=_0x228482;this[_0x1651d5(0x1b9)](_0x25e5f9);}));}[_0x3e4a2e(0x1b9)](_0x2ce173){const _0x4d1ce3=_0x3e4a2e;let _0x2c221c=_0x2ce173!=null&&_0x2ce173[_0x4d1ce3(0x1c0)]>0x0?_0x2ce173[0x0]:null,_0x1eb5ad=null;this[_0x4d1ce3(0x1fc)]['card']=!![];let _0xd98817=_0x2c221c!=null?this[_0x4d1ce3(0x29d)](_0x2c221c[_0x4d1ce3(0x292)]):![];_0x2c221c!=null&&!_0xd98817&&this[_0x4d1ce3(0x2d3)](DCScanError[_0x4d1ce3(0x329)]);if(_0x2c221c!=null&&_0xd98817===!![]){helper_logger[_0x4d1ce3(0x31e)]()[_0x4d1ce3(0x1e6)](_0x4d1ce3(0x257),_0x2ce173);let _0x4892e1={'docType':this[_0x4d1ce3(0x189)](_0x2c221c['class']),'docFace':this['defineScanFace'](_0x2c221c[_0x4d1ce3(0x2ef)]),'card':_0x2c221c,'face':null,'mrz':null,'image':null};this[_0x4d1ce3(0x2b7)]=_0x4892e1;let _0x3d6280=ImageProcessing[_0x4d1ce3(0x267)](this[_0x4d1ce3(0x22a)]);_0x1eb5ad=ImageProcessing[_0x4d1ce3(0x355)](_0x3d6280,_0x2c221c['bbox'][0x0],_0x2c221c[_0x4d1ce3(0x292)][0x1],_0x2c221c[_0x4d1ce3(0x292)][0x2],_0x2c221c['bbox'][0x3]),_0x4892e1[_0x4d1ce3(0x24f)]=_0x1eb5ad[_0x4d1ce3(0x261)](_0x4d1ce3(0x188),0.9),this[_0x4d1ce3(0x18d)]=_0x1eb5ad;if(this[_0x4d1ce3(0x1ee)][_0x4d1ce3(0x346)][_0x4d1ce3(0x1c0)]===0x0&&(_0x4892e1['docFace']===DCScanDocFaces[_0x4d1ce3(0x24b)]||_0x4892e1[_0x4d1ce3(0x2e0)]===DCScanDocFaces[_0x4d1ce3(0x182)])){_0x2c221c[_0x4d1ce3(0x32b)]===undefined||_0x2c221c[_0x4d1ce3(0x32b)]==null?this[_0x4d1ce3(0x2af)][_0x4d1ce3(0x20d)](_0x4d1ce3(0x316),_0x1eb5ad):this[_0x4d1ce3(0x2cb)]([_0x2c221c[_0x4d1ce3(0x32b)]]);if(_0x4892e1[_0x4d1ce3(0x2e0)]===DCScanDocFaces['PASS_FRONT']){let _0x3ee779=_0x1eb5ad[_0x4d1ce3(0x250)]*0.7,_0x5db596=ImageProcessing[_0x4d1ce3(0x355)](_0x1eb5ad,0x0,_0x3ee779,_0x1eb5ad[_0x4d1ce3(0x2d2)],_0x1eb5ad[_0x4d1ce3(0x250)]-_0x3ee779);if(_0x2c221c[_0x4d1ce3(0x354)]===undefined||_0x2c221c[_0x4d1ce3(0x354)]==null){let _0xd886ba=ImageProcessing[_0x4d1ce3(0x210)](_0x5db596);_0xd886ba>0x5?this['mrz'][_0x4d1ce3(0x16f)](_0x5db596,this[_0x4d1ce3(0x367)],_0x54c919=>{const _0x4c04e9=_0x4d1ce3;this[_0x4c04e9(0x2bf)](_0x54c919);}):this[_0x4d1ce3(0x19f)](this[_0x4d1ce3(0x1b0)]);}else this['onMRZDetected'](_0x2c221c['mrz']);}else this[_0x4d1ce3(0x1fc)]['mrz']=!![];}else{if(this[_0x4d1ce3(0x1ee)][_0x4d1ce3(0x346)][_0x4d1ce3(0x1c0)]>0x0&&this[_0x4d1ce3(0x1ee)][_0x4d1ce3(0x2b5)]===DCScanDocType['ID']&&_0x4892e1['docFace']===DCScanDocFaces[_0x4d1ce3(0x194)]){let _0x3a89e4=_0x1eb5ad['height']*0.6,_0x1fcb90=ImageProcessing[_0x4d1ce3(0x355)](_0x1eb5ad,0x0,_0x3a89e4,_0x1eb5ad[_0x4d1ce3(0x2d2)],_0x1eb5ad['height']-_0x3a89e4);if(_0x2c221c['mrz']===undefined||_0x2c221c['mrz']==null){let _0x5e9113=ImageProcessing['getLaplacianVariance'](_0x1fcb90,0xa);_0x5e9113>0xa?this[_0x4d1ce3(0x354)][_0x4d1ce3(0x16f)](_0x1fcb90,this['tID'],_0x51663c=>{const _0x325d3f=_0x4d1ce3;this[_0x325d3f(0x2bf)](_0x51663c);}):this['unlock'](this['delay']);}else this[_0x4d1ce3(0x2bf)](_0x2c221c[_0x4d1ce3(0x354)]);this[_0x4d1ce3(0x1fc)]['face']=!![];}else this[_0x4d1ce3(0x19f)](this[_0x4d1ce3(0x1b0)]);}this[_0x4d1ce3(0x1dc)](_0x2ce173),this[_0x4d1ce3(0x2c7)]();}else this[_0x4d1ce3(0x1dc)]([]),this[_0x4d1ce3(0x30c)]([]),this[_0x4d1ce3(0x19f)](this[_0x4d1ce3(0x1b0)]);}[_0x3e4a2e(0x29d)](_0x391d13){const _0x4f3994=_0x3e4a2e;let _0x89ab59=this[_0x4f3994(0x260)]['width'],_0xbac7f0=this[_0x4f3994(0x260)][_0x4f3994(0x250)],_0x179166=this[_0x4f3994(0x205)]['cardMinSize'];if(_0x391d13!=null&&_0x391d13['length']>=0x4){if(_0x391d13[0x2]/_0x89ab59*0x64>_0x179166[_0x4f3994(0x2d2)]||_0x391d13[0x3]/_0xbac7f0*0x64>_0x179166['height'])return!![];}return![];}['onFaceDetected'](_0x3d73f8){const _0x379202=_0x3e4a2e;helper_logger[_0x379202(0x31e)]()[_0x379202(0x1e6)]('onFaceDetected',_0x3d73f8),this[_0x379202(0x1fc)][_0x379202(0x32b)]=!![];if(this[_0x379202(0x2b7)]!=null){this[_0x379202(0x2b7)][_0x379202(0x32b)]=null;if(_0x3d73f8[_0x379202(0x1c0)]>0x0){let _0x5e970d=ImageProcessing[_0x379202(0x355)](this[_0x379202(0x18d)],_0x3d73f8[0x0]['x'],_0x3d73f8[0x0]['y'],_0x3d73f8[0x0][_0x379202(0x2d2)],_0x3d73f8[0x0][_0x379202(0x250)]),_0x302792=ImageProcessing[_0x379202(0x210)](_0x5e970d,0xa);helper_logger[_0x379202(0x31e)]()['log'](_0x379202(0x2e2),_0x302792),_0x302792>0xa&&(this[_0x379202(0x2b7)][_0x379202(0x32b)]=_0x3d73f8);}typeof this[_0x379202(0x205)][_0x379202(0x2cb)]==='function'&&this['options'][_0x379202(0x2cb)](_0x3d73f8),this['checkScanResult']();}}[_0x3e4a2e(0x2bf)](_0x46444b){const _0xae5dc2=_0x3e4a2e;helper_logger[_0xae5dc2(0x31e)]()['log'](_0xae5dc2(0x2bf),_0x46444b),this[_0xae5dc2(0x1fc)][_0xae5dc2(0x354)]=!![];if(this[_0xae5dc2(0x2b7)]==null)return;if(_0x46444b!=null&&_0x46444b[_0xae5dc2(0x203)]!=null&&_0x46444b[_0xae5dc2(0x203)]['Valid']===!![])this[_0xae5dc2(0x2b7)][_0xae5dc2(0x354)]=_0x46444b;else _0x46444b!=null&&_0x46444b['Valid']===!![]?this[_0xae5dc2(0x2b7)]['mrz']=MRZReader[_0xae5dc2(0x2c6)](_0x46444b):this['curScan']['mrz']=null;typeof this[_0xae5dc2(0x205)]['onMRZDetected']===_0xae5dc2(0x2a3)&&this['options'][_0xae5dc2(0x2bf)](_0x46444b),this['checkScanResult']();}[_0x3e4a2e(0x2c7)](){const _0x43d83b=_0x3e4a2e;if(!this['isAllScanned']())return;let _0x5915f5=this[_0x43d83b(0x2b7)],_0x268ded=![];if(this[_0x43d83b(0x1ee)][_0x43d83b(0x346)]['length']===0x0&&(_0x5915f5[_0x43d83b(0x2e0)]===DCScanDocFaces[_0x43d83b(0x24b)]||_0x5915f5[_0x43d83b(0x2e0)]===DCScanDocFaces[_0x43d83b(0x182)]))_0x5915f5[_0x43d83b(0x2e0)]===DCScanDocFaces['ID_FRONT']?_0x5915f5['card']!=null&&_0x5915f5['face']!=null&&_0x5915f5[_0x43d83b(0x32b)][_0x43d83b(0x1c0)]===0x1&&(this[_0x43d83b(0x1ee)][_0x43d83b(0x346)]['push'](_0x5915f5),this[_0x43d83b(0x1ee)][_0x43d83b(0x2b5)]=DCScanDocType['ID'],this[_0x43d83b(0x1ee)]['status']=![],this[_0x43d83b(0x30c)](this[_0x43d83b(0x2b7)]),this[_0x43d83b(0x29e)](DCScanCommand[_0x43d83b(0x194)]),_0x268ded=!![],this[_0x43d83b(0x19f)](this[_0x43d83b(0x1b0)])):_0x5915f5[_0x43d83b(0x1c2)]!=null&&_0x5915f5[_0x43d83b(0x32b)]!=null&&_0x5915f5[_0x43d83b(0x354)]!=null&&_0x5915f5[_0x43d83b(0x354)][_0x43d83b(0x1c9)]!=null&&(this['result'][_0x43d83b(0x346)][_0x43d83b(0x360)](_0x5915f5),this[_0x43d83b(0x1ee)][_0x43d83b(0x2b5)]=DCScanDocType[_0x43d83b(0x1aa)],this[_0x43d83b(0x1ee)][_0x43d83b(0x2f6)]=!![],this[_0x43d83b(0x30c)](this[_0x43d83b(0x2b7)]),this['changeStep'](DCScanSteps[_0x43d83b(0x249)]),this[_0x43d83b(0x328)]=new Date()[_0x43d83b(0x337)](),_0x268ded=!![]);else this[_0x43d83b(0x1ee)][_0x43d83b(0x346)]['length']===0x1&&this['result'][_0x43d83b(0x2b5)]===DCScanDocType['ID']&&_0x5915f5[_0x43d83b(0x2e0)]===DCScanDocFaces[_0x43d83b(0x194)]&&(_0x5915f5[_0x43d83b(0x1c2)]!=null&&_0x5915f5[_0x43d83b(0x354)]!=null&&_0x5915f5['mrz']['type']!=null&&(this['result'][_0x43d83b(0x346)][_0x43d83b(0x360)](_0x5915f5),this[_0x43d83b(0x1ee)][_0x43d83b(0x2f6)]=!![],this[_0x43d83b(0x30c)](this[_0x43d83b(0x2b7)]),this['changeStep'](DCScanSteps[_0x43d83b(0x249)]),this[_0x43d83b(0x328)]=new Date()['getTime'](),_0x268ded=!![]));!_0x268ded&&this[_0x43d83b(0x1fc)]['card']&&this[_0x43d83b(0x1fc)][_0x43d83b(0x32b)]&&this[_0x43d83b(0x1fc)][_0x43d83b(0x354)]&&this[_0x43d83b(0x19f)](this[_0x43d83b(0x1b0)]);}[_0x3e4a2e(0x2e8)](){const _0x108162=_0x3e4a2e;for(let _0x374731 in this[_0x108162(0x1fc)]){if(this['scanned'][_0x374731]!==!![])return![];}return!![];}[_0x3e4a2e(0x1e0)](_0x34fc47){const _0x2c211=_0x3e4a2e;this['step']!==_0x34fc47&&(this[_0x2c211(0x1b5)]=_0x34fc47,typeof this['options'][_0x2c211(0x1fb)]==_0x2c211(0x2a3)&&this[_0x2c211(0x205)]['onStepChanged'](_0x34fc47));}[_0x3e4a2e(0x1dc)](_0x19ebd6){const _0x319d87=_0x3e4a2e;_0x19ebd6!==null&&typeof this[_0x319d87(0x205)][_0x319d87(0x1b9)]==='function'&&this[_0x319d87(0x205)][_0x319d87(0x1b9)](_0x19ebd6);}[_0x3e4a2e(0x30c)](_0x3bb864){const _0x22233b=_0x3e4a2e;typeof this[_0x22233b(0x205)]['onDetected']===_0x22233b(0x2a3)&&this['options'][_0x22233b(0x366)](_0x3bb864);}[_0x3e4a2e(0x2d3)](_0x1073a7){const _0x81546d=_0x3e4a2e;typeof this[_0x81546d(0x205)][_0x81546d(0x34d)]===_0x81546d(0x2a3)&&this[_0x81546d(0x205)][_0x81546d(0x34d)](_0x1073a7);}[_0x3e4a2e(0x207)](){const _0x685695=_0x3e4a2e;return this[_0x685695(0x1b5)];}[_0x3e4a2e(0x19f)](_0x22e8cc=null){const _0x1191a2=_0x3e4a2e;_0x22e8cc=_0x22e8cc==null?this[_0x1191a2(0x1b0)]:_0x22e8cc,clearTimeout(this[_0x1191a2(0x33b)]),this[_0x1191a2(0x33b)]=setTimeout(()=>{const _0x585118=_0x1191a2;this[_0x585118(0x276)]=![];},_0x22e8cc);}[_0x3e4a2e(0x2ec)](){const _0x565a51=_0x3e4a2e;this[_0x565a51(0x1b5)]=DCScanCommand[_0x565a51(0x1f3)],this['result']={'status':![],'docType':DCScanDocType['NONE'],'scans':[],'tID':null},this['curScan']=null,this[_0x565a51(0x1fc)]={},this[_0x565a51(0x276)]=![],this[_0x565a51(0x18d)]=null,this[_0x565a51(0x367)]=null,this[_0x565a51(0x1d6)]['reset']();}['start'](){const _0x1026f8=_0x3e4a2e;this[_0x1026f8(0x1b5)]=DCScanSteps[_0x1026f8(0x1f3)],this[_0x1026f8(0x29e)](DCScanCommand['NONE']),this[_0x1026f8(0x1ec)]=new Date()[_0x1026f8(0x337)](),!this[_0x1026f8(0x1d6)][_0x1026f8(0x205)][_0x1026f8(0x305)]?(this[_0x1026f8(0x367)]=String(this[_0x1026f8(0x1ec)]+Math['round'](Math[_0x1026f8(0x343)]()*0x186a0)),this[_0x1026f8(0x1ee)][_0x1026f8(0x367)]=this[_0x1026f8(0x367)]):this[_0x1026f8(0x1d6)][_0x1026f8(0x209)]((_0x25fb55,_0x3b3cd0)=>{const _0x483389=_0x1026f8;this['tID']=_0x3b3cd0,this[_0x483389(0x1ee)][_0x483389(0x367)]=this['tID'];});}[_0x3e4a2e(0x33a)](){const _0x27db3f=_0x3e4a2e;this[_0x27db3f(0x29e)](DCScanCommand['FINISH']),typeof this[_0x27db3f(0x205)]['onFinished']===_0x27db3f(0x2a3)&&this[_0x27db3f(0x205)][_0x27db3f(0x301)](this['result']);}[_0x3e4a2e(0x29e)](_0x7a735e){const _0x5a86d2=_0x3e4a2e;typeof this[_0x5a86d2(0x205)][_0x5a86d2(0x2dc)]===_0x5a86d2(0x2a3)&&this[_0x5a86d2(0x205)][_0x5a86d2(0x2dc)](_0x7a735e);}[_0x3e4a2e(0x189)](_0x20428b){const _0x694e80=_0x3e4a2e;switch(_0x20428b){case _0x694e80(0x33c):case'id_back':return DCScanDocType['ID'];case _0x694e80(0x217):return DCScanDocType['PASSPORT'];default:return DCScanDocType['NONE'];}}[_0x3e4a2e(0x2ae)](_0x442846){const _0x943691=_0x3e4a2e;switch(_0x442846){case _0x943691(0x33c):return DCScanDocFaces[_0x943691(0x24b)];case _0x943691(0x1e8):return DCScanDocFaces[_0x943691(0x194)];case'pass_main':return DCScanDocFaces[_0x943691(0x182)];default:return DCScanDocFaces[_0x943691(0x1f3)];}}['getStep'](){return this['step'];}};class vislayer_VisualLayer{constructor(_0x2a4ca0,_0x678173={}){const _0x3ee154=_0x3e4a2e;this[_0x3ee154(0x25c)]=_0x2a4ca0,this[_0x3ee154(0x205)]={'srcDim':{'k':0x1,'dx':0x0,'dy':0x0,'dw':0x0,'dh':0x0},'mirrored':!![]},this['options']=deepMerge(this[_0x3ee154(0x205)],_0x678173),this['cc']=new CoordConverter(this[_0x3ee154(0x205)][_0x3ee154(0x358)]);}[_0x3e4a2e(0x2dd)](_0x30b479,_0x2a1e20,_0x39c9fa){}[_0x3e4a2e(0x274)](){}[_0x3e4a2e(0x297)](_0x46a919){const _0x196317=_0x3e4a2e;let _0x20743c=_0x46a919['width']+0x14,_0x4dd487=_0x46a919['height']+0x14,_0x5cb30d=(this[_0x196317(0x25c)][_0x196317(0x2d2)]-_0x20743c*this['canvas'][_0x196317(0x2d2)]/0x64)/0x2,_0xf4d85c=(this[_0x196317(0x25c)][_0x196317(0x250)]-_0x4dd487*this[_0x196317(0x25c)][_0x196317(0x250)]/0x64)/0x2,_0x56391f=this['canvas'][_0x196317(0x339)]('2d');_0x56391f[_0x196317(0x21b)](),_0x56391f[_0x196317(0x32d)](),_0x56391f[_0x196317(0x215)]='3',_0x56391f[_0x196317(0x244)]=_0x196317(0x1d3),_0x56391f[_0x196317(0x294)](_0x5cb30d,_0xf4d85c,this[_0x196317(0x25c)][_0x196317(0x2d2)]-_0x5cb30d*0x2,this[_0x196317(0x25c)][_0x196317(0x250)]-_0xf4d85c*0x2),_0x56391f[_0x196317(0x34b)](),_0x56391f[_0x196317(0x226)](),_0x56391f[_0x196317(0x1b6)]();}[_0x3e4a2e(0x1bd)](_0xd2de4d,_0x53d2e1='green',_0x16d8f4=''){const _0x2ed3ec=_0x3e4a2e;let _0x155b54=this[_0x2ed3ec(0x25c)][_0x2ed3ec(0x339)]('2d'),_0x1e771f=null,_0x46b560=null,_0xe3b5f4=null;for(let _0x209e05 in _0xd2de4d){_0xe3b5f4=_0xd2de4d[_0x209e05],this[_0x2ed3ec(0x205)][_0x2ed3ec(0x323)]?_0x1e771f=this[_0x2ed3ec(0x25c)][_0x2ed3ec(0x2d2)]-this['cc']['getCoordX'](_0xe3b5f4[_0x2ed3ec(0x292)][0x0])-this['cc'][_0x2ed3ec(0x252)](_0xe3b5f4[_0x2ed3ec(0x292)][0x2]):_0x1e771f=this['cc'][_0x2ed3ec(0x27f)](_0xe3b5f4['bbox'][0x0]),_0x46b560=this['cc'][_0x2ed3ec(0x255)](_0xe3b5f4[_0x2ed3ec(0x292)][0x1]),_0x155b54[_0x2ed3ec(0x32d)](),_0x155b54['lineWidth']='2',_0x155b54[_0x2ed3ec(0x244)]=_0x53d2e1,_0x155b54[_0x2ed3ec(0x294)](_0x1e771f,_0x46b560,this['cc'][_0x2ed3ec(0x252)](_0xe3b5f4[_0x2ed3ec(0x292)][0x2]),this['cc'][_0x2ed3ec(0x252)](_0xe3b5f4[_0x2ed3ec(0x292)][0x3])),_0x155b54[_0x2ed3ec(0x34b)](),_0x155b54[_0x2ed3ec(0x215)]='0',_0x155b54[_0x2ed3ec(0x1f5)]=_0x53d2e1,_0x155b54[_0x2ed3ec(0x17d)](_0x1e771f-0x1,_0x46b560-0x14,0x96,0x14),_0x155b54[_0x2ed3ec(0x33e)]=_0x2ed3ec(0x2ee),_0x155b54[_0x2ed3ec(0x1f5)]=_0x2ed3ec(0x2d1),_0x155b54['textAlign']='left',_0x155b54[_0x2ed3ec(0x314)](_0xe3b5f4['class']+'\x20'+Number(_0xe3b5f4[_0x2ed3ec(0x300)])[_0x2ed3ec(0x262)](0x2),_0x1e771f+0x5,_0x46b560-0x5),_0x155b54['stroke'](),_0x155b54['font']=_0x2ed3ec(0x285),_0x155b54['fillStyle']=_0x53d2e1,_0x155b54[_0x2ed3ec(0x2e6)]='center',_0x155b54['fillText'](_0x16d8f4,_0x1e771f+this['cc'][_0x2ed3ec(0x252)](_0xe3b5f4[_0x2ed3ec(0x292)][0x2])/0x2,_0x46b560+this['cc'][_0x2ed3ec(0x252)](_0xe3b5f4['bbox'][0x3])/0x2),_0x155b54[_0x2ed3ec(0x226)]();}_0x155b54[_0x2ed3ec(0x1b6)]();}};class ScanWebWorker{constructor(_0x4525c5={}){const _0x503e7d=_0x3e4a2e;this[_0x503e7d(0x243)]=null,this['stream']=null,this[_0x503e7d(0x205)]={'path':null},this[_0x503e7d(0x205)]=deepMerge(this[_0x503e7d(0x205)],_0x4525c5),this['setup']();}[_0x3e4a2e(0x362)](){const _0x535d48=_0x3e4a2e;this[_0x535d48(0x2af)]=stream[_0x535d48(0x2b8)](_0x535d48(0x1a3)),this[_0x535d48(0x2af)]['on'](_0x535d48(0x216),this[_0x535d48(0x216)][_0x535d48(0x32a)](this)),this[_0x535d48(0x2af)]['on']('getCard',this[_0x535d48(0x35c)][_0x535d48(0x32a)](this)),window[_0x535d48(0x2d9)]&&this['options']['path']!=null?(this[_0x535d48(0x243)]=new Worker(this[_0x535d48(0x205)][_0x535d48(0x19a)]),this[_0x535d48(0x243)][_0x535d48(0x23f)]=this[_0x535d48(0x180)][_0x535d48(0x32a)](this)):helper_logger[_0x535d48(0x31e)]()[_0x535d48(0x1e6)](_0x535d48(0x2e3));}['getCard'](_0x1b2bb2){const _0x4720cc=_0x3e4a2e;let _0x359ae8=null;if(_0x1b2bb2 instanceof HTMLCanvasElement)_0x359ae8=ImageProcessing[_0x4720cc(0x34f)](_0x1b2bb2);else _0x1b2bb2 instanceof HTMLImageElement&&(_0x359ae8=ImageProcessing[_0x4720cc(0x1bb)](_0x1b2bb2));this[_0x4720cc(0x243)][_0x4720cc(0x223)]({'type':_0x4720cc(0x179),'action':_0x4720cc(0x35c),'data':_0x359ae8});}[_0x3e4a2e(0x216)](){const _0x3d434e=_0x3e4a2e;this[_0x3d434e(0x243)][_0x3d434e(0x223)]({'type':'scan','action':_0x3d434e(0x216)});}[_0x3e4a2e(0x180)](_0x34d197){const _0x5d3648=_0x3e4a2e;let _0x1cfe15=_0x34d197[_0x5d3648(0x1ce)][_0x5d3648(0x1c9)],_0x84235=_0x34d197[_0x5d3648(0x1ce)]['action'],_0x25a716=_0x34d197[_0x5d3648(0x1ce)]['data'];switch(_0x1cfe15){case _0x5d3648(0x179):this[_0x5d3648(0x2af)][_0x5d3648(0x20d)](_0x5d3648(0x17a),_0x25a716);break;case _0x5d3648(0x1d1):this[_0x5d3648(0x2af)][_0x5d3648(0x20d)]('onScanLoaded',_0x25a716);break;default:break;}}};class DeepScanner{constructor(_0x4fe24e,_0x31ea20={}){const _0x7590bf=_0x3e4a2e;this[_0x7590bf(0x352)]=null,this['canvas']=null,this['camera']=null,this[_0x7590bf(0x175)]={'start':![],'detectInit':![],'analyzeAfterOpen':![]},this[_0x7590bf(0x243)]=null,this[_0x7590bf(0x205)]={'url':null,'headers':null,'src':null,'sourceType':null,'width':0x780,'height':0x438,'onInit':null,'onFrameCaptured':null,'onCardDetected':null,'onDetected':null,'onCommand':null,'sessionTime':0xea60,'detectTime':0x64,'onFinished':null,'mirrored':!![],'scan_worker_path':_0x7590bf(0x31f),'face_worker_path':_0x7590bf(0x193),'testURL':null,'mrzOptions':null,'useServerSide':null,'serverRequestDelay':0x1f4,'detector':{},'camera':{'fillOnMobile':!![],'fill':!![],'cutEdge':!![]}},this[_0x7590bf(0x1db)]=null,this[_0x7590bf(0x2c1)]=null,this['faceWebWorker']=null,this[_0x7590bf(0x2be)]=null,this['lastDetected']=null,this[_0x7590bf(0x200)]=null,this[_0x7590bf(0x246)]=null,this[_0x7590bf(0x332)]=null,this[_0x7590bf(0x1d5)]=DCScanCommand[_0x7590bf(0x1f3)],this[_0x7590bf(0x26a)]=null,this[_0x7590bf(0x31c)]=0x0,this[_0x7590bf(0x205)]=deepMerge(this['options'],_0x31ea20),(this[_0x7590bf(0x205)][_0x7590bf(0x322)]==null&&OSPlus[_0x7590bf(0x324)]()||OSPlus['isSafari']())&&(this[_0x7590bf(0x205)][_0x7590bf(0x322)]=!![]),this[_0x7590bf(0x1ca)](_0x4fe24e),this['setup']();}['initContainer'](_0x413b0c){const _0x4d76eb=_0x3e4a2e;this[_0x4d76eb(0x26c)]=new camera(_0x413b0c,{'src':this[_0x4d76eb(0x205)]['src'],'width':this['options'][_0x4d76eb(0x2d2)],'height':this[_0x4d76eb(0x205)][_0x4d76eb(0x250)],'fill':this[_0x4d76eb(0x205)]['camera'][_0x4d76eb(0x283)],'fillOnMobile':this[_0x4d76eb(0x205)][_0x4d76eb(0x26c)][_0x4d76eb(0x2d8)],'cutEdge':this['options']['camera'][_0x4d76eb(0x303)],'onFrameUpdated':this[_0x4d76eb(0x264)]['bind'](this),'onLoaded':this[_0x4d76eb(0x22d)][_0x4d76eb(0x32a)](this),'onStart':this[_0x4d76eb(0x2a2)][_0x4d76eb(0x32a)](this),'onStop':this['onCameraStop']['bind'](this)}),this['dom']=this[_0x4d76eb(0x26c)][_0x4d76eb(0x352)],this[_0x4d76eb(0x25c)]=this[_0x4d76eb(0x26c)][_0x4d76eb(0x25c)];}[_0x3e4a2e(0x362)](){const _0xad49e=_0x3e4a2e;this['cc']=new CoordConverter(this['camera']['sourceDim']),this[_0xad49e(0x2c1)]=new vislayer_VisualLayer(this[_0xad49e(0x25c)],{'srcDim':this[_0xad49e(0x26c)][_0xad49e(0x361)],'mirrored':this[_0xad49e(0x205)][_0xad49e(0x323)]}),this['analizer']=new ScanAnalyser(this['camera']['__canvas_original'],{'host':this[_0xad49e(0x205)][_0xad49e(0x1f7)],'headers':this[_0xad49e(0x205)][_0xad49e(0x269)],'mrzOptions':this['options'][_0xad49e(0x1f2)],'detector':this[_0xad49e(0x205)][_0xad49e(0x1d6)],'useServerSide':this[_0xad49e(0x205)][_0xad49e(0x322)],'onCommand':this[_0xad49e(0x2dc)][_0xad49e(0x32a)](this),'onCardDetected':this[_0xad49e(0x1b9)][_0xad49e(0x32a)](this),'onDetected':this['onDetected'][_0xad49e(0x32a)](this),'onFinished':this['onFinished'][_0xad49e(0x32a)](this),'onError':this['onError'][_0xad49e(0x32a)](this),'mirrored':this[_0xad49e(0x205)][_0xad49e(0x323)],'serverDelay':this[_0xad49e(0x205)][_0xad49e(0x23e)]});if(!this[_0xad49e(0x205)][_0xad49e(0x322)]){let _0x5a77fd='?rand='+new Date()[_0xad49e(0x337)]();this[_0xad49e(0x270)]=new WebWorker({'path':this[_0xad49e(0x205)][_0xad49e(0x19d)]+_0x5a77fd}),this[_0xad49e(0x2be)]=new ScanWebWorker({'path':this['options'][_0xad49e(0x24c)]+_0x5a77fd});}this['analizer']['cc']=this['cc'],typeof this[_0xad49e(0x205)][_0xad49e(0x350)]=='function'&&this[_0xad49e(0x205)][_0xad49e(0x350)]();}[_0x3e4a2e(0x2b8)](){const _0x359aa5=_0x3e4a2e;!this[_0x359aa5(0x26c)][_0x359aa5(0x23d)]()&&(this[_0x359aa5(0x26c)]['start'](),this['analizer']['init']());}[_0x3e4a2e(0x1cc)](){const _0x326a23=_0x3e4a2e;this['stop'](),this[_0x326a23(0x26c)][_0x326a23(0x287)]();}[_0x3e4a2e(0x22c)](){const _0x23ab4c=_0x3e4a2e;this[_0x23ab4c(0x26a)]=null,this['lastCommand']=DCScanCommand[_0x23ab4c(0x1f3)],!this['camera'][_0x23ab4c(0x23d)]()?(this['open'](),this[_0x23ab4c(0x175)][_0x23ab4c(0x230)]=!![]):(this[_0x23ab4c(0x175)]['start']=!![],this['analizer'][_0x23ab4c(0x22c)]()),this['clear'](),this['sessionTimeCount']=new Date()[_0x23ab4c(0x337)]();}['stop'](){const _0x20886f=_0x3e4a2e;this[_0x20886f(0x175)][_0x20886f(0x22c)]=![],this[_0x20886f(0x175)][_0x20886f(0x230)]=![],this[_0x20886f(0x1db)][_0x20886f(0x2ec)](),this[_0x20886f(0x364)]();}[_0x3e4a2e(0x1a0)](_0x12beb3,_0x53b732){const _0x111fa6=_0x3e4a2e;ImageProcessing['getImageFromURL'](_0x12beb3)[_0x111fa6(0x190)](_0x1f340b=>{const _0x3cf765=_0x111fa6;let _0x158af5=ImageProcessing[_0x3cf765(0x1bb)](_0x1f340b);this[_0x3cf765(0x1db)][_0x3cf765(0x253)](_0x158af5,_0x53b732);});}[_0x3e4a2e(0x364)](){const _0x35b620=_0x3e4a2e;this['lastDetected']=[],this[_0x35b620(0x246)]=null,this[_0x35b620(0x332)]=null,this[_0x35b620(0x200)]=null,this[_0x35b620(0x31c)]=0x0;}[_0x3e4a2e(0x301)](_0x4a46ec){const _0x165429=_0x3e4a2e;this[_0x165429(0x2f4)]=[],this['lastScanned']=null,this[_0x165429(0x2c1)][_0x165429(0x1bd)]([]),this[_0x165429(0x287)](),typeof this[_0x165429(0x205)][_0x165429(0x301)]==_0x165429(0x2a3)&&this['options'][_0x165429(0x301)](_0x4a46ec);}[_0x3e4a2e(0x1b9)](_0x2980d7){const _0x437b7b=_0x3e4a2e;this['lastDetected']=_0x2980d7,this['lastDetectedTime']=new Date()[_0x437b7b(0x337)](),typeof this[_0x437b7b(0x205)]['onCardDetected']===_0x437b7b(0x2a3)&&this[_0x437b7b(0x205)][_0x437b7b(0x1b9)](_0x2980d7);}['onDetected'](_0x1bcde2){const _0x2d3a1a=_0x3e4a2e;this[_0x2d3a1a(0x246)]=_0x1bcde2,this[_0x2d3a1a(0x332)]=new Date()[_0x2d3a1a(0x337)](),helper_logger[_0x2d3a1a(0x31e)]()[_0x2d3a1a(0x1e6)]('onDetect',_0x1bcde2),typeof this['options'][_0x2d3a1a(0x366)]===_0x2d3a1a(0x2a3)&&this[_0x2d3a1a(0x205)][_0x2d3a1a(0x366)](this['lastScanned']);}[_0x3e4a2e(0x2dc)](_0x15a542){const _0x52b334=_0x3e4a2e;this[_0x52b334(0x1d5)]=_0x15a542;if(!this[_0x52b334(0x175)][_0x52b334(0x22c)])return;typeof this[_0x52b334(0x205)]['onCommand']===_0x52b334(0x2a3)&&this[_0x52b334(0x205)][_0x52b334(0x2dc)](_0x15a542);}[_0x3e4a2e(0x26e)](){}[_0x3e4a2e(0x34d)](_0x12f950){const _0x463d94=_0x3e4a2e;switch(_0x12f950){case DCScanError[_0x463d94(0x329)]:helper_logger[_0x463d94(0x31e)]()[_0x463d94(0x1e6)]('Card\x20is\x20too\x20small');break;default:}}[_0x3e4a2e(0x264)](){const _0x468565=_0x3e4a2e;if(this[_0x468565(0x175)]['start']){let _0x1ee2ca=this[_0x468565(0x246)]&&this[_0x468565(0x246)][_0x468565(0x1c2)]?[this['lastScanned']['card']]:[];if(_0x1ee2ca['length']===0x0&&this[_0x468565(0x2f4)]!=null&&this[_0x468565(0x2f4)][_0x468565(0x1c0)]>0x0){_0x1ee2ca=this[_0x468565(0x2f4)];let _0x401190='';if(this[_0x468565(0x1d5)]===DCScanCommand[_0x468565(0x194)]&&this['lastDetected'][0x0][_0x468565(0x2ef)]==='id_back')_0x401190=_0x468565(0x312),this[_0x468565(0x2c1)][_0x468565(0x1bd)](_0x1ee2ca,_0x468565(0x356),_0x401190);else this['lastCommand']===DCScanCommand[_0x468565(0x2b0)]&&this[_0x468565(0x2f4)][0x0][_0x468565(0x2ef)]===_0x468565(0x217)&&(_0x401190=_0x468565(0x312),this['visual'][_0x468565(0x1bd)](_0x1ee2ca,_0x468565(0x356),_0x401190));}else{let _0x4bab6a=this[_0x468565(0x16d)](this['lastScannedTime']);_0x4bab6a!=null&&_0x4bab6a<0x7d0&&this['visual'][_0x468565(0x1bd)](_0x1ee2ca);}this[_0x468565(0x1db)][_0x468565(0x1e1)]()===DCScanSteps[_0x468565(0x224)]&&this[_0x468565(0x2c1)]['drawArea'](this[_0x468565(0x1db)]['options']['cardMinSize']);let _0x49aba8=new Date()[_0x468565(0x337)]();_0x49aba8-this[_0x468565(0x31c)]>this['options'][_0x468565(0x31b)]?this[_0x468565(0x301)]({'status':![],'msg':_0x468565(0x344)}):this['analizer'][_0x468565(0x170)]();}}['onCameraLoaded'](_0x63ee60,_0x44f1bd){const _0x4824e1=_0x3e4a2e;this['cc'][_0x4824e1(0x2cc)](_0x44f1bd);}[_0x3e4a2e(0x2a2)](){const _0x3e6143=_0x3e4a2e;this[_0x3e6143(0x175)][_0x3e6143(0x230)]&&(this[_0x3e6143(0x175)][_0x3e6143(0x230)]=![],this[_0x3e6143(0x22c)]());}[_0x3e4a2e(0x331)](){}['getPassTime'](_0x7f1e38){const _0x2a739c=_0x3e4a2e;if(_0x7f1e38==null)return null;return new Date()[_0x2a739c(0x337)]()-_0x7f1e38;}};const DCAnalyzer={'FACE':_0x3e4a2e(0x32b),'SCANNER':_0x3e4a2e(0x1ed)};class DCFaceID{constructor(_0x59e181={}){const _0x29513a=_0x3e4a2e;this[_0x29513a(0x205)]={'url':null,'headers':null,'debug':![]},this[_0x29513a(0x205)]=deepMerge(this[_0x29513a(0x205)],_0x59e181),this[_0x29513a(0x1ce)]=new DataModel(_0x59e181[_0x29513a(0x1f7)]||null,this[_0x29513a(0x205)]);let _0x4694d4=new helper_logger({'debug':this['options']['debug']});}[_0x3e4a2e(0x2b6)](_0xcf2629,_0x23598c){let _0xba35a5=new DeepFace(_0xcf2629,_0x23598c);return _0xba35a5;}['createDeepScan'](_0x1a9bd3,_0x12d650){const _0x2094c3=_0x3e4a2e;let _0x51ded5=deepMerge({'url':this['options']['url'],'headers':this[_0x2094c3(0x205)][_0x2094c3(0x269)]},_0x12d650),_0x5a533c=new DeepScanner(_0x1a9bd3,_0x51ded5);return _0x5a533c;}['createDeepStory'](_0x142440,_0x5c1e3e){}[_0x3e4a2e(0x263)](_0x2576b7,_0xc6aa48){const _0x4cb5f1=_0x3e4a2e;this[_0x4cb5f1(0x1ce)][_0x4cb5f1(0x290)](_0x2576b7,_0x7cfb87=>{const _0x250f82=_0x4cb5f1;typeof _0xc6aa48===_0x250f82(0x2a3)&&_0xc6aa48(_0x7cfb87);});}['isMobile'](){const _0x450eb0=_0x3e4a2e;return OSPlus[_0x450eb0(0x324)]();}}
export default DCFaceID
