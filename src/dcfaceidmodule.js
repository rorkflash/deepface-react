/* eslint-disable */
const _0x1a00=['drawCard','catch','rect','image','callDetectedEvent','onStepChanged','globalCompositeOperation','area','orange','getSnapshots','resWidth','Initializing','floor','toOriginalSize','REJECT','docFace','append','closePath','getLaplacianVariance','showTextArea','analizer','tid','Please\x20follow\x20the\x20commands','list','appendChild','forEach','style','stringify','right','landmark','START','canvas2grayscale','onCameraStart','face','center','defineCommands','raf','toosmall','drawMask','getCard','getTracks','rgb(66,109,139)','Type','mrz','pass_main','getImageData','end','onFaceResult','sizeKoef','snapshotlist','showCollection','df-container','onTinyFaceResult','kind','drawStreamToCanvas','blinking','fillRect','detectTimer','getCoord','url','commands','15323FxoTAz','black','lock','onCardDetected','Card\x20is\x20too\x20small','srcDim','media\x20devices','cropAndResizeCanvas','serverRequestDelay','rear\x20camera\x20used','stroke','devices','recognizeLocal','callCommandChange','currentPosition','506172DWMDxt','parentElement','scanning','beginPath','onWorkerMessage','highlight','defineScanType','smile','defineScanFace','js/deepfaceworker.js','innerHtml','actionWaitBeforeCheck','putImageData','onDetected','Error\x20loading\x20','data','net','createElement','assign','parseObject','camera','mrzcheck','outofbounds','cardImage','loading','NONE','open','userAgent','clearSnapshots','white','session\x20timeout','startTime','reset','score','onpause','play','cropCanvas','results','reject','Starting','isReady','actionArea','bind','join','keys','dim','down','nocard','createDeepScan','scanLoaded','textContent','font','changeStep','30px','string','canvas','application/json','onInit','video','DOWN','success','request','setText','other','isWebGLExist','finishTime','detectionLocked','includes','filter','PASSPORT','Lines','onScanLoaded','getImageB64','yaw','globalAlpha','auto','defineStream','round','height','isRearCameraUsed','ACTIONS','detector','onScanResult','fillText','docType','faceMask','then','id_front','onStart','commandText','drawFaces','ID_BACK','path','blur','SHOW','onCommandResult','look\x20right','cardMinSize','errorWaitTime','onError','undefined','lastDetected','Finished','ID_FRONT','postMessage','strokeStyle','restore','POST','offsetHeight','getImageFromURL','manycards','Success:','max','push','green','dpr','callCommandResult','RIGHT','getTimeDiff','moveTo','currentStepActive','sessionTime','width','xor','274649jtMWPV','load','observers','SMILE','environment','look\x20down','onmessage','clearRect','CANVAS','clear','callError','commander','result','noface','GET','initContainer','onCameraLoaded','PASS_FRONT','onCameraStop','curFrame','initWorker','length','currentActionList','FORWARD','SUCCESS','headpos','command','onFinished','playsinline','checkURI','serverSide','getTime','normalizing','calculate','onFaceDetected','mirrored','2hvkelU','loaded','stream','noFace','getSize','checkScanResult','number','classList','resizeCanvas','function','pass_full','getContext','type','getLastDetected','fixedTime','recognizeGlobal','isErrorExist','showProcessing','isSafari','commandArea','detector\x20result','data\x20processing,\x20please\x20wait...','roll','scanner','anonymous','host','object','getSettings','action','class','FINISH','add','facingMode','onStop','hideTextArea','step','videoHeight','display','look\x20forward','autoplay','interval','callStepChange','lineTo','error','json','single','box','close','getTinyFace','dom','sourceDim','landMarks','onFrameUpdated','fillOnMobile','look\x20left','createTextArea','finishWaitTime','server','setup','2188198wQYquV','options','__canvas','video-layer','toDataURL','scanWebWorker','lastDetectedTime','setFace','drawPath','lastResult','manyfaces','id_back','fill','originalSize','quadraticCurveTo','notify','scanned','face_worker_path','webWorker','remove','indexOf','videoWidth','show','lineWidth','inputSize','testDetect','addActionTime','streamSize','forward','INIT','defineProcess','recognize','headers','onDetect','31pzfYmX','onMRZDetected','bbox','opacity','substr','imageToCanvas','bottom','errors','toFixed','currentAction','visual','checkCurrentCommandAction','timeID','curScan','state','drawImage','loadCard','verify','left','ctx','callback','isPlaying','startingWaitTime','streams','fit2Size','src','Error:','getVideoTracks','getLandmark','init','paused','status','lowlight','getStep','atan2','finish','msg','onload','fillStyle','mediaDevices','tID','actionText','918347PQUbiT','none','getCoordY','image/png','stop','callCardDetectedEvent','div','actionWaitTime','resHeight','hide','onerror','getArea','srcObject','onStreamLoaded','?rand=','lastScanned','outOfBounds','text','debug','startSession','log','save','canvasToBase64','detect','current','getUserMedia','croppedSize','next','time','block','card/ready','currentCommand','cutLastSlash','SCANNING','ellipse','faceWebWorker','onLoaded','analyser','actualCanvas','canvasToImageData','name','getInstance','passport','shuffle','draw','setOptions','checkSize','tagName','20px\x20Arial','finished','chrome','observe','manyFace','createDeepStory','defineCurrentAction','arc','index','onStep','worker','setDim','card','rgba(0,\x200,\x200,\x201)','parse','getFace','unlock','errorTime','image/jpeg','crossOrigin','DIV','frontCamera','isOffscreenCanvasSupport','js/deeptinyfaceworker.min.js','innerHTML','Received:','getPassTime','onStartDownCount','getCurrentStep','maskInited','onCommand','14px\x20Arial','toVerify','createDeepFace','look\x20up','start','scan','Valid','absolute','516542qwpXMp','imageDataToCanvas','act2Command','loadedTID','delay','lastCommand','sessionTimeCount','719842ZknIXf','getCoordX','detectedFaceCountDownBeforeStart','detectTime','videoSize','getBox','pitch','drawArea','checkPosAndActions','maskSize','mrzOptions','face\x20laplacian','TOO_SMALL','muted','maskLayer','fireCommand','LEFT','toLowerCase','lastScannedTime','__canvas_original','enumerateDevices','analyzeAfterOpen','isMobile','useServerSide','isAllScanned','cutEdge','pos','collect','scale','textAlign','scans','hasCommand','setAttribute','setCommand'];const _0x4fbd=function(_0x5bf027,_0x19d76d){_0x5bf027=_0x5bf027-0x1dc;let _0x1a003e=_0x1a00[_0x5bf027];return _0x1a003e;};const _0x68345b=_0x4fbd;(function(_0x19dc36,_0x5f3e65){const _0x7823da=_0x4fbd;while(!![]){try{const _0x56b0a9=-parseInt(_0x7823da(0x2a2))+parseInt(_0x7823da(0x308))*-parseInt(_0x7823da(0x221))+parseInt(_0x7823da(0x3b7))*parseInt(_0x7823da(0x393))+-parseInt(_0x7823da(0x2a9))+parseInt(_0x7823da(0x317))+-parseInt(_0x7823da(0x24b))+parseInt(_0x7823da(0x1ff));if(_0x56b0a9===_0x5f3e65)break;else _0x19dc36['push'](_0x19dc36['shift']());}catch(_0x305957){_0x19dc36['push'](_0x19dc36['shift']());}}}(_0x1a00,0x95e24));const deepMerge=(_0x3bd159,_0xaf870a)=>{const _0xdbe7bd=_0x4fbd;for(let _0x5569f3 of Object[_0xdbe7bd(0x343)](_0xaf870a)){_0xaf870a[_0x5569f3]instanceof Object&&Object[_0xdbe7bd(0x329)](_0xaf870a[_0x5569f3],deepMerge(_0x3bd159[_0x5569f3]||{},_0xaf870a[_0x5569f3]));}return Object[_0xdbe7bd(0x329)](_0x3bd159||{},_0xaf870a),_0x3bd159;},canvasRoundRect=(_0x28efde,_0x1cd57d,_0x26690c,_0x11bbde,_0x2be987,_0x1d9a6b,_0x28ea31,_0x2a5378)=>{const _0x2787f0=_0x4fbd;typeof _0x2a5378===_0x2787f0(0x37b)&&(_0x2a5378=!![]);typeof _0x1d9a6b===_0x2787f0(0x37b)&&(_0x1d9a6b=0x5);if(typeof _0x1d9a6b===_0x2787f0(0x3bd))_0x1d9a6b={'tl':_0x1d9a6b,'tr':_0x1d9a6b,'br':_0x1d9a6b,'bl':_0x1d9a6b};else{var _0x5022d6={'tl':0x0,'tr':0x0,'br':0x0,'bl':0x0};for(var _0x4b8922 in _0x5022d6){_0x1d9a6b[_0x4b8922]=_0x1d9a6b[_0x4b8922]||_0x5022d6[_0x4b8922];}}_0x28efde[_0x2787f0(0x31a)](),_0x28efde[_0x2787f0(0x38e)](_0x1cd57d+_0x1d9a6b['tl'],_0x26690c),_0x28efde[_0x2787f0(0x1ee)](_0x1cd57d+_0x11bbde-_0x1d9a6b['tr'],_0x26690c),_0x28efde['quadraticCurveTo'](_0x1cd57d+_0x11bbde,_0x26690c,_0x1cd57d+_0x11bbde,_0x26690c+_0x1d9a6b['tr']),_0x28efde['lineTo'](_0x1cd57d+_0x11bbde,_0x26690c+_0x2be987-_0x1d9a6b['br']),_0x28efde['quadraticCurveTo'](_0x1cd57d+_0x11bbde,_0x26690c+_0x2be987,_0x1cd57d+_0x11bbde-_0x1d9a6b['br'],_0x26690c+_0x2be987),_0x28efde[_0x2787f0(0x1ee)](_0x1cd57d+_0x1d9a6b['bl'],_0x26690c+_0x2be987),_0x28efde[_0x2787f0(0x20d)](_0x1cd57d,_0x26690c+_0x2be987,_0x1cd57d,_0x26690c+_0x2be987-_0x1d9a6b['bl']),_0x28efde['lineTo'](_0x1cd57d,_0x26690c+_0x1d9a6b['tl']),_0x28efde[_0x2787f0(0x20d)](_0x1cd57d,_0x26690c,_0x1cd57d+_0x1d9a6b['tl'],_0x26690c),_0x28efde[_0x2787f0(0x2dc)](),_0x28ea31&&_0x28efde[_0x2787f0(0x20b)](),_0x2a5378&&_0x28efde['stroke']();};class StringExtra{static[_0x68345b(0x26b)](_0xd31eba){const _0x4951fe=_0x68345b;if(_0xd31eba[_0x4951fe(0x225)](_0xd31eba[_0x4951fe(0x3a8)]-0x1)==='/')return _0xd31eba['slice'](0x0,-0x1);return _0xd31eba;}};class DataModel{constructor(_0x45d703='',_0x209dcf={}){const _0x1f335e=_0x68345b;this[_0x1f335e(0x306)]=_0x45d703,this['options']={'headers':{}},this[_0x1f335e(0x200)]=deepMerge(this[_0x1f335e(0x200)],_0x209dcf);}[_0x68345b(0x29b)](_0x2b71e1,_0x4ca03c){const _0x49b7a5=_0x68345b;if(_0x2b71e1==null)return;if(_0x2b71e1[_0x49b7a5(0x3ce)]!=null&&_0x2b71e1['face']==null){let _0x158e56={'docType':_0x2b71e1[_0x49b7a5(0x3ce)]['docType']||null,'scans':[],'tid':_0x2b71e1[_0x49b7a5(0x3ce)][_0x49b7a5(0x249)]};for(let _0x38ee08 in _0x2b71e1[_0x49b7a5(0x3ce)][_0x49b7a5(0x2c7)]){_0x158e56[_0x49b7a5(0x2c7)][_0x49b7a5(0x388)]({'docFace':_0x2b71e1[_0x49b7a5(0x3ce)][_0x49b7a5(0x2c7)][_0x38ee08]['docFace']||null,'image':_0x2b71e1[_0x49b7a5(0x3ce)][_0x49b7a5(0x2c7)][_0x38ee08][_0x49b7a5(0x2ce)]});}let _0x297dc3=deepMerge({'Content-Type':_0x49b7a5(0x34f)},this['options'][_0x49b7a5(0x21f)]||{});fetch(StringExtra[_0x49b7a5(0x26b)](this[_0x49b7a5(0x306)])+'/verify',{'method':'POST','headers':_0x297dc3,'body':JSON[_0x49b7a5(0x2e6)](_0x158e56)})[_0x49b7a5(0x36d)](_0x23bd44=>_0x23bd44[_0x49b7a5(0x1f0)]())[_0x49b7a5(0x36d)](_0x2c8c47=>{const _0x1adb63=_0x49b7a5;if(typeof _0x4ca03c===_0x1adb63(0x3c0)){let _0x581401={'success':_0x2c8c47[_0x1adb63(0x353)],'data':_0x2c8c47[_0x1adb63(0x326)]||null,'msg':_0x2c8c47[_0x1adb63(0x245)]||null};_0x4ca03c(_0x581401);}})[_0x49b7a5(0x2cc)](_0x95e103=>{const _0x4a8a1f=_0x49b7a5;console[_0x4a8a1f(0x1ef)](_0x4a8a1f(0x23b),_0x95e103),typeof _0x4ca03c===_0x4a8a1f(0x3c0)&&_0x4ca03c({'success':![],'error':_0x95e103});});}}};class CameraVisualLayer{constructor(_0x22f4a7){const _0x3d3b9a=_0x68345b;this[_0x3d3b9a(0x34e)]=_0x22f4a7;}[_0x68345b(0x2c4)](){}[_0x68345b(0x2fd)](){}[_0x68345b(0x2db)](){}[_0x68345b(0x354)](){}};class OSPlus{static[_0x68345b(0x2bf)](){const _0x28838a=[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i];return _0x28838a['some'](_0x225b5b=>{const _0x508d59=_0x4fbd;return navigator[_0x508d59(0x332)]['match'](_0x225b5b);});}static[_0x68345b(0x357)](){const _0x117534=_0x68345b;try{let _0x27823c=document[_0x117534(0x328)](_0x117534(0x34e));_0x27823c['getContext']('webgl');}catch(_0x38e44f){return![];}return!![];}static[_0x68345b(0x291)](){return typeof OffscreenCanvas==='function';}static['isSafari'](){const _0x152ac6=_0x68345b;let _0x23d2a9=navigator[_0x152ac6(0x332)][_0x152ac6(0x2ba)]();return _0x23d2a9[_0x152ac6(0x213)]('safari')!==-0x1&&_0x23d2a9[_0x152ac6(0x213)](_0x152ac6(0x27d))===-0x1;}};let instance=null;class Logger{constructor(_0x13eab0={}){const _0x20e1e0=_0x68345b;if(!instance)instance=this;else return instance;this['options']={'debug':![]},this[_0x20e1e0(0x278)](_0x13eab0);}static['getInstance'](_0x342f90=null){const _0x13819e=_0x68345b;if(!instance)instance=new Logger(_0x342f90||{});else{if(_0x342f90!=null)instance[_0x13819e(0x278)](_0x342f90);return instance;}}['setOptions'](_0x1a5752={}){const _0x47527e=_0x68345b;this[_0x47527e(0x200)]=deepMerge(this['options'],_0x1a5752);}[_0x68345b(0x25f)](){const _0xaed05d=_0x68345b;this[_0xaed05d(0x200)][_0xaed05d(0x25d)]&&console['log']['apply'](null,arguments);}}const helper_logger=Logger;;class DCCamera{constructor(_0x310f0c,_0xef13a5={}){const _0x27d367=_0x68345b;this[_0x27d367(0x1f5)]=null,this[_0x27d367(0x34e)]=null,this[_0x27d367(0x201)]=null,this[_0x27d367(0x2bc)]=null,this[_0x27d367(0x351)]=null,this['stream']=null,this['visual']=null,this['raf']=null,this['streamSize']={'width':0x0,'height':0x0},this[_0x27d367(0x1f6)]={'k':0x1,'dx':0x0,'dy':0x0,'dw':0x0,'dh':0x0},this[_0x27d367(0x2fc)]=[],this[_0x27d367(0x313)]=[],this['frontCamera']=!![],this[_0x27d367(0x38a)]=0x1,this['options']={'src':null,'sourceType':null,'width':0x280,'height':0x1e0,'resWidth':0x500,'resHeight':0x2d0,'fill':![],'fillOnMobile':!![],'cutEdge':![],'onLoaded':null,'onError':null,'onStop':null,'onStart':null,'onFrameUpdated':null},this[_0x27d367(0x200)]=deepMerge(this[_0x27d367(0x200)],_0xef13a5),this['defineContainer'](_0x310f0c),this['setup']();}['defineContainer'](_0x228fd7){const _0x46aa67=_0x68345b;this[_0x46aa67(0x38a)]=window['devicePixelRatio']||0x1;if(typeof _0x228fd7==_0x46aa67(0x34d)){let _0x3862c0=document['getElementById'](_0x228fd7);if(_0x3862c0&&_0x3862c0[_0x46aa67(0x27a)]){if(_0x3862c0[_0x46aa67(0x27a)]===_0x46aa67(0x28f))this[_0x46aa67(0x1f5)]=_0x3862c0,this[_0x46aa67(0x1f5)][_0x46aa67(0x293)]='',this[_0x46aa67(0x34e)]=document['createElement'](_0x46aa67(0x39b)),this[_0x46aa67(0x34e)]['width']=this[_0x46aa67(0x200)][_0x46aa67(0x391)],this[_0x46aa67(0x34e)][_0x46aa67(0x365)]=this['options'][_0x46aa67(0x365)],this[_0x46aa67(0x1f5)]['appendChild'](this[_0x46aa67(0x34e)]);else _0x3862c0[_0x46aa67(0x27a)]===_0x46aa67(0x39b)&&(this[_0x46aa67(0x34e)]=_0x3862c0,this[_0x46aa67(0x1f5)]=document[_0x46aa67(0x328)]('DIV'),this[_0x46aa67(0x34e)][_0x46aa67(0x318)]['insertBefore'](this[_0x46aa67(0x1f5)],this[_0x46aa67(0x34e)]),this['dom'][_0x46aa67(0x2e3)](this[_0x46aa67(0x34e)]));this[_0x46aa67(0x1f5)]&&(this[_0x46aa67(0x1f5)]['classList'][_0x46aa67(0x1e3)](_0x46aa67(0x2fe)),this[_0x46aa67(0x1f5)][_0x46aa67(0x2e5)][_0x46aa67(0x391)]=this[_0x46aa67(0x200)]['width']+'px',this[_0x46aa67(0x1f5)][_0x46aa67(0x2e5)]['height']=this[_0x46aa67(0x200)]['height']+'px');}this[_0x46aa67(0x34e)]&&(this[_0x46aa67(0x34e)][_0x46aa67(0x3be)][_0x46aa67(0x1e3)](_0x46aa67(0x202)),this[_0x46aa67(0x34e)]['style']['backgroundColor']='gray');}this[_0x46aa67(0x201)]=document[_0x46aa67(0x328)](_0x46aa67(0x39b)),this[_0x46aa67(0x201)][_0x46aa67(0x391)]=this['options'][_0x46aa67(0x391)],this[_0x46aa67(0x201)][_0x46aa67(0x365)]=this[_0x46aa67(0x200)][_0x46aa67(0x365)],this[_0x46aa67(0x2bc)]=document[_0x46aa67(0x328)](_0x46aa67(0x39b)),this[_0x46aa67(0x2bc)][_0x46aa67(0x391)]=this[_0x46aa67(0x200)]['width'],this[_0x46aa67(0x2bc)][_0x46aa67(0x365)]=this['options'][_0x46aa67(0x365)];}[_0x68345b(0x1fe)](){const _0x2991e0=_0x68345b;this[_0x2991e0(0x22b)]=new CameraVisualLayer(this['canvas']);}[_0x68345b(0x29e)](){const _0x7e88b2=_0x68345b;(this[_0x7e88b2(0x351)]==null||!this['isPlaying']())&&this['defineStream']();}[_0x68345b(0x24f)](){const _0x7a158d=_0x68345b;this[_0x7a158d(0x3b9)]&&this[_0x7a158d(0x3b9)][_0x7a158d(0x2f3)]()['length']>0x0&&(this[_0x7a158d(0x3b9)][_0x7a158d(0x2f3)]()[0x0][_0x7a158d(0x24f)](),this[_0x7a158d(0x3b9)]=null);}[_0x68345b(0x363)](){const _0x4000fd=_0x68345b;OSPlus[_0x4000fd(0x2bf)]()&&this[_0x4000fd(0x200)][_0x4000fd(0x1f9)]===!![]&&(this['options'][_0x4000fd(0x20b)]=!![]);this[_0x4000fd(0x200)][_0x4000fd(0x23a)]==null?this[_0x4000fd(0x3b9)]==null?navigator[_0x4000fd(0x248)]&&navigator[_0x4000fd(0x248)][_0x4000fd(0x264)]&&(this['video']===null&&(this[_0x4000fd(0x351)]=document[_0x4000fd(0x328)](_0x4000fd(0x351)),this['video'][_0x4000fd(0x2c9)](_0x4000fd(0x1eb),''),this['video'][_0x4000fd(0x2c9)](_0x4000fd(0x2b6),''),this['video'][_0x4000fd(0x2c9)](_0x4000fd(0x3af),''),this['video'][_0x4000fd(0x2e5)]['width']=_0x4000fd(0x34c),this[_0x4000fd(0x351)][_0x4000fd(0x2e5)][_0x4000fd(0x365)]=_0x4000fd(0x34c),this['video'][_0x4000fd(0x2e5)]['position']=_0x4000fd(0x2a1),this['dom'][_0x4000fd(0x2e3)](this['video']),this[_0x4000fd(0x351)][_0x4000fd(0x2e5)][_0x4000fd(0x224)]='0.5'),this['raf']=null,navigator[_0x4000fd(0x248)][_0x4000fd(0x2bd)]()[_0x4000fd(0x36d)](_0x455730=>{const _0x13e853=_0x4000fd;helper_logger[_0x13e853(0x274)]()[_0x13e853(0x25f)](_0x13e853(0x30e),_0x455730),this[_0x13e853(0x313)]=_0x455730;}),navigator['mediaDevices']['getUserMedia']({'audio':![],'video':{'facingMode':'environment','width':{'ideal':this['options'][_0x4000fd(0x2d5)]},'height':{'ideal':this[_0x4000fd(0x200)][_0x4000fd(0x253)]}}})[_0x4000fd(0x36d)](_0x3af394=>{const _0x14f32d=_0x4000fd;this[_0x14f32d(0x3b9)]=_0x3af394,this[_0x14f32d(0x351)][_0x14f32d(0x257)]=_0x3af394;let _0x8abe61=_0x3af394[_0x14f32d(0x23c)]()[0x0];_0x8abe61['applyConstraints']({'focusMode':_0x14f32d(0x362),'focusDistance':0.33}),this[_0x14f32d(0x366)]()&&(helper_logger[_0x14f32d(0x274)]()[_0x14f32d(0x25f)](_0x14f32d(0x311)),this[_0x14f32d(0x290)]=![]),_0xd2c652(),this[_0x14f32d(0x351)][_0x14f32d(0x33a)]();})[_0x4000fd(0x2cc)](_0x17ce80=>{const _0xc8909c=_0x4000fd;helper_logger['getInstance']()[_0xc8909c(0x25f)]('web\x20camera\x20exception!',_0x17ce80),this[_0xc8909c(0x37a)](_0x17ce80);})):this[_0x4000fd(0x351)][_0x4000fd(0x33a)]():(this[_0x4000fd(0x351)]['src']=this[_0x4000fd(0x200)]['src'],this[_0x4000fd(0x351)][_0x4000fd(0x33a)]());let _0xd2c652=()=>{const _0x121915=_0x4000fd;this['video']['onloadeddata']=()=>{const _0x33fcb9=_0x4fbd;this[_0x33fcb9(0x258)]();},this[_0x121915(0x351)]['onplaying']=()=>{const _0x112b13=_0x121915;this[_0x112b13(0x201)]['width']=this[_0x112b13(0x351)][_0x112b13(0x214)],this[_0x112b13(0x201)]['height']=this['video'][_0x112b13(0x1e8)],this[_0x112b13(0x2bc)][_0x112b13(0x391)]=this[_0x112b13(0x351)][_0x112b13(0x214)],this[_0x112b13(0x2bc)]['height']=this[_0x112b13(0x351)][_0x112b13(0x1e8)];let _0x1509cb=this[_0x112b13(0x351)][_0x112b13(0x214)],_0xfe40ab=this[_0x112b13(0x351)][_0x112b13(0x1e8)],_0x3a4c1a=0x1;this['sourceDim']['dw']=this[_0x112b13(0x34e)][_0x112b13(0x391)],this[_0x112b13(0x1f6)]['dh']=this[_0x112b13(0x34e)][_0x112b13(0x365)];this[_0x112b13(0x200)]['fill']?this[_0x112b13(0x34e)]['height']/_0xfe40ab<this[_0x112b13(0x34e)][_0x112b13(0x391)]/_0x1509cb?(_0x3a4c1a=this[_0x112b13(0x34e)]['width']/_0x1509cb,this['sourceDim']['dh']=Math[_0x112b13(0x364)](_0x3a4c1a*_0xfe40ab),this[_0x112b13(0x1f6)]['dy']=0x0,this[_0x112b13(0x200)][_0x112b13(0x2c2)]&&(this[_0x112b13(0x2bc)][_0x112b13(0x365)]=this[_0x112b13(0x34e)][_0x112b13(0x365)]/_0x3a4c1a,this[_0x112b13(0x201)][_0x112b13(0x365)]=this[_0x112b13(0x34e)][_0x112b13(0x365)]/_0x3a4c1a)):(_0x3a4c1a=this[_0x112b13(0x34e)][_0x112b13(0x365)]/_0xfe40ab,this[_0x112b13(0x1f6)]['dw']=Math['round'](_0x3a4c1a*_0x1509cb),this[_0x112b13(0x1f6)]['dx']=0x0,this['options'][_0x112b13(0x2c2)]&&(this[_0x112b13(0x2bc)][_0x112b13(0x391)]=this[_0x112b13(0x34e)][_0x112b13(0x391)]/_0x3a4c1a,this[_0x112b13(0x201)][_0x112b13(0x391)]=this[_0x112b13(0x34e)][_0x112b13(0x391)]/_0x3a4c1a)):this[_0x112b13(0x34e)][_0x112b13(0x365)]/_0xfe40ab<this[_0x112b13(0x34e)][_0x112b13(0x391)]/_0x1509cb?(_0x3a4c1a=this['canvas'][_0x112b13(0x365)]/_0xfe40ab,this['sourceDim']['dw']=Math[_0x112b13(0x364)](_0x3a4c1a*_0x1509cb),this[_0x112b13(0x1f6)]['dx']=(this[_0x112b13(0x34e)][_0x112b13(0x391)]-this[_0x112b13(0x1f6)]['dw'])/0x2):(_0x3a4c1a=this['canvas'][_0x112b13(0x391)]/_0x1509cb,this[_0x112b13(0x1f6)]['dh']=Math[_0x112b13(0x364)](_0x3a4c1a*_0xfe40ab),this[_0x112b13(0x1f6)]['dy']=(this[_0x112b13(0x34e)][_0x112b13(0x365)]-this[_0x112b13(0x1f6)]['dh'])/0x2);this[_0x112b13(0x1f6)]['k']=_0x3a4c1a;if(this[_0x112b13(0x2ef)]!=null)cancelAnimationFrame(this[_0x112b13(0x2ef)]);this['raf']=requestAnimationFrame(this['drawStreamToCanvas'][_0x112b13(0x341)](this)),this[_0x112b13(0x21a)]={'width':this['video'][_0x112b13(0x214)],'height':this[_0x112b13(0x351)]['videoHeight']},this[_0x112b13(0x36f)]();},this[_0x121915(0x351)][_0x121915(0x339)]=()=>{const _0x3310ce=_0x121915;cancelAnimationFrame(this[_0x3310ce(0x2ef)]),this['onStop']();};};}async[_0x68345b(0x301)](){const _0x4dc5ad=_0x68345b;let _0x463dde=this[_0x4dc5ad(0x290)]?-0x1:0x1,_0x313ed7=this[_0x4dc5ad(0x1f6)],_0x2de973=this[_0x4dc5ad(0x351)][_0x4dc5ad(0x214)],_0x815dc=this['video'][_0x4dc5ad(0x1e8)],_0x2b5fa8=this[_0x4dc5ad(0x2bc)][_0x4dc5ad(0x3c2)]('2d');_0x2b5fa8[_0x4dc5ad(0x260)](),_0x2b5fa8[_0x4dc5ad(0x2c5)](0x1,0x1);this[_0x4dc5ad(0x200)]['fill']&&this['options'][_0x4dc5ad(0x2c2)]?_0x2b5fa8[_0x4dc5ad(0x230)](this[_0x4dc5ad(0x351)],(this[_0x4dc5ad(0x2bc)][_0x4dc5ad(0x391)]-_0x2de973)/0x2,(this['__canvas_original'][_0x4dc5ad(0x365)]-_0x815dc)/0x2,_0x2de973,_0x815dc):_0x2b5fa8[_0x4dc5ad(0x230)](this['video'],0x0,0x0,this[_0x4dc5ad(0x2bc)][_0x4dc5ad(0x391)],this[_0x4dc5ad(0x2bc)][_0x4dc5ad(0x365)]);_0x2b5fa8['restore']();let _0x2523e1=this['__canvas'][_0x4dc5ad(0x3c2)]('2d');_0x2523e1['save'](),_0x2523e1[_0x4dc5ad(0x2c5)](_0x463dde,0x1);this[_0x4dc5ad(0x200)][_0x4dc5ad(0x20b)]&&this[_0x4dc5ad(0x200)]['cutEdge']?_0x2523e1[_0x4dc5ad(0x230)](this['video'],_0x463dde*(this[_0x4dc5ad(0x201)]['width']-_0x2de973)/0x2+(_0x463dde===-0x1?_0x463dde*_0x2de973:0x0),(this[_0x4dc5ad(0x201)][_0x4dc5ad(0x365)]-_0x815dc)/0x2,_0x2de973,_0x815dc):_0x2523e1['drawImage'](this[_0x4dc5ad(0x351)],_0x463dde===-0x1?_0x463dde*_0x2de973:0x0,0x0,this['__canvas'][_0x4dc5ad(0x391)],this['__canvas'][_0x4dc5ad(0x365)]);_0x2523e1[_0x4dc5ad(0x381)]();let _0x3d30a8=this[_0x4dc5ad(0x34e)][_0x4dc5ad(0x3c2)]('2d'),_0x5624d4=(this[_0x4dc5ad(0x34e)][_0x4dc5ad(0x391)]-this[_0x4dc5ad(0x1f6)]['dw'])/0x2,_0x9b12ae=(this[_0x4dc5ad(0x34e)]['height']-this[_0x4dc5ad(0x1f6)]['dh'])/0x2;_0x3d30a8[_0x4dc5ad(0x39a)](0x0,0x0,this['canvas'][_0x4dc5ad(0x391)],this[_0x4dc5ad(0x34e)][_0x4dc5ad(0x365)]),_0x3d30a8[_0x4dc5ad(0x260)](),_0x3d30a8[_0x4dc5ad(0x2c5)](_0x463dde*0x1,0x1),_0x3d30a8['drawImage'](this[_0x4dc5ad(0x351)],_0x463dde*_0x5624d4+(_0x463dde===-0x1?_0x463dde*_0x313ed7['dw']:0x0),_0x9b12ae,_0x313ed7['dw'],_0x313ed7['dh']),_0x3d30a8['restore']();if(this[_0x4dc5ad(0x3b9)]==null)return;this[_0x4dc5ad(0x1f8)](),this[_0x4dc5ad(0x2ef)]=requestAnimationFrame(this[_0x4dc5ad(0x301)][_0x4dc5ad(0x341)](this));}['isRearCameraUsed'](){const _0x54c06b=_0x68345b;let _0x4e145c=[];for(let _0x124e49 in this[_0x54c06b(0x313)]){this['devices'][_0x124e49][_0x54c06b(0x300)]==='videoinput'&&_0x4e145c[_0x54c06b(0x388)](this[_0x54c06b(0x313)][_0x124e49]);}let _0x3eb008=this['stream']?this['stream'][_0x54c06b(0x23c)]()[0x0][_0x54c06b(0x1df)]()[_0x54c06b(0x1e4)]||null:null;helper_logger['getInstance']()[_0x54c06b(0x25f)]('devices',this[_0x54c06b(0x313)]),helper_logger[_0x54c06b(0x274)]()[_0x54c06b(0x25f)]('facingMode',_0x3eb008);if(_0x3eb008===_0x54c06b(0x397))return!![];return![];}[_0x68345b(0x236)](){const _0x18e825=_0x68345b;return this[_0x18e825(0x3b9)]&&this['video']&&!this[_0x18e825(0x351)][_0x18e825(0x23f)];}[_0x68345b(0x2f8)](){const _0x330787=_0x68345b;let _0x3fb951=this[_0x330787(0x201)][_0x330787(0x3c2)]('2d');return _0x3fb951['getImageData'](0x0,0x0,this[_0x330787(0x201)][_0x330787(0x391)],this[_0x330787(0x201)]['height']);}[_0x68345b(0x35f)](){const _0x1f421b=_0x68345b;return this[_0x1f421b(0x201)]['toDataURL']();}[_0x68345b(0x2d4)](){return this['snapshotlist'];}['snapshot'](){const _0x49e3cb=_0x68345b;this[_0x49e3cb(0x2fc)][_0x49e3cb(0x388)](this[_0x49e3cb(0x35f)]());}[_0x68345b(0x333)](){const _0x3406a1=_0x68345b;this[_0x3406a1(0x2fc)]=[];}[_0x68345b(0x37a)](_0x17458f){const _0x597d60=_0x68345b;typeof this['options']['onError']==='function'&&this[_0x597d60(0x200)][_0x597d60(0x37a)](_0x17458f);}[_0x68345b(0x258)](){const _0x145f03=_0x68345b;typeof this[_0x145f03(0x200)][_0x145f03(0x26f)]===_0x145f03(0x3c0)&&this[_0x145f03(0x200)][_0x145f03(0x26f)](this[_0x145f03(0x351)],this[_0x145f03(0x1f6)]);}[_0x68345b(0x1e5)](){const _0x5285e1=_0x68345b;typeof this['options'][_0x5285e1(0x1e5)]==='function'&&this['options'][_0x5285e1(0x1e5)]();}[_0x68345b(0x36f)](){const _0x13ccba=_0x68345b;typeof this['options'][_0x13ccba(0x36f)]===_0x13ccba(0x3c0)&&this[_0x13ccba(0x200)][_0x13ccba(0x36f)]();}['onFrameUpdated'](){const _0x5f26d1=_0x68345b;typeof this[_0x5f26d1(0x200)][_0x5f26d1(0x1f8)]==='function'&&this[_0x5f26d1(0x200)]['onFrameUpdated']();}}const camera=DCCamera;;class CoordConverter{constructor(_0xabb8e0={'k':0x1,'dx':0x0,'dy':0x0,'dw':0x0,'dh':0x0}){const _0x2419a6=_0x68345b;this[_0x2419a6(0x344)]=_0xabb8e0;}[_0x68345b(0x286)](_0x42f193){const _0x499da0=_0x68345b;this[_0x499da0(0x344)]=_0x42f193;}[_0x68345b(0x305)](_0x486971,_0x543cfe){const _0x3623ab=_0x68345b;return{'x':_0x486971*this['dim']['k']+this['dim']['dx'],'y':_0x543cfe*this['dim']['k']+this[_0x3623ab(0x344)]['dy']};}['getCoordX'](_0x4a7424){const _0x5bf3e5=_0x68345b;return _0x4a7424*this[_0x5bf3e5(0x344)]['k']+this['dim']['dx'];}[_0x68345b(0x24d)](_0x17d38c){const _0x8a6bc0=_0x68345b;return _0x17d38c*this[_0x8a6bc0(0x344)]['k']+this['dim']['dy'];}[_0x68345b(0x3bb)](_0x2e5a58){const _0x2fb714=_0x68345b;return _0x2e5a58*this[_0x2fb714(0x344)]['k'];}['toRealCoordX'](_0xf1b5fc){const _0x4c9af1=_0x68345b;return _0xf1b5fc/this['dim']['k']-this[_0x4c9af1(0x344)]['dx'];}['toRealCoordY'](_0x18e342){const _0x47cbc1=_0x68345b;return _0x18e342/this[_0x47cbc1(0x344)]['k']-this[_0x47cbc1(0x344)]['dy'];}};class MaskLayer{constructor(_0x2f91d8,_0x553efc={'width':0x0,'height':0x0},_0x282114={'width':0x0,'height':0x0}){const _0x58dcd1=_0x68345b;this[_0x58dcd1(0x1f5)]=_0x2f91d8,this[_0x58dcd1(0x34e)]=null,this[_0x58dcd1(0x234)]=null,this[_0x58dcd1(0x370)]=null,this[_0x58dcd1(0x24a)]=null,this['videoSize']=_0x553efc,this[_0x58dcd1(0x2b2)]=_0x282114,this['maskInited']=![],this[_0x58dcd1(0x2fb)]={'h':0.4,'v':0.6},(this['maskSize'][_0x58dcd1(0x391)]===0x0||this[_0x58dcd1(0x2b2)][_0x58dcd1(0x365)]===0x0)&&(this[_0x58dcd1(0x2b2)]={'width':this['videoSize'][_0x58dcd1(0x391)]*this[_0x58dcd1(0x2fb)]['h'],'height':this['videoSize']['width']*this[_0x58dcd1(0x2fb)]['v']}),this[_0x58dcd1(0x1fe)]();}[_0x68345b(0x1fe)](){const _0x3b5e28=_0x68345b;this[_0x3b5e28(0x1f5)]!=null&&(this[_0x3b5e28(0x34e)]=document[_0x3b5e28(0x328)]('CANVAS'),this[_0x3b5e28(0x34e)]['id']=_0x3b5e28(0x2b7),this[_0x3b5e28(0x34e)]['width']=this[_0x3b5e28(0x2ad)][_0x3b5e28(0x391)],this[_0x3b5e28(0x34e)]['height']=this[_0x3b5e28(0x2ad)]['height'],this[_0x3b5e28(0x1f5)]['appendChild'](this[_0x3b5e28(0x34e)]),this['ctx']=this[_0x3b5e28(0x34e)]['getContext']('2d'));}[_0x68345b(0x1fb)](){const _0x3e7a90=_0x68345b;if(!this[_0x3e7a90(0x370)]){this[_0x3e7a90(0x370)]=document['createElement'](_0x3e7a90(0x251)),this[_0x3e7a90(0x370)]['id']=_0x3e7a90(0x3ca);let _0x18b364=document[_0x3e7a90(0x328)]('P');_0x18b364[_0x3e7a90(0x349)]='',this[_0x3e7a90(0x370)][_0x3e7a90(0x2e3)](_0x18b364),this['dom'][_0x3e7a90(0x2e3)](this['commandText']);let _0xdbba58=((this[_0x3e7a90(0x34e)][_0x3e7a90(0x365)]-this['maskSize']['height'])/0x2-this[_0x3e7a90(0x370)][_0x3e7a90(0x383)])/0x2;this['commandText']['style']['top']=_0xdbba58+'px';}else this[_0x3e7a90(0x370)][_0x3e7a90(0x2e5)][_0x3e7a90(0x1e9)]=_0x3e7a90(0x268);if(!this[_0x3e7a90(0x24a)]){this[_0x3e7a90(0x24a)]=document[_0x3e7a90(0x328)]('div'),this[_0x3e7a90(0x24a)]['id']=_0x3e7a90(0x340);let _0x1c2e29=document[_0x3e7a90(0x328)]('P');_0x1c2e29[_0x3e7a90(0x349)]='',this[_0x3e7a90(0x24a)][_0x3e7a90(0x2e3)](_0x1c2e29),this['dom']['appendChild'](this[_0x3e7a90(0x24a)]);let _0x1b73ae=((this[_0x3e7a90(0x34e)][_0x3e7a90(0x365)]-this['maskSize'][_0x3e7a90(0x365)])/0x2-this[_0x3e7a90(0x370)][_0x3e7a90(0x383)])/0x2;this[_0x3e7a90(0x24a)][_0x3e7a90(0x2e5)][_0x3e7a90(0x227)]=_0x1b73ae+'px';}else this['actionText']['style'][_0x3e7a90(0x1e9)]=_0x3e7a90(0x268);}[_0x68345b(0x2de)](){const _0x3851ab=_0x68345b;if(this['commandText'])this[_0x3851ab(0x370)][_0x3851ab(0x2e5)][_0x3851ab(0x1e9)]='';if(this['actionText'])this['actionText'][_0x3851ab(0x2e5)][_0x3851ab(0x1e9)]='';}[_0x68345b(0x1e6)](){const _0x2aa2f3=_0x68345b;if(this['commandText'])this[_0x2aa2f3(0x370)][_0x2aa2f3(0x2e5)][_0x2aa2f3(0x1e9)]=_0x2aa2f3(0x24c);if(this[_0x2aa2f3(0x24a)])this[_0x2aa2f3(0x24a)][_0x2aa2f3(0x2e5)]['display']='none';}[_0x68345b(0x355)](_0x1c1c15){const _0x1315ac=_0x68345b;if(this['actionText'])this[_0x1315ac(0x24a)][_0x1315ac(0x321)]=_0x1c1c15;}[_0x68345b(0x2ca)](_0x4c022b){const _0x1c0365=_0x68345b;if(this[_0x1c0365(0x370)])this[_0x1c0365(0x370)][_0x1c0365(0x321)]=_0x4c022b;}['getArea'](){const _0x54e197=_0x68345b;return{'x':this[_0x54e197(0x34e)][_0x54e197(0x391)]/0x2-this[_0x54e197(0x2b2)][_0x54e197(0x391)]/0x2-0x14,'y':this['canvas'][_0x54e197(0x365)]/0x2-this[_0x54e197(0x2b2)][_0x54e197(0x391)]/0x2-0x14,'width':this[_0x54e197(0x2b2)][_0x54e197(0x391)],'height':this[_0x54e197(0x2b2)][_0x54e197(0x365)]};}[_0x68345b(0x277)](){const _0x41f55f=_0x68345b;if(!this[_0x41f55f(0x298)]){console[_0x41f55f(0x25f)]('draw\x20mask\x20layer'),this[_0x41f55f(0x234)][_0x41f55f(0x260)](),this['ctx'][_0x41f55f(0x31a)](),this[_0x41f55f(0x234)][_0x41f55f(0x26d)](this[_0x41f55f(0x34e)][_0x41f55f(0x391)]/0x2,this[_0x41f55f(0x34e)]['height']/0x2,this['maskSize'][_0x41f55f(0x391)]/0x2,this[_0x41f55f(0x2b2)][_0x41f55f(0x365)]/0x2,Math['PI'],0x0,0x2*Math['PI']),this['ctx'][_0x41f55f(0x247)]=_0x41f55f(0x2f4),this[_0x41f55f(0x234)]['fill'](),this[_0x41f55f(0x234)][_0x41f55f(0x2d1)]=_0x41f55f(0x392),this[_0x41f55f(0x234)]['beginPath'](),this[_0x41f55f(0x234)][_0x41f55f(0x2cd)](0x0,0x0,this[_0x41f55f(0x34e)][_0x41f55f(0x391)],this[_0x41f55f(0x34e)][_0x41f55f(0x365)]),this['ctx'][_0x41f55f(0x247)]=_0x41f55f(0x288),this['ctx'][_0x41f55f(0x2dc)](),this['ctx'][_0x41f55f(0x20b)](),this[_0x41f55f(0x234)][_0x41f55f(0x361)]=0.5;let _0x1e90f6=this[_0x41f55f(0x34e)][_0x41f55f(0x203)]();this['ctx'][_0x41f55f(0x2d1)]='source-over';let _0x4c7e13=new Image();_0x4c7e13[_0x41f55f(0x246)]=()=>{const _0x58eaa6=_0x41f55f;this[_0x58eaa6(0x234)][_0x58eaa6(0x39a)](0x0,0x0,this[_0x58eaa6(0x34e)][_0x58eaa6(0x391)],this[_0x58eaa6(0x34e)][_0x58eaa6(0x365)]),this[_0x58eaa6(0x234)][_0x58eaa6(0x230)](_0x4c7e13,0x0,0x0);},_0x4c7e13[_0x41f55f(0x23a)]=_0x1e90f6,this[_0x41f55f(0x298)]=!![],this['createTextArea']();}}[_0x68345b(0x215)](){const _0x587313=_0x68345b;!this[_0x587313(0x298)]?(this[_0x587313(0x277)](),this[_0x587313(0x34e)][_0x587313(0x2e5)][_0x587313(0x1e9)]=_0x587313(0x268)):(this[_0x587313(0x2de)](),this['canvas'][_0x587313(0x2e5)]['display']='block');}[_0x68345b(0x254)](){const _0x32c479=_0x68345b;this[_0x32c479(0x1e6)](),this[_0x32c479(0x34e)][_0x32c479(0x2e5)][_0x32c479(0x1e9)]=_0x32c479(0x24c);}['delete'](){const _0x3d73dc=_0x68345b;this[_0x3d73dc(0x234)]['clearRect'](0x0,0x0,this[_0x3d73dc(0x34e)][_0x3d73dc(0x391)],this[_0x3d73dc(0x34e)][_0x3d73dc(0x365)]),this[_0x3d73dc(0x234)][_0x3d73dc(0x381)]();}};class VisualLayer{constructor(_0x42bdc3,_0x686781={}){const _0x41d75b=_0x68345b;this[_0x41d75b(0x34e)]=_0x42bdc3,this[_0x41d75b(0x200)]={'srcDim':{'k':0x1,'dx':0x0,'dy':0x0,'dw':0x0,'dh':0x0}},this[_0x41d75b(0x200)]=deepMerge(this[_0x41d75b(0x200)],_0x686781),this['cc']=new CoordConverter(this[_0x41d75b(0x200)][_0x41d75b(0x30d)]);}[_0x68345b(0x207)](_0x3706bd,_0x5b009a,_0xd25200){const _0x242aa3=_0x68345b,_0x25fc2d=new Path2D();_0x25fc2d[_0x242aa3(0x38e)](_0x5b009a[0x0][0x0],_0x5b009a[0x0][0x1]);for(let _0x41ccbd=0x1;_0x41ccbd<_0x5b009a['length'];_0x41ccbd++){const _0x1a88aa=_0x5b009a[_0x41ccbd];_0x25fc2d[_0x242aa3(0x1ee)](_0x1a88aa[0x0],_0x1a88aa[0x1]);}_0xd25200&&_0x25fc2d[_0x242aa3(0x2dc)](),_0x3706bd['stroke'](_0x25fc2d);}[_0x68345b(0x371)](_0x28c5a5){const _0x16fb60=_0x68345b;let _0x4f4b24=this['options']['srcDim']['k'],_0x4f7fc4=null,_0x9f2e8c=null,_0x869bf3={'x':0x0,'y':0x0,'w':0x0,'h':0x0},_0x900e33=this[_0x16fb60(0x34e)][_0x16fb60(0x3c2)]('2d');_0x900e33[_0x16fb60(0x260)]();for(let _0xf942c9=0x0;_0xf942c9<_0x28c5a5[_0x16fb60(0x3a8)];_0xf942c9++){_0x9f2e8c=_0x28c5a5[_0xf942c9][_0x16fb60(0x1f7)];for(let _0x5beef5=0x0;_0x5beef5<_0x9f2e8c['length'];_0x5beef5++){const _0x1d448d=_0x9f2e8c[_0x5beef5][0x0],_0x227e31=_0x9f2e8c[_0x5beef5][0x1];_0x900e33[_0x16fb60(0x31a)](),_0x900e33[_0x16fb60(0x282)](this['cc'][_0x16fb60(0x2aa)](_0x1d448d),this['cc']['getCoordY'](_0x227e31),0x1,0x0,0x2*Math['PI']),_0x900e33[_0x16fb60(0x20b)](),_0x900e33[_0x16fb60(0x2dc)]();}}_0x900e33['restore']();}};class PipeStream{constructor(_0x4757e1){const _0x3c82e5=_0x68345b;this[_0x3c82e5(0x273)]=_0x4757e1,this[_0x3c82e5(0x395)]={};}['on'](_0x174a2a,_0x147021){const _0x457af9=_0x68345b;if(this[_0x457af9(0x395)][_0x174a2a]===undefined)this['observers'][_0x174a2a]=[];if(typeof _0x147021==_0x457af9(0x3c0))this[_0x457af9(0x395)][_0x174a2a]['push'](_0x147021);}[_0x68345b(0x212)](_0x5330c2,_0x6877ef){const _0x15dd86=_0x68345b;for(const _0x4a4dc0 in this[_0x15dd86(0x395)]){this[_0x15dd86(0x395)][_0x4a4dc0]=this[_0x15dd86(0x395)][_0x4a4dc0][_0x15dd86(0x35b)](_0x28380d=>_0x28380d!==_0x6877ef);}}[_0x68345b(0x20e)](_0x36b64c,_0x3b2c58){const _0x2e09c5=_0x68345b;this[_0x2e09c5(0x395)][_0x36b64c]&&this['observers'][_0x36b64c][_0x2e09c5(0x2e4)](_0xb94d15=>{const _0x57e3f8=_0x2e09c5;if(typeof _0xb94d15==_0x57e3f8(0x3c0))_0xb94d15(_0x3b2c58);});}['notifyAll'](_0x526b82){const _0x2c5718=_0x68345b;this[_0x2c5718(0x395)][_0x2c5718(0x2e4)](_0x485791=>{_0x485791['forEach'](_0x2501f5=>{typeof _0x2501f5=='function'&&_0x2501f5(_0x526b82);});});}};class Pipe{constructor(){const _0x4cc54d=_0x68345b;this[_0x4cc54d(0x238)]={};}[_0x68345b(0x331)](_0x2ce9a7){const _0x2d7c99=_0x68345b;return!this['streams'][_0x2ce9a7]&&(this[_0x2d7c99(0x238)][_0x2ce9a7]=new PipeStream(_0x2ce9a7)),this[_0x2d7c99(0x238)][_0x2ce9a7];}}const pipe=new Pipe(),stream=pipe;;class ImageProcessing{constructor(){}static['cropCanvas'](_0x7865fa,_0x39ad87,_0x2c24e6,_0x88d7cf,_0x5adadb){const _0x41b099=_0x68345b;let _0xefa041=document[_0x41b099(0x328)](_0x41b099(0x39b));_0xefa041[_0x41b099(0x391)]=_0x88d7cf,_0xefa041['height']=_0x5adadb;let _0x5581a2=_0xefa041[_0x41b099(0x3c2)]('2d');return _0x5581a2['drawImage'](_0x7865fa,_0x39ad87,_0x2c24e6,_0x88d7cf,_0x5adadb,0x0,0x0,_0x88d7cf,_0x5adadb),_0xefa041;}static[_0x68345b(0x3bf)](_0x10914d,_0x5602b0={'w':null,'h':null}){const _0x49bd6d=_0x68345b;let _0x4d2b37=document['createElement'](_0x49bd6d(0x39b));if(_0x5602b0['w']==null&&_0x5602b0['h']==null)_0x4d2b37[_0x49bd6d(0x391)]=_0x10914d[_0x49bd6d(0x391)],_0x4d2b37[_0x49bd6d(0x365)]=_0x10914d[_0x49bd6d(0x365)];else{if(_0x5602b0['w']==null)_0x4d2b37[_0x49bd6d(0x365)]=_0x5602b0['h'],_0x4d2b37[_0x49bd6d(0x391)]=_0x5602b0['h']/_0x10914d[_0x49bd6d(0x365)]*_0x10914d[_0x49bd6d(0x391)];else _0x5602b0['h']==null?(_0x4d2b37[_0x49bd6d(0x391)]=_0x5602b0['w'],_0x4d2b37[_0x49bd6d(0x365)]=_0x5602b0['w']/_0x10914d[_0x49bd6d(0x391)]*_0x10914d['height']):(_0x4d2b37['width']=_0x5602b0['w'],_0x4d2b37['height']=_0x5602b0['h']);}let _0x7f05bc=_0x4d2b37['getContext']('2d');return _0x7f05bc['drawImage'](_0x10914d,0x0,0x0,_0x4d2b37['width'],_0x4d2b37['height']),_0x4d2b37;}static[_0x68345b(0x30f)](_0x289305,_0x3c956f,_0x431c8f,_0x1197c1,_0x5a02d3,_0x102f2a,_0x328c81){const _0xe24686=_0x68345b;let _0x443a39=document[_0xe24686(0x328)](_0xe24686(0x39b));_0x443a39['width']=_0x102f2a,_0x443a39[_0xe24686(0x365)]=_0x328c81;let _0x488efd=_0x443a39['getContext']('2d');return _0x488efd[_0xe24686(0x230)](_0x289305,_0x3c956f,_0x431c8f,_0x1197c1,_0x5a02d3,0x0,0x0,_0x102f2a,_0x328c81),_0x443a39;}static[_0x68345b(0x2a3)](_0x4af3ac){const _0x476f45=_0x68345b;let _0x258108=document[_0x476f45(0x328)]('CANVAS');_0x258108['width']=_0x4af3ac['width'],_0x258108[_0x476f45(0x365)]=_0x4af3ac['height'];let _0x550971=_0x258108[_0x476f45(0x3c2)]('2d');return _0x550971[_0x476f45(0x323)](_0x4af3ac,0x0,0x0),_0x258108;}static[_0x68345b(0x226)](_0xbf0904){const _0xa2ed44=_0x68345b;let _0x2e4c9e=document[_0xa2ed44(0x328)](_0xa2ed44(0x39b));_0x2e4c9e[_0xa2ed44(0x391)]=_0xbf0904['width'],_0x2e4c9e['height']=_0xbf0904[_0xa2ed44(0x365)];let _0xf85fc8=_0x2e4c9e[_0xa2ed44(0x3c2)]('2d');return _0xf85fc8['drawImage'](_0xbf0904,0x0,0x0),_0x2e4c9e;}static[_0x68345b(0x272)](_0x41fef5){const _0x145186=_0x68345b;let _0x5cccd1=_0x41fef5[_0x145186(0x3c2)]('2d'),_0x11b442=_0x5cccd1[_0x145186(0x2f8)](0x0,0x0,_0x41fef5[_0x145186(0x391)],_0x41fef5['height']);return _0x11b442;}static[_0x68345b(0x261)](_0x5a0e49,_0x36464a=_0x68345b(0x24e),_0x3a12eb=0.92){const _0x100f76=_0x68345b;return _0x5a0e49[_0x100f76(0x203)](_0x36464a,_0x3a12eb);}static['canvas2IMG'](_0x42c557,_0x4b65f3=_0x68345b(0x24e),_0x5111fc=0.92){return new Promise(function(_0x48326f,_0x18fa0e){const _0x23917f=_0x4fbd;let _0x35184c=new Image();_0x35184c[_0x23917f(0x2c9)](_0x23917f(0x28e),_0x23917f(0x1dc)),_0x35184c['onload']=()=>{_0x48326f(_0x35184c);},_0x35184c[_0x23917f(0x255)]=_0x106c26=>{const _0x370149=_0x23917f;_0x18fa0e(_0x370149(0x325)+_0x106c26);},_0x35184c[_0x23917f(0x23a)]=ImageProcessing[_0x23917f(0x261)](_0x42c557,_0x4b65f3,_0x5111fc);});}static[_0x68345b(0x2ea)](_0x19a505){const _0x1699c7=_0x68345b;let _0x1050b0=_0x19a505[_0x1699c7(0x3c2)]('2d'),_0x35018a=_0x1050b0[_0x1699c7(0x2f8)](0x0,0x0,_0x19a505[_0x1699c7(0x391)],_0x19a505[_0x1699c7(0x365)]),_0x5ee1cc=_0x35018a[_0x1699c7(0x326)],_0x5d1aa1=_0x19a505[_0x1699c7(0x391)]*_0x19a505['height']*0x4;for(let _0x48e91e=_0x5d1aa1-0x1;_0x48e91e>0x0;_0x48e91e-=0x4){let _0x5b95ce=0.3*_0x5ee1cc[_0x48e91e-0x3]+0.59*_0x5ee1cc[_0x48e91e-0x2]+0.11*_0x5ee1cc[_0x48e91e-0x1];_0x5ee1cc[_0x48e91e-0x3]=_0x5b95ce,_0x5ee1cc[_0x48e91e-0x2]=_0x5b95ce,_0x5ee1cc[_0x48e91e-0x1]=_0x5b95ce;}let _0x594037=document['createElement'](_0x1699c7(0x39b)),_0x46d93c=_0x594037[_0x1699c7(0x3c2)]('2d');return _0x46d93c['putImageData'](_0x35018a,0x0,0x0),_0x594037;}static['blankCanvas'](_0x4d929c,_0x1e6ac9,_0x3e96c4=_0x68345b(0x309)){const _0x3165d5=_0x68345b;let _0x5db676=document[_0x3165d5(0x328)]('CANVAS');_0x5db676[_0x3165d5(0x391)]=_0x4d929c,_0x5db676[_0x3165d5(0x365)]=_0x1e6ac9;let _0x3151e6=_0x5db676[_0x3165d5(0x3c2)]('2d');return _0x3151e6[_0x3165d5(0x247)]=_0x3e96c4,_0x3151e6[_0x3165d5(0x303)](0x0,0x0,_0x4d929c,_0x1e6ac9),_0x5db676;}static['getLaplacianVariance'](_0x174e21,_0x531a71=0x1e){const _0x79489c=_0x68345b;let _0x59b512=_0x174e21['getContext']('2d'),_0x1c8cae=_0x59b512['getImageData'](0x0,0x0,_0x174e21[_0x79489c(0x391)],_0x174e21[_0x79489c(0x365)]),_0x564ffb=_0x1c8cae[_0x79489c(0x326)],_0x958438=[[0x0,0x1,0x0],[0x1,-0x4,0x1],[0x0,0x1,0x0]],_0x502779=_0x174e21['width']*0x4,_0x16d363=0x0,_0x433205=0x3,_0x47c746=Math[_0x79489c(0x2d7)](_0x433205/0x2),_0x310963=0x0,_0x2031b2=0x0;for(let _0x59689c=0x1;_0x59689c<_0x174e21[_0x79489c(0x365)]-0x1;_0x59689c++){for(let _0xcaf59c=0x4;_0xcaf59c<_0x502779-0x4;_0xcaf59c+=0x4){_0x310963=0x0;for(let _0x512931=0x0;_0x512931<_0x433205;_0x512931++){for(let _0x483486=0x0;_0x483486<_0x433205;_0x483486++){_0x16d363=_0x502779*(_0x59689c+_0x512931-_0x47c746)+_0xcaf59c+(_0x483486-_0x47c746)*0x4;let _0xfac756=0.3*_0x564ffb[_0x16d363]+0.59*_0x564ffb[_0x16d363+0x1]+0.11*_0x564ffb[_0x16d363+0x2];_0x310963+=_0xfac756*_0x958438[_0x512931][_0x483486];}}_0x310963>_0x531a71&&(_0x2031b2+=0x1);}}return _0x2031b2;}static[_0x68345b(0x384)](_0x550170){return new Promise(function(_0xd70a67,_0xb9e450){const _0xd2c901=_0x4fbd;let _0x5619b4=new Image();_0x5619b4[_0xd2c901(0x2c9)](_0xd2c901(0x28e),_0xd2c901(0x1dc)),_0x5619b4[_0xd2c901(0x246)]=()=>{_0xd70a67(_0x5619b4);},_0x5619b4[_0xd2c901(0x255)]=()=>{_0xb9e450('Error\x20loading\x20'+_0x550170);},_0x5619b4[_0xd2c901(0x23a)]=_0x550170;});}};class WebWorker{constructor(_0x426c0f={}){const _0x42e236=_0x68345b;this[_0x42e236(0x285)]=null,this[_0x42e236(0x3b9)]=null,this[_0x42e236(0x200)]={'path':null},this[_0x42e236(0x200)]=deepMerge(this[_0x42e236(0x200)],_0x426c0f),this[_0x42e236(0x1fe)]();}[_0x68345b(0x1fe)](){const _0x57b056=_0x68345b;this[_0x57b056(0x3b9)]=stream[_0x57b056(0x331)](_0x57b056(0x285)),this[_0x57b056(0x3b9)]['on'](_0x57b056(0x28a),this[_0x57b056(0x28a)][_0x57b056(0x341)](this)),this[_0x57b056(0x3b9)]['on'](_0x57b056(0x1f4),this['getTinyFace']['bind'](this)),this['stream']['on'](_0x57b056(0x231),this['loadCard']['bind'](this)),this[_0x57b056(0x3b9)]['on'](_0x57b056(0x2f2),this[_0x57b056(0x2f2)]['bind'](this)),window['Worker']&&this[_0x57b056(0x200)][_0x57b056(0x373)]!=null?(this[_0x57b056(0x285)]=new Worker(this['options'][_0x57b056(0x373)]),this[_0x57b056(0x285)]['onmessage']=this[_0x57b056(0x31b)][_0x57b056(0x341)](this)):console[_0x57b056(0x25f)]('Your\x20browser\x20doesn\x27t\x20support\x20web\x20workers.');}[_0x68345b(0x28a)](_0x3a2d96){const _0x51e391=_0x68345b;let _0x16d3b5=null;if(_0x3a2d96 instanceof HTMLCanvasElement){let _0x16d063=_0x3a2d96[_0x51e391(0x3c2)]('2d');_0x16d3b5=_0x16d063['getImageData'](0x0,0x0,_0x3a2d96[_0x51e391(0x391)],_0x3a2d96['height']);}else{if(_0x3a2d96 instanceof HTMLImageElement){let _0x4c58dd=document[_0x51e391(0x328)]('canvas'),_0x188daa=_0x4c58dd[_0x51e391(0x3c2)]('2d');_0x4c58dd['width']=_0x3a2d96[_0x51e391(0x391)],_0x4c58dd[_0x51e391(0x365)]=_0x3a2d96['height'],_0x188daa['drawImage'](_0x3a2d96,0x0,0x0),_0x16d3b5=_0x188daa['getImageData'](0x0,0x0,_0x3a2d96[_0x51e391(0x391)],_0x3a2d96['height']);}}this[_0x51e391(0x285)]['postMessage']({'type':'face','action':_0x51e391(0x28a),'data':_0x16d3b5});}[_0x68345b(0x1f4)](_0x18578f){const _0x844f34=_0x68345b;let _0x1a115a=null;if(_0x18578f instanceof HTMLCanvasElement){let _0x18308b=_0x18578f[_0x844f34(0x3c2)]('2d');_0x1a115a=_0x18308b[_0x844f34(0x2f8)](0x0,0x0,_0x18578f['width'],_0x18578f[_0x844f34(0x365)]);}else{if(_0x18578f instanceof HTMLImageElement){let _0x5d6d6e=document[_0x844f34(0x328)](_0x844f34(0x34e)),_0x366284=_0x5d6d6e[_0x844f34(0x3c2)]('2d');_0x5d6d6e[_0x844f34(0x391)]=_0x18578f[_0x844f34(0x391)],_0x5d6d6e['height']=_0x18578f[_0x844f34(0x365)],_0x366284[_0x844f34(0x230)](_0x18578f,0x0,0x0),_0x1a115a=_0x366284[_0x844f34(0x2f8)](0x0,0x0,_0x18578f['width'],_0x18578f['height']);}}this[_0x844f34(0x285)][_0x844f34(0x37f)]({'type':'face','action':'getTinyFace','data':_0x1a115a});}[_0x68345b(0x2f2)](_0x4e2370){const _0x52cc7d=_0x68345b;let _0xad9859=null;if(_0x4e2370 instanceof HTMLCanvasElement)_0xad9859=ImageProcessing['canvasToImageData'](_0x4e2370);else _0x4e2370 instanceof HTMLImageElement&&(_0xad9859=ImageProcessing['imageToCanvas'](_0x4e2370));this[_0x52cc7d(0x285)][_0x52cc7d(0x37f)]({'type':'scan','action':_0x52cc7d(0x2f2),'data':_0xad9859});}[_0x68345b(0x231)](){const _0xf5fef7=_0x68345b;this['worker']['postMessage']({'type':_0xf5fef7(0x29f),'action':_0xf5fef7(0x231)});}[_0x68345b(0x31b)](_0x50f98d){const _0x1e0db5=_0x68345b;let _0x5c55f8=_0x50f98d[_0x1e0db5(0x326)]['type'],_0x2b4ca2=_0x50f98d[_0x1e0db5(0x326)][_0x1e0db5(0x1e0)],_0x1ed856=_0x50f98d['data'][_0x1e0db5(0x326)];switch(_0x5c55f8){case _0x1e0db5(0x2ec):if(_0x2b4ca2==='faceDetected')this[_0x1e0db5(0x3b9)]['notify'](_0x1e0db5(0x2fa),_0x1ed856);else _0x2b4ca2==='tinyFaceDetected'&&this[_0x1e0db5(0x3b9)][_0x1e0db5(0x20e)](_0x1e0db5(0x2ff),_0x1ed856);break;case _0x1e0db5(0x29f):this[_0x1e0db5(0x3b9)][_0x1e0db5(0x20e)](_0x1e0db5(0x369),_0x1ed856);break;case _0x1e0db5(0x348):this[_0x1e0db5(0x3b9)]['notify'](_0x1e0db5(0x35e),_0x1ed856);break;case _0x1e0db5(0x356):break;default:break;}}};class HeadPos{constructor(){const _0x447670=_0x68345b;this[_0x447670(0x327)]=null,this[_0x447670(0x1f2)]={'x':0x0,'y':0x0,'width':0x0,'height':0x0},this['landmark']=[],this[_0x447670(0x2ec)]=null,this[_0x447670(0x360)]=0x0,this['pitch']=0x0,this[_0x447670(0x3cd)]=0x0;}[_0x68345b(0x206)](_0x2dfe5b){const _0x13a332=_0x68345b;this['face']=_0x2dfe5b,this[_0x13a332(0x1f2)]={'x':_0x2dfe5b['x'],'y':_0x2dfe5b['y'],'height':_0x2dfe5b[_0x13a332(0x365)],'width':_0x2dfe5b['width']},this[_0x13a332(0x2e8)]=_0x2dfe5b[_0x13a332(0x1f7)],this[_0x13a332(0x3b4)]();}['clear'](){const _0x20ed7e=_0x68345b;this[_0x20ed7e(0x327)]=null,this[_0x20ed7e(0x1f2)]={'x':0x0,'y':0x0,'width':0x0,'height':0x0},this['landmark']=[],this['face']=null,this[_0x20ed7e(0x360)]=0x0,this[_0x20ed7e(0x2af)]=0x0,this[_0x20ed7e(0x3cd)]=0x0;}[_0x68345b(0x3b4)](){const _0x418f58=_0x68345b;let _0x46d329=this[_0x418f58(0x2ec)][_0x418f58(0x1f7)][0xea],_0x3b087f=this[_0x418f58(0x2ec)]['landMarks'][0x1c6],_0x18bd29=this[_0x418f58(0x2ec)][_0x418f58(0x1f7)][0xa],_0x1069d5=this['face']['landMarks'][0x98];this[_0x418f58(0x360)]=Math['atan2'](_0x3b087f[0x2]-_0x46d329[0x2],_0x3b087f[0x0]-_0x46d329[0x0])*0xb4/Math['PI'],this[_0x418f58(0x2af)]=Math[_0x418f58(0x243)](_0x1069d5[0x0]-_0x18bd29[0x0],_0x1069d5[0x2]-_0x18bd29[0x2])*0xb4/Math['PI'],this['roll']=Math[_0x418f58(0x243)](_0x3b087f[0x1]-_0x46d329[0x1],_0x3b087f[0x0]-_0x46d329[0x0])*0xb4/Math['PI'];}['getPose'](){}['getBox'](){const _0x41f8ee=_0x68345b;return this[_0x41f8ee(0x1f2)];}[_0x68345b(0x23d)](){const _0xb80c6f=_0x68345b;return this[_0xb80c6f(0x2e8)];}}const headpos=HeadPos;;const FaceCommands={'FORWARD':_0x68345b(0x21b),'LEFT':_0x68345b(0x233),'RIGHT':_0x68345b(0x2e7),'UP':'up','DOWN':_0x68345b(0x345),'SMILE':_0x68345b(0x31e),'BLINKING':_0x68345b(0x302),'NONE':'none'};class Commander{constructor(){const _0x8a5c31=_0x68345b;this['commands']=[],this['count']=0x2,this['chooselist']=[FaceCommands[_0x8a5c31(0x2b9)],FaceCommands['RIGHT'],FaceCommands['UP'],FaceCommands[_0x8a5c31(0x352)],FaceCommands[_0x8a5c31(0x396)]],this['index']=0x0;}[_0x68345b(0x276)](){const _0x3c9193=_0x68345b;this['clear']();for(let _0x113850=0x0;_0x113850<this['count'];_0x113850++){this[_0x3c9193(0x307)][_0x3c9193(0x388)]({'name':FaceCommands[_0x3c9193(0x3aa)]});}return this[_0x3c9193(0x307)];}[_0x68345b(0x266)](){const _0x539666=_0x68345b;return this['index']<this[_0x539666(0x307)]['length']-0x1?(this[_0x539666(0x283)]++,this[_0x539666(0x307)][this[_0x539666(0x283)]]):null;}[_0x68345b(0x263)](){const _0x8bb19e=_0x68345b;return this[_0x8bb19e(0x307)][this['index']];}['hasCommand'](){const _0x558cdb=_0x68345b;return this[_0x558cdb(0x283)]<this[_0x558cdb(0x307)]['length']-0x1;}['clear'](){const _0xa193e1=_0x68345b;this[_0xa193e1(0x283)]=0x0,this[_0xa193e1(0x307)]=[];}};const DCFaceError={'NO_FACE':_0x68345b(0x3a0),'MANY_FACES':_0x68345b(0x209),'LOW_LIGHT':_0x68345b(0x241),'HIGH_LIGHT':'highlight','OUT_OF_BOUNDS':_0x68345b(0x32d)},DCFacePos={'NONE':_0x68345b(0x24c),'UP':'up','DOWN':_0x68345b(0x345),'FORWARD':_0x68345b(0x21b),'LEFT':_0x68345b(0x233),'RIGHT':_0x68345b(0x2e7)},FaceActionSteps={'NONE':_0x68345b(0x24c),'INIT':_0x68345b(0x23e),'START':_0x68345b(0x29e),'ACTIONS':'actions','FINISH':_0x68345b(0x244)},CommandResult={'SUCCESS':_0x68345b(0x353),'NONE':_0x68345b(0x24c),'REJECT':_0x68345b(0x33d)};class FaceAnalyser{constructor(_0xe912a5,_0x17be4e={}){const _0x372567=_0x68345b;this['canvas']=_0xe912a5,this['options']={'video':null,'area':{'x':0x0,'y':0x0,'width':0x0,'height':0x0},'detectTime':0x64,'startingWaitTime':0x7d0,'onFaceDetected':null,'onError':null,'onFinished':null,'onCommand':null,'onCommandResult':null,'onStep':null,'onStartDownCount':null},this['options']=deepMerge(this[_0x372567(0x200)],_0x17be4e),this[_0x372567(0x304)]=null,this['errors']={'lowLight':![],'highLight':![],'noFace':![],'manyFace':![],'outOfBounds':![]},this[_0x372567(0x316)]=DCFacePos[_0x372567(0x330)],this[_0x372567(0x3b9)]=null,this[_0x372567(0x3ac)]=new headpos(),this[_0x372567(0x39e)]=new Commander(),this['lock']=![],this[_0x372567(0x37c)]=[],this['step']=FaceActionSteps[_0x372567(0x330)],this[_0x372567(0x2ab)]=0x3,this['fixedTime']=0x0,this[_0x372567(0x28c)]=0x0,this[_0x372567(0x379)]=0x7d0,this[_0x372567(0x252)]=0x1770,this[_0x372567(0x322)]=0x3e8,this[_0x372567(0x1fc)]=0x7d0,this[_0x372567(0x38f)]=![],this[_0x372567(0x2e0)]=null,this['results']=[],this[_0x372567(0x26a)]=FaceCommands[_0x372567(0x330)],this[_0x372567(0x22a)]=DCFacePos[_0x372567(0x330)],this[_0x372567(0x3a9)]=[],this['cc']=null,this[_0x372567(0x3a7)]();}[_0x68345b(0x3a7)](){const _0x57ba34=_0x68345b;this[_0x57ba34(0x3b9)]=stream[_0x57ba34(0x331)](_0x57ba34(0x285)),this[_0x57ba34(0x3b9)]['on'](_0x57ba34(0x2fa),_0x403f38=>{const _0x49a2f4=_0x57ba34;this[_0x49a2f4(0x304)]!=null&&(this[_0x49a2f4(0x3b5)](_0x403f38),this[_0x49a2f4(0x30a)]=![]);});}['start'](){const _0x28b627=_0x68345b;this['lock']=![],this[_0x28b627(0x37c)]=[],this[_0x28b627(0x38f)]=![],this['step']=FaceActionSteps[_0x28b627(0x21c)],this['results']=[],this['detectedFaceCountDownBeforeStart']=0x3,this[_0x28b627(0x2e0)]=new Date()[_0x28b627(0x3b2)](),this['defineCommands'](),this[_0x28b627(0x1ed)](this['step']),clearTimeout(this['detectTimer']),this[_0x28b627(0x304)]=setTimeout(this[_0x28b627(0x27e)][_0x28b627(0x341)](this),this['options'][_0x28b627(0x2ac)]);}[_0x68345b(0x24f)](){const _0x4e6f2c=_0x68345b;this['tid']=null,clearTimeout(this[_0x4e6f2c(0x304)]),this[_0x4e6f2c(0x304)]=null,this['lock']=![],this[_0x4e6f2c(0x39c)]();}[_0x68345b(0x39c)](){const _0x9d300f=_0x68345b;this[_0x9d300f(0x37c)]=[],this['step']=FaceActionSteps[_0x9d300f(0x330)],this[_0x9d300f(0x2ab)]=0x3,this[_0x9d300f(0x22a)]=DCFacePos[_0x9d300f(0x330)],this[_0x9d300f(0x3a9)]=[],this['currentStepActive']=![];}[_0x68345b(0x2ee)](){const _0x1f1dcf=_0x68345b;let _0x312521=this[_0x1f1dcf(0x39e)][_0x1f1dcf(0x276)]();for(let _0x1a6d72 in _0x312521){this[_0x1f1dcf(0x33c)][_0x1f1dcf(0x388)]({'pos':DCFacePos[_0x1f1dcf(0x330)],'image':null,'command':FaceCommands[_0x1f1dcf(0x330)],'status':![]});}helper_logger[_0x1f1dcf(0x274)]()[_0x1f1dcf(0x25f)](_0x1f1dcf(0x2ee),_0x312521);}[_0x68345b(0x27e)](){const _0x23320f=_0x68345b;!this[_0x23320f(0x30a)]&&(this[_0x23320f(0x3b9)][_0x23320f(0x20e)](_0x23320f(0x28a),this[_0x23320f(0x34e)]),this[_0x23320f(0x30a)]=!![]),this[_0x23320f(0x304)]=setTimeout(this[_0x23320f(0x27e)][_0x23320f(0x341)](this),this[_0x23320f(0x200)][_0x23320f(0x2ac)]);}[_0x68345b(0x3b5)](_0x16eafe){const _0x35858b=_0x68345b;this[_0x35858b(0x228)][_0x35858b(0x3ba)]=![],this[_0x35858b(0x228)]['manyFace']=![],this[_0x35858b(0x316)]=DCFacePos[_0x35858b(0x330)];if(_0x16eafe['length']>0x1)this['errors'][_0x35858b(0x27f)]=!![];else{if(_0x16eafe[_0x35858b(0x3a8)]===0x0){this[_0x35858b(0x228)][_0x35858b(0x3ba)]=!![];if(typeof this[_0x35858b(0x200)][_0x35858b(0x3b5)]==='function')this[_0x35858b(0x200)]['onFaceDetected']([]);this[_0x35858b(0x30a)]=![];return;}}this[_0x35858b(0x37c)]=_0x16eafe;if(typeof this['options']['onFaceDetected']===_0x35858b(0x3c0))this['options'][_0x35858b(0x3b5)](_0x16eafe);this[_0x35858b(0x2ab)]>0x0?(this[_0x35858b(0x2ab)]--,this[_0x35858b(0x3c5)]=new Date()['getTime'](),this['errorTime']=new Date()[_0x35858b(0x3b2)]()):(this[_0x35858b(0x3ac)][_0x35858b(0x206)](_0x16eafe[0x0]),this[_0x35858b(0x281)](),this[_0x35858b(0x22c)]()),this[_0x35858b(0x30a)]=![];}[_0x68345b(0x244)](_0x4b9d44,_0x3c85f2){const _0x361a20=_0x68345b;if(this[_0x361a20(0x2e0)]==null)return![];let _0xbcbc16={'tid':this[_0x361a20(0x2e0)],'status':_0x3c85f2,'results':this['results'],'image':null};for(let _0x30cd0b in this['results']){if(this[_0x361a20(0x33c)][_0x30cd0b][_0x361a20(0x3ad)]===FaceCommands[_0x361a20(0x3aa)]&&this['results'][_0x30cd0b][_0x361a20(0x240)]===!![]){_0xbcbc16[_0x30cd0b]['image']=this['results'][_0x30cd0b][_0x361a20(0x2ce)];break;}}typeof this[_0x361a20(0x200)][_0x361a20(0x3ae)]==='function'&&this['options'][_0x361a20(0x3ae)](_0xbcbc16),this[_0x361a20(0x24f)]();}[_0x68345b(0x281)](){const _0x526fdb=_0x68345b;let _0x499d4a=this['headpos'][_0x526fdb(0x2ae)](),_0x1eff9a={'x':this['cc']['getCoordX'](_0x499d4a['x']),'y':this['cc'][_0x526fdb(0x24d)](_0x499d4a['y']),'width':this['cc']['getSize'](_0x499d4a[_0x526fdb(0x391)]),'height':this['cc'][_0x526fdb(0x3bb)](_0x499d4a[_0x526fdb(0x365)])},_0xe9e924=this[_0x526fdb(0x200)]['area'][_0x526fdb(0x391)]*0.3,_0x361ec1=this[_0x526fdb(0x200)][_0x526fdb(0x2d2)][_0x526fdb(0x365)]*0.3,_0x37814b=_0x1eff9a['x']+_0x1eff9a[_0x526fdb(0x391)],_0x14a066=_0x1eff9a['y']+_0x1eff9a[_0x526fdb(0x365)];if(_0x1eff9a['x']>this['options'][_0x526fdb(0x2d2)]['x']-_0xe9e924&&_0x1eff9a['y']>this['options']['area']['y']-_0x361ec1&&_0x37814b<this[_0x526fdb(0x200)][_0x526fdb(0x2d2)]['x']+this[_0x526fdb(0x200)][_0x526fdb(0x2d2)][_0x526fdb(0x391)]+_0xe9e924&&_0x14a066<this[_0x526fdb(0x200)][_0x526fdb(0x2d2)]['y']+this[_0x526fdb(0x200)]['area']['height']+_0x361ec1)this[_0x526fdb(0x228)][_0x526fdb(0x25b)]=![];else return this[_0x526fdb(0x228)]['outOfBounds']=!![],![];this[_0x526fdb(0x3ac)][_0x526fdb(0x3cd)]<0xc&&this[_0x526fdb(0x3ac)]['roll']>-0xc&&this[_0x526fdb(0x3ac)][_0x526fdb(0x2af)]<=-0x14&&this[_0x526fdb(0x3ac)][_0x526fdb(0x2af)]>=-0x82&&this[_0x526fdb(0x3ac)][_0x526fdb(0x360)]>=-0xa&&this[_0x526fdb(0x3ac)][_0x526fdb(0x360)]<=0xa&&(this[_0x526fdb(0x22a)]=DCFacePos[_0x526fdb(0x3aa)]),this[_0x526fdb(0x3ac)][_0x526fdb(0x3cd)]<0xc&&this['headpos'][_0x526fdb(0x3cd)]>-0xc&&this['headpos'][_0x526fdb(0x360)]<-0xa&&(this['currentAction']=DCFacePos[_0x526fdb(0x2b9)]),this[_0x526fdb(0x3ac)][_0x526fdb(0x3cd)]<0xc&&this[_0x526fdb(0x3ac)][_0x526fdb(0x3cd)]>-0xc&&this['headpos']['yaw']>0xa&&(this[_0x526fdb(0x22a)]=DCFacePos[_0x526fdb(0x38c)]),this[_0x526fdb(0x3ac)]['roll']<0xc&&this[_0x526fdb(0x3ac)][_0x526fdb(0x3cd)]>-0xc&&this['headpos']['pitch']<-0x82&&(this[_0x526fdb(0x22a)]=DCFacePos['UP']),this['headpos']['roll']<0xc&&this[_0x526fdb(0x3ac)][_0x526fdb(0x3cd)]>-0xc&&this[_0x526fdb(0x3ac)][_0x526fdb(0x2af)]>-0x14&&(this[_0x526fdb(0x22a)]=DCFacePos['DOWN']);}[_0x68345b(0x22c)](){const _0x3c187a=_0x68345b;let _0x97e18f=this[_0x3c187a(0x3c7)](),_0x39356c=this[_0x3c187a(0x38d)](this[_0x3c187a(0x3c5)]);_0x97e18f?(this[_0x3c187a(0x316)]=DCFacePos[_0x3c187a(0x330)],this[_0x3c187a(0x39d)](this[_0x3c187a(0x228)])):this[_0x3c187a(0x28c)]=new Date()['getTime']();this[_0x3c187a(0x1e7)]===FaceActionSteps[_0x3c187a(0x21c)]&&(this[_0x3c187a(0x38f)]=![],this['step']=FaceActionSteps[_0x3c187a(0x2e9)],this[_0x3c187a(0x1ed)](this[_0x3c187a(0x1e7)]));if(this[_0x3c187a(0x1e7)]===FaceActionSteps[_0x3c187a(0x2e9)]){let _0x5f0d96=Math['round']((this[_0x3c187a(0x200)][_0x3c187a(0x237)]-_0x39356c)/0x3e8);if(_0x5f0d96>0x0){if(typeof this[_0x3c187a(0x200)][_0x3c187a(0x296)]===_0x3c187a(0x3c0))this[_0x3c187a(0x200)][_0x3c187a(0x296)](_0x5f0d96);}else this[_0x3c187a(0x1e7)]=FaceActionSteps['ACTIONS'],this[_0x3c187a(0x38f)]=![],this['fixedTime']=new Date()['getTime'](),this['sessionTime']=new Date()[_0x3c187a(0x3b2)](),this['callStepChange'](this[_0x3c187a(0x1e7)]);}if(this[_0x3c187a(0x1e7)]===FaceActionSteps['ACTIONS']&&(_0x97e18f===![]||this[_0x3c187a(0x379)]===0x0)){let _0x22db31=this[_0x3c187a(0x39e)][_0x3c187a(0x283)],_0x4352b3=this['commander']['current']();this[_0x3c187a(0x26a)]!==_0x4352b3['name']&&(this[_0x3c187a(0x26a)]=_0x4352b3[_0x3c187a(0x273)],this[_0x3c187a(0x3a9)]=[],this[_0x3c187a(0x315)](_0x4352b3['name']));_0x39356c>0x0&&this[_0x3c187a(0x3a9)][_0x3c187a(0x388)]({'pos':this[_0x3c187a(0x22a)],'posPitch':this[_0x3c187a(0x3ac)][_0x3c187a(0x2af)],'posYaw':this[_0x3c187a(0x3ac)][_0x3c187a(0x360)],'time':new Date()[_0x3c187a(0x3b2)](),'valid':!![],'command':_0x4352b3});let _0x11db43=this[_0x3c187a(0x252)]+this[_0x3c187a(0x322)]-_0x39356c,_0x3812d5=_0x39356c>this[_0x3c187a(0x322)]?this[_0x3c187a(0x2b1)](_0x4352b3[_0x3c187a(0x273)],this[_0x3c187a(0x22a)]):CommandResult[_0x3c187a(0x330)];if(_0x11db43>0x0&&_0x3812d5===CommandResult[_0x3c187a(0x330)]){}else{if(_0x39356c>this[_0x3c187a(0x322)]){let _0x155fce=ImageProcessing[_0x3c187a(0x33b)](this[_0x3c187a(0x34e)],this[_0x3c187a(0x3ac)][_0x3c187a(0x1f2)]['x'],this['headpos'][_0x3c187a(0x1f2)]['y'],this[_0x3c187a(0x3ac)]['box'][_0x3c187a(0x391)],this['headpos'][_0x3c187a(0x1f2)][_0x3c187a(0x365)]);_0x3812d5===CommandResult['SUCCESS']?this[_0x3c187a(0x33c)][_0x22db31]={'pos':this[_0x3c187a(0x22a)],'command':_0x4352b3,'status':!![],'image':_0x155fce}:this[_0x3c187a(0x33c)][_0x22db31]={'pos':this[_0x3c187a(0x22a)],'command':_0x4352b3,'status':![],'image':_0x155fce},this[_0x3c187a(0x38b)](this['results'][_0x22db31]),this['commander'][_0x3c187a(0x2c8)]()?this[_0x3c187a(0x39e)][_0x3c187a(0x266)]():(this[_0x3c187a(0x1e7)]=FaceActionSteps[_0x3c187a(0x1e2)],this['headpos'][_0x3c187a(0x39c)](),this[_0x3c187a(0x1ed)](this['step'])),this[_0x3c187a(0x3c5)]=new Date()[_0x3c187a(0x3b2)]();}}}if(this[_0x3c187a(0x1e7)]===FaceActionSteps[_0x3c187a(0x1e2)]){let _0x58c4c0=this[_0x3c187a(0x1fc)]-_0x39356c;if(_0x58c4c0>0x0){}else this['step']=FaceActionSteps[_0x3c187a(0x1e2)],this[_0x3c187a(0x3c5)]=new Date()[_0x3c187a(0x3b2)](),this['finish'](!![],!![]);}}[_0x68345b(0x2b1)](_0xa2d544,_0x569e28){const _0x483187=_0x68345b;let _0x552f15={},_0x4dec4f=FaceCommands[_0x483187(0x330)],_0x5da1e6=FaceCommands[_0x483187(0x330)],_0x2d213f={};for(let _0x16ca51 in this['currentActionList']){let _0x183da7=this[_0x483187(0x3a9)][_0x16ca51];_0x183da7!=null&&_0x183da7['valid']&&(_0x183da7[_0x483187(0x2c3)]!=null&&(_0x4dec4f=this[_0x483187(0x2a4)](_0x183da7[_0x483187(0x2c3)])),_0x552f15[_0x4dec4f]==null&&(_0x552f15[_0x4dec4f]={'list':[],'max':0x0}),_0x552f15[_0x4dec4f]=this[_0x483187(0x219)](_0x552f15[_0x4dec4f],_0x183da7,_0x5da1e6!==_0x4dec4f),_0x2d213f[_0x4dec4f]=(_0x2d213f[_0x4dec4f]||0x0)+0x1,_0x5da1e6=_0x4dec4f);}let _0x10a660=_0x2d213f[_0x483187(0x3a8)];if(_0xa2d544===FaceCommands[_0x483187(0x2b9)]||_0xa2d544===FaceCommands['UP']||_0xa2d544===FaceCommands[_0x483187(0x38c)]||_0xa2d544===FaceCommands[_0x483187(0x352)]){if(_0x10a660>0x3)return CommandResult[_0x483187(0x2d9)];if(_0x552f15[_0xa2d544]!=null&&_0x552f15[_0xa2d544][_0x483187(0x387)]>0x3e8)return CommandResult['SUCCESS'];}if(_0xa2d544===FaceCommands[_0x483187(0x3aa)]){if(_0x10a660>=0x3)return CommandResult[_0x483187(0x2d9)];if(_0x552f15[_0xa2d544]!=null&&_0x552f15[_0xa2d544][_0x483187(0x387)]>0x3e8)return CommandResult[_0x483187(0x3ab)];}return CommandResult[_0x483187(0x330)];}[_0x68345b(0x1ed)](_0xb011d8){const _0x523da7=_0x68345b;typeof this['options'][_0x523da7(0x284)]===_0x523da7(0x3c0)&&this['options'][_0x523da7(0x284)](_0xb011d8);}[_0x68345b(0x39d)](_0x9a3152){const _0x346db3=_0x68345b;typeof this['options'][_0x346db3(0x37a)]===_0x346db3(0x3c0)&&this[_0x346db3(0x200)][_0x346db3(0x37a)](_0x9a3152);}['callCommandChange'](_0xfacc05){const _0x1ec38f=_0x68345b;typeof this['options'][_0x1ec38f(0x299)]==='function'&&this[_0x1ec38f(0x200)][_0x1ec38f(0x299)](_0xfacc05);}[_0x68345b(0x38b)](_0x1a3032){const _0x14cde0=_0x68345b;typeof this[_0x14cde0(0x200)][_0x14cde0(0x376)]===_0x14cde0(0x3c0)&&this[_0x14cde0(0x200)][_0x14cde0(0x376)](_0x1a3032);}[_0x68345b(0x3c4)](){const _0x53e2d=_0x68345b;return this[_0x53e2d(0x37c)];}[_0x68345b(0x3c7)](){const _0x218d82=_0x68345b;for(const _0x5f1edb in this[_0x218d82(0x228)]){if(this[_0x218d82(0x228)][_0x5f1edb]===!![])return!![];}return![];}['getTimeDiff'](_0x424c80){const _0x474bdb=_0x68345b;let _0xf8f800=new Date()[_0x474bdb(0x3b2)]();return _0xf8f800-_0x424c80;}[_0x68345b(0x2a4)](_0x456b7f){const _0x2e5a60=_0x68345b;switch(_0x456b7f){case DCFacePos['LEFT']:return FaceCommands[_0x2e5a60(0x2b9)];case DCFacePos['UP']:return FaceCommands['UP'];case DCFacePos[_0x2e5a60(0x38c)]:return FaceCommands[_0x2e5a60(0x38c)];case DCFacePos[_0x2e5a60(0x352)]:return FaceCommands['DOWN'];case DCFacePos['FORWARD']:return FaceCommands[_0x2e5a60(0x3aa)];default:return FaceCommands[_0x2e5a60(0x330)];}}['addActionTime'](_0x52afbc,_0x1bb7df,_0x212abe){const _0x4a9c45=_0x68345b;let _0x72ba4b=_0x52afbc,_0x4d369b=0x0;return _0x72ba4b['list'][_0x4a9c45(0x3a8)]>0x0&&_0x72ba4b[_0x4a9c45(0x2e2)][_0x4d369b][_0x4a9c45(0x29e)]!=null&&_0x212abe?(_0x4d369b=_0x72ba4b[_0x4a9c45(0x2e2)]['length']-0x1,_0x1bb7df[_0x4a9c45(0x267)]!=null&&(_0x72ba4b['list'][_0x4d369b][_0x4a9c45(0x2f9)]=_0x1bb7df[_0x4a9c45(0x267)],_0x72ba4b[_0x4a9c45(0x2e2)][_0x4d369b][_0x4a9c45(0x1ec)]=_0x1bb7df[_0x4a9c45(0x267)]-_0x72ba4b[_0x4a9c45(0x2e2)][_0x4d369b]['start'],_0x72ba4b[_0x4a9c45(0x387)]=(_0x72ba4b[_0x4a9c45(0x2e2)][_0x4d369b][_0x4a9c45(0x1ec)]||0x0)>_0x72ba4b[_0x4a9c45(0x387)]?_0x72ba4b[_0x4a9c45(0x2e2)][_0x4d369b]['interval']||0x0:_0x72ba4b[_0x4a9c45(0x387)])):_0x72ba4b[_0x4a9c45(0x2e2)]['push']({'start':_0x1bb7df['time'],'end':null,'interval':null}),_0x72ba4b;}};class DeepFace{constructor(_0x38d452,_0x478af7={}){const _0x5ae79b=_0x68345b;this[_0x5ae79b(0x1f5)]=null,this[_0x5ae79b(0x34e)]=null,this[_0x5ae79b(0x32b)]=null,this['state']={'start':![],'detectInit':![],'analyzeAfterOpen':![]},this['options']={'src':null,'sourceType':null,'width':0x280,'height':0x1e0,'liveness':!![],'onFrameCaptured':null,'detectTime':0x64,'onFinished':null,'worker_path':_0x5ae79b(0x320)},this['options']=deepMerge(this[_0x5ae79b(0x200)],_0x478af7),this['initContainer'](_0x38d452),this[_0x5ae79b(0x1fe)]();}['initContainer'](_0x4d2db1){const _0x995073=_0x68345b;this[_0x995073(0x32b)]=new camera(_0x4d2db1,{'src':this['options'][_0x995073(0x23a)],'width':this['options'][_0x995073(0x391)],'height':this[_0x995073(0x200)][_0x995073(0x365)],'onFrameUpdated':this[_0x995073(0x1f8)][_0x995073(0x341)](this),'onLoaded':this[_0x995073(0x3a3)][_0x995073(0x341)](this),'onStart':this[_0x995073(0x2eb)]['bind'](this),'onStop':this[_0x995073(0x3a5)][_0x995073(0x341)](this)}),this[_0x995073(0x1f5)]=this[_0x995073(0x32b)][_0x995073(0x1f5)],this['canvas']=this[_0x995073(0x32b)]['canvas'];}[_0x68345b(0x1fe)](){const _0x3825c2=_0x68345b;this['cc']=new CoordConverter(this[_0x3825c2(0x32b)][_0x3825c2(0x1f6)]),this['faceMask']=new MaskLayer(this[_0x3825c2(0x1f5)],{'width':this[_0x3825c2(0x200)][_0x3825c2(0x391)],'height':this[_0x3825c2(0x200)]['height']}),this[_0x3825c2(0x22b)]=new VisualLayer(this[_0x3825c2(0x34e)]),this[_0x3825c2(0x211)]=new WebWorker({'path':this[_0x3825c2(0x200)]['worker_path']}),this[_0x3825c2(0x270)]=new FaceAnalyser(this[_0x3825c2(0x32b)][_0x3825c2(0x201)],{'area':this['faceMask'][_0x3825c2(0x256)](),'detectTime':this[_0x3825c2(0x200)][_0x3825c2(0x2ac)],'onFaceDetected':this[_0x3825c2(0x3b5)][_0x3825c2(0x341)](this),'onError':this[_0x3825c2(0x37a)][_0x3825c2(0x341)](this),'onFinished':this[_0x3825c2(0x3ae)][_0x3825c2(0x341)](this),'onCommand':this[_0x3825c2(0x299)][_0x3825c2(0x341)](this),'onCommandResult':this[_0x3825c2(0x376)][_0x3825c2(0x341)](this),'onStep':this[_0x3825c2(0x284)][_0x3825c2(0x341)](this),'onStartDownCount':this[_0x3825c2(0x296)]['bind'](this)}),this['analyser']['cc']=this['cc'];}['open'](){const _0x2431fc=_0x68345b;!this[_0x2431fc(0x32b)]['isPlaying']()&&(this[_0x2431fc(0x32b)][_0x2431fc(0x29e)](),this[_0x2431fc(0x36c)][_0x2431fc(0x215)]());}[_0x68345b(0x1f3)](){const _0x485ee9=_0x68345b;this['stop'](),this['camera']['stop'](),this[_0x485ee9(0x36c)][_0x485ee9(0x254)]();}['start'](){const _0x360520=_0x68345b;!this[_0x360520(0x32b)][_0x360520(0x236)]()?(this[_0x360520(0x331)](),this[_0x360520(0x22f)]['analyzeAfterOpen']=!![]):(this[_0x360520(0x22f)]['start']=!![],this[_0x360520(0x270)]['start']());}[_0x68345b(0x24f)](){const _0x5a4c4f=_0x68345b;this[_0x5a4c4f(0x22f)]['start']=![],this[_0x5a4c4f(0x270)][_0x5a4c4f(0x24f)](),this['state'][_0x5a4c4f(0x2be)]=![];}[_0x68345b(0x3ae)](_0x2887f1,_0xef0a6c){const _0x47b67e=_0x68345b;helper_logger[_0x47b67e(0x274)]()[_0x47b67e(0x25f)](_0x47b67e(0x27c)),this[_0x47b67e(0x36c)][_0x47b67e(0x2ca)](_0x47b67e(0x37d)),typeof this[_0x47b67e(0x200)][_0x47b67e(0x3ae)]=='function'&&this[_0x47b67e(0x200)][_0x47b67e(0x3ae)](_0x2887f1,_0xef0a6c);}[_0x68345b(0x3b5)](_0x103351){}[_0x68345b(0x299)](_0x4f7b80){const _0x4c8afb=_0x68345b;helper_logger[_0x4c8afb(0x274)]()[_0x4c8afb(0x25f)]('onCommand',_0x4f7b80);let _0x33239d='';switch(_0x4f7b80){case FaceCommands[_0x4c8afb(0x3aa)]:_0x33239d=_0x4c8afb(0x1ea);break;case FaceCommands[_0x4c8afb(0x2b9)]:_0x33239d=_0x4c8afb(0x1fa);break;case FaceCommands['RIGHT']:_0x33239d=_0x4c8afb(0x377);break;case FaceCommands['UP']:_0x33239d=_0x4c8afb(0x29d);break;case FaceCommands[_0x4c8afb(0x352)]:_0x33239d=_0x4c8afb(0x398);break;default:_0x33239d='';}this[_0x4c8afb(0x36c)][_0x4c8afb(0x2ca)](_0x33239d);}[_0x68345b(0x376)](){}[_0x68345b(0x284)](_0x2a7b5a){const _0x58889d=_0x68345b;helper_logger[_0x58889d(0x274)]()[_0x58889d(0x25f)](_0x58889d(0x2d0),_0x2a7b5a);let _0x30077a='';switch(_0x2a7b5a){case FaceActionSteps[_0x58889d(0x21c)]:_0x30077a=_0x58889d(0x2d6);break;case FaceActionSteps[_0x58889d(0x2e9)]:_0x30077a=_0x58889d(0x33e);break;case FaceActionSteps[_0x58889d(0x367)]:_0x30077a=_0x58889d(0x2e1);break;case FaceActionSteps[_0x58889d(0x1e2)]:_0x30077a='Computing\x20for\x20finishing';break;default:_0x30077a='';}this[_0x58889d(0x36c)][_0x58889d(0x2ca)](_0x30077a);}[_0x68345b(0x296)](_0x4ba4b9){const _0x5d2a5b=_0x68345b;helper_logger['getInstance']()[_0x5d2a5b(0x25f)]('onStartDownCount',_0x4ba4b9);}['onError'](_0x343279){const _0x45a286=_0x68345b;helper_logger[_0x45a286(0x274)]()[_0x45a286(0x25f)](_0x45a286(0x37a),_0x343279);}[_0x68345b(0x1f8)](){const _0x3f7302=_0x68345b;let _0x322071=this[_0x3f7302(0x270)][_0x3f7302(0x3c4)]();this[_0x3f7302(0x22b)][_0x3f7302(0x371)](_0x322071);}['onCameraLoaded'](_0x29346c,_0x2c8fc3){const _0x1357cb=_0x68345b;this['cc'][_0x1357cb(0x286)](_0x2c8fc3),this[_0x1357cb(0x22b)]['cc'][_0x1357cb(0x286)](_0x2c8fc3),this[_0x1357cb(0x270)]['options'][_0x1357cb(0x351)]=_0x29346c;}['onCameraStart'](){const _0x840052=_0x68345b;this[_0x840052(0x22f)]['analyzeAfterOpen']&&(this['state'][_0x840052(0x2be)]=![],this[_0x840052(0x29e)]());}[_0x68345b(0x3a5)](){}[_0x68345b(0x3c8)](_0x3b52c1){const _0x15202e=_0x68345b;this[_0x15202e(0x1f5)]&&(this['dom']['classList'][_0x15202e(0x212)]('loading'),this['dom']['classList'][_0x15202e(0x212)](_0x15202e(0x374)),_0x3b52c1&&(this['dom'][_0x15202e(0x3be)][_0x15202e(0x1e3)](_0x15202e(0x32f)),this[_0x15202e(0x1f5)][_0x15202e(0x3be)][_0x15202e(0x1e3)](_0x15202e(0x374))));}};class CardDetector{constructor(_0x52dcb0={}){const _0x47a53a=_0x68345b;this[_0x47a53a(0x200)]={'host':null,'headers':null,'serverSide':null,'modelUrl':null,'mirrored':!![],'single':!![]},this['callback']=null,this[_0x47a53a(0x3b8)]=![],this[_0x47a53a(0x2a5)]=null,this[_0x47a53a(0x200)]=deepMerge(this['options'],_0x52dcb0),this[_0x47a53a(0x20c)]={'width':0x0,'height':0x0},this['croppedSize']={'x':0x0,'y':0x0,'width':0x0,'height':0x0},this[_0x47a53a(0x217)]={'width':0x12c,'height':0x12c};if(!this[_0x47a53a(0x200)][_0x47a53a(0x3b1)])this[_0x47a53a(0x3a7)]();else{}}[_0x68345b(0x21d)](){const _0x3fdb35=_0x68345b;this[_0x3fdb35(0x200)][_0x3fdb35(0x3b1)]=OSPlus[_0x3fdb35(0x2bf)]()||OSPlus[_0x3fdb35(0x3c9)]();}[_0x68345b(0x3a7)](){const _0x265f2a=_0x68345b;this[_0x265f2a(0x3b9)]=stream[_0x265f2a(0x331)]('scan-worker'),this[_0x265f2a(0x3b9)]['on'](_0x265f2a(0x369),_0x560132=>{const _0x362192=_0x265f2a;if(typeof this[_0x362192(0x235)]===_0x362192(0x3c0)){let _0x57a115=this[_0x362192(0x3b3)](_0x560132,!![]);this[_0x362192(0x235)](_0x57a115);}}),this[_0x265f2a(0x3b9)]['on'](_0x265f2a(0x35e),_0xe2ee75=>{const _0x2901e3=_0x265f2a;helper_logger[_0x2901e3(0x274)]()['log']('Card\x20model\x20loaded'),this[_0x2901e3(0x3b8)]=_0xe2ee75;});}['load'](){const _0x4d0132=_0x68345b;if(!this[_0x4d0132(0x200)][_0x4d0132(0x3b1)])this[_0x4d0132(0x3b9)][_0x4d0132(0x20e)](_0x4d0132(0x231));else{let _0x45d31e=this[_0x4d0132(0x200)]['host']!=null?StringExtra[_0x4d0132(0x26b)](this['options']['host']):'',_0x515904=_0x45d31e+'/'+_0x4d0132(0x269),_0x4c2bdb=deepMerge({'Content-Type':_0x4d0132(0x34f)},this[_0x4d0132(0x200)][_0x4d0132(0x21f)]||{});fetch(_0x515904,{'method':_0x4d0132(0x3a1),'headers':_0x4c2bdb})[_0x4d0132(0x36d)](_0x53983b=>_0x53983b[_0x4d0132(0x1f0)]())[_0x4d0132(0x36d)](_0x14e28d=>{const _0x3981f1=_0x4d0132;this['loaded']=_0x14e28d[_0x3981f1(0x353)],helper_logger[_0x3981f1(0x274)]()[_0x3981f1(0x25f)](_0x3981f1(0x386),_0x14e28d);})[_0x4d0132(0x2cc)](_0x28ef81=>{const _0x259e73=_0x4d0132;this['loaded']=![],helper_logger[_0x259e73(0x274)]()[_0x259e73(0x25f)]('Error:',_0x28ef81);});}}[_0x68345b(0x25e)](_0x4230dd=null){const _0x43d516=_0x68345b;let _0x1358ce=this[_0x43d516(0x200)][_0x43d516(0x1dd)]!=null?StringExtra[_0x43d516(0x26b)](this['options'][_0x43d516(0x1dd)]):'',_0x28860b=_0x1358ce+'/'+'start',_0x419661=deepMerge({'Content-Type':_0x43d516(0x34f)},this['options'][_0x43d516(0x21f)]||{});fetch(_0x28860b,{'method':_0x43d516(0x3a1),'headers':_0x419661})['then'](_0x88cd28=>_0x88cd28[_0x43d516(0x1f0)]())[_0x43d516(0x36d)](_0x3f5e97=>{const _0x27246d=_0x43d516;this['loadedTID']=_0x3f5e97[_0x27246d(0x2e0)]||null,helper_logger[_0x27246d(0x274)]()['log']('Success:',_0x3f5e97),typeof _0x4230dd===_0x27246d(0x3c0)&&_0x4230dd(this[_0x27246d(0x3b8)],this[_0x27246d(0x2a5)]);})[_0x43d516(0x2cc)](_0x120f01=>{const _0x29ccf1=_0x43d516;this['loadedTID']=null,helper_logger['getInstance']()[_0x29ccf1(0x25f)](_0x29ccf1(0x23b),_0x120f01);});}['detect'](_0x432f82,_0x4ffe06,_0x1cb3a1){const _0x5d932c=_0x68345b;if(!this[_0x5d932c(0x200)][_0x5d932c(0x3b1)]){this[_0x5d932c(0x235)]=_0x1cb3a1;let _0x451cce=this[_0x5d932c(0x239)](_0x432f82);this[_0x5d932c(0x3b9)][_0x5d932c(0x20e)](_0x5d932c(0x2f2),_0x451cce);}else{let _0xd6eaf1=ImageProcessing[_0x5d932c(0x261)](_0x432f82,_0x5d932c(0x28d),0.95),_0x16ab3d=new FormData();_0x16ab3d[_0x5d932c(0x2db)]('image',_0xd6eaf1),_0x16ab3d[_0x5d932c(0x2db)]('type','0'),_0x16ab3d[_0x5d932c(0x2db)](_0x5d932c(0x2e0),_0x4ffe06);let _0x58ce97=this[_0x5d932c(0x200)][_0x5d932c(0x1dd)]!=null?StringExtra[_0x5d932c(0x26b)](this[_0x5d932c(0x200)][_0x5d932c(0x1dd)]):'',_0x558260=_0x58ce97+'/'+'card/detect',_0x438d59=deepMerge({},this['options'][_0x5d932c(0x21f)]||{});fetch(_0x558260,{'method':_0x5d932c(0x382),'body':_0x16ab3d,'headers':_0x438d59})[_0x5d932c(0x36d)](function(_0x6ed1de){const _0x48451e=_0x5d932c;if(_0x6ed1de['ok'])return _0x6ed1de['json']();console[_0x48451e(0x1ef)](_0x48451e(0x23b),_0x6ed1de),typeof _0x1cb3a1===_0x48451e(0x3c0)&&_0x1cb3a1(null);})[_0x5d932c(0x36d)](_0x1efdf2=>{const _0x46dccb=_0x5d932c;helper_logger['getInstance']()[_0x46dccb(0x25f)](_0x46dccb(0x294),_0x1efdf2);let _0x4e2880=[];_0x1efdf2['success']===!![]&&_0x1efdf2[_0x46dccb(0x326)]!==undefined&&(_0x4e2880=_0x1efdf2[_0x46dccb(0x326)]);if(_0x4e2880[_0x46dccb(0x3a8)]>0x0){}if(typeof _0x1cb3a1===_0x46dccb(0x3c0)){let _0x1aa5c8=this[_0x46dccb(0x3b3)](_0x4e2880);_0x1cb3a1(_0x1aa5c8);}})[_0x5d932c(0x2cc)](_0x2bf1ce=>{const _0x4e81c2=_0x5d932c;console[_0x4e81c2(0x1ef)](_0x4e81c2(0x23b),_0x2bf1ce),typeof _0x1cb3a1==='function'&&_0x1cb3a1(null);});}}[_0x68345b(0x33f)](){const _0x29c7aa=_0x68345b;return this[_0x29c7aa(0x3b8)];}[_0x68345b(0x239)](_0x5998a7){const _0x350c8e=_0x68345b;let _0x147695={'x':0x0,'y':0x0,'w':_0x5998a7[_0x350c8e(0x391)],'h':_0x5998a7[_0x350c8e(0x365)]};return _0x5998a7[_0x350c8e(0x391)]>_0x5998a7[_0x350c8e(0x365)]?(_0x147695['w']=_0x5998a7[_0x350c8e(0x365)],_0x147695['x']=(_0x5998a7['width']-_0x147695['w'])/0x2):(_0x147695['h']=_0x5998a7['width'],_0x147695['y']=(_0x5998a7[_0x350c8e(0x365)]-_0x147695['h'])/0x2),this[_0x350c8e(0x20c)]={'x':_0x5998a7[_0x350c8e(0x391)],'y':_0x5998a7['height']},this[_0x350c8e(0x265)]=_0x147695,ImageProcessing[_0x350c8e(0x30f)](_0x5998a7,_0x147695['x'],_0x147695['y'],_0x147695['w'],_0x147695['h'],this[_0x350c8e(0x217)][_0x350c8e(0x391)],this[_0x350c8e(0x217)]['height']);}[_0x68345b(0x2d8)](_0x3e5c1a,_0x5c556b){const _0x759086=_0x68345b;let _0x468e80=0x1;switch(_0x5c556b){case'x':_0x468e80=this[_0x759086(0x265)]['w']/this[_0x759086(0x217)][_0x759086(0x391)];return _0x3e5c1a*_0x468e80+this['croppedSize']['x'];case'y':_0x468e80=this[_0x759086(0x265)]['h']/this['inputSize'][_0x759086(0x365)];return _0x3e5c1a*_0x468e80+this[_0x759086(0x265)]['y'];case'width':_0x468e80=this[_0x759086(0x265)]['w']/this['inputSize'][_0x759086(0x391)];return _0x3e5c1a*_0x468e80;case _0x759086(0x365):_0x468e80=this['croppedSize']['h']/this[_0x759086(0x217)]['height'];return _0x3e5c1a*_0x468e80;}}[_0x68345b(0x3b3)](_0x13ffd6,_0x23898c=![]){const _0xf40fb5=_0x68345b;let _0x26f0c1=[],_0x4f6085=null,_0x48f7e3=![];for(let _0x4eedd7 in _0x13ffd6){_0x4f6085=_0x13ffd6[_0x4eedd7];_0x23898c&&(_0x4f6085[_0xf40fb5(0x223)][0x0]=this[_0xf40fb5(0x2d8)](_0x4f6085[_0xf40fb5(0x223)][0x0],'x'),_0x4f6085[_0xf40fb5(0x223)][0x1]=this[_0xf40fb5(0x2d8)](_0x4f6085[_0xf40fb5(0x223)][0x1],'y'),_0x4f6085[_0xf40fb5(0x223)][0x2]=this['toOriginalSize'](_0x4f6085[_0xf40fb5(0x223)][0x2],'width'),_0x4f6085[_0xf40fb5(0x223)][0x3]=this['toOriginalSize'](_0x4f6085['bbox'][0x3],_0xf40fb5(0x365)));_0x48f7e3=![];for(let _0x5f05f7 in _0x26f0c1){if(_0x26f0c1[_0x5f05f7][_0xf40fb5(0x1e1)]===_0x4f6085[_0xf40fb5(0x1e1)]){let _0x385641=_0x26f0c1[_0x5f05f7],_0x56f020=_0x4f6085,_0x45ab25=0x0,_0x4dbb33=0x0;if(_0x56f020['bbox'][0x0]>_0x385641[_0xf40fb5(0x223)][0x0]&&_0x56f020['bbox'][0x0]<_0x385641[_0xf40fb5(0x223)][0x0]+_0x385641[_0xf40fb5(0x223)][0x2])_0x45ab25=_0x385641[_0xf40fb5(0x223)][0x0]+_0x385641[_0xf40fb5(0x223)][0x2]-_0x56f020[_0xf40fb5(0x223)][0x0],_0x4dbb33=_0x45ab25/_0x56f020[_0xf40fb5(0x223)][0x2];else _0x385641[_0xf40fb5(0x223)][0x0]>_0x56f020[_0xf40fb5(0x223)][0x0]&&_0x385641[_0xf40fb5(0x223)][0x0]<_0x56f020['bbox'][0x0]+_0x56f020[_0xf40fb5(0x223)][0x2]&&(_0x45ab25=_0x56f020[_0xf40fb5(0x223)][0x0]+_0x56f020[_0xf40fb5(0x223)][0x2]-_0x385641[_0xf40fb5(0x223)][0x0],_0x4dbb33=_0x45ab25/_0x385641['bbox'][0x2]);let _0x559dfd=0x0,_0x3900cf=0x0;if(_0x56f020[_0xf40fb5(0x223)][0x1]>_0x385641['bbox'][0x1]&&_0x56f020[_0xf40fb5(0x223)][0x1]<_0x385641[_0xf40fb5(0x223)][0x1]+_0x385641[_0xf40fb5(0x223)][0x3])_0x559dfd=_0x385641[_0xf40fb5(0x223)][0x1]+_0x385641[_0xf40fb5(0x223)][0x3]-_0x56f020['bbox'][0x1],_0x3900cf=_0x45ab25/_0x56f020['bbox'][0x3];else _0x385641[_0xf40fb5(0x223)][0x1]>_0x56f020['bbox'][0x1]&&_0x385641[_0xf40fb5(0x223)][0x1]<_0x56f020[_0xf40fb5(0x223)][0x1]+_0x56f020['bbox'][0x3]&&(_0x559dfd=_0x56f020['bbox'][0x1]+_0x56f020[_0xf40fb5(0x223)][0x3]-_0x385641['bbox'][0x1],_0x3900cf=_0x45ab25/_0x385641[_0xf40fb5(0x223)][0x3]);_0x4dbb33>0.6&&_0x3900cf>0.6&&(_0x48f7e3=!![],_0x56f020[_0xf40fb5(0x338)]>_0x385641['score']&&(_0x26f0c1[_0x5f05f7]=_0x4f6085));}}!_0x48f7e3&&_0x26f0c1[_0xf40fb5(0x388)](_0x13ffd6[_0x4eedd7]);}if(this['options'][_0xf40fb5(0x1f1)]&&_0x26f0c1[_0xf40fb5(0x3a8)]>0x0){let _0x5c5306=0x0,_0x3ac065=0x0;for(let _0x4cb72b in _0x26f0c1){_0x26f0c1[_0x4cb72b][_0xf40fb5(0x338)]>_0x5c5306&&(_0x5c5306=_0x26f0c1[_0x4cb72b][_0xf40fb5(0x338)],_0x3ac065=_0x4cb72b);}return[_0x26f0c1[_0x3ac065]];}return _0x26f0c1;}[_0x68345b(0x337)](){const _0x386178=_0x68345b;this[_0x386178(0x2a5)]=null;}};class MRZReader{constructor(_0x47122c={}){const _0x352bd1=_0x68345b;this['options']={'server':!![],'url':null,'host':null,'checkURI':null},this[_0x352bd1(0x200)]=deepMerge(this['options'],_0x47122c);if(this[_0x352bd1(0x200)][_0x352bd1(0x3b0)]==null)this[_0x352bd1(0x200)][_0x352bd1(0x3b0)]=_0x352bd1(0x32c);this[_0x352bd1(0x3b8)]=![],this[_0x352bd1(0x1fe)]();}[_0x68345b(0x1fe)](){const _0x3db9e5=_0x68345b;if(!this[_0x3db9e5(0x200)][_0x3db9e5(0x1fd)]){}}[_0x68345b(0x394)](){const _0xad001a=_0x68345b;if(this[_0xad001a(0x200)][_0xad001a(0x1fd)])this['loaded']=!![];else{}}[_0x68345b(0x21e)](_0x3b76ae,_0xfbadae,_0x10e9fe){const _0x44ec00=_0x68345b;if(this['options'][_0x44ec00(0x1fd)])this[_0x44ec00(0x3c6)](_0x3b76ae,_0xfbadae,_0x10e9fe);else{}}[_0x68345b(0x3c6)](_0x144cce,_0x1cb1cb,_0x1520c8){const _0x251d54=_0x68345b;let _0x887cf5=ImageProcessing[_0x251d54(0x261)](_0x144cce,_0x251d54(0x28d),0.9),_0x257176=new FormData();_0x257176[_0x251d54(0x2db)]('image',_0x887cf5),_0x257176[_0x251d54(0x2db)](_0x251d54(0x2e0),_0x1cb1cb);let _0x1dc9e1=this['options']['host']!=null?StringExtra['cutLastSlash'](this[_0x251d54(0x200)][_0x251d54(0x1dd)]):'',_0x4fa172=this[_0x251d54(0x200)][_0x251d54(0x306)]!=null?this['options']['url']:_0x1dc9e1+'/'+this['options']['checkURI'];fetch(_0x4fa172,{'method':_0x251d54(0x382),'body':_0x257176})['then'](_0x48d5c7=>_0x48d5c7[_0x251d54(0x1f0)]())[_0x251d54(0x36d)](_0x29863d=>{const _0x5c0a4e=_0x251d54;helper_logger[_0x5c0a4e(0x274)]()[_0x5c0a4e(0x25f)]('Received:',_0x29863d);let _0x159ac0=MRZReader[_0x5c0a4e(0x32a)](_0x29863d[_0x5c0a4e(0x326)]);_0x29863d['success']===![]&&(_0x159ac0['type']=null),typeof _0x1520c8==='function'&&_0x1520c8(_0x159ac0);})[_0x251d54(0x2cc)](_0xfd2aef=>{const _0x3450f8=_0x251d54;console['error'](_0x3450f8(0x23b),_0xfd2aef),typeof _0x1520c8==='function'&&_0x1520c8(null);});}[_0x68345b(0x314)](_0x577118,_0x30c33d){}[_0x68345b(0x289)](_0x48f89e){const _0x7388a9=_0x68345b;let _0x50f86a={'type':null,'text':_0x48f89e,'object':null};if(_0x50f86a['count']>0x4b){const _0x4acd79=_0x48f89e['substring'](0x0,0x3);if(_0x4acd79['includes']('I<')||_0x4acd79[_0x7388a9(0x35a)]('1<'))_0x50f86a[_0x7388a9(0x3c3)]='I';else(_0x4acd79['includes']('P<')||_0x4acd79[_0x7388a9(0x35a)]('PC'))&&(_0x50f86a['type']='P');}return _0x50f86a;}static['parseObject'](_0x594099){const _0x54825b=_0x68345b;let _0x49eac9={'type':null,'text':_0x594099[_0x54825b(0x35d)][_0x54825b(0x342)](''),'object':_0x594099};if(_0x49eac9[_0x54825b(0x25c)][_0x54825b(0x3a8)]>0x4b){const _0x48ec36=_0x594099[_0x54825b(0x2f5)];if(_0x48ec36['includes']('I<')||_0x48ec36[_0x54825b(0x35a)]('1<'))_0x49eac9[_0x54825b(0x3c3)]='I';else(_0x48ec36[_0x54825b(0x35a)]('P<')||_0x48ec36[_0x54825b(0x35a)]('PC'))&&(_0x49eac9['type']='P');}return _0x49eac9;}};const DCScanError={'NO_CARD':_0x68345b(0x346),'MANY_CARDS':_0x68345b(0x385),'LOW_LIGHT':_0x68345b(0x241),'HIGH_LIGHT':_0x68345b(0x31c),'TOO_SMALL':_0x68345b(0x2f0)},DCScanDocType={'NONE':_0x68345b(0x24c),'ID':'id','PASSPORT':_0x68345b(0x275)},DCScanDocFaces={'NONE':_0x68345b(0x24c),'ID_FRONT':_0x68345b(0x36e),'ID_BACK':_0x68345b(0x20a),'PASS_FRONT':'pass_front'},DCScanCommand={'NONE':'none','SHOW':_0x68345b(0x215),'ID_BACK':_0x68345b(0x20a),'FINISH':_0x68345b(0x244)},DCScanSteps={'NONE':_0x68345b(0x24c),'SCANNING':_0x68345b(0x319),'FINISH':_0x68345b(0x244)};class ScanAnalyser{constructor(_0x33e060,_0x3c75fe={}){const _0x52c94f=_0x68345b;this[_0x52c94f(0x34e)]=_0x33e060,this[_0x52c94f(0x200)]={'host':null,'headers':null,'mrzOptions':null,'detector':null,'video':null,'area':{'x':0x0,'y':0x0,'width':0x0,'height':0x0},'detectTime':0x64,'useServerSide':null,'onCardDetected':null,'onFaceDetected':null,'onMRZDetected':null,'onDetected':null,'onError':null,'onFinished':null,'onCommand':null,'onCommandResult':null,'onStepChanged':null,'mirrored':!![],'delay':0x1f4,'serverDelay':0x1f4,'cardMinSize':{'width':0x46,'height':0x37}},this['options']=deepMerge(this[_0x52c94f(0x200)],_0x3c75fe),this['stream']=null,this[_0x52c94f(0x359)]=![],this['timeID']=null,this[_0x52c94f(0x1e7)]=DCScanSteps[_0x52c94f(0x330)],this['curScan']=null,this[_0x52c94f(0x20f)]={},this['result']={},this['curFrame']=null,this[_0x52c94f(0x271)]=null,this[_0x52c94f(0x32e)]=null,this['startTime']=null,this['finishTime']=null,this[_0x52c94f(0x2a6)]=this[_0x52c94f(0x200)][_0x52c94f(0x2a6)],this[_0x52c94f(0x249)]=null,this[_0x52c94f(0x200)][_0x52c94f(0x2c0)]&&(this['delay']=this[_0x52c94f(0x200)]['serverDelay']),this[_0x52c94f(0x368)]=new CardDetector({'mirrored':this[_0x52c94f(0x200)][_0x52c94f(0x3b6)],'single':!![],'serverSide':this[_0x52c94f(0x200)][_0x52c94f(0x2c0)],'host':this[_0x52c94f(0x200)][_0x52c94f(0x1dd)],'headers':this[_0x52c94f(0x200)][_0x52c94f(0x21f)]}),this[_0x52c94f(0x2f6)]=new MRZReader({'host':this['options'][_0x52c94f(0x1dd)],'url':this[_0x52c94f(0x200)]['mrzOptions']?this[_0x52c94f(0x200)]['mrzOptions'][_0x52c94f(0x306)]||null:null}),this['cc']=null,this['reset'](),!this[_0x52c94f(0x200)][_0x52c94f(0x2c0)]&&this[_0x52c94f(0x3a7)]();}[_0x68345b(0x23e)](){const _0x2acbbf=_0x68345b;this[_0x2acbbf(0x368)][_0x2acbbf(0x394)](),this[_0x2acbbf(0x2f6)][_0x2acbbf(0x394)](),this['stream']!=null&&ImageProcessing[_0x2acbbf(0x384)]('/img/face.jpg')[_0x2acbbf(0x36d)](_0x15b7d1=>{const _0x327978=_0x2acbbf;this[_0x327978(0x3b9)][_0x327978(0x20e)](_0x327978(0x1f4),_0x15b7d1);});}[_0x68345b(0x3a7)](){const _0x5b0f96=_0x68345b;this['stream']=stream['open'](_0x5b0f96(0x285)),this[_0x5b0f96(0x3b9)]['on'](_0x5b0f96(0x2ff),_0x54c50f=>{const _0x36d2bd=_0x5b0f96;helper_logger[_0x36d2bd(0x274)]()[_0x36d2bd(0x25f)]('onFaceResult',_0x54c50f),this[_0x36d2bd(0x1e7)]===DCScanSteps[_0x36d2bd(0x26c)]&&this[_0x36d2bd(0x22e)]!=null&&this[_0x36d2bd(0x3b5)](_0x54c50f);});}[_0x68345b(0x218)](_0x36bd23,_0x4507ea){const _0x368792=_0x68345b;this[_0x368792(0x368)]['isReady']()&&this[_0x368792(0x368)][_0x368792(0x262)](_0x36bd23,_0x33682c=>{typeof _0x4507ea==='function'&&_0x4507ea(_0x33682c);});}[_0x68345b(0x27e)](){const _0xa3c503=_0x68345b;if(!this['detector'][_0xa3c503(0x33f)]()||this['tID']==null)return;else{let _0x545357=new Date()['getTime']();if(this[_0xa3c503(0x1e7)]===DCScanSteps[_0xa3c503(0x330)]&&_0x545357-this['startTime']>0x3e8)this[_0xa3c503(0x1e7)]=DCScanSteps[_0xa3c503(0x26c)],this[_0xa3c503(0x2b8)](DCScanCommand[_0xa3c503(0x375)]);else{if(this['step']===DCScanSteps[_0xa3c503(0x330)])return;else{if(this[_0xa3c503(0x1e7)]===DCScanCommand[_0xa3c503(0x1e2)]){this[_0xa3c503(0x358)]!=null&&_0x545357-this['finishTime']>0x7d0&&(this[_0xa3c503(0x244)](),this['finishTime']=null);return;}}}}!this['detectionLocked']&&(this[_0xa3c503(0x22e)]=null,this['scanned']={'card':![],'face':![],'mrz':![]},this['detectionLocked']=!![],this['actualCanvas']=this[_0xa3c503(0x34e)],this[_0xa3c503(0x3a6)]=ImageProcessing['canvasToImageData'](this[_0xa3c503(0x271)]),this[_0xa3c503(0x368)][_0xa3c503(0x262)](this[_0xa3c503(0x271)],this['tID'],_0x35d143=>{const _0x24a9a7=_0xa3c503;this[_0x24a9a7(0x30b)](_0x35d143);}));}[_0x68345b(0x30b)](_0x2fd7cf){const _0x41c1b5=_0x68345b;let _0x5cee10=_0x2fd7cf!=null&&_0x2fd7cf[_0x41c1b5(0x3a8)]>0x0?_0x2fd7cf[0x0]:null,_0x3f8c58=null;this[_0x41c1b5(0x20f)][_0x41c1b5(0x287)]=!![];let _0x29b060=_0x5cee10!=null?this[_0x41c1b5(0x279)](_0x5cee10[_0x41c1b5(0x223)]):![];_0x5cee10!=null&&!_0x29b060&&this[_0x41c1b5(0x39d)](DCScanError[_0x41c1b5(0x2b5)]);if(_0x5cee10!=null&&_0x29b060===!![]){helper_logger[_0x41c1b5(0x274)]()[_0x41c1b5(0x25f)](_0x41c1b5(0x3cb),_0x2fd7cf);let _0x1c0f23={'docType':this[_0x41c1b5(0x31d)](_0x5cee10['class']),'docFace':this[_0x41c1b5(0x31f)](_0x5cee10[_0x41c1b5(0x1e1)]),'card':_0x5cee10,'face':null,'mrz':null,'image':null};this[_0x41c1b5(0x22e)]=_0x1c0f23;let _0x241c86=ImageProcessing[_0x41c1b5(0x2a3)](this[_0x41c1b5(0x3a6)]);_0x3f8c58=ImageProcessing['cropCanvas'](_0x241c86,_0x5cee10[_0x41c1b5(0x223)][0x0],_0x5cee10[_0x41c1b5(0x223)][0x1],_0x5cee10[_0x41c1b5(0x223)][0x2],_0x5cee10[_0x41c1b5(0x223)][0x3]),_0x1c0f23['image']=_0x3f8c58['toDataURL'](_0x41c1b5(0x28d),0.9),this[_0x41c1b5(0x32e)]=_0x3f8c58;if(this[_0x41c1b5(0x39f)][_0x41c1b5(0x2c7)][_0x41c1b5(0x3a8)]===0x0&&(_0x1c0f23['docFace']===DCScanDocFaces[_0x41c1b5(0x37e)]||_0x1c0f23['docFace']===DCScanDocFaces[_0x41c1b5(0x3a4)])){_0x5cee10[_0x41c1b5(0x2ec)]===undefined||_0x5cee10[_0x41c1b5(0x2ec)]==null?this[_0x41c1b5(0x3b9)]['notify'](_0x41c1b5(0x1f4),_0x3f8c58):this[_0x41c1b5(0x3b5)]([_0x5cee10[_0x41c1b5(0x2ec)]]);if(_0x1c0f23[_0x41c1b5(0x2da)]===DCScanDocFaces[_0x41c1b5(0x3a4)]){let _0x331a8c=_0x3f8c58['height']*0.7,_0x5cb429=ImageProcessing[_0x41c1b5(0x33b)](_0x3f8c58,0x0,_0x331a8c,_0x3f8c58[_0x41c1b5(0x391)],_0x3f8c58['height']-_0x331a8c);if(_0x5cee10['mrz']===undefined||_0x5cee10[_0x41c1b5(0x2f6)]==null){let _0x2ea42a=ImageProcessing[_0x41c1b5(0x2dd)](_0x5cb429);_0x2ea42a>0x5?this[_0x41c1b5(0x2f6)][_0x41c1b5(0x21e)](_0x5cb429,this[_0x41c1b5(0x249)],_0x3c31b1=>{const _0x332c77=_0x41c1b5;this[_0x332c77(0x222)](_0x3c31b1);}):this[_0x41c1b5(0x28b)](this[_0x41c1b5(0x2a6)]);}else this[_0x41c1b5(0x222)](_0x5cee10[_0x41c1b5(0x2f6)]);}else this[_0x41c1b5(0x20f)][_0x41c1b5(0x2f6)]=!![];}else{if(this['result'][_0x41c1b5(0x2c7)][_0x41c1b5(0x3a8)]>0x0&&this['result'][_0x41c1b5(0x36b)]===DCScanDocType['ID']&&_0x1c0f23[_0x41c1b5(0x2da)]===DCScanDocFaces['ID_BACK']){let _0x23d6b3=_0x3f8c58['height']*0.6,_0xde3028=ImageProcessing[_0x41c1b5(0x33b)](_0x3f8c58,0x0,_0x23d6b3,_0x3f8c58[_0x41c1b5(0x391)],_0x3f8c58[_0x41c1b5(0x365)]-_0x23d6b3);if(_0x5cee10[_0x41c1b5(0x2f6)]===undefined||_0x5cee10[_0x41c1b5(0x2f6)]==null){let _0x62d72c=ImageProcessing[_0x41c1b5(0x2dd)](_0xde3028,0xa);_0x62d72c>0xa?this['mrz'][_0x41c1b5(0x21e)](_0xde3028,this['tID'],_0x3d0bbf=>{const _0x1054de=_0x41c1b5;this[_0x1054de(0x222)](_0x3d0bbf);}):this['unlock'](this[_0x41c1b5(0x2a6)]);}else this[_0x41c1b5(0x222)](_0x5cee10[_0x41c1b5(0x2f6)]);this[_0x41c1b5(0x20f)]['face']=!![];}else this['unlock'](this[_0x41c1b5(0x2a6)]);}this[_0x41c1b5(0x250)](_0x2fd7cf),this[_0x41c1b5(0x3bc)]();}else this[_0x41c1b5(0x250)]([]),this[_0x41c1b5(0x2cf)]([]),this['unlock'](this[_0x41c1b5(0x2a6)]);}['checkSize'](_0x4a6434){const _0x4c2f6e=_0x68345b;let _0x7642e9=this[_0x4c2f6e(0x271)][_0x4c2f6e(0x391)],_0x516d01=this[_0x4c2f6e(0x271)][_0x4c2f6e(0x365)],_0x578dc7=this['options'][_0x4c2f6e(0x378)];if(_0x4a6434!=null&&_0x4a6434[_0x4c2f6e(0x3a8)]>=0x4){if(_0x4a6434[0x2]/_0x7642e9*0x64>_0x578dc7[_0x4c2f6e(0x391)]||_0x4a6434[0x3]/_0x516d01*0x64>_0x578dc7[_0x4c2f6e(0x365)])return!![];}return![];}[_0x68345b(0x3b5)](_0x5f5127){const _0x58b698=_0x68345b;helper_logger[_0x58b698(0x274)]()[_0x58b698(0x25f)]('onFaceDetected',_0x5f5127),this[_0x58b698(0x20f)][_0x58b698(0x2ec)]=!![];if(this[_0x58b698(0x22e)]!=null){this[_0x58b698(0x22e)][_0x58b698(0x2ec)]=null;if(_0x5f5127[_0x58b698(0x3a8)]>0x0){let _0x4bc098=ImageProcessing['cropCanvas'](this[_0x58b698(0x32e)],_0x5f5127[0x0]['x'],_0x5f5127[0x0]['y'],_0x5f5127[0x0][_0x58b698(0x391)],_0x5f5127[0x0][_0x58b698(0x365)]),_0x517da6=ImageProcessing[_0x58b698(0x2dd)](_0x4bc098,0xa);helper_logger[_0x58b698(0x274)]()['log'](_0x58b698(0x2b4),_0x517da6),_0x517da6>0xa&&(this[_0x58b698(0x22e)][_0x58b698(0x2ec)]=_0x5f5127);}typeof this[_0x58b698(0x200)]['onFaceDetected']===_0x58b698(0x3c0)&&this[_0x58b698(0x200)][_0x58b698(0x3b5)](_0x5f5127),this[_0x58b698(0x3bc)]();}}['onMRZDetected'](_0x5efbf4){const _0x22f042=_0x68345b;helper_logger['getInstance']()['log'](_0x22f042(0x222),_0x5efbf4),this[_0x22f042(0x20f)][_0x22f042(0x2f6)]=!![];if(this['curScan']==null)return;if(_0x5efbf4!=null&&_0x5efbf4['object']!=null&&_0x5efbf4[_0x22f042(0x1de)]['Valid']===!![])this[_0x22f042(0x22e)][_0x22f042(0x2f6)]=_0x5efbf4;else _0x5efbf4!=null&&_0x5efbf4[_0x22f042(0x2a0)]===!![]?this['curScan'][_0x22f042(0x2f6)]=MRZReader[_0x22f042(0x32a)](_0x5efbf4):this[_0x22f042(0x22e)]['mrz']=null;typeof this['options'][_0x22f042(0x222)]===_0x22f042(0x3c0)&&this[_0x22f042(0x200)][_0x22f042(0x222)](_0x5efbf4),this['checkScanResult']();}[_0x68345b(0x3bc)](){const _0x4d57f8=_0x68345b;if(!this['isAllScanned']())return;let _0x547aab=this[_0x4d57f8(0x22e)],_0x283f93=![];if(this[_0x4d57f8(0x39f)][_0x4d57f8(0x2c7)][_0x4d57f8(0x3a8)]===0x0&&(_0x547aab[_0x4d57f8(0x2da)]===DCScanDocFaces[_0x4d57f8(0x37e)]||_0x547aab['docFace']===DCScanDocFaces[_0x4d57f8(0x3a4)]))_0x547aab['docFace']===DCScanDocFaces['ID_FRONT']?_0x547aab[_0x4d57f8(0x287)]!=null&&_0x547aab[_0x4d57f8(0x2ec)]!=null&&_0x547aab['face'][_0x4d57f8(0x3a8)]===0x1&&(this['result'][_0x4d57f8(0x2c7)][_0x4d57f8(0x388)](_0x547aab),this['result'][_0x4d57f8(0x36b)]=DCScanDocType['ID'],this[_0x4d57f8(0x39f)][_0x4d57f8(0x240)]=![],this[_0x4d57f8(0x2cf)](this['curScan']),this['fireCommand'](DCScanCommand[_0x4d57f8(0x372)]),_0x283f93=!![],this[_0x4d57f8(0x28b)](this['delay'])):_0x547aab['card']!=null&&_0x547aab[_0x4d57f8(0x2ec)]!=null&&_0x547aab[_0x4d57f8(0x2f6)]!=null&&_0x547aab[_0x4d57f8(0x2f6)][_0x4d57f8(0x3c3)]!=null&&(this[_0x4d57f8(0x39f)][_0x4d57f8(0x2c7)][_0x4d57f8(0x388)](_0x547aab),this[_0x4d57f8(0x39f)][_0x4d57f8(0x36b)]=DCScanDocType[_0x4d57f8(0x35c)],this['result'][_0x4d57f8(0x240)]=!![],this[_0x4d57f8(0x2cf)](this['curScan']),this['changeStep'](DCScanSteps[_0x4d57f8(0x1e2)]),this['finishTime']=new Date()[_0x4d57f8(0x3b2)](),_0x283f93=!![]);else this['result'][_0x4d57f8(0x2c7)]['length']===0x1&&this[_0x4d57f8(0x39f)][_0x4d57f8(0x36b)]===DCScanDocType['ID']&&_0x547aab[_0x4d57f8(0x2da)]===DCScanDocFaces[_0x4d57f8(0x372)]&&(_0x547aab[_0x4d57f8(0x287)]!=null&&_0x547aab['mrz']!=null&&_0x547aab['mrz']['type']!=null&&(this[_0x4d57f8(0x39f)]['scans'][_0x4d57f8(0x388)](_0x547aab),this[_0x4d57f8(0x39f)]['status']=!![],this[_0x4d57f8(0x2cf)](this['curScan']),this[_0x4d57f8(0x34b)](DCScanSteps[_0x4d57f8(0x1e2)]),this['finishTime']=new Date()['getTime'](),_0x283f93=!![]));!_0x283f93&&this[_0x4d57f8(0x20f)][_0x4d57f8(0x287)]&&this['scanned'][_0x4d57f8(0x2ec)]&&this['scanned'][_0x4d57f8(0x2f6)]&&this[_0x4d57f8(0x28b)](this[_0x4d57f8(0x2a6)]);}[_0x68345b(0x2c1)](){const _0x584565=_0x68345b;for(let _0x2891a2 in this[_0x584565(0x20f)]){if(this[_0x584565(0x20f)][_0x2891a2]!==!![])return![];}return!![];}[_0x68345b(0x34b)](_0x4a3526){const _0x58ab45=_0x68345b;this[_0x58ab45(0x1e7)]!==_0x4a3526&&(this[_0x58ab45(0x1e7)]=_0x4a3526,typeof this['options'][_0x58ab45(0x2d0)]=='function'&&this[_0x58ab45(0x200)][_0x58ab45(0x2d0)](_0x4a3526));}[_0x68345b(0x250)](_0x49c07e){const _0x3b03fb=_0x68345b;_0x49c07e!==null&&typeof this[_0x3b03fb(0x200)]['onCardDetected']===_0x3b03fb(0x3c0)&&this[_0x3b03fb(0x200)]['onCardDetected'](_0x49c07e);}[_0x68345b(0x2cf)](_0x59a7d1){const _0x321667=_0x68345b;typeof this[_0x321667(0x200)][_0x321667(0x324)]===_0x321667(0x3c0)&&this['options'][_0x321667(0x324)](_0x59a7d1);}[_0x68345b(0x39d)](_0x2e67cf){const _0x2f5966=_0x68345b;typeof this[_0x2f5966(0x200)]['onError']===_0x2f5966(0x3c0)&&this[_0x2f5966(0x200)][_0x2f5966(0x37a)](_0x2e67cf);}[_0x68345b(0x297)](){const _0x290317=_0x68345b;return this[_0x290317(0x1e7)];}['unlock'](_0x96de56=null){const _0x1e7dc2=_0x68345b;_0x96de56=_0x96de56==null?this[_0x1e7dc2(0x2a6)]:_0x96de56,clearTimeout(this[_0x1e7dc2(0x22d)]),this[_0x1e7dc2(0x22d)]=setTimeout(()=>{const _0x21f1b0=_0x1e7dc2;this[_0x21f1b0(0x359)]=![];},_0x96de56);}['reset'](){const _0x255a59=_0x68345b;this[_0x255a59(0x1e7)]=DCScanCommand['NONE'],this[_0x255a59(0x39f)]={'status':![],'docType':DCScanDocType['NONE'],'scans':[],'tID':null},this[_0x255a59(0x22e)]=null,this[_0x255a59(0x20f)]={},this['detectionLocked']=![],this['cardImage']=null,this[_0x255a59(0x249)]=null,this[_0x255a59(0x368)][_0x255a59(0x337)]();}['start'](){const _0x170879=_0x68345b;this[_0x170879(0x1e7)]=DCScanSteps[_0x170879(0x330)],this[_0x170879(0x2b8)](DCScanCommand[_0x170879(0x330)]),this['startTime']=new Date()[_0x170879(0x3b2)](),!this['detector'][_0x170879(0x200)][_0x170879(0x3b1)]?(this['tID']=String(this[_0x170879(0x336)]+Math['round'](Math['random']()*0x186a0)),this['result'][_0x170879(0x249)]=this['tID']):this['detector'][_0x170879(0x25e)]((_0x538cd7,_0x1b2d36)=>{const _0x2078bc=_0x170879;this[_0x2078bc(0x249)]=_0x1b2d36,this[_0x2078bc(0x39f)][_0x2078bc(0x249)]=this['tID'];});}[_0x68345b(0x244)](){const _0x2cc0e1=_0x68345b;this[_0x2cc0e1(0x2b8)](DCScanCommand['FINISH']),typeof this[_0x2cc0e1(0x200)][_0x2cc0e1(0x3ae)]==='function'&&this[_0x2cc0e1(0x200)]['onFinished'](this[_0x2cc0e1(0x39f)]);}[_0x68345b(0x2b8)](_0x5f0ec5){const _0x41157c=_0x68345b;typeof this[_0x41157c(0x200)][_0x41157c(0x299)]===_0x41157c(0x3c0)&&this['options'][_0x41157c(0x299)](_0x5f0ec5);}['defineScanType'](_0x527af0){const _0x4afa5f=_0x68345b;switch(_0x527af0){case _0x4afa5f(0x36e):case _0x4afa5f(0x20a):return DCScanDocType['ID'];case _0x4afa5f(0x2f7):case _0x4afa5f(0x3c1):return DCScanDocType[_0x4afa5f(0x35c)];default:return DCScanDocType[_0x4afa5f(0x330)];}}[_0x68345b(0x31f)](_0x414ad8){const _0x2e6679=_0x68345b;switch(_0x414ad8){case _0x2e6679(0x36e):return DCScanDocFaces[_0x2e6679(0x37e)];case _0x2e6679(0x20a):return DCScanDocFaces[_0x2e6679(0x372)];case _0x2e6679(0x2f7):case _0x2e6679(0x3c1):return DCScanDocFaces[_0x2e6679(0x3a4)];default:return DCScanDocFaces[_0x2e6679(0x330)];}}[_0x68345b(0x242)](){return this['step'];}};class vislayer_VisualLayer{constructor(_0x522861,_0x2b9e3a={}){const _0x42d642=_0x68345b;this['canvas']=_0x522861,this['options']={'srcDim':{'k':0x1,'dx':0x0,'dy':0x0,'dw':0x0,'dh':0x0},'mirrored':!![]},this[_0x42d642(0x200)]=deepMerge(this['options'],_0x2b9e3a),this['cc']=new CoordConverter(this[_0x42d642(0x200)][_0x42d642(0x30d)]);}[_0x68345b(0x207)](_0x4c7b03,_0xe4190f,_0x43d2ce){}[_0x68345b(0x2f1)](){}[_0x68345b(0x2b0)](_0x1ca9ae){const _0x109a4e=_0x68345b;let _0x20bd31=_0x1ca9ae[_0x109a4e(0x391)]+0x14,_0x2aa04e=_0x1ca9ae['height']+0x14,_0x8caee6=(this[_0x109a4e(0x34e)][_0x109a4e(0x391)]-_0x20bd31*this[_0x109a4e(0x34e)]['width']/0x64)/0x2,_0xc8d464=(this[_0x109a4e(0x34e)][_0x109a4e(0x365)]-_0x2aa04e*this['canvas']['height']/0x64)/0x2,_0x17d4f1=this[_0x109a4e(0x34e)]['getContext']('2d');_0x17d4f1[_0x109a4e(0x260)](),_0x17d4f1['beginPath'](),_0x17d4f1[_0x109a4e(0x216)]='3',_0x17d4f1[_0x109a4e(0x380)]='rgba(255,160,24,0.5)',_0x17d4f1[_0x109a4e(0x2cd)](_0x8caee6,_0xc8d464,this[_0x109a4e(0x34e)][_0x109a4e(0x391)]-_0x8caee6*0x2,this[_0x109a4e(0x34e)]['height']-_0xc8d464*0x2),_0x17d4f1['stroke'](),_0x17d4f1['closePath'](),_0x17d4f1['restore']();}['drawCard'](_0x4705ad,_0x4e6d5a=_0x68345b(0x389),_0x49f997=''){const _0x43bcc5=_0x68345b;let _0x8abd38=this[_0x43bcc5(0x34e)][_0x43bcc5(0x3c2)]('2d'),_0xebef26=null,_0x5ae8b4=null,_0x32a13d=null;for(let _0x26e30e in _0x4705ad){_0x32a13d=_0x4705ad[_0x26e30e],this[_0x43bcc5(0x200)][_0x43bcc5(0x3b6)]?_0xebef26=this['canvas']['width']-this['cc']['getCoordX'](_0x32a13d['bbox'][0x0])-this['cc'][_0x43bcc5(0x3bb)](_0x32a13d[_0x43bcc5(0x223)][0x2]):_0xebef26=this['cc']['getCoordX'](_0x32a13d[_0x43bcc5(0x223)][0x0]),_0x5ae8b4=this['cc'][_0x43bcc5(0x24d)](_0x32a13d['bbox'][0x1]),_0x8abd38[_0x43bcc5(0x31a)](),_0x8abd38['lineWidth']='2',_0x8abd38[_0x43bcc5(0x380)]=_0x4e6d5a,_0x8abd38[_0x43bcc5(0x2cd)](_0xebef26,_0x5ae8b4,this['cc'][_0x43bcc5(0x3bb)](_0x32a13d[_0x43bcc5(0x223)][0x2]),this['cc']['getSize'](_0x32a13d[_0x43bcc5(0x223)][0x3])),_0x8abd38[_0x43bcc5(0x312)](),_0x8abd38[_0x43bcc5(0x216)]='0',_0x8abd38[_0x43bcc5(0x247)]=_0x4e6d5a,_0x8abd38['fillRect'](_0xebef26-0x1,_0x5ae8b4-0x14,0x96,0x14),_0x8abd38[_0x43bcc5(0x34a)]=_0x43bcc5(0x29a),_0x8abd38[_0x43bcc5(0x247)]=_0x43bcc5(0x334),_0x8abd38[_0x43bcc5(0x2c6)]=_0x43bcc5(0x233),_0x8abd38[_0x43bcc5(0x36a)](_0x32a13d[_0x43bcc5(0x1e1)]+'\x20'+Number(_0x32a13d['score'])[_0x43bcc5(0x229)](0x2),_0xebef26+0x5,_0x5ae8b4-0x5),_0x8abd38['stroke'](),_0x8abd38[_0x43bcc5(0x34a)]=_0x43bcc5(0x27b),_0x8abd38['fillStyle']=_0x4e6d5a,_0x8abd38[_0x43bcc5(0x2c6)]=_0x43bcc5(0x2ed),_0x8abd38[_0x43bcc5(0x36a)](_0x49f997,_0xebef26+this['cc']['getSize'](_0x32a13d[_0x43bcc5(0x223)][0x2])/0x2,_0x5ae8b4+this['cc']['getSize'](_0x32a13d[_0x43bcc5(0x223)][0x3])/0x2),_0x8abd38['closePath']();}_0x8abd38[_0x43bcc5(0x381)]();}};class ScanWebWorker{constructor(_0x5ac079={}){const _0x2b93cf=_0x68345b;this[_0x2b93cf(0x285)]=null,this[_0x2b93cf(0x3b9)]=null,this['options']={'path':null},this[_0x2b93cf(0x200)]=deepMerge(this[_0x2b93cf(0x200)],_0x5ac079),this['setup']();}['setup'](){const _0x2db87e=_0x68345b;this['stream']=stream['open']('scan-worker'),this[_0x2db87e(0x3b9)]['on'](_0x2db87e(0x231),this[_0x2db87e(0x231)][_0x2db87e(0x341)](this)),this['stream']['on'](_0x2db87e(0x2f2),this[_0x2db87e(0x2f2)][_0x2db87e(0x341)](this)),window['Worker']&&this[_0x2db87e(0x200)]['path']!=null?(this['worker']=new Worker(this['options']['path']),this[_0x2db87e(0x285)][_0x2db87e(0x399)]=this[_0x2db87e(0x31b)][_0x2db87e(0x341)](this)):helper_logger[_0x2db87e(0x274)]()['log']('Your\x20browser\x20doesn\x27t\x20support\x20web\x20workers.');}[_0x68345b(0x2f2)](_0x5c0b3a){const _0x1212f9=_0x68345b;let _0x1e91a7=null;if(_0x5c0b3a instanceof HTMLCanvasElement)_0x1e91a7=ImageProcessing[_0x1212f9(0x272)](_0x5c0b3a);else _0x5c0b3a instanceof HTMLImageElement&&(_0x1e91a7=ImageProcessing[_0x1212f9(0x226)](_0x5c0b3a));this[_0x1212f9(0x285)]['postMessage']({'type':_0x1212f9(0x29f),'action':'getCard','data':_0x1e91a7});}['loadCard'](){const _0x47a298=_0x68345b;this[_0x47a298(0x285)]['postMessage']({'type':_0x47a298(0x29f),'action':_0x47a298(0x231)});}[_0x68345b(0x31b)](_0x3839a1){const _0x6ff452=_0x68345b;let _0x50d27f=_0x3839a1[_0x6ff452(0x326)]['type'],_0x1bb116=_0x3839a1[_0x6ff452(0x326)][_0x6ff452(0x1e0)],_0x34ebef=_0x3839a1[_0x6ff452(0x326)][_0x6ff452(0x326)];switch(_0x50d27f){case _0x6ff452(0x29f):this[_0x6ff452(0x3b9)][_0x6ff452(0x20e)]('onScanResult',_0x34ebef);break;case _0x6ff452(0x348):this[_0x6ff452(0x3b9)][_0x6ff452(0x20e)](_0x6ff452(0x35e),_0x34ebef);break;default:break;}}};class DeepScanner{constructor(_0x57396c,_0x6f0c1a={}){const _0x264bd7=_0x68345b;this[_0x264bd7(0x1f5)]=null,this[_0x264bd7(0x34e)]=null,this[_0x264bd7(0x32b)]=null,this[_0x264bd7(0x22f)]={'start':![],'detectInit':![],'analyzeAfterOpen':![]},this[_0x264bd7(0x285)]=null,this[_0x264bd7(0x200)]={'url':null,'headers':null,'src':null,'sourceType':null,'width':0x780,'height':0x438,'onInit':null,'onFrameCaptured':null,'onCardDetected':null,'onDetected':null,'onCommand':null,'sessionTime':0xea60,'detectTime':0x64,'onFinished':null,'mirrored':!![],'scan_worker_path':'js/deepscanworker.min.js','face_worker_path':_0x264bd7(0x292),'testURL':null,'mrzOptions':null,'useServerSide':null,'serverRequestDelay':0x1f4,'detector':{},'camera':{'fillOnMobile':!![],'fill':!![],'cutEdge':!![]}},this['analizer']=null,this[_0x264bd7(0x22b)]=null,this['faceWebWorker']=null,this[_0x264bd7(0x204)]=null,this[_0x264bd7(0x37c)]=null,this['lastDetectedTime']=null,this[_0x264bd7(0x25a)]=null,this[_0x264bd7(0x2bb)]=null,this[_0x264bd7(0x2a7)]=DCScanCommand[_0x264bd7(0x330)],this[_0x264bd7(0x208)]=null,this[_0x264bd7(0x2a8)]=0x0,this[_0x264bd7(0x200)]=deepMerge(this[_0x264bd7(0x200)],_0x6f0c1a),(this[_0x264bd7(0x200)][_0x264bd7(0x2c0)]==null&&OSPlus[_0x264bd7(0x2bf)]()||OSPlus['isSafari']())&&(this[_0x264bd7(0x200)][_0x264bd7(0x2c0)]=!![]),this[_0x264bd7(0x3a2)](_0x57396c),this[_0x264bd7(0x1fe)]();}[_0x68345b(0x3a2)](_0x546375){const _0x214c3f=_0x68345b;this[_0x214c3f(0x32b)]=new camera(_0x546375,{'src':this[_0x214c3f(0x200)][_0x214c3f(0x23a)],'width':this['options'][_0x214c3f(0x391)],'height':this[_0x214c3f(0x200)][_0x214c3f(0x365)],'fill':this['options'][_0x214c3f(0x32b)]['fill'],'fillOnMobile':this[_0x214c3f(0x200)][_0x214c3f(0x32b)][_0x214c3f(0x1f9)],'cutEdge':this[_0x214c3f(0x200)]['camera'][_0x214c3f(0x2c2)],'onFrameUpdated':this[_0x214c3f(0x1f8)][_0x214c3f(0x341)](this),'onLoaded':this[_0x214c3f(0x3a3)]['bind'](this),'onStart':this[_0x214c3f(0x2eb)][_0x214c3f(0x341)](this),'onStop':this[_0x214c3f(0x3a5)][_0x214c3f(0x341)](this)}),this['dom']=this[_0x214c3f(0x32b)][_0x214c3f(0x1f5)],this[_0x214c3f(0x34e)]=this[_0x214c3f(0x32b)][_0x214c3f(0x34e)];}[_0x68345b(0x1fe)](){const _0x3b448d=_0x68345b;this['cc']=new CoordConverter(this['camera'][_0x3b448d(0x1f6)]),this[_0x3b448d(0x22b)]=new vislayer_VisualLayer(this[_0x3b448d(0x34e)],{'srcDim':this[_0x3b448d(0x32b)]['sourceDim'],'mirrored':this[_0x3b448d(0x200)][_0x3b448d(0x3b6)]}),this[_0x3b448d(0x2df)]=new ScanAnalyser(this[_0x3b448d(0x32b)][_0x3b448d(0x2bc)],{'host':this[_0x3b448d(0x200)][_0x3b448d(0x306)],'headers':this['options'][_0x3b448d(0x21f)],'mrzOptions':this[_0x3b448d(0x200)][_0x3b448d(0x2b3)],'detector':this[_0x3b448d(0x200)][_0x3b448d(0x368)],'useServerSide':this[_0x3b448d(0x200)][_0x3b448d(0x2c0)],'onCommand':this['onCommand'][_0x3b448d(0x341)](this),'onCardDetected':this[_0x3b448d(0x30b)][_0x3b448d(0x341)](this),'onDetected':this['onDetected'][_0x3b448d(0x341)](this),'onFinished':this[_0x3b448d(0x3ae)]['bind'](this),'onError':this[_0x3b448d(0x37a)][_0x3b448d(0x341)](this),'mirrored':this[_0x3b448d(0x200)][_0x3b448d(0x3b6)],'serverDelay':this[_0x3b448d(0x200)][_0x3b448d(0x310)]});if(!this['options']['useServerSide']){let _0x16fe05=_0x3b448d(0x259)+new Date()[_0x3b448d(0x3b2)]();this[_0x3b448d(0x26e)]=new WebWorker({'path':this[_0x3b448d(0x200)][_0x3b448d(0x210)]+_0x16fe05}),this['scanWebWorker']=new ScanWebWorker({'path':this[_0x3b448d(0x200)]['scan_worker_path']+_0x16fe05});}this[_0x3b448d(0x2df)]['cc']=this['cc'],typeof this[_0x3b448d(0x200)]['onInit']==_0x3b448d(0x3c0)&&this[_0x3b448d(0x200)][_0x3b448d(0x350)]();}[_0x68345b(0x331)](){const _0x23e83c=_0x68345b;!this[_0x23e83c(0x32b)][_0x23e83c(0x236)]()&&(this[_0x23e83c(0x32b)][_0x23e83c(0x29e)](),this[_0x23e83c(0x2df)][_0x23e83c(0x23e)]());}[_0x68345b(0x1f3)](){const _0x36f9d5=_0x68345b;this['stop'](),this[_0x36f9d5(0x32b)][_0x36f9d5(0x24f)]();}['start'](){const _0x4262fc=_0x68345b;this[_0x4262fc(0x208)]=null,this[_0x4262fc(0x2a7)]=DCScanCommand[_0x4262fc(0x330)],!this[_0x4262fc(0x32b)][_0x4262fc(0x236)]()?(this['open'](),this[_0x4262fc(0x22f)][_0x4262fc(0x2be)]=!![]):(this[_0x4262fc(0x22f)][_0x4262fc(0x29e)]=!![],this[_0x4262fc(0x2df)][_0x4262fc(0x29e)]()),this[_0x4262fc(0x39c)](),this[_0x4262fc(0x2a8)]=new Date()[_0x4262fc(0x3b2)]();}[_0x68345b(0x24f)](){const _0x5c114d=_0x68345b;this[_0x5c114d(0x22f)]['start']=![],this[_0x5c114d(0x22f)][_0x5c114d(0x2be)]=![],this[_0x5c114d(0x2df)][_0x5c114d(0x337)](),this[_0x5c114d(0x39c)]();}['testSource'](_0x2b32d8,_0x1027d0){const _0x4ca76f=_0x68345b;ImageProcessing[_0x4ca76f(0x384)](_0x2b32d8)[_0x4ca76f(0x36d)](_0x2a21a0=>{const _0x2c106e=_0x4ca76f;let _0x4866ef=ImageProcessing[_0x2c106e(0x226)](_0x2a21a0);this[_0x2c106e(0x2df)][_0x2c106e(0x218)](_0x4866ef,_0x1027d0);});}[_0x68345b(0x39c)](){const _0x4de39b=_0x68345b;this[_0x4de39b(0x37c)]=[],this[_0x4de39b(0x25a)]=null,this[_0x4de39b(0x2bb)]=null,this[_0x4de39b(0x205)]=null,this['sessionTimeCount']=0x0;}[_0x68345b(0x3ae)](_0x16c348){const _0x594764=_0x68345b;this[_0x594764(0x37c)]=[],this['lastScanned']=null,this[_0x594764(0x22b)][_0x594764(0x2cb)]([]),this[_0x594764(0x24f)](),typeof this['options'][_0x594764(0x3ae)]==_0x594764(0x3c0)&&this[_0x594764(0x200)]['onFinished'](_0x16c348);}[_0x68345b(0x30b)](_0x585d5f){const _0xea4a2b=_0x68345b;this['lastDetected']=_0x585d5f,this['lastDetectedTime']=new Date()[_0xea4a2b(0x3b2)](),typeof this[_0xea4a2b(0x200)][_0xea4a2b(0x30b)]==='function'&&this['options'][_0xea4a2b(0x30b)](_0x585d5f);}[_0x68345b(0x324)](_0x33a4f7){const _0x21f743=_0x68345b;this[_0x21f743(0x25a)]=_0x33a4f7,this[_0x21f743(0x2bb)]=new Date()[_0x21f743(0x3b2)](),helper_logger[_0x21f743(0x274)]()[_0x21f743(0x25f)](_0x21f743(0x220),_0x33a4f7),typeof this[_0x21f743(0x200)]['onDetected']===_0x21f743(0x3c0)&&this[_0x21f743(0x200)][_0x21f743(0x324)](this['lastScanned']);}[_0x68345b(0x299)](_0x1bae5d){const _0x1fba84=_0x68345b;this[_0x1fba84(0x2a7)]=_0x1bae5d;if(!this[_0x1fba84(0x22f)]['start'])return;typeof this[_0x1fba84(0x200)][_0x1fba84(0x299)]===_0x1fba84(0x3c0)&&this[_0x1fba84(0x200)]['onCommand'](_0x1bae5d);}[_0x68345b(0x376)](){}[_0x68345b(0x37a)](_0x5c57c9){const _0x30d479=_0x68345b;switch(_0x5c57c9){case DCScanError[_0x30d479(0x2b5)]:helper_logger[_0x30d479(0x274)]()[_0x30d479(0x25f)](_0x30d479(0x30c));break;default:}}[_0x68345b(0x1f8)](){const _0x234f8e=_0x68345b;if(this[_0x234f8e(0x22f)][_0x234f8e(0x29e)]){let _0x2f0ffd=this['lastScanned']&&this[_0x234f8e(0x25a)][_0x234f8e(0x287)]?[this[_0x234f8e(0x25a)][_0x234f8e(0x287)]]:[];if(_0x2f0ffd[_0x234f8e(0x3a8)]===0x0&&this[_0x234f8e(0x37c)]!=null&&this[_0x234f8e(0x37c)][_0x234f8e(0x3a8)]>0x0){_0x2f0ffd=this[_0x234f8e(0x37c)];let _0x450d93='';if(this[_0x234f8e(0x2a7)]===DCScanCommand[_0x234f8e(0x372)]&&this[_0x234f8e(0x37c)][0x0][_0x234f8e(0x1e1)]===_0x234f8e(0x20a))_0x450d93=_0x234f8e(0x3cc),this['visual'][_0x234f8e(0x2cb)](_0x2f0ffd,_0x234f8e(0x2d3),_0x450d93);else this[_0x234f8e(0x2a7)]===DCScanCommand[_0x234f8e(0x375)]&&(this['lastDetected'][0x0][_0x234f8e(0x1e1)]===_0x234f8e(0x2f7)||this[_0x234f8e(0x37c)][0x0][_0x234f8e(0x1e1)]===_0x234f8e(0x3c1))&&(_0x450d93=_0x234f8e(0x3cc),this[_0x234f8e(0x22b)][_0x234f8e(0x2cb)](_0x2f0ffd,_0x234f8e(0x2d3),_0x450d93));}else{let _0x58d7c8=this[_0x234f8e(0x295)](this[_0x234f8e(0x2bb)]);_0x58d7c8!=null&&_0x58d7c8<0x7d0&&this[_0x234f8e(0x22b)]['drawCard'](_0x2f0ffd);}this[_0x234f8e(0x2df)]['getStep']()===DCScanSteps[_0x234f8e(0x26c)]&&this[_0x234f8e(0x22b)][_0x234f8e(0x2b0)](this[_0x234f8e(0x2df)][_0x234f8e(0x200)][_0x234f8e(0x378)]);let _0x206d79=new Date()[_0x234f8e(0x3b2)]();_0x206d79-this[_0x234f8e(0x2a8)]>this[_0x234f8e(0x200)][_0x234f8e(0x390)]?this[_0x234f8e(0x3ae)]({'status':![],'msg':_0x234f8e(0x335)}):this[_0x234f8e(0x2df)]['observe']();}}[_0x68345b(0x3a3)](_0x36de60,_0x246941){const _0x108d35=_0x68345b;this['cc'][_0x108d35(0x286)](_0x246941);}[_0x68345b(0x2eb)](){const _0x563f73=_0x68345b;this[_0x563f73(0x22f)][_0x563f73(0x2be)]&&(this['state'][_0x563f73(0x2be)]=![],this['start']());}[_0x68345b(0x3a5)](){}[_0x68345b(0x295)](_0x15a255){const _0x5eed9a=_0x68345b;if(_0x15a255==null)return null;return new Date()[_0x5eed9a(0x3b2)]()-_0x15a255;}};const DCAnalyzer={'FACE':'face','SCANNER':_0x68345b(0x3ce)};class DCFaceID{constructor(_0x13f456={}){const _0xd0d61e=_0x68345b;this[_0xd0d61e(0x200)]={'url':null,'headers':null,'debug':![]},this['options']=deepMerge(this[_0xd0d61e(0x200)],_0x13f456),this[_0xd0d61e(0x326)]=new DataModel(_0x13f456[_0xd0d61e(0x306)]||null,this['options']);let _0x56c9c8=new helper_logger({'debug':this[_0xd0d61e(0x200)]['debug']});}[_0x68345b(0x29c)](_0x19123e,_0x2606c0){let _0x34e52d=new DeepFace(_0x19123e,_0x2606c0);return _0x34e52d;}[_0x68345b(0x347)](_0x448df7,_0x550318){const _0x34b20f=_0x68345b;let _0x4f0bfa=deepMerge({'url':this[_0x34b20f(0x200)][_0x34b20f(0x306)],'headers':this[_0x34b20f(0x200)][_0x34b20f(0x21f)]},_0x550318),_0x593b8b=new DeepScanner(_0x448df7,_0x4f0bfa);return _0x593b8b;}[_0x68345b(0x280)](_0x1e206e,_0x188b62){}[_0x68345b(0x232)](_0x168cf6,_0x22e713){const _0x1b3d8a=_0x68345b;this[_0x1b3d8a(0x326)]['toVerify'](_0x168cf6,_0x253ee3=>{const _0x227c27=_0x1b3d8a;typeof _0x22e713===_0x227c27(0x3c0)&&_0x22e713(_0x253ee3);});}['isMobile'](){const _0x399c33=_0x68345b;return OSPlus[_0x399c33(0x2bf)]();}}
export default DCFaceID
