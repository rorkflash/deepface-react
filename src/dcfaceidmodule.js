/* eslint-disable */
const _0x4a61=['getPose','mrzOptions','undefined','setText','play','div','videoWidth','dim','lastDetected','onTinyFaceResult','Success:','getLandmark','25LaRQZP','canvasToBase64','notifyAll','start','putImageData','look\x20forward','pass_front','checkCurrentCommandAction','lastScanned','startingWaitTime','toVerify','fillStyle','testDetect','image','onCardDetected','observers','rect','1074063jjPIlt','1047026gPXMhV','callCommandResult','timeID','createElement','recognizeLocal','remove','action','gray','indexOf','createDeepStory','block','ID_FRONT','onCameraStart','onStartDownCount','image/png','scanLoaded','id_back','roll','postMessage','bind','webWorker','stringify','add','devices','none','CANVAS','blinking','tid','top','keys','showProcessing','recognizeGlobal','act2Command','getUserMedia','chooselist','drawStreamToCanvas','checkScanResult','slice','catch','dom','onError','sessionTime','errorWaitTime','START','isPlaying','card/detect','loading','finishTime','analyser','calculate','card','manyFace','drawCard','rgba(255,160,24,0.5)','detector','RIGHT','ellipse','dpr','srcDim','detector\x20result','filter','GET','curScan','onCommandResult','isRearCameraUsed','name','callStepChange','xor','open','getBox','createDeepFace','originalSize','Finished','isWebGLExist','showCollection','lastScannedTime','onCameraLoaded','actionWaitTime','addActionTime','fill','isSafari','lastResult','loaded','manyfaces','interval','net','nocard','canvas','actualCanvas','Worker','mrzcheck','shuffle','callDetectedEvent','image/jpeg','mrz','/verify','changeStep','actionText','raf','class','PASS_FRONT','getCard','forward','offsetHeight','canvasToImageData','commandArea','1WUrreJ','max','scan-worker','getImageData','getSettings','Received:','textContent','score','isMobile','pitch','devicePixelRatio','POST','isOffscreenCanvasSupport','results','useServerSide','status','0.5','parseObject','fillRect','stop','onFinished','currentPosition','canvas2grayscale','drawImage','save','SCANNING','toOriginalSize','server','success','6JIuXZS','onInit','ID_BACK','strokeStyle','onStop','web\x20camera\x20exception!','onCommand','width','faceMask','117212niOBdS','onScanLoaded','createDeepScan','DIV','worker','type','Your\x20browser\x20doesn\x27t\x20support\x20web\x20workers.','collect','getImageFromURL','setup','autoplay','draw\x20mask\x20layer','startTime','fixedTime','streams','down','js/deepfaceworker.js','headers','SUCCESS','__canvas','?rand=','count','toLowerCase','checkSize','path','Card\x20model\x20loaded','list','defineCurrentAction','quadraticCurveTo','visual','moveTo','croppedSize','getCoordX','fit2Size','finish','yaw','black','testSource','tID','textAlign','text','detectTimer','lastCommand','detectTime','scans','pos','load','id_front','cropAndResizeCanvas','outOfBounds','environment','onDetected','some','position','onmessage','toDataURL','look\x20left','isErrorExist','onLoaded','green','Error\x20loading\x20','NONE','drawFaces','actionWaitBeforeCheck','defineScanFace','fireCommand','onerror','PUT','Error:','toosmall','Starting','observe','index','callError','look\x20right','recognize','orange','append','opacity','request','msg','getLaplacianVariance','host','imageDataToCanvas','parentElement','1179305HntDOu','getPassTime','bbox','close','faceWebWorker','setCommand','analizer','clear','atan2','lastDetectedTime','onFaceDetected','actionArea','face\x20laplacian','REJECT','box','beginPath','left','getFace','tagName','data\x20processing,\x20please\x20wait...','serverSide','onpause','manycards','classList','outofbounds','toRealCoordX','innerHtml','json','noFace','hasCommand','scanner','14px\x20Arial','getTime','maskLayer','onFrameUpdated','Card\x20is\x20too\x20small','onStepChanged','passport','showTextArea','blur','look\x20down','setFace','camera','sourceDim','detectedFaceCountDownBeforeStart','getSnapshots','detect','FINISH','display','maskInited','kind','appendChild','playsinline','getCoordY','object','push','loadCard','docFace','length','lineTo','createTextArea','userAgent','DOWN','state','sessionTimeCount','ACTIONS','random','face_worker_path','frontCamera','defineCommands','imageToCanvas','mediaDevices','errorTime','Type','restore','src','1148706BoBcjQ','crossOrigin','canvas2IMG','checkURI','29590kkcQXJ','height','Lines','Please\x20follow\x20the\x20commands','landMarks','callCommandChange','cutLastSlash','init','currentCommand','setAttribute','area','cardMinSize','headpos','normalizing','globalCompositeOperation','rear\x20camera\x20used','cropCanvas','center','scanWebWorker','initContainer','currentAction','url','current','rgb(66,109,139)','ctx','initWorker','detectionLocked','currentStepActive','white','LEFT','videoinput','commandText','hide','snapshot','facingMode','js/deeptinyfaceworker.min.js','closePath','SHOW','onMRZDetected','onload','reset','defineStream','isAllScanned','smile','delay','getTimeDiff','lineWidth','backgroundColor','step','getTracks','auto','checkPosAndActions','scale','onStep','worker_path','onStreamLoaded','getSize','onDetect','callback','landmark','PASSPORT','time','getImageB64','SMILE','309541NvhhwI','mirrored','defineScanType','analyzeAfterOpen','30px','onWorkerMessage','inputSize','onScanResult','lowlight','card/ready','single','stream','onCameraStop','fillOnMobile','Valid','blankCanvas','FORWARD','parse','getElementById','right','paused','then','join','options','2ykgpdk','finishWaitTime','pass_main','drawArea','video','includes','getContext','defineProcess','show','INIT','string','number','round','drawPath','unlock','getLastDetected','safari','commander','getTinyFace','floor','onFaceResult','__canvas_original','currentActionList','tinyFaceDetected','20px\x20Arial','Initializing','clearSnapshots','error','js/deepscanworker.min.js','lock','scan','webgl','face','docType','cardImage','stroke','arc','curFrame','toFixed','errors','getStep','draw','absolute','videoHeight','highlight','data','getArea','videoSize','hideTextArea','function','scanned','notify','forEach','video-layer','globalAlpha','snapshotlist','result','delete','maskSize','noface','assign','fillText','cutEdge','other','commands','anonymous','Computing\x20for\x20finishing','df-container','onStart','callCardDetectedEvent','application/json','sizeKoef','style','isReady','substr','serverDelay','log','clearRect'];const _0x117a=function(_0x3b708a,_0x334362){_0x3b708a=_0x3b708a-0x84;let _0x4a6128=_0x4a61[_0x3b708a];return _0x4a6128;};const _0x4953ed=_0x117a;(function(_0x3f9451,_0x1cdfd0){const _0x4844ed=_0x117a;while(!![]){try{const _0x13f58a=parseInt(_0x4844ed(0x241))+-parseInt(_0x4844ed(0x94))+-parseInt(_0x4844ed(0xf0))*parseInt(_0x4844ed(0xd8))+parseInt(_0x4844ed(0x15c))*parseInt(_0x4844ed(0x1c6))+-parseInt(_0x4844ed(0x15b))+parseInt(_0x4844ed(0x1e3))*parseInt(_0x4844ed(0x1ec))+parseInt(_0x4844ed(0x98))*parseInt(_0x4844ed(0x14a));if(_0x13f58a===_0x1cdfd0)break;else _0x3f9451['push'](_0x3f9451['shift']());}catch(_0x48ca9f){_0x3f9451['push'](_0x3f9451['shift']());}}}(_0x4a61,0xca06e));const deepMerge=(_0x906511,_0x31a6d2)=>{const _0x10711b=_0x117a;for(let _0x568ed9 of Object[_0x10711b(0x179)](_0x31a6d2)){_0x31a6d2[_0x568ed9]instanceof Object&&Object[_0x10711b(0x12c)](_0x31a6d2[_0x568ed9],deepMerge(_0x906511[_0x568ed9]||{},_0x31a6d2[_0x568ed9]));}return Object[_0x10711b(0x12c)](_0x906511||{},_0x31a6d2),_0x906511;},canvasRoundRect=(_0x2edf04,_0x2b9285,_0xaaf4b0,_0x407345,_0x2cbc28,_0x35ccff,_0x2d4b8d,_0x3bb1ed)=>{const _0x260cbb=_0x117a;typeof _0x3bb1ed===_0x260cbb(0x140)&&(_0x3bb1ed=!![]);typeof _0x35ccff==='undefined'&&(_0x35ccff=0x5);if(typeof _0x35ccff===_0x260cbb(0xfb))_0x35ccff={'tl':_0x35ccff,'tr':_0x35ccff,'br':_0x35ccff,'bl':_0x35ccff};else{var _0x2d8836={'tl':0x0,'tr':0x0,'br':0x0,'bl':0x0};for(var _0xcd3185 in _0x2d8836){_0x35ccff[_0xcd3185]=_0x35ccff[_0xcd3185]||_0x2d8836[_0xcd3185];}}_0x2edf04['beginPath'](),_0x2edf04[_0x260cbb(0x20a)](_0x2b9285+_0x35ccff['tl'],_0xaaf4b0),_0x2edf04[_0x260cbb(0x27c)](_0x2b9285+_0x407345-_0x35ccff['tr'],_0xaaf4b0),_0x2edf04[_0x260cbb(0x208)](_0x2b9285+_0x407345,_0xaaf4b0,_0x2b9285+_0x407345,_0xaaf4b0+_0x35ccff['tr']),_0x2edf04['lineTo'](_0x2b9285+_0x407345,_0xaaf4b0+_0x2cbc28-_0x35ccff['br']),_0x2edf04['quadraticCurveTo'](_0x2b9285+_0x407345,_0xaaf4b0+_0x2cbc28,_0x2b9285+_0x407345-_0x35ccff['br'],_0xaaf4b0+_0x2cbc28),_0x2edf04[_0x260cbb(0x27c)](_0x2b9285+_0x35ccff['bl'],_0xaaf4b0+_0x2cbc28),_0x2edf04[_0x260cbb(0x208)](_0x2b9285,_0xaaf4b0+_0x2cbc28,_0x2b9285,_0xaaf4b0+_0x2cbc28-_0x35ccff['bl']),_0x2edf04['lineTo'](_0x2b9285,_0xaaf4b0+_0x35ccff['tl']),_0x2edf04[_0x260cbb(0x208)](_0x2b9285,_0xaaf4b0,_0x2b9285+_0x35ccff['tl'],_0xaaf4b0),_0x2edf04[_0x260cbb(0xbc)](),_0x2d4b8d&&_0x2edf04[_0x260cbb(0x1ab)](),_0x3bb1ed&&_0x2edf04['stroke']();};class StringExtra{static[_0x4953ed(0x9e)](_0x17bf6d){const _0x355f97=_0x4953ed;if(_0x17bf6d[_0x355f97(0x13a)](_0x17bf6d['length']-0x1)==='/')return _0x17bf6d[_0x355f97(0x181)](0x0,-0x1);return _0x17bf6d;}};class DataModel{constructor(_0x3c4b5b='',_0x533077={}){const _0x31b837=_0x4953ed;this['url']=_0x3c4b5b,this[_0x31b837(0xef)]={'headers':{}},this[_0x31b837(0xef)]=deepMerge(this[_0x31b837(0xef)],_0x533077);}[_0x4953ed(0x154)](_0x40d136,_0x1f913b){const _0x525eb=_0x4953ed;if(_0x40d136==null)return;if(_0x40d136[_0x525eb(0x25f)]!=null&&_0x40d136[_0x525eb(0x110)]==null){let _0x44b2da={'docType':_0x40d136['scanner'][_0x525eb(0x111)]||null,'scans':[],'tid':_0x40d136[_0x525eb(0x25f)]['tID']};for(let _0x5d0041 in _0x40d136[_0x525eb(0x25f)]['scans']){_0x44b2da[_0x525eb(0x218)][_0x525eb(0x278)]({'docFace':_0x40d136[_0x525eb(0x25f)][_0x525eb(0x218)][_0x5d0041][_0x525eb(0x27a)]||null,'image':_0x40d136[_0x525eb(0x25f)]['scans'][_0x5d0041][_0x525eb(0x157)]});}let _0x23c7b2=deepMerge({'Content-Type':_0x525eb(0x136)},this[_0x525eb(0xef)][_0x525eb(0x1fd)]||{});fetch(StringExtra['cutLastSlash'](this[_0x525eb(0xad)])+_0x525eb(0x1bb),{'method':_0x525eb(0x1d1),'headers':_0x23c7b2,'body':JSON[_0x525eb(0x171)](_0x44b2da)})[_0x525eb(0xed)](_0x24c65e=>_0x24c65e['json']())[_0x525eb(0xed)](_0x22861f=>{const _0x170c55=_0x525eb;if(typeof _0x1f913b===_0x170c55(0x121)){let _0x2a03b3={'success':_0x22861f['success'],'data':_0x22861f[_0x170c55(0x11d)]||null,'msg':_0x22861f[_0x170c55(0x23c)]||null};_0x1f913b(_0x2a03b3);}})[_0x525eb(0x182)](_0xf8cc6f=>{const _0x355b77=_0x525eb;console['error'](_0x355b77(0x230),_0xf8cc6f),typeof _0x1f913b===_0x355b77(0x121)&&_0x1f913b({'success':![],'error':_0xf8cc6f});});}}};class CameraVisualLayer{constructor(_0x50177d){const _0x5742bd=_0x4953ed;this[_0x5742bd(0x1b3)]=_0x50177d;}[_0x4953ed(0x1f3)](){}[_0x4953ed(0x1a6)](){}[_0x4953ed(0x239)](){}[_0x4953ed(0x23b)](){}};class OSPlus{static[_0x4953ed(0x1ce)](){const _0x4c1e27=_0x4953ed,_0x350d22=[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i];return _0x350d22[_0x4c1e27(0x220)](_0x320cde=>{const _0x17bc19=_0x4c1e27;return navigator[_0x17bc19(0x85)]['match'](_0x320cde);});}static[_0x4953ed(0x1a5)](){const _0x18a430=_0x4953ed;try{let _0x188337=document[_0x18a430(0x15f)](_0x18a430(0x1b3));_0x188337['getContext'](_0x18a430(0x10f));}catch(_0xa81175){return![];}return!![];}static[_0x4953ed(0x1d2)](){const _0xab122c=_0x4953ed;return typeof OffscreenCanvas===_0xab122c(0x121);}static[_0x4953ed(0x1ac)](){const _0x16d86c=_0x4953ed;let _0x1f9859=navigator[_0x16d86c(0x85)][_0x16d86c(0x202)]();return _0x1f9859[_0x16d86c(0x164)](_0x16d86c(0x100))!==-0x1&&_0x1f9859['indexOf']('chrome')===-0x1;}};class DCCamera{constructor(_0x358aac,_0x1f10cf={}){const _0xb32ac4=_0x4953ed;this[_0xb32ac4(0x183)]=null,this['canvas']=null,this[_0xb32ac4(0x1ff)]=null,this[_0xb32ac4(0x105)]=null,this[_0xb32ac4(0xf4)]=null,this[_0xb32ac4(0xe3)]=null,this[_0xb32ac4(0x209)]=null,this[_0xb32ac4(0x1be)]=null,this['streamSize']={'width':0x0,'height':0x0},this[_0xb32ac4(0x26c)]={'k':0x1,'dx':0x0,'dy':0x0,'dw':0x0,'dh':0x0},this['snapshotlist']=[],this[_0xb32ac4(0x173)]=[],this[_0xb32ac4(0x8c)]=!![],this[_0xb32ac4(0x195)]=0x1,this[_0xb32ac4(0xef)]={'src':null,'sourceType':null,'width':0x280,'height':0x1e0,'resWidth':0x500,'resHeight':0x2d0,'fill':![],'fillOnMobile':!![],'cutEdge':![],'onLoaded':null,'onError':null,'onStop':null,'onStart':null,'onFrameUpdated':null},this[_0xb32ac4(0xef)]=deepMerge(this[_0xb32ac4(0xef)],_0x1f10cf),this['defineContainer'](_0x358aac),this[_0xb32ac4(0x1f5)]();}['defineContainer'](_0x53ea0c){const _0x216aa3=_0x4953ed;this[_0x216aa3(0x195)]=window[_0x216aa3(0x1d0)]||0x1;if(typeof _0x53ea0c==_0x216aa3(0xfa)){let _0x52ada4=document[_0x216aa3(0xea)](_0x53ea0c);if(_0x52ada4&&_0x52ada4[_0x216aa3(0x253)]){if(_0x52ada4[_0x216aa3(0x253)]===_0x216aa3(0x1ef))this[_0x216aa3(0x183)]=_0x52ada4,this[_0x216aa3(0x183)]['innerHTML']='',this[_0x216aa3(0x1b3)]=document[_0x216aa3(0x15f)](_0x216aa3(0x175)),this[_0x216aa3(0x1b3)]['width']=this[_0x216aa3(0xef)][_0x216aa3(0x1ea)],this[_0x216aa3(0x1b3)][_0x216aa3(0x99)]=this[_0x216aa3(0xef)]['height'],this['dom'][_0x216aa3(0x274)](this[_0x216aa3(0x1b3)]);else _0x52ada4['tagName']===_0x216aa3(0x175)&&(this[_0x216aa3(0x1b3)]=_0x52ada4,this[_0x216aa3(0x183)]=document[_0x216aa3(0x15f)](_0x216aa3(0x1ef)),this[_0x216aa3(0x1b3)][_0x216aa3(0x240)]['insertBefore'](this['dom'],this[_0x216aa3(0x1b3)]),this[_0x216aa3(0x183)][_0x216aa3(0x274)](this[_0x216aa3(0x1b3)]));this['dom']&&(this['dom'][_0x216aa3(0x258)][_0x216aa3(0x172)](_0x216aa3(0x133)),this[_0x216aa3(0x183)][_0x216aa3(0x138)][_0x216aa3(0x1ea)]=this[_0x216aa3(0xef)][_0x216aa3(0x1ea)]+'px',this[_0x216aa3(0x183)][_0x216aa3(0x138)]['height']=this[_0x216aa3(0xef)][_0x216aa3(0x99)]+'px');}this[_0x216aa3(0x1b3)]&&(this['canvas'][_0x216aa3(0x258)][_0x216aa3(0x172)](_0x216aa3(0x125)),this[_0x216aa3(0x1b3)][_0x216aa3(0x138)][_0x216aa3(0xc7)]=_0x216aa3(0x163));}this[_0x216aa3(0x1ff)]=document[_0x216aa3(0x15f)]('CANVAS'),this[_0x216aa3(0x1ff)][_0x216aa3(0x1ea)]=this[_0x216aa3(0xef)]['width'],this[_0x216aa3(0x1ff)][_0x216aa3(0x99)]=this[_0x216aa3(0xef)]['height'],this[_0x216aa3(0x105)]=document[_0x216aa3(0x15f)]('CANVAS'),this['__canvas_original'][_0x216aa3(0x1ea)]=this[_0x216aa3(0xef)][_0x216aa3(0x1ea)],this[_0x216aa3(0x105)][_0x216aa3(0x99)]=this[_0x216aa3(0xef)][_0x216aa3(0x99)];}['setup'](){const _0x156da0=_0x4953ed;this[_0x156da0(0x209)]=new CameraVisualLayer(this[_0x156da0(0x1b3)]);}[_0x4953ed(0x14d)](){const _0x576ed0=_0x4953ed;(this[_0x576ed0(0xf4)]==null||!this[_0x576ed0(0x188)]())&&this[_0x576ed0(0xc1)]();}[_0x4953ed(0x1d9)](){const _0x4fdca3=_0x4953ed;this[_0x4fdca3(0xe3)]&&this['stream'][_0x4fdca3(0xc9)]()[_0x4fdca3(0x27b)]>0x0&&(this['stream']['getTracks']()[0x0]['stop'](),this['stream']=null);}[_0x4953ed(0xc1)](){const _0x2e5912=_0x4953ed;OSPlus[_0x2e5912(0x1ce)]()&&this[_0x2e5912(0xef)][_0x2e5912(0xe5)]===!![]&&(this['options']['fill']=!![]);this[_0x2e5912(0xef)][_0x2e5912(0x93)]==null?this['stream']==null?navigator[_0x2e5912(0x8f)]&&navigator[_0x2e5912(0x8f)][_0x2e5912(0x17d)]&&(this['video']===null&&(this[_0x2e5912(0xf4)]=document['createElement'](_0x2e5912(0xf4)),this[_0x2e5912(0xf4)][_0x2e5912(0xa1)](_0x2e5912(0x1f6),''),this[_0x2e5912(0xf4)][_0x2e5912(0xa1)]('muted',''),this[_0x2e5912(0xf4)]['setAttribute'](_0x2e5912(0x275),''),this[_0x2e5912(0xf4)][_0x2e5912(0x138)][_0x2e5912(0x1ea)]=_0x2e5912(0xdc),this[_0x2e5912(0xf4)][_0x2e5912(0x138)][_0x2e5912(0x99)]='30px',this[_0x2e5912(0xf4)][_0x2e5912(0x138)][_0x2e5912(0x221)]=_0x2e5912(0x11a),this[_0x2e5912(0x183)]['appendChild'](this['video']),this[_0x2e5912(0xf4)][_0x2e5912(0x138)][_0x2e5912(0x23a)]=_0x2e5912(0x1d6)),this[_0x2e5912(0x1be)]=null,navigator[_0x2e5912(0x8f)]['enumerateDevices']()['then'](_0x4d5695=>{const _0x2346ae=_0x2e5912;console['log']('media\x20devices',_0x4d5695),this[_0x2346ae(0x173)]=_0x4d5695;}),navigator[_0x2e5912(0x8f)][_0x2e5912(0x17d)]({'audio':![],'video':{'facingMode':_0x2e5912(0x21e),'width':{'ideal':this[_0x2e5912(0xef)]['resWidth']},'height':{'ideal':this[_0x2e5912(0xef)]['resHeight']}}})[_0x2e5912(0xed)](_0x2b810c=>{const _0x402a89=_0x2e5912;this[_0x402a89(0xe3)]=_0x2b810c,this[_0x402a89(0xf4)]['srcObject']=_0x2b810c;let _0x35fe25=_0x2b810c['getVideoTracks']()[0x0];_0x35fe25['applyConstraints']({'focusMode':_0x402a89(0xca),'focusDistance':0.33}),this['isRearCameraUsed']()&&(console[_0x402a89(0x13c)](_0x402a89(0xa7)),this[_0x402a89(0x8c)]=![]),_0x1ed311(),this[_0x402a89(0xf4)][_0x402a89(0x142)]();})[_0x2e5912(0x182)](_0x1ac4c0=>{const _0x4f62cc=_0x2e5912;console['log'](_0x4f62cc(0x1e8),_0x1ac4c0),this[_0x4f62cc(0x184)](_0x1ac4c0);})):this['video'][_0x2e5912(0x142)]():(this[_0x2e5912(0xf4)][_0x2e5912(0x93)]=this['options'][_0x2e5912(0x93)],this['video'][_0x2e5912(0x142)]());let _0x1ed311=()=>{const _0x38bbae=_0x2e5912;this[_0x38bbae(0xf4)]['onloadeddata']=()=>{const _0x916481=_0x38bbae;this[_0x916481(0xcf)]();},this[_0x38bbae(0xf4)]['onplaying']=()=>{const _0x2c7940=_0x38bbae;this['__canvas'][_0x2c7940(0x1ea)]=this['video']['videoWidth'],this['__canvas'][_0x2c7940(0x99)]=this[_0x2c7940(0xf4)][_0x2c7940(0x11b)],this['__canvas_original'][_0x2c7940(0x1ea)]=this[_0x2c7940(0xf4)][_0x2c7940(0x144)],this[_0x2c7940(0x105)][_0x2c7940(0x99)]=this[_0x2c7940(0xf4)][_0x2c7940(0x11b)];let _0x2a25c8=this[_0x2c7940(0xf4)][_0x2c7940(0x144)],_0x5e6761=this[_0x2c7940(0xf4)][_0x2c7940(0x11b)],_0x48fa93=0x1;this['sourceDim']['dw']=this['canvas']['width'],this['sourceDim']['dh']=this[_0x2c7940(0x1b3)][_0x2c7940(0x99)];this[_0x2c7940(0xef)][_0x2c7940(0x1ab)]?this[_0x2c7940(0x1b3)][_0x2c7940(0x99)]/_0x5e6761<this[_0x2c7940(0x1b3)][_0x2c7940(0x1ea)]/_0x2a25c8?(_0x48fa93=this['canvas']['width']/_0x2a25c8,this[_0x2c7940(0x26c)]['dh']=Math[_0x2c7940(0xfc)](_0x48fa93*_0x5e6761),this['sourceDim']['dy']=0x0,this['options'][_0x2c7940(0x12e)]&&(this[_0x2c7940(0x105)][_0x2c7940(0x99)]=this[_0x2c7940(0x1b3)]['height']/_0x48fa93,this[_0x2c7940(0x1ff)][_0x2c7940(0x99)]=this[_0x2c7940(0x1b3)]['height']/_0x48fa93)):(_0x48fa93=this['canvas'][_0x2c7940(0x99)]/_0x5e6761,this[_0x2c7940(0x26c)]['dw']=Math[_0x2c7940(0xfc)](_0x48fa93*_0x2a25c8),this[_0x2c7940(0x26c)]['dx']=0x0,this[_0x2c7940(0xef)][_0x2c7940(0x12e)]&&(this['__canvas_original']['width']=this[_0x2c7940(0x1b3)][_0x2c7940(0x1ea)]/_0x48fa93,this['__canvas']['width']=this[_0x2c7940(0x1b3)][_0x2c7940(0x1ea)]/_0x48fa93)):this[_0x2c7940(0x1b3)][_0x2c7940(0x99)]/_0x5e6761<this[_0x2c7940(0x1b3)][_0x2c7940(0x1ea)]/_0x2a25c8?(_0x48fa93=this[_0x2c7940(0x1b3)][_0x2c7940(0x99)]/_0x5e6761,this[_0x2c7940(0x26c)]['dw']=Math[_0x2c7940(0xfc)](_0x48fa93*_0x2a25c8),this[_0x2c7940(0x26c)]['dx']=(this[_0x2c7940(0x1b3)][_0x2c7940(0x1ea)]-this[_0x2c7940(0x26c)]['dw'])/0x2):(_0x48fa93=this[_0x2c7940(0x1b3)][_0x2c7940(0x1ea)]/_0x2a25c8,this[_0x2c7940(0x26c)]['dh']=Math[_0x2c7940(0xfc)](_0x48fa93*_0x5e6761),this['sourceDim']['dy']=(this['canvas']['height']-this[_0x2c7940(0x26c)]['dh'])/0x2);this['sourceDim']['k']=_0x48fa93;if(this[_0x2c7940(0x1be)]!=null)cancelAnimationFrame(this[_0x2c7940(0x1be)]);this[_0x2c7940(0x1be)]=requestAnimationFrame(this['drawStreamToCanvas'][_0x2c7940(0x16f)](this)),this['streamSize']={'width':this[_0x2c7940(0xf4)][_0x2c7940(0x144)],'height':this[_0x2c7940(0xf4)]['videoHeight']},this['onStart']();},this[_0x38bbae(0xf4)][_0x38bbae(0x256)]=()=>{const _0xee7a90=_0x38bbae;cancelAnimationFrame(this[_0xee7a90(0x1be)]),this['onStop']();};};}async[_0x4953ed(0x17f)](){const _0x3dc5de=_0x4953ed;let _0x1b44d2=this[_0x3dc5de(0x8c)]?-0x1:0x1,_0xa25544=this[_0x3dc5de(0x26c)],_0x2daae9=this['video']['videoWidth'],_0x44c7c5=this[_0x3dc5de(0xf4)]['videoHeight'],_0x2b8ea5=this[_0x3dc5de(0x105)]['getContext']('2d');_0x2b8ea5[_0x3dc5de(0x1de)](),_0x2b8ea5[_0x3dc5de(0xcc)](0x1,0x1);this[_0x3dc5de(0xef)][_0x3dc5de(0x1ab)]&&this['options'][_0x3dc5de(0x12e)]?_0x2b8ea5[_0x3dc5de(0x1dd)](this['video'],(this[_0x3dc5de(0x105)][_0x3dc5de(0x1ea)]-_0x2daae9)/0x2,(this[_0x3dc5de(0x105)][_0x3dc5de(0x99)]-_0x44c7c5)/0x2,_0x2daae9,_0x44c7c5):_0x2b8ea5[_0x3dc5de(0x1dd)](this[_0x3dc5de(0xf4)],0x0,0x0,this[_0x3dc5de(0x105)][_0x3dc5de(0x1ea)],this[_0x3dc5de(0x105)][_0x3dc5de(0x99)]);_0x2b8ea5[_0x3dc5de(0x92)]();let _0x20c3f2=this[_0x3dc5de(0x1ff)][_0x3dc5de(0xf6)]('2d');_0x20c3f2[_0x3dc5de(0x1de)](),_0x20c3f2[_0x3dc5de(0xcc)](_0x1b44d2,0x1);this[_0x3dc5de(0xef)][_0x3dc5de(0x1ab)]&&this['options'][_0x3dc5de(0x12e)]?_0x20c3f2[_0x3dc5de(0x1dd)](this[_0x3dc5de(0xf4)],_0x1b44d2*(this[_0x3dc5de(0x1ff)][_0x3dc5de(0x1ea)]-_0x2daae9)/0x2+(_0x1b44d2===-0x1?_0x1b44d2*_0x2daae9:0x0),(this[_0x3dc5de(0x1ff)]['height']-_0x44c7c5)/0x2,_0x2daae9,_0x44c7c5):_0x20c3f2[_0x3dc5de(0x1dd)](this[_0x3dc5de(0xf4)],_0x1b44d2===-0x1?_0x1b44d2*_0x2daae9:0x0,0x0,this['__canvas'][_0x3dc5de(0x1ea)],this['__canvas'][_0x3dc5de(0x99)]);_0x20c3f2[_0x3dc5de(0x92)]();let _0x2175a7=this[_0x3dc5de(0x1b3)][_0x3dc5de(0xf6)]('2d'),_0x6f23a9=(this[_0x3dc5de(0x1b3)][_0x3dc5de(0x1ea)]-this[_0x3dc5de(0x26c)]['dw'])/0x2,_0x2ec90d=(this['canvas'][_0x3dc5de(0x99)]-this[_0x3dc5de(0x26c)]['dh'])/0x2;_0x2175a7[_0x3dc5de(0x13d)](0x0,0x0,this[_0x3dc5de(0x1b3)][_0x3dc5de(0x1ea)],this[_0x3dc5de(0x1b3)][_0x3dc5de(0x99)]),_0x2175a7[_0x3dc5de(0x1de)](),_0x2175a7[_0x3dc5de(0xcc)](_0x1b44d2*0x1,0x1),_0x2175a7[_0x3dc5de(0x1dd)](this[_0x3dc5de(0xf4)],_0x1b44d2*_0x6f23a9+(_0x1b44d2===-0x1?_0x1b44d2*_0xa25544['dw']:0x0),_0x2ec90d,_0xa25544['dw'],_0xa25544['dh']),_0x2175a7[_0x3dc5de(0x92)]();if(this[_0x3dc5de(0xe3)]==null)return;this['onFrameUpdated'](),this[_0x3dc5de(0x1be)]=requestAnimationFrame(this[_0x3dc5de(0x17f)]['bind'](this));}[_0x4953ed(0x19c)](){const _0x64f392=_0x4953ed;let _0x23bec7=[];for(let _0x4c750d in this['devices']){this[_0x64f392(0x173)][_0x4c750d][_0x64f392(0x273)]===_0x64f392(0xb6)&&_0x23bec7['push'](this[_0x64f392(0x173)][_0x4c750d]);}let _0x4e28c4=this[_0x64f392(0xe3)]?this[_0x64f392(0xe3)]['getVideoTracks']()[0x0][_0x64f392(0x1ca)]()[_0x64f392(0xba)]||null:null;console[_0x64f392(0x13c)](_0x64f392(0x173),this[_0x64f392(0x173)]),console[_0x64f392(0x13c)]('facingMode',_0x4e28c4);if(_0x4e28c4===_0x64f392(0x21e))return!![];return![];}['isPlaying'](){const _0x571c43=_0x4953ed;return this[_0x571c43(0xe3)]&&this[_0x571c43(0xf4)]&&!this[_0x571c43(0xf4)][_0x571c43(0xec)];}[_0x4953ed(0x1c9)](){const _0x1e6a68=_0x4953ed;let _0x3ee0f0=this['__canvas']['getContext']('2d');return _0x3ee0f0[_0x1e6a68(0x1c9)](0x0,0x0,this[_0x1e6a68(0x1ff)][_0x1e6a68(0x1ea)],this['__canvas'][_0x1e6a68(0x99)]);}[_0x4953ed(0xd6)](){const _0x887b17=_0x4953ed;return this[_0x887b17(0x1ff)]['toDataURL']();}[_0x4953ed(0x26e)](){return this['snapshotlist'];}[_0x4953ed(0xb9)](){const _0x466ea9=_0x4953ed;this[_0x466ea9(0x127)][_0x466ea9(0x278)](this['getImageB64']());}[_0x4953ed(0x10a)](){this['snapshotlist']=[];}[_0x4953ed(0x184)](_0x474a84){const _0x462de9=_0x4953ed;typeof this[_0x462de9(0xef)][_0x462de9(0x184)]===_0x462de9(0x121)&&this['options']['onError'](_0x474a84);}['onStreamLoaded'](){const _0x21aebd=_0x4953ed;typeof this[_0x21aebd(0xef)][_0x21aebd(0x226)]==='function'&&this[_0x21aebd(0xef)][_0x21aebd(0x226)](this[_0x21aebd(0xf4)],this[_0x21aebd(0x26c)]);}[_0x4953ed(0x1e7)](){const _0x5b3f57=_0x4953ed;typeof this[_0x5b3f57(0xef)][_0x5b3f57(0x1e7)]==='function'&&this[_0x5b3f57(0xef)]['onStop']();}['onStart'](){const _0x32ab9f=_0x4953ed;typeof this[_0x32ab9f(0xef)][_0x32ab9f(0x134)]==='function'&&this['options'][_0x32ab9f(0x134)]();}['onFrameUpdated'](){const _0x96f79a=_0x4953ed;typeof this[_0x96f79a(0xef)][_0x96f79a(0x263)]===_0x96f79a(0x121)&&this['options']['onFrameUpdated']();}}const camera=DCCamera;;class CoordConverter{constructor(_0x3915e1={'k':0x1,'dx':0x0,'dy':0x0,'dw':0x0,'dh':0x0}){this['dim']=_0x3915e1;}['setDim'](_0x5abda8){const _0x4992c2=_0x4953ed;this[_0x4992c2(0x145)]=_0x5abda8;}['getCoord'](_0x475fdd,_0xb71e07){const _0x4de24c=_0x4953ed;return{'x':_0x475fdd*this['dim']['k']+this['dim']['dx'],'y':_0xb71e07*this[_0x4de24c(0x145)]['k']+this[_0x4de24c(0x145)]['dy']};}[_0x4953ed(0x20c)](_0xedf1d8){const _0xc9e82b=_0x4953ed;return _0xedf1d8*this[_0xc9e82b(0x145)]['k']+this['dim']['dx'];}[_0x4953ed(0x276)](_0xd5a796){const _0xdaa698=_0x4953ed;return _0xd5a796*this['dim']['k']+this[_0xdaa698(0x145)]['dy'];}[_0x4953ed(0xd0)](_0x5dfe8b){return _0x5dfe8b*this['dim']['k'];}[_0x4953ed(0x25a)](_0x49da2d){const _0x4c7e24=_0x4953ed;return _0x49da2d/this['dim']['k']-this[_0x4c7e24(0x145)]['dx'];}['toRealCoordY'](_0x305583){const _0x24a838=_0x4953ed;return _0x305583/this[_0x24a838(0x145)]['k']-this[_0x24a838(0x145)]['dy'];}};class MaskLayer{constructor(_0x31045e,_0x2dabf2={'width':0x0,'height':0x0},_0x4a1bc9={'width':0x0,'height':0x0}){const _0x106f7c=_0x4953ed;this[_0x106f7c(0x183)]=_0x31045e,this['canvas']=null,this[_0x106f7c(0xb0)]=null,this[_0x106f7c(0xb7)]=null,this[_0x106f7c(0x1bd)]=null,this['videoSize']=_0x2dabf2,this[_0x106f7c(0x12a)]=_0x4a1bc9,this[_0x106f7c(0x272)]=![],this[_0x106f7c(0x137)]={'h':0.4,'v':0.6},(this['maskSize']['width']===0x0||this[_0x106f7c(0x12a)]['height']===0x0)&&(this[_0x106f7c(0x12a)]={'width':this[_0x106f7c(0x11f)][_0x106f7c(0x1ea)]*this[_0x106f7c(0x137)]['h'],'height':this['videoSize'][_0x106f7c(0x1ea)]*this[_0x106f7c(0x137)]['v']}),this[_0x106f7c(0x1f5)]();}['setup'](){const _0x6e5576=_0x4953ed;this[_0x6e5576(0x183)]!=null&&(this['canvas']=document[_0x6e5576(0x15f)]('CANVAS'),this[_0x6e5576(0x1b3)]['id']=_0x6e5576(0x262),this[_0x6e5576(0x1b3)][_0x6e5576(0x1ea)]=this['videoSize']['width'],this[_0x6e5576(0x1b3)][_0x6e5576(0x99)]=this[_0x6e5576(0x11f)][_0x6e5576(0x99)],this[_0x6e5576(0x183)]['appendChild'](this['canvas']),this['ctx']=this[_0x6e5576(0x1b3)][_0x6e5576(0xf6)]('2d'));}[_0x4953ed(0x84)](){const _0x156243=_0x4953ed;if(!this[_0x156243(0xb7)]){this[_0x156243(0xb7)]=document[_0x156243(0x15f)](_0x156243(0x143)),this['commandText']['id']=_0x156243(0x1c5);let _0x7eac9d=document['createElement']('P');_0x7eac9d[_0x156243(0x1cc)]='',this[_0x156243(0xb7)]['appendChild'](_0x7eac9d),this[_0x156243(0x183)]['appendChild'](this['commandText']);let _0x389b45=((this[_0x156243(0x1b3)][_0x156243(0x99)]-this['maskSize'][_0x156243(0x99)])/0x2-this[_0x156243(0xb7)][_0x156243(0x1c3)])/0x2;this['commandText'][_0x156243(0x138)][_0x156243(0x178)]=_0x389b45+'px';}else this[_0x156243(0xb7)]['style'][_0x156243(0x271)]=_0x156243(0x166);if(!this['actionText']){this[_0x156243(0x1bd)]=document['createElement'](_0x156243(0x143)),this[_0x156243(0x1bd)]['id']=_0x156243(0x24c);let _0x101cfe=document[_0x156243(0x15f)]('P');_0x101cfe[_0x156243(0x1cc)]='',this[_0x156243(0x1bd)][_0x156243(0x274)](_0x101cfe),this['dom'][_0x156243(0x274)](this['actionText']);let _0xb02128=((this['canvas']['height']-this[_0x156243(0x12a)]['height'])/0x2-this[_0x156243(0xb7)][_0x156243(0x1c3)])/0x2;this[_0x156243(0x1bd)][_0x156243(0x138)]['bottom']=_0xb02128+'px';}else this['actionText']['style'][_0x156243(0x271)]=_0x156243(0x166);}[_0x4953ed(0x267)](){const _0x455a89=_0x4953ed;if(this['commandText'])this['commandText'][_0x455a89(0x138)][_0x455a89(0x271)]='';if(this['actionText'])this['actionText'][_0x455a89(0x138)]['display']='';}[_0x4953ed(0x120)](){const _0x541a83=_0x4953ed;if(this['commandText'])this[_0x541a83(0xb7)]['style'][_0x541a83(0x271)]=_0x541a83(0x174);if(this[_0x541a83(0x1bd)])this['actionText'][_0x541a83(0x138)][_0x541a83(0x271)]=_0x541a83(0x174);}[_0x4953ed(0x141)](_0xbbe04d){const _0x554a6c=_0x4953ed;if(this[_0x554a6c(0x1bd)])this[_0x554a6c(0x1bd)][_0x554a6c(0x25b)]=_0xbbe04d;}[_0x4953ed(0x246)](_0x5ca258){const _0x4eaba4=_0x4953ed;if(this[_0x4eaba4(0xb7)])this['commandText'][_0x4eaba4(0x25b)]=_0x5ca258;}[_0x4953ed(0x11e)](){const _0x21fb0c=_0x4953ed;return{'x':this['canvas'][_0x21fb0c(0x1ea)]/0x2-this[_0x21fb0c(0x12a)]['width']/0x2-0x14,'y':this[_0x21fb0c(0x1b3)]['height']/0x2-this[_0x21fb0c(0x12a)][_0x21fb0c(0x1ea)]/0x2-0x14,'width':this[_0x21fb0c(0x12a)][_0x21fb0c(0x1ea)],'height':this[_0x21fb0c(0x12a)][_0x21fb0c(0x99)]};}[_0x4953ed(0x119)](){const _0x4717bc=_0x4953ed;if(!this[_0x4717bc(0x272)]){console[_0x4717bc(0x13c)](_0x4717bc(0x1f7)),this[_0x4717bc(0xb0)]['save'](),this[_0x4717bc(0xb0)]['beginPath'](),this['ctx'][_0x4717bc(0x194)](this[_0x4717bc(0x1b3)][_0x4717bc(0x1ea)]/0x2,this[_0x4717bc(0x1b3)][_0x4717bc(0x99)]/0x2,this[_0x4717bc(0x12a)][_0x4717bc(0x1ea)]/0x2,this[_0x4717bc(0x12a)][_0x4717bc(0x99)]/0x2,Math['PI'],0x0,0x2*Math['PI']),this[_0x4717bc(0xb0)][_0x4717bc(0x155)]=_0x4717bc(0xaf),this[_0x4717bc(0xb0)][_0x4717bc(0x1ab)](),this[_0x4717bc(0xb0)][_0x4717bc(0xa6)]=_0x4717bc(0x19f),this[_0x4717bc(0xb0)]['beginPath'](),this[_0x4717bc(0xb0)][_0x4717bc(0x15a)](0x0,0x0,this[_0x4717bc(0x1b3)][_0x4717bc(0x1ea)],this[_0x4717bc(0x1b3)]['height']),this[_0x4717bc(0xb0)][_0x4717bc(0x155)]='rgba(0,\x200,\x200,\x201)',this[_0x4717bc(0xb0)][_0x4717bc(0xbc)](),this[_0x4717bc(0xb0)][_0x4717bc(0x1ab)](),this['ctx'][_0x4717bc(0x126)]=0.5;let _0x63d277=this[_0x4717bc(0x1b3)][_0x4717bc(0x223)]();this[_0x4717bc(0xb0)][_0x4717bc(0xa6)]='source-over';let _0x3c6a92=new Image();_0x3c6a92['onload']=()=>{const _0x4e54e3=_0x4717bc;this[_0x4e54e3(0xb0)][_0x4e54e3(0x13d)](0x0,0x0,this['canvas']['width'],this[_0x4e54e3(0x1b3)][_0x4e54e3(0x99)]),this[_0x4e54e3(0xb0)]['drawImage'](_0x3c6a92,0x0,0x0);},_0x3c6a92['src']=_0x63d277,this[_0x4717bc(0x272)]=!![],this[_0x4717bc(0x84)]();}}[_0x4953ed(0xf8)](){const _0x2c5cb9=_0x4953ed;!this[_0x2c5cb9(0x272)]?(this[_0x2c5cb9(0x119)](),this[_0x2c5cb9(0x1b3)][_0x2c5cb9(0x138)][_0x2c5cb9(0x271)]=_0x2c5cb9(0x166)):(this['showTextArea'](),this['canvas'][_0x2c5cb9(0x138)][_0x2c5cb9(0x271)]=_0x2c5cb9(0x166));}[_0x4953ed(0xb8)](){const _0x8e9cbd=_0x4953ed;this[_0x8e9cbd(0x120)](),this['canvas'][_0x8e9cbd(0x138)]['display']=_0x8e9cbd(0x174);}[_0x4953ed(0x129)](){const _0x1286a5=_0x4953ed;this[_0x1286a5(0xb0)][_0x1286a5(0x13d)](0x0,0x0,this[_0x1286a5(0x1b3)][_0x1286a5(0x1ea)],this[_0x1286a5(0x1b3)]['height']),this[_0x1286a5(0xb0)]['restore']();}};class VisualLayer{constructor(_0x53dbc1,_0x402340={}){const _0x1fc1ef=_0x4953ed;this[_0x1fc1ef(0x1b3)]=_0x53dbc1,this[_0x1fc1ef(0xef)]={'srcDim':{'k':0x1,'dx':0x0,'dy':0x0,'dw':0x0,'dh':0x0}},this[_0x1fc1ef(0xef)]=deepMerge(this[_0x1fc1ef(0xef)],_0x402340),this['cc']=new CoordConverter(this[_0x1fc1ef(0xef)]['srcDim']);}[_0x4953ed(0xfd)](_0x1223da,_0x511bc6,_0x163a3f){const _0x301641=_0x4953ed,_0x153ec4=new Path2D();_0x153ec4['moveTo'](_0x511bc6[0x0][0x0],_0x511bc6[0x0][0x1]);for(let _0xce17f9=0x1;_0xce17f9<_0x511bc6[_0x301641(0x27b)];_0xce17f9++){const _0x1e43c4=_0x511bc6[_0xce17f9];_0x153ec4[_0x301641(0x27c)](_0x1e43c4[0x0],_0x1e43c4[0x1]);}_0x163a3f&&_0x153ec4[_0x301641(0xbc)](),_0x1223da[_0x301641(0x113)](_0x153ec4);}[_0x4953ed(0x22a)](_0x3f8e20){const _0x4bf941=_0x4953ed;let _0x7e3819=this[_0x4bf941(0xef)][_0x4bf941(0x196)]['k'],_0x497b1a=null,_0x392e11=null,_0x5de183={'x':0x0,'y':0x0,'w':0x0,'h':0x0},_0x25a228=this[_0x4bf941(0x1b3)][_0x4bf941(0xf6)]('2d');_0x25a228['save']();for(let _0x370b41=0x0;_0x370b41<_0x3f8e20[_0x4bf941(0x27b)];_0x370b41++){_0x392e11=_0x3f8e20[_0x370b41][_0x4bf941(0x9c)];for(let _0x4bf616=0x0;_0x4bf616<_0x392e11[_0x4bf941(0x27b)];_0x4bf616++){const _0x409f65=_0x392e11[_0x4bf616][0x0],_0x6bcc71=_0x392e11[_0x4bf616][0x1];_0x25a228['beginPath'](),_0x25a228[_0x4bf941(0x114)](this['cc'][_0x4bf941(0x20c)](_0x409f65),this['cc'][_0x4bf941(0x276)](_0x6bcc71),0x1,0x0,0x2*Math['PI']),_0x25a228[_0x4bf941(0x1ab)](),_0x25a228[_0x4bf941(0xbc)]();}}_0x25a228[_0x4bf941(0x92)]();}};class PipeStream{constructor(_0x4fdaf4){const _0xa94c5f=_0x4953ed;this[_0xa94c5f(0x19d)]=_0x4fdaf4,this[_0xa94c5f(0x159)]={};}['on'](_0x530bd9,_0x37ba97){const _0xa7605b=_0x4953ed;if(this[_0xa7605b(0x159)][_0x530bd9]===undefined)this[_0xa7605b(0x159)][_0x530bd9]=[];if(typeof _0x37ba97==_0xa7605b(0x121))this[_0xa7605b(0x159)][_0x530bd9]['push'](_0x37ba97);}[_0x4953ed(0x161)](_0x3d546a,_0x801f20){const _0x106cd8=_0x4953ed;for(const _0x27949f in this[_0x106cd8(0x159)]){this[_0x106cd8(0x159)][_0x27949f]=this['observers'][_0x27949f][_0x106cd8(0x198)](_0x44ef7b=>_0x44ef7b!==_0x801f20);}}['notify'](_0x989c6f,_0x1e9be0){const _0x4c6a56=_0x4953ed;this[_0x4c6a56(0x159)][_0x989c6f]&&this['observers'][_0x989c6f][_0x4c6a56(0x124)](_0x227f55=>{const _0x46fc19=_0x4c6a56;if(typeof _0x227f55==_0x46fc19(0x121))_0x227f55(_0x1e9be0);});}[_0x4953ed(0x14c)](_0x456ef5){const _0x2c98c1=_0x4953ed;this[_0x2c98c1(0x159)]['forEach'](_0x3ff4a1=>{const _0x220373=_0x2c98c1;_0x3ff4a1[_0x220373(0x124)](_0x1ba583=>{const _0x282692=_0x220373;typeof _0x1ba583==_0x282692(0x121)&&_0x1ba583(_0x456ef5);});});}};class Pipe{constructor(){this['streams']={};}[_0x4953ed(0x1a0)](_0x294a09){const _0x8a86e4=_0x4953ed;return!this[_0x8a86e4(0x1fa)][_0x294a09]&&(this[_0x8a86e4(0x1fa)][_0x294a09]=new PipeStream(_0x294a09)),this[_0x8a86e4(0x1fa)][_0x294a09];}}const pipe=new Pipe(),stream=pipe;;class ImageProcessing{constructor(){}static[_0x4953ed(0xa8)](_0x158945,_0x27d99e,_0xcb655b,_0x547b3b,_0x566a46){const _0x3a4c27=_0x4953ed;let _0x5edc98=document['createElement'](_0x3a4c27(0x175));_0x5edc98[_0x3a4c27(0x1ea)]=_0x547b3b,_0x5edc98[_0x3a4c27(0x99)]=_0x566a46;let _0x50b7c1=_0x5edc98['getContext']('2d');return _0x50b7c1[_0x3a4c27(0x1dd)](_0x158945,_0x27d99e,_0xcb655b,_0x547b3b,_0x566a46,0x0,0x0,_0x547b3b,_0x566a46),_0x5edc98;}static['resizeCanvas'](_0x50e2e4,_0x5c5d11={'w':null,'h':null}){const _0x4707e2=_0x4953ed;let _0x31edef=document[_0x4707e2(0x15f)](_0x4707e2(0x175));if(_0x5c5d11['w']==null&&_0x5c5d11['h']==null)_0x31edef[_0x4707e2(0x1ea)]=_0x50e2e4[_0x4707e2(0x1ea)],_0x31edef['height']=_0x50e2e4['height'];else{if(_0x5c5d11['w']==null)_0x31edef[_0x4707e2(0x99)]=_0x5c5d11['h'],_0x31edef[_0x4707e2(0x1ea)]=_0x5c5d11['h']/_0x50e2e4['height']*_0x50e2e4['width'];else _0x5c5d11['h']==null?(_0x31edef['width']=_0x5c5d11['w'],_0x31edef[_0x4707e2(0x99)]=_0x5c5d11['w']/_0x50e2e4[_0x4707e2(0x1ea)]*_0x50e2e4[_0x4707e2(0x99)]):(_0x31edef[_0x4707e2(0x1ea)]=_0x5c5d11['w'],_0x31edef['height']=_0x5c5d11['h']);}let _0x315fd4=_0x31edef[_0x4707e2(0xf6)]('2d');return _0x315fd4[_0x4707e2(0x1dd)](_0x50e2e4,0x0,0x0,_0x31edef['width'],_0x31edef['height']),_0x31edef;}static[_0x4953ed(0x21c)](_0x1df0a6,_0x7395de,_0x401240,_0x26a7d7,_0x25aea8,_0x64545d,_0x5cbbee){const _0x28eb4c=_0x4953ed;let _0x5bd97e=document['createElement'](_0x28eb4c(0x175));_0x5bd97e[_0x28eb4c(0x1ea)]=_0x64545d,_0x5bd97e['height']=_0x5cbbee;let _0x41c265=_0x5bd97e[_0x28eb4c(0xf6)]('2d');return _0x41c265[_0x28eb4c(0x1dd)](_0x1df0a6,_0x7395de,_0x401240,_0x26a7d7,_0x25aea8,0x0,0x0,_0x64545d,_0x5cbbee),_0x5bd97e;}static[_0x4953ed(0x23f)](_0x2b1ea3){const _0x31ff34=_0x4953ed;let _0x58365e=document[_0x31ff34(0x15f)]('CANVAS');_0x58365e['width']=_0x2b1ea3[_0x31ff34(0x1ea)],_0x58365e[_0x31ff34(0x99)]=_0x2b1ea3[_0x31ff34(0x99)];let _0x9d088b=_0x58365e[_0x31ff34(0xf6)]('2d');return _0x9d088b[_0x31ff34(0x14e)](_0x2b1ea3,0x0,0x0),_0x58365e;}static[_0x4953ed(0x8e)](_0x525314){const _0x2f335=_0x4953ed;let _0x5b1f8c=document['createElement'](_0x2f335(0x175));_0x5b1f8c[_0x2f335(0x1ea)]=_0x525314[_0x2f335(0x1ea)],_0x5b1f8c['height']=_0x525314[_0x2f335(0x99)];let _0x1f338e=_0x5b1f8c[_0x2f335(0xf6)]('2d');return _0x1f338e[_0x2f335(0x1dd)](_0x525314,0x0,0x0),_0x5b1f8c;}static['canvasToImageData'](_0x1c44c0){const _0x38e371=_0x4953ed;let _0x3998bd=_0x1c44c0['getContext']('2d'),_0x1d2e62=_0x3998bd[_0x38e371(0x1c9)](0x0,0x0,_0x1c44c0['width'],_0x1c44c0[_0x38e371(0x99)]);return _0x1d2e62;}static[_0x4953ed(0x14b)](_0x49025b,_0x429698=_0x4953ed(0x16a),_0x4293e6=0.92){const _0x2d298a=_0x4953ed;return _0x49025b[_0x2d298a(0x223)](_0x429698,_0x4293e6);}static[_0x4953ed(0x96)](_0x290538,_0x2a3765=_0x4953ed(0x16a),_0x98425=0.92){return new Promise(function(_0x4b3fdb,_0x16ccf3){const _0x44d8d2=_0x117a;let _0x1046da=new Image();_0x1046da[_0x44d8d2(0xa1)]('crossOrigin','anonymous'),_0x1046da[_0x44d8d2(0xbf)]=()=>{_0x4b3fdb(_0x1046da);},_0x1046da['onerror']=_0x277b09=>{const _0x3e44df=_0x44d8d2;_0x16ccf3(_0x3e44df(0x228)+_0x277b09);},_0x1046da[_0x44d8d2(0x93)]=ImageProcessing[_0x44d8d2(0x14b)](_0x290538,_0x2a3765,_0x98425);});}static[_0x4953ed(0x1dc)](_0x2d2b7a){const _0x50f561=_0x4953ed;let _0xc49454=_0x2d2b7a[_0x50f561(0xf6)]('2d'),_0x482e85=_0xc49454[_0x50f561(0x1c9)](0x0,0x0,_0x2d2b7a[_0x50f561(0x1ea)],_0x2d2b7a['height']),_0x182600=_0x482e85[_0x50f561(0x11d)],_0x8e6f49=_0x2d2b7a[_0x50f561(0x1ea)]*_0x2d2b7a[_0x50f561(0x99)]*0x4;for(let _0x147b40=_0x8e6f49-0x1;_0x147b40>0x0;_0x147b40-=0x4){let _0x3f5773=0.3*_0x182600[_0x147b40-0x3]+0.59*_0x182600[_0x147b40-0x2]+0.11*_0x182600[_0x147b40-0x1];_0x182600[_0x147b40-0x3]=_0x3f5773,_0x182600[_0x147b40-0x2]=_0x3f5773,_0x182600[_0x147b40-0x1]=_0x3f5773;}let _0x3b127b=document[_0x50f561(0x15f)](_0x50f561(0x175)),_0xc43832=_0x3b127b[_0x50f561(0xf6)]('2d');return _0xc43832['putImageData'](_0x482e85,0x0,0x0),_0x3b127b;}static[_0x4953ed(0xe7)](_0x5ab45d,_0x1d1c5c,_0x4b08dc=_0x4953ed(0x210)){const _0x2040a7=_0x4953ed;let _0x50c98b=document[_0x2040a7(0x15f)](_0x2040a7(0x175));_0x50c98b[_0x2040a7(0x1ea)]=_0x5ab45d,_0x50c98b[_0x2040a7(0x99)]=_0x1d1c5c;let _0x5f2306=_0x50c98b[_0x2040a7(0xf6)]('2d');return _0x5f2306['fillStyle']=_0x4b08dc,_0x5f2306[_0x2040a7(0x1d8)](0x0,0x0,_0x5ab45d,_0x1d1c5c),_0x50c98b;}static[_0x4953ed(0x23d)](_0x42891c,_0x439d53=0x1e){const _0x32a8fe=_0x4953ed;let _0x14cf15=_0x42891c[_0x32a8fe(0xf6)]('2d'),_0x49f6dc=_0x14cf15[_0x32a8fe(0x1c9)](0x0,0x0,_0x42891c['width'],_0x42891c[_0x32a8fe(0x99)]),_0x32c2f0=_0x49f6dc[_0x32a8fe(0x11d)],_0x38d498=[[0x0,0x1,0x0],[0x1,-0x4,0x1],[0x0,0x1,0x0]],_0x3b3fe7=_0x42891c['width']*0x4,_0x10d097=0x0,_0x3ecf9e=0x3,_0x38afff=Math[_0x32a8fe(0x103)](_0x3ecf9e/0x2),_0x505b21=0x0,_0xf12a7=0x0;for(let _0x4fd681=0x1;_0x4fd681<_0x42891c[_0x32a8fe(0x99)]-0x1;_0x4fd681++){for(let _0x511ed4=0x4;_0x511ed4<_0x3b3fe7-0x4;_0x511ed4+=0x4){_0x505b21=0x0;for(let _0x5db2c0=0x0;_0x5db2c0<_0x3ecf9e;_0x5db2c0++){for(let _0x474ca7=0x0;_0x474ca7<_0x3ecf9e;_0x474ca7++){_0x10d097=_0x3b3fe7*(_0x4fd681+_0x5db2c0-_0x38afff)+_0x511ed4+(_0x474ca7-_0x38afff)*0x4;let _0x5f2295=0.3*_0x32c2f0[_0x10d097]+0.59*_0x32c2f0[_0x10d097+0x1]+0.11*_0x32c2f0[_0x10d097+0x2];_0x505b21+=_0x5f2295*_0x38d498[_0x5db2c0][_0x474ca7];}}_0x505b21>_0x439d53&&(_0xf12a7+=0x1);}}return _0xf12a7;}static[_0x4953ed(0x1f4)](_0x4834dd){return new Promise(function(_0x5e1b85,_0x7f15ab){const _0x4a38b5=_0x117a;let _0x2a4ea9=new Image();_0x2a4ea9['setAttribute'](_0x4a38b5(0x95),_0x4a38b5(0x131)),_0x2a4ea9[_0x4a38b5(0xbf)]=()=>{_0x5e1b85(_0x2a4ea9);},_0x2a4ea9[_0x4a38b5(0x22e)]=()=>{const _0xb2cdc8=_0x4a38b5;_0x7f15ab(_0xb2cdc8(0x228)+_0x4834dd);},_0x2a4ea9[_0x4a38b5(0x93)]=_0x4834dd;});}};class WebWorker{constructor(_0x58fcfb={}){const _0x3bf84b=_0x4953ed;this[_0x3bf84b(0x1f0)]=null,this['stream']=null,this[_0x3bf84b(0xef)]={'path':null},this[_0x3bf84b(0xef)]=deepMerge(this['options'],_0x58fcfb),this[_0x3bf84b(0x1f5)]();}['setup'](){const _0x2c57f=_0x4953ed;this[_0x2c57f(0xe3)]=stream[_0x2c57f(0x1a0)](_0x2c57f(0x1f0)),this[_0x2c57f(0xe3)]['on'](_0x2c57f(0x252),this[_0x2c57f(0x252)][_0x2c57f(0x16f)](this)),this[_0x2c57f(0xe3)]['on'](_0x2c57f(0x102),this[_0x2c57f(0x102)][_0x2c57f(0x16f)](this)),this[_0x2c57f(0xe3)]['on'](_0x2c57f(0x279),this[_0x2c57f(0x279)]['bind'](this)),this[_0x2c57f(0xe3)]['on'](_0x2c57f(0x1c1),this[_0x2c57f(0x1c1)][_0x2c57f(0x16f)](this)),window[_0x2c57f(0x1b5)]&&this[_0x2c57f(0xef)][_0x2c57f(0x204)]!=null?(this[_0x2c57f(0x1f0)]=new Worker(this['options'][_0x2c57f(0x204)]),this[_0x2c57f(0x1f0)][_0x2c57f(0x222)]=this[_0x2c57f(0xdd)][_0x2c57f(0x16f)](this)):console['log'](_0x2c57f(0x1f2));}[_0x4953ed(0x252)](_0x220200){const _0x5e1164=_0x4953ed;let _0x4b3f60=null;if(_0x220200 instanceof HTMLCanvasElement){let _0x4e65d7=_0x220200[_0x5e1164(0xf6)]('2d');_0x4b3f60=_0x4e65d7[_0x5e1164(0x1c9)](0x0,0x0,_0x220200[_0x5e1164(0x1ea)],_0x220200[_0x5e1164(0x99)]);}else{if(_0x220200 instanceof HTMLImageElement){let _0x3e259b=document[_0x5e1164(0x15f)](_0x5e1164(0x1b3)),_0x2eed99=_0x3e259b[_0x5e1164(0xf6)]('2d');_0x3e259b[_0x5e1164(0x1ea)]=_0x220200['width'],_0x3e259b[_0x5e1164(0x99)]=_0x220200[_0x5e1164(0x99)],_0x2eed99[_0x5e1164(0x1dd)](_0x220200,0x0,0x0),_0x4b3f60=_0x2eed99[_0x5e1164(0x1c9)](0x0,0x0,_0x220200[_0x5e1164(0x1ea)],_0x220200['height']);}}this[_0x5e1164(0x1f0)][_0x5e1164(0x16e)]({'type':_0x5e1164(0x110),'action':_0x5e1164(0x252),'data':_0x4b3f60});}[_0x4953ed(0x102)](_0x167c4c){const _0x395775=_0x4953ed;let _0x2f7e88=null;if(_0x167c4c instanceof HTMLCanvasElement){let _0x47742b=_0x167c4c['getContext']('2d');_0x2f7e88=_0x47742b['getImageData'](0x0,0x0,_0x167c4c[_0x395775(0x1ea)],_0x167c4c[_0x395775(0x99)]);}else{if(_0x167c4c instanceof HTMLImageElement){let _0x3decb2=document[_0x395775(0x15f)]('canvas'),_0x1d04e=_0x3decb2[_0x395775(0xf6)]('2d');_0x3decb2[_0x395775(0x1ea)]=_0x167c4c[_0x395775(0x1ea)],_0x3decb2[_0x395775(0x99)]=_0x167c4c[_0x395775(0x99)],_0x1d04e[_0x395775(0x1dd)](_0x167c4c,0x0,0x0),_0x2f7e88=_0x1d04e[_0x395775(0x1c9)](0x0,0x0,_0x167c4c['width'],_0x167c4c[_0x395775(0x99)]);}}this[_0x395775(0x1f0)][_0x395775(0x16e)]({'type':_0x395775(0x110),'action':_0x395775(0x102),'data':_0x2f7e88});}['getCard'](_0x143f9){const _0x475224=_0x4953ed;let _0x3b1c3c=null;if(_0x143f9 instanceof HTMLCanvasElement)_0x3b1c3c=ImageProcessing[_0x475224(0x1c4)](_0x143f9);else _0x143f9 instanceof HTMLImageElement&&(_0x3b1c3c=ImageProcessing[_0x475224(0x8e)](_0x143f9));this['worker'][_0x475224(0x16e)]({'type':'scan','action':_0x475224(0x1c1),'data':_0x3b1c3c});}['loadCard'](){const _0x5b485d=_0x4953ed;this[_0x5b485d(0x1f0)][_0x5b485d(0x16e)]({'type':_0x5b485d(0x10e),'action':_0x5b485d(0x279)});}['onWorkerMessage'](_0x5588c7){const _0x447262=_0x4953ed;let _0x258fe9=_0x5588c7['data']['type'],_0x497617=_0x5588c7[_0x447262(0x11d)][_0x447262(0x162)],_0x22ff60=_0x5588c7[_0x447262(0x11d)][_0x447262(0x11d)];switch(_0x258fe9){case _0x447262(0x110):if(_0x497617==='faceDetected')this[_0x447262(0xe3)]['notify'](_0x447262(0x104),_0x22ff60);else _0x497617===_0x447262(0x107)&&this['stream'][_0x447262(0x123)](_0x447262(0x147),_0x22ff60);break;case'scan':this['stream'][_0x447262(0x123)](_0x447262(0xdf),_0x22ff60);break;case _0x447262(0x16b):this[_0x447262(0xe3)][_0x447262(0x123)]('onScanLoaded',_0x22ff60);break;case _0x447262(0x12f):break;default:break;}}};class HeadPos{constructor(){const _0x5c253a=_0x4953ed;this[_0x5c253a(0x1b1)]=null,this[_0x5c253a(0x24f)]={'x':0x0,'y':0x0,'width':0x0,'height':0x0},this['landmark']=[],this[_0x5c253a(0x110)]=null,this[_0x5c253a(0x20f)]=0x0,this[_0x5c253a(0x1cf)]=0x0,this[_0x5c253a(0x16d)]=0x0;}['setFace'](_0x16abdc){const _0x2dad80=_0x4953ed;this[_0x2dad80(0x110)]=_0x16abdc,this[_0x2dad80(0x24f)]={'x':_0x16abdc['x'],'y':_0x16abdc['y'],'height':_0x16abdc[_0x2dad80(0x99)],'width':_0x16abdc[_0x2dad80(0x1ea)]},this[_0x2dad80(0xd3)]=_0x16abdc['landMarks'],this[_0x2dad80(0x18d)]();}[_0x4953ed(0x248)](){const _0x423f29=_0x4953ed;this[_0x423f29(0x1b1)]=null,this['box']={'x':0x0,'y':0x0,'width':0x0,'height':0x0},this[_0x423f29(0xd3)]=[],this[_0x423f29(0x110)]=null,this['yaw']=0x0,this[_0x423f29(0x1cf)]=0x0,this['roll']=0x0;}[_0x4953ed(0x18d)](){const _0x1d794b=_0x4953ed;let _0x18602f=this[_0x1d794b(0x110)]['landMarks'][0xea],_0x3e69c1=this[_0x1d794b(0x110)]['landMarks'][0x1c6],_0x489461=this[_0x1d794b(0x110)][_0x1d794b(0x9c)][0xa],_0x5817a5=this[_0x1d794b(0x110)][_0x1d794b(0x9c)][0x98];this[_0x1d794b(0x20f)]=Math[_0x1d794b(0x249)](_0x3e69c1[0x2]-_0x18602f[0x2],_0x3e69c1[0x0]-_0x18602f[0x0])*0xb4/Math['PI'],this[_0x1d794b(0x1cf)]=Math['atan2'](_0x5817a5[0x0]-_0x489461[0x0],_0x5817a5[0x2]-_0x489461[0x2])*0xb4/Math['PI'],this[_0x1d794b(0x16d)]=Math[_0x1d794b(0x249)](_0x3e69c1[0x1]-_0x18602f[0x1],_0x3e69c1[0x0]-_0x18602f[0x0])*0xb4/Math['PI'];}[_0x4953ed(0x13e)](){}[_0x4953ed(0x1a1)](){const _0x19ab0f=_0x4953ed;return this[_0x19ab0f(0x24f)];}[_0x4953ed(0x149)](){const _0xe73fc8=_0x4953ed;return this[_0xe73fc8(0xd3)];}}const headpos=HeadPos;;const FaceCommands={'FORWARD':_0x4953ed(0x1c2),'LEFT':_0x4953ed(0x251),'RIGHT':_0x4953ed(0xeb),'UP':'up','DOWN':_0x4953ed(0x1fb),'SMILE':_0x4953ed(0xc3),'BLINKING':_0x4953ed(0x176),'NONE':_0x4953ed(0x174)};class Commander{constructor(){const _0x40873a=_0x4953ed;this[_0x40873a(0x130)]=[],this['count']=0x2,this[_0x40873a(0x17e)]=[FaceCommands[_0x40873a(0xb5)],FaceCommands[_0x40873a(0x193)],FaceCommands['UP'],FaceCommands['DOWN'],FaceCommands[_0x40873a(0xd7)]],this[_0x40873a(0x234)]=0x0;}[_0x4953ed(0x1b7)](){const _0x207c8b=_0x4953ed;this[_0x207c8b(0x248)]();for(let _0x2cdb0f=0x0;_0x2cdb0f<this[_0x207c8b(0x201)];_0x2cdb0f++){this['commands'][_0x207c8b(0x278)]({'name':FaceCommands[_0x207c8b(0xe8)]});}return this['commands'];}['next'](){const _0x1ceceb=_0x4953ed;return this[_0x1ceceb(0x234)]<this[_0x1ceceb(0x130)][_0x1ceceb(0x27b)]-0x1?(this['index']++,this[_0x1ceceb(0x130)][this[_0x1ceceb(0x234)]]):null;}['current'](){const _0x1d2178=_0x4953ed;return this[_0x1d2178(0x130)][this[_0x1d2178(0x234)]];}['hasCommand'](){const _0x1fbb83=_0x4953ed;return this['index']<this[_0x1fbb83(0x130)][_0x1fbb83(0x27b)]-0x1;}[_0x4953ed(0x248)](){const _0x92373f=_0x4953ed;this[_0x92373f(0x234)]=0x0,this[_0x92373f(0x130)]=[];}};const DCFaceError={'NO_FACE':_0x4953ed(0x12b),'MANY_FACES':_0x4953ed(0x1af),'LOW_LIGHT':_0x4953ed(0xe0),'HIGH_LIGHT':_0x4953ed(0x11c),'OUT_OF_BOUNDS':_0x4953ed(0x259)},DCFacePos={'NONE':_0x4953ed(0x174),'UP':'up','DOWN':_0x4953ed(0x1fb),'FORWARD':_0x4953ed(0x1c2),'LEFT':'left','RIGHT':'right'},FaceActionSteps={'NONE':_0x4953ed(0x174),'INIT':_0x4953ed(0x9f),'START':_0x4953ed(0x14d),'ACTIONS':'actions','FINISH':_0x4953ed(0x20e)},CommandResult={'SUCCESS':_0x4953ed(0x1e2),'NONE':_0x4953ed(0x174),'REJECT':'reject'};class FaceAnalyser{constructor(_0x578c3e,_0x54647a={}){const _0x5c9d2a=_0x4953ed;this['canvas']=_0x578c3e,this[_0x5c9d2a(0xef)]={'video':null,'area':{'x':0x0,'y':0x0,'width':0x0,'height':0x0},'detectTime':0x64,'startingWaitTime':0x7d0,'onFaceDetected':null,'onError':null,'onFinished':null,'onCommand':null,'onCommandResult':null,'onStep':null,'onStartDownCount':null},this[_0x5c9d2a(0xef)]=deepMerge(this[_0x5c9d2a(0xef)],_0x54647a),this[_0x5c9d2a(0x215)]=null,this[_0x5c9d2a(0x117)]={'lowLight':![],'highLight':![],'noFace':![],'manyFace':![],'outOfBounds':![]},this[_0x5c9d2a(0x1db)]=DCFacePos[_0x5c9d2a(0x229)],this[_0x5c9d2a(0xe3)]=null,this[_0x5c9d2a(0xa4)]=new headpos(),this[_0x5c9d2a(0x101)]=new Commander(),this['lock']=![],this['lastDetected']=[],this[_0x5c9d2a(0xc8)]=FaceActionSteps['NONE'],this['detectedFaceCountDownBeforeStart']=0x3,this[_0x5c9d2a(0x1f9)]=0x0,this[_0x5c9d2a(0x90)]=0x0,this[_0x5c9d2a(0x186)]=0x7d0,this[_0x5c9d2a(0x1a9)]=0x1770,this[_0x5c9d2a(0x22b)]=0x3e8,this[_0x5c9d2a(0xf1)]=0x7d0,this[_0x5c9d2a(0xb3)]=![],this[_0x5c9d2a(0x177)]=null,this[_0x5c9d2a(0x1d3)]=[],this[_0x5c9d2a(0xa0)]=FaceCommands['NONE'],this['currentAction']=DCFacePos[_0x5c9d2a(0x229)],this[_0x5c9d2a(0x106)]=[],this['cc']=null,this[_0x5c9d2a(0xb1)]();}['initWorker'](){const _0x4b9c0d=_0x4953ed;this[_0x4b9c0d(0xe3)]=stream['open'](_0x4b9c0d(0x1f0)),this[_0x4b9c0d(0xe3)]['on'](_0x4b9c0d(0x104),_0x2a707d=>{const _0x25fd8f=_0x4b9c0d;this[_0x25fd8f(0x215)]!=null&&(this[_0x25fd8f(0x24b)](_0x2a707d),this[_0x25fd8f(0x10d)]=![]);});}[_0x4953ed(0x14d)](){const _0x4890a8=_0x4953ed;this[_0x4890a8(0x10d)]=![],this[_0x4890a8(0x146)]=[],this[_0x4890a8(0xb3)]=![],this['step']=FaceActionSteps[_0x4890a8(0xf9)],this[_0x4890a8(0x1d3)]=[],this['detectedFaceCountDownBeforeStart']=0x3,this[_0x4890a8(0x177)]=new Date()[_0x4890a8(0x261)](),this[_0x4890a8(0x8d)](),this[_0x4890a8(0x19e)](this[_0x4890a8(0xc8)]),clearTimeout(this['detectTimer']),this[_0x4890a8(0x215)]=setTimeout(this[_0x4890a8(0x233)]['bind'](this),this[_0x4890a8(0xef)][_0x4890a8(0x217)]);}[_0x4953ed(0x1d9)](){const _0x2c8bf0=_0x4953ed;this[_0x2c8bf0(0x177)]=null,clearTimeout(this[_0x2c8bf0(0x215)]),this[_0x2c8bf0(0x215)]=null,this[_0x2c8bf0(0x10d)]=![],this[_0x2c8bf0(0x248)]();}[_0x4953ed(0x248)](){const _0x5a17af=_0x4953ed;this['lastDetected']=[],this[_0x5a17af(0xc8)]=FaceActionSteps[_0x5a17af(0x229)],this[_0x5a17af(0x26d)]=0x3,this[_0x5a17af(0xac)]=DCFacePos[_0x5a17af(0x229)],this[_0x5a17af(0x106)]=[],this[_0x5a17af(0xb3)]=![];}[_0x4953ed(0x8d)](){const _0x5770eb=_0x4953ed;let _0x5c3430=this[_0x5770eb(0x101)][_0x5770eb(0x1b7)]();for(let _0x5f4322 in _0x5c3430){this['results']['push']({'pos':DCFacePos['NONE'],'image':null,'command':FaceCommands[_0x5770eb(0x229)],'status':![]});}console[_0x5770eb(0x13c)](_0x5770eb(0x8d),_0x5c3430);}[_0x4953ed(0x233)](){const _0x2a4521=_0x4953ed;!this['lock']&&(this[_0x2a4521(0xe3)][_0x2a4521(0x123)](_0x2a4521(0x252),this['canvas']),this[_0x2a4521(0x10d)]=!![]),this[_0x2a4521(0x215)]=setTimeout(this['observe'][_0x2a4521(0x16f)](this),this[_0x2a4521(0xef)][_0x2a4521(0x217)]);}[_0x4953ed(0x24b)](_0x4a6b99){const _0xe20ec5=_0x4953ed;this[_0xe20ec5(0x117)][_0xe20ec5(0x25d)]=![],this['errors'][_0xe20ec5(0x18f)]=![],this[_0xe20ec5(0x1db)]=DCFacePos[_0xe20ec5(0x229)];if(_0x4a6b99[_0xe20ec5(0x27b)]>0x1)this[_0xe20ec5(0x117)][_0xe20ec5(0x18f)]=!![];else{if(_0x4a6b99[_0xe20ec5(0x27b)]===0x0){this[_0xe20ec5(0x117)][_0xe20ec5(0x25d)]=!![];if(typeof this[_0xe20ec5(0xef)][_0xe20ec5(0x24b)]===_0xe20ec5(0x121))this[_0xe20ec5(0xef)][_0xe20ec5(0x24b)]([]);this[_0xe20ec5(0x10d)]=![];return;}}this['lastDetected']=_0x4a6b99;if(typeof this[_0xe20ec5(0xef)][_0xe20ec5(0x24b)]==='function')this['options'][_0xe20ec5(0x24b)](_0x4a6b99);this['detectedFaceCountDownBeforeStart']>0x0?(this[_0xe20ec5(0x26d)]--,this[_0xe20ec5(0x1f9)]=new Date()[_0xe20ec5(0x261)](),this[_0xe20ec5(0x90)]=new Date()['getTime']()):(this[_0xe20ec5(0xa4)][_0xe20ec5(0x26a)](_0x4a6b99[0x0]),this[_0xe20ec5(0x207)](),this[_0xe20ec5(0x151)]()),this[_0xe20ec5(0x10d)]=![];}[_0x4953ed(0x20e)](_0x295051,_0x44ed22){const _0x2db2f7=_0x4953ed;if(this[_0x2db2f7(0x177)]==null)return![];let _0x373b25={'tid':this[_0x2db2f7(0x177)],'status':_0x44ed22,'results':this[_0x2db2f7(0x1d3)],'image':null};for(let _0x2d6022 in this[_0x2db2f7(0x1d3)]){if(this[_0x2db2f7(0x1d3)][_0x2d6022]['command']===FaceCommands[_0x2db2f7(0xe8)]&&this[_0x2db2f7(0x1d3)][_0x2d6022][_0x2db2f7(0x1d5)]===!![]){_0x373b25[_0x2d6022]['image']=this[_0x2db2f7(0x1d3)][_0x2d6022][_0x2db2f7(0x157)];break;}}typeof this[_0x2db2f7(0xef)][_0x2db2f7(0x1da)]===_0x2db2f7(0x121)&&this[_0x2db2f7(0xef)]['onFinished'](_0x373b25),this['stop']();}[_0x4953ed(0x207)](){const _0x167f2a=_0x4953ed;let _0x27ef89=this[_0x167f2a(0xa4)][_0x167f2a(0x1a1)](),_0xcf55c8={'x':this['cc'][_0x167f2a(0x20c)](_0x27ef89['x']),'y':this['cc'][_0x167f2a(0x276)](_0x27ef89['y']),'width':this['cc'][_0x167f2a(0xd0)](_0x27ef89[_0x167f2a(0x1ea)]),'height':this['cc']['getSize'](_0x27ef89[_0x167f2a(0x99)])},_0xe32eb4=this['options'][_0x167f2a(0xa2)][_0x167f2a(0x1ea)]*0.3,_0x3dcbaa=this[_0x167f2a(0xef)][_0x167f2a(0xa2)][_0x167f2a(0x99)]*0.3,_0x1179c2=_0xcf55c8['x']+_0xcf55c8[_0x167f2a(0x1ea)],_0x2f2335=_0xcf55c8['y']+_0xcf55c8[_0x167f2a(0x99)];if(_0xcf55c8['x']>this[_0x167f2a(0xef)][_0x167f2a(0xa2)]['x']-_0xe32eb4&&_0xcf55c8['y']>this[_0x167f2a(0xef)][_0x167f2a(0xa2)]['y']-_0x3dcbaa&&_0x1179c2<this[_0x167f2a(0xef)][_0x167f2a(0xa2)]['x']+this[_0x167f2a(0xef)][_0x167f2a(0xa2)][_0x167f2a(0x1ea)]+_0xe32eb4&&_0x2f2335<this[_0x167f2a(0xef)][_0x167f2a(0xa2)]['y']+this[_0x167f2a(0xef)][_0x167f2a(0xa2)]['height']+_0x3dcbaa)this[_0x167f2a(0x117)][_0x167f2a(0x21d)]=![];else return this[_0x167f2a(0x117)][_0x167f2a(0x21d)]=!![],![];this['headpos'][_0x167f2a(0x16d)]<0xc&&this[_0x167f2a(0xa4)][_0x167f2a(0x16d)]>-0xc&&this[_0x167f2a(0xa4)]['pitch']<=-0x14&&this[_0x167f2a(0xa4)]['pitch']>=-0x82&&this[_0x167f2a(0xa4)][_0x167f2a(0x20f)]>=-0xa&&this['headpos'][_0x167f2a(0x20f)]<=0xa&&(this[_0x167f2a(0xac)]=DCFacePos[_0x167f2a(0xe8)]),this[_0x167f2a(0xa4)][_0x167f2a(0x16d)]<0xc&&this[_0x167f2a(0xa4)][_0x167f2a(0x16d)]>-0xc&&this[_0x167f2a(0xa4)][_0x167f2a(0x20f)]<-0xa&&(this[_0x167f2a(0xac)]=DCFacePos[_0x167f2a(0xb5)]),this[_0x167f2a(0xa4)][_0x167f2a(0x16d)]<0xc&&this[_0x167f2a(0xa4)]['roll']>-0xc&&this[_0x167f2a(0xa4)]['yaw']>0xa&&(this['currentAction']=DCFacePos[_0x167f2a(0x193)]),this[_0x167f2a(0xa4)][_0x167f2a(0x16d)]<0xc&&this[_0x167f2a(0xa4)][_0x167f2a(0x16d)]>-0xc&&this[_0x167f2a(0xa4)]['pitch']<-0x82&&(this[_0x167f2a(0xac)]=DCFacePos['UP']),this[_0x167f2a(0xa4)][_0x167f2a(0x16d)]<0xc&&this[_0x167f2a(0xa4)][_0x167f2a(0x16d)]>-0xc&&this[_0x167f2a(0xa4)][_0x167f2a(0x1cf)]>-0x14&&(this[_0x167f2a(0xac)]=DCFacePos['DOWN']);}['checkCurrentCommandAction'](){const _0x9121be=_0x4953ed;let _0x3734a9=this[_0x9121be(0x225)](),_0x3c6ed9=this[_0x9121be(0xc5)](this[_0x9121be(0x1f9)]);_0x3734a9?(this[_0x9121be(0x1db)]=DCFacePos[_0x9121be(0x229)],this['callError'](this[_0x9121be(0x117)])):this[_0x9121be(0x90)]=new Date()[_0x9121be(0x261)]();this[_0x9121be(0xc8)]===FaceActionSteps[_0x9121be(0xf9)]&&(this['currentStepActive']=![],this[_0x9121be(0xc8)]=FaceActionSteps[_0x9121be(0x187)],this['callStepChange'](this['step']));if(this[_0x9121be(0xc8)]===FaceActionSteps[_0x9121be(0x187)]){let _0x3d849e=Math[_0x9121be(0xfc)]((this[_0x9121be(0xef)][_0x9121be(0x153)]-_0x3c6ed9)/0x3e8);if(_0x3d849e>0x0){if(typeof this[_0x9121be(0xef)][_0x9121be(0x169)]===_0x9121be(0x121))this[_0x9121be(0xef)][_0x9121be(0x169)](_0x3d849e);}else this['step']=FaceActionSteps[_0x9121be(0x89)],this['currentStepActive']=![],this[_0x9121be(0x1f9)]=new Date()['getTime'](),this[_0x9121be(0x185)]=new Date()[_0x9121be(0x261)](),this[_0x9121be(0x19e)](this[_0x9121be(0xc8)]);}if(this[_0x9121be(0xc8)]===FaceActionSteps[_0x9121be(0x89)]&&(_0x3734a9===![]||this[_0x9121be(0x186)]===0x0)){let _0x23e662=this['commander'][_0x9121be(0x234)],_0x2e78cb=this['commander'][_0x9121be(0xae)]();this[_0x9121be(0xa0)]!==_0x2e78cb[_0x9121be(0x19d)]&&(this[_0x9121be(0xa0)]=_0x2e78cb[_0x9121be(0x19d)],this['currentActionList']=[],this[_0x9121be(0x9d)](_0x2e78cb[_0x9121be(0x19d)]));_0x3c6ed9>0x0&&this[_0x9121be(0x106)][_0x9121be(0x278)]({'pos':this['currentAction'],'posPitch':this['headpos'][_0x9121be(0x1cf)],'posYaw':this[_0x9121be(0xa4)][_0x9121be(0x20f)],'time':new Date()[_0x9121be(0x261)](),'valid':!![],'command':_0x2e78cb});let _0x16dd77=this['actionWaitTime']+this[_0x9121be(0x22b)]-_0x3c6ed9,_0x1bd8ea=_0x3c6ed9>this[_0x9121be(0x22b)]?this['checkPosAndActions'](_0x2e78cb[_0x9121be(0x19d)],this[_0x9121be(0xac)]):CommandResult[_0x9121be(0x229)];if(_0x16dd77>0x0&&_0x1bd8ea===CommandResult[_0x9121be(0x229)]){}else{if(_0x3c6ed9>this[_0x9121be(0x22b)]){let _0x1e5d6f=ImageProcessing[_0x9121be(0xa8)](this['canvas'],this[_0x9121be(0xa4)][_0x9121be(0x24f)]['x'],this['headpos'][_0x9121be(0x24f)]['y'],this['headpos'][_0x9121be(0x24f)][_0x9121be(0x1ea)],this[_0x9121be(0xa4)][_0x9121be(0x24f)][_0x9121be(0x99)]);_0x1bd8ea===CommandResult[_0x9121be(0x1fe)]?this['results'][_0x23e662]={'pos':this[_0x9121be(0xac)],'command':_0x2e78cb,'status':!![],'image':_0x1e5d6f}:this[_0x9121be(0x1d3)][_0x23e662]={'pos':this['currentAction'],'command':_0x2e78cb,'status':![],'image':_0x1e5d6f},this[_0x9121be(0x15d)](this[_0x9121be(0x1d3)][_0x23e662]),this[_0x9121be(0x101)][_0x9121be(0x25e)]()?this[_0x9121be(0x101)]['next']():(this[_0x9121be(0xc8)]=FaceActionSteps['FINISH'],this[_0x9121be(0xa4)][_0x9121be(0x248)](),this[_0x9121be(0x19e)](this['step'])),this['fixedTime']=new Date()[_0x9121be(0x261)]();}}}if(this['step']===FaceActionSteps[_0x9121be(0x270)]){let _0x4f3af0=this[_0x9121be(0xf1)]-_0x3c6ed9;if(_0x4f3af0>0x0){}else this[_0x9121be(0xc8)]=FaceActionSteps[_0x9121be(0x270)],this[_0x9121be(0x1f9)]=new Date()[_0x9121be(0x261)](),this[_0x9121be(0x20e)](!![],!![]);}}[_0x4953ed(0xcb)](_0x588586,_0x37f59b){const _0x201104=_0x4953ed;let _0x3acf57={},_0x4f476b=FaceCommands[_0x201104(0x229)],_0x219233=FaceCommands[_0x201104(0x229)],_0x3c39a4={};for(let _0x2b680d in this[_0x201104(0x106)]){let _0x33e0fa=this[_0x201104(0x106)][_0x2b680d];_0x33e0fa!=null&&_0x33e0fa['valid']&&(_0x33e0fa['pos']!=null&&(_0x4f476b=this[_0x201104(0x17c)](_0x33e0fa[_0x201104(0x219)])),_0x3acf57[_0x4f476b]==null&&(_0x3acf57[_0x4f476b]={'list':[],'max':0x0}),_0x3acf57[_0x4f476b]=this[_0x201104(0x1aa)](_0x3acf57[_0x4f476b],_0x33e0fa,_0x219233!==_0x4f476b),_0x3c39a4[_0x4f476b]=(_0x3c39a4[_0x4f476b]||0x0)+0x1,_0x219233=_0x4f476b);}let _0x1f8679=_0x3c39a4[_0x201104(0x27b)];if(_0x588586===FaceCommands[_0x201104(0xb5)]||_0x588586===FaceCommands['UP']||_0x588586===FaceCommands[_0x201104(0x193)]||_0x588586===FaceCommands[_0x201104(0x86)]){if(_0x1f8679>0x3)return CommandResult['REJECT'];if(_0x3acf57[_0x588586]!=null&&_0x3acf57[_0x588586]['max']>0x3e8)return CommandResult['SUCCESS'];}if(_0x588586===FaceCommands[_0x201104(0xe8)]){if(_0x1f8679>=0x3)return CommandResult[_0x201104(0x24e)];if(_0x3acf57[_0x588586]!=null&&_0x3acf57[_0x588586][_0x201104(0x1c7)]>0x3e8)return CommandResult[_0x201104(0x1fe)];}return CommandResult[_0x201104(0x229)];}['callStepChange'](_0xe457bc){const _0x23da92=_0x4953ed;typeof this[_0x23da92(0xef)][_0x23da92(0xcd)]===_0x23da92(0x121)&&this[_0x23da92(0xef)][_0x23da92(0xcd)](_0xe457bc);}['callError'](_0x54bdcf){const _0x45e1af=_0x4953ed;typeof this[_0x45e1af(0xef)]['onError']==='function'&&this[_0x45e1af(0xef)][_0x45e1af(0x184)](_0x54bdcf);}['callCommandChange'](_0x4ddd55){const _0x440750=_0x4953ed;typeof this[_0x440750(0xef)][_0x440750(0x1e9)]===_0x440750(0x121)&&this[_0x440750(0xef)][_0x440750(0x1e9)](_0x4ddd55);}[_0x4953ed(0x15d)](_0x1d9191){const _0xea8ac2=_0x4953ed;typeof this[_0xea8ac2(0xef)][_0xea8ac2(0x19b)]===_0xea8ac2(0x121)&&this[_0xea8ac2(0xef)][_0xea8ac2(0x19b)](_0x1d9191);}[_0x4953ed(0xff)](){const _0x2e5c29=_0x4953ed;return this[_0x2e5c29(0x146)];}['isErrorExist'](){const _0x3bc361=_0x4953ed;for(const _0x5d1b48 in this[_0x3bc361(0x117)]){if(this['errors'][_0x5d1b48]===!![])return!![];}return![];}['getTimeDiff'](_0x592345){const _0x4704a2=_0x4953ed;let _0x3dccd6=new Date()[_0x4704a2(0x261)]();return _0x3dccd6-_0x592345;}[_0x4953ed(0x17c)](_0x39b76d){const _0x45c10e=_0x4953ed;switch(_0x39b76d){case DCFacePos[_0x45c10e(0xb5)]:return FaceCommands[_0x45c10e(0xb5)];case DCFacePos['UP']:return FaceCommands['UP'];case DCFacePos[_0x45c10e(0x193)]:return FaceCommands[_0x45c10e(0x193)];case DCFacePos[_0x45c10e(0x86)]:return FaceCommands[_0x45c10e(0x86)];case DCFacePos[_0x45c10e(0xe8)]:return FaceCommands['FORWARD'];default:return FaceCommands[_0x45c10e(0x229)];}}[_0x4953ed(0x1aa)](_0x2eead1,_0x269a2a,_0x2a8441){const _0x3895d2=_0x4953ed;let _0x5cdd87=_0x2eead1,_0x158a18=0x0;return _0x5cdd87[_0x3895d2(0x206)][_0x3895d2(0x27b)]>0x0&&_0x5cdd87[_0x3895d2(0x206)][_0x158a18]['start']!=null&&_0x2a8441?(_0x158a18=_0x5cdd87['list'][_0x3895d2(0x27b)]-0x1,_0x269a2a['time']!=null&&(_0x5cdd87[_0x3895d2(0x206)][_0x158a18]['end']=_0x269a2a[_0x3895d2(0xd5)],_0x5cdd87['list'][_0x158a18]['interval']=_0x269a2a[_0x3895d2(0xd5)]-_0x5cdd87[_0x3895d2(0x206)][_0x158a18][_0x3895d2(0x14d)],_0x5cdd87[_0x3895d2(0x1c7)]=(_0x5cdd87[_0x3895d2(0x206)][_0x158a18][_0x3895d2(0x1b0)]||0x0)>_0x5cdd87[_0x3895d2(0x1c7)]?_0x5cdd87[_0x3895d2(0x206)][_0x158a18]['interval']||0x0:_0x5cdd87[_0x3895d2(0x1c7)])):_0x5cdd87['list'][_0x3895d2(0x278)]({'start':_0x269a2a[_0x3895d2(0xd5)],'end':null,'interval':null}),_0x5cdd87;}};class DeepFace{constructor(_0x463b43,_0x44dacf={}){const _0x2f1ff0=_0x4953ed;this[_0x2f1ff0(0x183)]=null,this[_0x2f1ff0(0x1b3)]=null,this[_0x2f1ff0(0x26b)]=null,this['state']={'start':![],'detectInit':![],'analyzeAfterOpen':![]},this[_0x2f1ff0(0xef)]={'src':null,'sourceType':null,'width':0x280,'height':0x1e0,'liveness':!![],'onFrameCaptured':null,'detectTime':0x64,'onFinished':null,'worker_path':_0x2f1ff0(0x1fc)},this['options']=deepMerge(this[_0x2f1ff0(0xef)],_0x44dacf),this['initContainer'](_0x463b43),this['setup']();}[_0x4953ed(0xab)](_0xecc994){const _0x3f4a74=_0x4953ed;this['camera']=new camera(_0xecc994,{'src':this['options'][_0x3f4a74(0x93)],'width':this['options'][_0x3f4a74(0x1ea)],'height':this[_0x3f4a74(0xef)][_0x3f4a74(0x99)],'onFrameUpdated':this[_0x3f4a74(0x263)][_0x3f4a74(0x16f)](this),'onLoaded':this[_0x3f4a74(0x1a8)]['bind'](this),'onStart':this['onCameraStart'][_0x3f4a74(0x16f)](this),'onStop':this['onCameraStop'][_0x3f4a74(0x16f)](this)}),this[_0x3f4a74(0x183)]=this[_0x3f4a74(0x26b)][_0x3f4a74(0x183)],this[_0x3f4a74(0x1b3)]=this['camera'][_0x3f4a74(0x1b3)];}[_0x4953ed(0x1f5)](){const _0x4ca659=_0x4953ed;this['cc']=new CoordConverter(this[_0x4ca659(0x26b)][_0x4ca659(0x26c)]),this['faceMask']=new MaskLayer(this['dom'],{'width':this[_0x4ca659(0xef)]['width'],'height':this[_0x4ca659(0xef)][_0x4ca659(0x99)]}),this[_0x4ca659(0x209)]=new VisualLayer(this['canvas']),this[_0x4ca659(0x170)]=new WebWorker({'path':this[_0x4ca659(0xef)][_0x4ca659(0xce)]}),this['analyser']=new FaceAnalyser(this['camera'][_0x4ca659(0x1ff)],{'area':this[_0x4ca659(0x1eb)][_0x4ca659(0x11e)](),'detectTime':this[_0x4ca659(0xef)][_0x4ca659(0x217)],'onFaceDetected':this[_0x4ca659(0x24b)][_0x4ca659(0x16f)](this),'onError':this[_0x4ca659(0x184)][_0x4ca659(0x16f)](this),'onFinished':this[_0x4ca659(0x1da)][_0x4ca659(0x16f)](this),'onCommand':this[_0x4ca659(0x1e9)][_0x4ca659(0x16f)](this),'onCommandResult':this[_0x4ca659(0x19b)][_0x4ca659(0x16f)](this),'onStep':this[_0x4ca659(0xcd)]['bind'](this),'onStartDownCount':this[_0x4ca659(0x169)][_0x4ca659(0x16f)](this)}),this[_0x4ca659(0x18c)]['cc']=this['cc'];}['open'](){const _0x3ae3a1=_0x4953ed;!this['camera'][_0x3ae3a1(0x188)]()&&(this[_0x3ae3a1(0x26b)]['start'](),this[_0x3ae3a1(0x1eb)]['show']());}[_0x4953ed(0x244)](){const _0x1e56c6=_0x4953ed;this[_0x1e56c6(0x1d9)](),this[_0x1e56c6(0x26b)][_0x1e56c6(0x1d9)](),this['faceMask'][_0x1e56c6(0xb8)]();}[_0x4953ed(0x14d)](){const _0x2eeb5f=_0x4953ed;!this['camera']['isPlaying']()?(this[_0x2eeb5f(0x1a0)](),this['state'][_0x2eeb5f(0xdb)]=!![]):(this[_0x2eeb5f(0x87)][_0x2eeb5f(0x14d)]=!![],this[_0x2eeb5f(0x18c)][_0x2eeb5f(0x14d)]());}[_0x4953ed(0x1d9)](){const _0x54852a=_0x4953ed;this['state'][_0x54852a(0x14d)]=![],this['analyser']['stop'](),this[_0x54852a(0x87)][_0x54852a(0xdb)]=![];}[_0x4953ed(0x1da)](_0x465f59,_0x3dc084){const _0x3604ce=_0x4953ed;console[_0x3604ce(0x13c)]('finished'),this[_0x3604ce(0x1eb)][_0x3604ce(0x246)](_0x3604ce(0x1a4)),typeof this[_0x3604ce(0xef)][_0x3604ce(0x1da)]=='function'&&this[_0x3604ce(0xef)][_0x3604ce(0x1da)](_0x465f59,_0x3dc084);}[_0x4953ed(0x24b)](_0x5dfc14){}[_0x4953ed(0x1e9)](_0x2d75e6){const _0x1ecce3=_0x4953ed;console[_0x1ecce3(0x13c)](_0x1ecce3(0x1e9),_0x2d75e6);let _0x66f4d4='';switch(_0x2d75e6){case FaceCommands[_0x1ecce3(0xe8)]:_0x66f4d4=_0x1ecce3(0x14f);break;case FaceCommands[_0x1ecce3(0xb5)]:_0x66f4d4=_0x1ecce3(0x224);break;case FaceCommands[_0x1ecce3(0x193)]:_0x66f4d4=_0x1ecce3(0x236);break;case FaceCommands['UP']:_0x66f4d4='look\x20up';break;case FaceCommands['DOWN']:_0x66f4d4=_0x1ecce3(0x269);break;default:_0x66f4d4='';}this['faceMask'][_0x1ecce3(0x246)](_0x66f4d4);}[_0x4953ed(0x19b)](){}[_0x4953ed(0xcd)](_0x1c3ac7){const _0x2f76f3=_0x4953ed;console[_0x2f76f3(0x13c)](_0x2f76f3(0x265),_0x1c3ac7);let _0x1a65de='';switch(_0x1c3ac7){case FaceActionSteps['INIT']:_0x1a65de=_0x2f76f3(0x109);break;case FaceActionSteps[_0x2f76f3(0x187)]:_0x1a65de=_0x2f76f3(0x232);break;case FaceActionSteps[_0x2f76f3(0x89)]:_0x1a65de=_0x2f76f3(0x9b);break;case FaceActionSteps[_0x2f76f3(0x270)]:_0x1a65de=_0x2f76f3(0x132);break;default:_0x1a65de='';}this[_0x2f76f3(0x1eb)][_0x2f76f3(0x246)](_0x1a65de);}[_0x4953ed(0x169)](_0x4353cf){const _0x5f6ff2=_0x4953ed;console[_0x5f6ff2(0x13c)](_0x5f6ff2(0x169),_0x4353cf);}[_0x4953ed(0x184)](_0x3947f8){const _0x2806eb=_0x4953ed;console[_0x2806eb(0x13c)](_0x2806eb(0x184),_0x3947f8);}[_0x4953ed(0x263)](){const _0x3614ec=_0x4953ed;let _0x1a601d=this[_0x3614ec(0x18c)][_0x3614ec(0xff)]();this[_0x3614ec(0x209)][_0x3614ec(0x22a)](_0x1a601d);}[_0x4953ed(0x1a8)](_0xe7a1aa,_0x77e975){const _0x2d4483=_0x4953ed;this['cc']['setDim'](_0x77e975),this[_0x2d4483(0x209)]['cc']['setDim'](_0x77e975),this[_0x2d4483(0x18c)][_0x2d4483(0xef)][_0x2d4483(0xf4)]=_0xe7a1aa;}[_0x4953ed(0x168)](){const _0x2816b8=_0x4953ed;this['state'][_0x2816b8(0xdb)]&&(this['state']['analyzeAfterOpen']=![],this[_0x2816b8(0x14d)]());}['onCameraStop'](){}[_0x4953ed(0x17a)](_0x1a74a5){const _0xd341d4=_0x4953ed;this[_0xd341d4(0x183)]&&(this[_0xd341d4(0x183)][_0xd341d4(0x258)][_0xd341d4(0x161)]('loading'),this[_0xd341d4(0x183)][_0xd341d4(0x258)][_0xd341d4(0x161)]('blur'),_0x1a74a5&&(this[_0xd341d4(0x183)]['classList'][_0xd341d4(0x172)](_0xd341d4(0x18a)),this['dom'][_0xd341d4(0x258)][_0xd341d4(0x172)](_0xd341d4(0x268))));}};class CardDetector{constructor(_0x2f1b75={}){const _0x424f86=_0x4953ed;this[_0x424f86(0xef)]={'host':null,'headers':null,'serverSide':null,'modelUrl':null,'mirrored':!![],'single':!![]},this[_0x424f86(0xd2)]=null,this[_0x424f86(0x1ae)]=![],this[_0x424f86(0xef)]=deepMerge(this[_0x424f86(0xef)],_0x2f1b75),this['originalSize']={'width':0x0,'height':0x0},this[_0x424f86(0x20b)]={'x':0x0,'y':0x0,'width':0x0,'height':0x0},this[_0x424f86(0xde)]={'width':0x12c,'height':0x12c};if(!this[_0x424f86(0xef)][_0x424f86(0x255)])this[_0x424f86(0xb1)]();else{}}[_0x4953ed(0xf7)](){const _0x5db90c=_0x4953ed;this[_0x5db90c(0xef)][_0x5db90c(0x255)]=OSPlus[_0x5db90c(0x1ce)]()||OSPlus[_0x5db90c(0x1ac)]();}[_0x4953ed(0xb1)](){const _0x2e33c3=_0x4953ed;this['stream']=stream['open'](_0x2e33c3(0x1c8)),this[_0x2e33c3(0xe3)]['on'](_0x2e33c3(0xdf),_0x4b1fb9=>{const _0x18fe6c=_0x2e33c3;if(typeof this[_0x18fe6c(0xd2)]===_0x18fe6c(0x121)){let _0x1f7231=this[_0x18fe6c(0xa5)](_0x4b1fb9,!![]);this[_0x18fe6c(0xd2)](_0x1f7231);}}),this[_0x2e33c3(0xe3)]['on'](_0x2e33c3(0x1ed),_0x17872f=>{const _0x4b7e62=_0x2e33c3;console[_0x4b7e62(0x13c)](_0x4b7e62(0x205)),this['loaded']=_0x17872f;});}[_0x4953ed(0x21a)](){const _0x54c57f=_0x4953ed;if(!this['options']['serverSide'])this['stream'][_0x54c57f(0x123)](_0x54c57f(0x279));else{let _0x1d5adc=this[_0x54c57f(0xef)]['host']!=null?StringExtra[_0x54c57f(0x9e)](this[_0x54c57f(0xef)][_0x54c57f(0x23e)]):'',_0x1be1d8=_0x1d5adc+'/'+_0x54c57f(0xe1),_0x3aef1f=deepMerge({'Content-Type':_0x54c57f(0x136)},this[_0x54c57f(0xef)][_0x54c57f(0x1fd)]||{});fetch(_0x1be1d8,{'method':_0x54c57f(0x199),'headers':_0x3aef1f})[_0x54c57f(0xed)](_0x4efab1=>_0x4efab1['json']())['then'](_0x5a5bc4=>{const _0x2fa6a5=_0x54c57f;this[_0x2fa6a5(0x1ae)]=_0x5a5bc4['success'],console[_0x2fa6a5(0x13c)](_0x2fa6a5(0x148),_0x5a5bc4);})['catch'](_0x2f801c=>{const _0x3ba718=_0x54c57f;this[_0x3ba718(0x1ae)]=![],console[_0x3ba718(0x10b)](_0x3ba718(0x230),_0x2f801c);});}}[_0x4953ed(0x26f)](_0x135d34,_0x3600e9,_0x813af1){const _0x205ce2=_0x4953ed;if(!this[_0x205ce2(0xef)][_0x205ce2(0x255)]){this[_0x205ce2(0xd2)]=_0x813af1;let _0x44267d=this[_0x205ce2(0x20d)](_0x135d34);this[_0x205ce2(0xe3)][_0x205ce2(0x123)]('getCard',_0x44267d);}else{let _0x4cd2c6=ImageProcessing[_0x205ce2(0x14b)](_0x135d34,_0x205ce2(0x1b9),0.95),_0x188da3=new FormData();_0x188da3[_0x205ce2(0x239)](_0x205ce2(0x157),_0x4cd2c6),_0x188da3[_0x205ce2(0x239)](_0x205ce2(0x1f1),'0'),_0x188da3[_0x205ce2(0x239)](_0x205ce2(0x177),_0x3600e9);let _0x108b5c=this[_0x205ce2(0xef)][_0x205ce2(0x23e)]!=null?StringExtra[_0x205ce2(0x9e)](this[_0x205ce2(0xef)][_0x205ce2(0x23e)]):'',_0x131c26=_0x108b5c+'/'+_0x205ce2(0x189),_0x342a6f=deepMerge({},this[_0x205ce2(0xef)]['headers']||{});fetch(_0x131c26,{'method':_0x205ce2(0x22f),'body':_0x188da3,'headers':_0x342a6f})['then'](function(_0xcb7228){const _0x189fc8=_0x205ce2;if(_0xcb7228['ok'])return _0xcb7228[_0x189fc8(0x25c)]();console[_0x189fc8(0x10b)](_0x189fc8(0x230),_0xcb7228),typeof _0x813af1===_0x189fc8(0x121)&&_0x813af1(null);})['then'](_0x4b587=>{const _0x39af41=_0x205ce2;console[_0x39af41(0x13c)](_0x39af41(0x1cb),_0x4b587);let _0x39a4c8=[];_0x4b587[_0x39af41(0x1e2)]===!![]&&_0x4b587['data']!==undefined&&(_0x39a4c8=_0x4b587[_0x39af41(0x11d)]);if(_0x39a4c8[_0x39af41(0x27b)]>0x0){}if(typeof _0x813af1===_0x39af41(0x121)){let _0xd2ec0d=this[_0x39af41(0xa5)](_0x39a4c8);_0x813af1(_0xd2ec0d);}})['catch'](_0x38253c=>{console['error']('Error:',_0x38253c),typeof _0x813af1==='function'&&_0x813af1(null);});}}[_0x4953ed(0x139)](){const _0x4fb2ef=_0x4953ed;return this[_0x4fb2ef(0x1ae)];}[_0x4953ed(0x20d)](_0xf9bd52){const _0xe92fe7=_0x4953ed;let _0x57666a={'x':0x0,'y':0x0,'w':_0xf9bd52[_0xe92fe7(0x1ea)],'h':_0xf9bd52[_0xe92fe7(0x99)]};return _0xf9bd52[_0xe92fe7(0x1ea)]>_0xf9bd52[_0xe92fe7(0x99)]?(_0x57666a['w']=_0xf9bd52['height'],_0x57666a['x']=(_0xf9bd52[_0xe92fe7(0x1ea)]-_0x57666a['w'])/0x2):(_0x57666a['h']=_0xf9bd52['width'],_0x57666a['y']=(_0xf9bd52['height']-_0x57666a['h'])/0x2),this[_0xe92fe7(0x1a3)]={'x':_0xf9bd52[_0xe92fe7(0x1ea)],'y':_0xf9bd52['height']},this[_0xe92fe7(0x20b)]=_0x57666a,ImageProcessing['cropAndResizeCanvas'](_0xf9bd52,_0x57666a['x'],_0x57666a['y'],_0x57666a['w'],_0x57666a['h'],this['inputSize'][_0xe92fe7(0x1ea)],this['inputSize'][_0xe92fe7(0x99)]);}[_0x4953ed(0x1e0)](_0x1b4015,_0x20d3ce){const _0x1c89b1=_0x4953ed;let _0x1f61e1=0x1;switch(_0x20d3ce){case'x':_0x1f61e1=this[_0x1c89b1(0x20b)]['w']/this[_0x1c89b1(0xde)][_0x1c89b1(0x1ea)];return _0x1b4015*_0x1f61e1+this['croppedSize']['x'];case'y':_0x1f61e1=this[_0x1c89b1(0x20b)]['h']/this['inputSize'][_0x1c89b1(0x99)];return _0x1b4015*_0x1f61e1+this[_0x1c89b1(0x20b)]['y'];case _0x1c89b1(0x1ea):_0x1f61e1=this['croppedSize']['w']/this[_0x1c89b1(0xde)][_0x1c89b1(0x1ea)];return _0x1b4015*_0x1f61e1;case _0x1c89b1(0x99):_0x1f61e1=this['croppedSize']['h']/this['inputSize'][_0x1c89b1(0x99)];return _0x1b4015*_0x1f61e1;}}[_0x4953ed(0xa5)](_0x340ed1,_0x21c131=![]){const _0x5f444c=_0x4953ed;let _0x18fa0a=[],_0x23da70=null,_0x2def0e=![];for(let _0x4a9cec in _0x340ed1){_0x23da70=_0x340ed1[_0x4a9cec];_0x21c131&&(_0x23da70[_0x5f444c(0x243)][0x0]=this['toOriginalSize'](_0x23da70[_0x5f444c(0x243)][0x0],'x'),_0x23da70[_0x5f444c(0x243)][0x1]=this[_0x5f444c(0x1e0)](_0x23da70[_0x5f444c(0x243)][0x1],'y'),_0x23da70['bbox'][0x2]=this['toOriginalSize'](_0x23da70[_0x5f444c(0x243)][0x2],_0x5f444c(0x1ea)),_0x23da70['bbox'][0x3]=this[_0x5f444c(0x1e0)](_0x23da70['bbox'][0x3],_0x5f444c(0x99)));_0x2def0e=![];for(let _0x3a2b9f in _0x18fa0a){if(_0x18fa0a[_0x3a2b9f]['class']===_0x23da70[_0x5f444c(0x1bf)]){let _0x3c4ee8=_0x18fa0a[_0x3a2b9f],_0x17f040=_0x23da70,_0x514b1c=0x0,_0x266470=0x0;if(_0x17f040[_0x5f444c(0x243)][0x0]>_0x3c4ee8[_0x5f444c(0x243)][0x0]&&_0x17f040[_0x5f444c(0x243)][0x0]<_0x3c4ee8[_0x5f444c(0x243)][0x0]+_0x3c4ee8['bbox'][0x2])_0x514b1c=_0x3c4ee8[_0x5f444c(0x243)][0x0]+_0x3c4ee8['bbox'][0x2]-_0x17f040[_0x5f444c(0x243)][0x0],_0x266470=_0x514b1c/_0x17f040[_0x5f444c(0x243)][0x2];else _0x3c4ee8['bbox'][0x0]>_0x17f040[_0x5f444c(0x243)][0x0]&&_0x3c4ee8['bbox'][0x0]<_0x17f040[_0x5f444c(0x243)][0x0]+_0x17f040[_0x5f444c(0x243)][0x2]&&(_0x514b1c=_0x17f040['bbox'][0x0]+_0x17f040[_0x5f444c(0x243)][0x2]-_0x3c4ee8[_0x5f444c(0x243)][0x0],_0x266470=_0x514b1c/_0x3c4ee8[_0x5f444c(0x243)][0x2]);let _0x1bee35=0x0,_0x236387=0x0;if(_0x17f040[_0x5f444c(0x243)][0x1]>_0x3c4ee8['bbox'][0x1]&&_0x17f040[_0x5f444c(0x243)][0x1]<_0x3c4ee8[_0x5f444c(0x243)][0x1]+_0x3c4ee8[_0x5f444c(0x243)][0x3])_0x1bee35=_0x3c4ee8[_0x5f444c(0x243)][0x1]+_0x3c4ee8[_0x5f444c(0x243)][0x3]-_0x17f040[_0x5f444c(0x243)][0x1],_0x236387=_0x514b1c/_0x17f040[_0x5f444c(0x243)][0x3];else _0x3c4ee8[_0x5f444c(0x243)][0x1]>_0x17f040[_0x5f444c(0x243)][0x1]&&_0x3c4ee8[_0x5f444c(0x243)][0x1]<_0x17f040['bbox'][0x1]+_0x17f040['bbox'][0x3]&&(_0x1bee35=_0x17f040['bbox'][0x1]+_0x17f040[_0x5f444c(0x243)][0x3]-_0x3c4ee8[_0x5f444c(0x243)][0x1],_0x236387=_0x514b1c/_0x3c4ee8[_0x5f444c(0x243)][0x3]);_0x266470>0.6&&_0x236387>0.6&&(_0x2def0e=!![],_0x17f040[_0x5f444c(0x1cd)]>_0x3c4ee8[_0x5f444c(0x1cd)]&&(_0x18fa0a[_0x3a2b9f]=_0x23da70));}}!_0x2def0e&&_0x18fa0a[_0x5f444c(0x278)](_0x340ed1[_0x4a9cec]);}if(this[_0x5f444c(0xef)][_0x5f444c(0xe2)]&&_0x18fa0a['length']>0x0){let _0x5982b6=0x0,_0x28c262=0x0;for(let _0x7a0ab6 in _0x18fa0a){_0x18fa0a[_0x7a0ab6][_0x5f444c(0x1cd)]>_0x5982b6&&(_0x5982b6=_0x18fa0a[_0x7a0ab6]['score'],_0x28c262=_0x7a0ab6);}return[_0x18fa0a[_0x28c262]];}return _0x18fa0a;}};class MRZReader{constructor(_0x30ba73={}){const _0xa67449=_0x4953ed;this[_0xa67449(0xef)]={'server':!![],'url':null,'host':null,'checkURI':null},this['options']=deepMerge(this['options'],_0x30ba73);if(this[_0xa67449(0xef)][_0xa67449(0x97)]==null)this[_0xa67449(0xef)]['checkURI']=_0xa67449(0x1b6);this[_0xa67449(0x1ae)]=![],this[_0xa67449(0x1f5)]();}[_0x4953ed(0x1f5)](){const _0x45b406=_0x4953ed;if(!this[_0x45b406(0xef)][_0x45b406(0x1e1)]){}}['load'](){const _0x168919=_0x4953ed;if(this[_0x168919(0xef)][_0x168919(0x1e1)])this[_0x168919(0x1ae)]=!![];else{}}[_0x4953ed(0x237)](_0x12ad25,_0x2bbd64,_0x5636d9){const _0xd2452a=_0x4953ed;if(this[_0xd2452a(0xef)][_0xd2452a(0x1e1)])this[_0xd2452a(0x17b)](_0x12ad25,_0x2bbd64,_0x5636d9);else{}}[_0x4953ed(0x17b)](_0x556822,_0x56dd46,_0x1dd9ff){const _0x2af54c=_0x4953ed;let _0x42e6c1=ImageProcessing[_0x2af54c(0x14b)](_0x556822,_0x2af54c(0x1b9),0.9),_0x3fa3d0=new FormData();_0x3fa3d0[_0x2af54c(0x239)](_0x2af54c(0x157),_0x42e6c1),_0x3fa3d0['append']('tid',_0x56dd46);let _0x4f06e5=this[_0x2af54c(0xef)][_0x2af54c(0x23e)]!=null?StringExtra[_0x2af54c(0x9e)](this[_0x2af54c(0xef)][_0x2af54c(0x23e)]):'',_0x185a15=this[_0x2af54c(0xef)][_0x2af54c(0xad)]!=null?this['options'][_0x2af54c(0xad)]:_0x4f06e5+'/'+this[_0x2af54c(0xef)][_0x2af54c(0x97)];fetch(_0x185a15,{'method':_0x2af54c(0x22f),'body':_0x3fa3d0})[_0x2af54c(0xed)](_0x248259=>_0x248259[_0x2af54c(0x25c)]())[_0x2af54c(0xed)](_0x428069=>{const _0x431ce6=_0x2af54c;console[_0x431ce6(0x13c)]('Received:',_0x428069);let _0x43cc15=MRZReader['parseObject'](_0x428069[_0x431ce6(0x11d)]);_0x428069[_0x431ce6(0x1e2)]===![]&&(_0x43cc15[_0x431ce6(0x1f1)]=null),typeof _0x1dd9ff==='function'&&_0x1dd9ff(_0x43cc15);})['catch'](_0x140605=>{const _0x1a591b=_0x2af54c;console[_0x1a591b(0x10b)]('Error:',_0x140605),typeof _0x1dd9ff===_0x1a591b(0x121)&&_0x1dd9ff(null);});}[_0x4953ed(0x160)](_0x191348,_0x1af116){}[_0x4953ed(0xe9)](_0x4041a5){const _0x39ad0b=_0x4953ed;let _0x7a58ca={'type':null,'text':_0x4041a5,'object':null};if(_0x7a58ca[_0x39ad0b(0x201)]>0x4b){const _0x2546be=_0x4041a5['substring'](0x0,0x3);if(_0x2546be['includes']('I<')||_0x2546be[_0x39ad0b(0xf5)]('1<'))_0x7a58ca[_0x39ad0b(0x1f1)]='I';else(_0x2546be[_0x39ad0b(0xf5)]('P<')||_0x2546be[_0x39ad0b(0xf5)]('PC'))&&(_0x7a58ca['type']='P');}return _0x7a58ca;}static['parseObject'](_0x353db0){const _0x164fac=_0x4953ed;let _0x528835={'type':null,'text':_0x353db0[_0x164fac(0x9a)][_0x164fac(0xee)](''),'object':_0x353db0};if(_0x528835[_0x164fac(0x214)][_0x164fac(0x27b)]>0x4b){const _0xd0c279=_0x353db0[_0x164fac(0x91)];if(_0xd0c279[_0x164fac(0xf5)]('I<')||_0xd0c279[_0x164fac(0xf5)]('1<'))_0x528835[_0x164fac(0x1f1)]='I';else(_0xd0c279[_0x164fac(0xf5)]('P<')||_0xd0c279['includes']('PC'))&&(_0x528835[_0x164fac(0x1f1)]='P');}return _0x528835;}};const DCScanError={'NO_CARD':_0x4953ed(0x1b2),'MANY_CARDS':_0x4953ed(0x257),'LOW_LIGHT':_0x4953ed(0xe0),'HIGH_LIGHT':_0x4953ed(0x11c),'TOO_SMALL':_0x4953ed(0x231)},DCScanDocType={'NONE':_0x4953ed(0x174),'ID':'id','PASSPORT':_0x4953ed(0x266)},DCScanDocFaces={'NONE':_0x4953ed(0x174),'ID_FRONT':_0x4953ed(0x21b),'ID_BACK':'id_back','PASS_FRONT':_0x4953ed(0x150)},DCScanCommand={'NONE':_0x4953ed(0x174),'SHOW':_0x4953ed(0xf8),'ID_BACK':'id_back','FINISH':_0x4953ed(0x20e)},DCScanSteps={'NONE':_0x4953ed(0x174),'SCANNING':'scanning','FINISH':'finish'};class ScanAnalyser{constructor(_0x311cd0,_0x4736d6={}){const _0x310aaa=_0x4953ed;this[_0x310aaa(0x1b3)]=_0x311cd0,this[_0x310aaa(0xef)]={'host':null,'headers':null,'mrzOptions':null,'detector':null,'video':null,'area':{'x':0x0,'y':0x0,'width':0x0,'height':0x0},'detectTime':0x64,'useServerSide':null,'onCardDetected':null,'onFaceDetected':null,'onMRZDetected':null,'onDetected':null,'onError':null,'onFinished':null,'onCommand':null,'onCommandResult':null,'onStepChanged':null,'mirrored':!![],'delay':0x1f4,'serverDelay':0x3e8,'cardMinSize':{'width':0x46,'height':0x37}},this[_0x310aaa(0xef)]=deepMerge(this[_0x310aaa(0xef)],_0x4736d6),this[_0x310aaa(0xe3)]=null,this[_0x310aaa(0xb2)]=![],this[_0x310aaa(0x15e)]=null,this[_0x310aaa(0xc8)]=DCScanSteps[_0x310aaa(0x229)],this[_0x310aaa(0x19a)]=null,this[_0x310aaa(0x122)]={},this[_0x310aaa(0x128)]={},this[_0x310aaa(0x115)]=null,this[_0x310aaa(0x1b4)]=null,this[_0x310aaa(0x112)]=null,this[_0x310aaa(0x1f8)]=null,this['finishTime']=null,this[_0x310aaa(0xc4)]=this['options']['delay'],this['tID']=null,this[_0x310aaa(0xef)]['useServerSide']&&(this[_0x310aaa(0xc4)]=this[_0x310aaa(0xef)][_0x310aaa(0x13b)]),this[_0x310aaa(0x192)]=new CardDetector({'mirrored':this[_0x310aaa(0xef)][_0x310aaa(0xd9)],'single':!![],'serverSide':this['options'][_0x310aaa(0x1d4)],'host':this[_0x310aaa(0xef)]['host'],'headers':this[_0x310aaa(0xef)][_0x310aaa(0x1fd)]}),this[_0x310aaa(0x1ba)]=new MRZReader({'host':this[_0x310aaa(0xef)]['host'],'url':this[_0x310aaa(0xef)]['mrzOptions']?this[_0x310aaa(0xef)][_0x310aaa(0x13f)]['url']||null:null}),this['cc']=null,this[_0x310aaa(0xc0)](),!this[_0x310aaa(0xef)][_0x310aaa(0x1d4)]&&this[_0x310aaa(0xb1)]();}[_0x4953ed(0x9f)](){const _0x41845c=_0x4953ed;this[_0x41845c(0x192)][_0x41845c(0x21a)](),this[_0x41845c(0x1ba)][_0x41845c(0x21a)](),this[_0x41845c(0xe3)]!=null&&ImageProcessing[_0x41845c(0x1f4)]('/img/face.jpg')[_0x41845c(0xed)](_0x194b98=>{const _0x395f71=_0x41845c;this['stream'][_0x395f71(0x123)](_0x395f71(0x102),_0x194b98);});}[_0x4953ed(0xb1)](){const _0x21b174=_0x4953ed;this[_0x21b174(0xe3)]=stream[_0x21b174(0x1a0)](_0x21b174(0x1f0)),this['stream']['on'](_0x21b174(0x147),_0x22f361=>{const _0x23db60=_0x21b174;console['log'](_0x23db60(0x104),_0x22f361),this['step']===DCScanSteps[_0x23db60(0x1df)]&&this[_0x23db60(0x19a)]!=null&&this[_0x23db60(0x24b)](_0x22f361);});}[_0x4953ed(0x156)](_0x261390,_0x2dcad5){const _0x586bae=_0x4953ed;this['detector'][_0x586bae(0x139)]()&&this[_0x586bae(0x192)][_0x586bae(0x26f)](_0x261390,_0x5221e0=>{const _0xc279d1=_0x586bae;typeof _0x2dcad5===_0xc279d1(0x121)&&_0x2dcad5(_0x5221e0);});}['observe'](){const _0x5620a8=_0x4953ed;if(!this[_0x5620a8(0x192)][_0x5620a8(0x139)]())return;else{let _0x34a3dd=new Date()[_0x5620a8(0x261)]();if(this[_0x5620a8(0xc8)]===DCScanSteps['NONE']&&_0x34a3dd-this[_0x5620a8(0x1f8)]>0x3e8)this['step']=DCScanSteps[_0x5620a8(0x1df)],this[_0x5620a8(0x22d)](DCScanCommand[_0x5620a8(0xbd)]);else{if(this[_0x5620a8(0xc8)]===DCScanSteps['NONE'])return;else{if(this[_0x5620a8(0xc8)]===DCScanCommand[_0x5620a8(0x270)]){this['finishTime']!=null&&_0x34a3dd-this[_0x5620a8(0x18b)]>0x7d0&&(this[_0x5620a8(0x20e)](),this[_0x5620a8(0x18b)]=null);return;}}}}!this[_0x5620a8(0xb2)]&&(this['curScan']=null,this[_0x5620a8(0x122)]={'card':![],'face':![],'mrz':![]},this[_0x5620a8(0xb2)]=!![],this[_0x5620a8(0x1b4)]=this[_0x5620a8(0x1b3)],this['curFrame']=ImageProcessing[_0x5620a8(0x1c4)](this[_0x5620a8(0x1b4)]),this['detector']['detect'](this[_0x5620a8(0x1b4)],this[_0x5620a8(0x212)],_0x387c15=>{const _0x1b71be=_0x5620a8;this[_0x1b71be(0x158)](_0x387c15);}));}[_0x4953ed(0x158)](_0x7354a1){const _0x3059fb=_0x4953ed;let _0x2bdf10=_0x7354a1!=null&&_0x7354a1[_0x3059fb(0x27b)]>0x0?_0x7354a1[0x0]:null,_0x310b3c=null;this['scanned']['card']=!![];let _0x3bacb4=_0x2bdf10!=null?this[_0x3059fb(0x203)](_0x2bdf10['bbox']):![];_0x2bdf10!=null&&!_0x3bacb4&&this[_0x3059fb(0x235)](DCScanError['TOO_SMALL']);if(_0x2bdf10!=null&&_0x3bacb4===!![]){console[_0x3059fb(0x13c)](_0x3059fb(0x197),_0x7354a1);let _0x4289b9={'docType':this[_0x3059fb(0xda)](_0x2bdf10[_0x3059fb(0x1bf)]),'docFace':this[_0x3059fb(0x22c)](_0x2bdf10[_0x3059fb(0x1bf)]),'card':_0x2bdf10,'face':null,'mrz':null,'image':null};this[_0x3059fb(0x19a)]=_0x4289b9;let _0x198144=ImageProcessing['imageDataToCanvas'](this[_0x3059fb(0x115)]);_0x310b3c=ImageProcessing[_0x3059fb(0xa8)](_0x198144,_0x2bdf10['bbox'][0x0],_0x2bdf10['bbox'][0x1],_0x2bdf10[_0x3059fb(0x243)][0x2],_0x2bdf10[_0x3059fb(0x243)][0x3]),_0x4289b9['image']=_0x310b3c[_0x3059fb(0x223)](_0x3059fb(0x1b9),0.9),this['cardImage']=_0x310b3c;if(this[_0x3059fb(0x128)][_0x3059fb(0x218)][_0x3059fb(0x27b)]===0x0&&(_0x4289b9[_0x3059fb(0x27a)]===DCScanDocFaces[_0x3059fb(0x167)]||_0x4289b9[_0x3059fb(0x27a)]===DCScanDocFaces['PASS_FRONT'])){_0x2bdf10[_0x3059fb(0x110)]===undefined||_0x2bdf10[_0x3059fb(0x110)]==null?this['stream'][_0x3059fb(0x123)](_0x3059fb(0x102),_0x310b3c):this[_0x3059fb(0x24b)]([_0x2bdf10['face']]);if(_0x4289b9[_0x3059fb(0x27a)]===DCScanDocFaces['PASS_FRONT']){let _0x2a51af=_0x310b3c['height']*0.7,_0x1dfa1d=ImageProcessing[_0x3059fb(0xa8)](_0x310b3c,0x0,_0x2a51af,_0x310b3c['width'],_0x310b3c[_0x3059fb(0x99)]-_0x2a51af);if(_0x2bdf10['mrz']===undefined||_0x2bdf10[_0x3059fb(0x1ba)]==null){let _0x596528=ImageProcessing[_0x3059fb(0x23d)](_0x1dfa1d);_0x596528>0x5?this[_0x3059fb(0x1ba)]['recognize'](_0x1dfa1d,this[_0x3059fb(0x212)],_0x59e139=>{const _0x1ef330=_0x3059fb;this[_0x1ef330(0xbe)](_0x59e139);}):this[_0x3059fb(0xfe)](this[_0x3059fb(0xc4)]);}else this[_0x3059fb(0xbe)](_0x2bdf10[_0x3059fb(0x1ba)]);}else this[_0x3059fb(0x122)][_0x3059fb(0x1ba)]=!![];}else{if(this[_0x3059fb(0x128)][_0x3059fb(0x218)][_0x3059fb(0x27b)]>0x0&&this[_0x3059fb(0x128)][_0x3059fb(0x111)]===DCScanDocType['ID']&&_0x4289b9[_0x3059fb(0x27a)]===DCScanDocFaces[_0x3059fb(0x1e5)]){let _0x42c0cd=_0x310b3c[_0x3059fb(0x99)]*0.6,_0x3b8303=ImageProcessing[_0x3059fb(0xa8)](_0x310b3c,0x0,_0x42c0cd,_0x310b3c[_0x3059fb(0x1ea)],_0x310b3c['height']-_0x42c0cd);if(_0x2bdf10[_0x3059fb(0x1ba)]===undefined||_0x2bdf10[_0x3059fb(0x1ba)]==null){let _0x3d5e2a=ImageProcessing[_0x3059fb(0x23d)](_0x3b8303,0xa);_0x3d5e2a>0xa?this[_0x3059fb(0x1ba)][_0x3059fb(0x237)](_0x3b8303,this[_0x3059fb(0x212)],_0x519b3c=>{const _0x1ddfdc=_0x3059fb;this[_0x1ddfdc(0xbe)](_0x519b3c);}):this[_0x3059fb(0xfe)](this['delay']);}else this[_0x3059fb(0xbe)](_0x2bdf10['mrz']);this['scanned'][_0x3059fb(0x110)]=!![];}else this[_0x3059fb(0xfe)](this[_0x3059fb(0xc4)]);}this[_0x3059fb(0x135)](_0x7354a1),this['checkScanResult']();}else this[_0x3059fb(0x135)]([]),this[_0x3059fb(0x1b8)]([]),this['unlock'](this[_0x3059fb(0xc4)]);}['checkSize'](_0x211ee7){const _0xb0375c=_0x4953ed;let _0x2b41f7=this[_0xb0375c(0x1b4)][_0xb0375c(0x1ea)],_0x2238ef=this[_0xb0375c(0x1b4)]['height'],_0x16101b=this[_0xb0375c(0xef)][_0xb0375c(0xa3)];if(_0x211ee7!=null&&_0x211ee7[_0xb0375c(0x27b)]>=0x4){if(_0x211ee7[0x2]/_0x2b41f7*0x64>_0x16101b[_0xb0375c(0x1ea)]||_0x211ee7[0x3]/_0x2238ef*0x64>_0x16101b['height'])return!![];}return![];}['onFaceDetected'](_0x21bd29){const _0x21355d=_0x4953ed;console[_0x21355d(0x13c)](_0x21355d(0x24b),_0x21bd29),this['scanned'][_0x21355d(0x110)]=!![];if(this[_0x21355d(0x19a)]!=null){this[_0x21355d(0x19a)][_0x21355d(0x110)]=null;if(_0x21bd29[_0x21355d(0x27b)]>0x0){let _0x3b4a25=ImageProcessing['cropCanvas'](this[_0x21355d(0x112)],_0x21bd29[0x0]['x'],_0x21bd29[0x0]['y'],_0x21bd29[0x0][_0x21355d(0x1ea)],_0x21bd29[0x0][_0x21355d(0x99)]),_0xcf636d=ImageProcessing[_0x21355d(0x23d)](_0x3b4a25,0xa);console[_0x21355d(0x13c)](_0x21355d(0x24d),_0xcf636d),_0xcf636d>0xa&&(this['curScan']['face']=_0x21bd29);}typeof this[_0x21355d(0xef)][_0x21355d(0x24b)]===_0x21355d(0x121)&&this[_0x21355d(0xef)][_0x21355d(0x24b)](_0x21bd29),this[_0x21355d(0x180)]();}}[_0x4953ed(0xbe)](_0x4acb82){const _0x13c661=_0x4953ed;console[_0x13c661(0x13c)](_0x13c661(0xbe),_0x4acb82),this[_0x13c661(0x122)]['mrz']=!![];if(this[_0x13c661(0x19a)]==null)return;if(_0x4acb82!=null&&_0x4acb82[_0x13c661(0x277)]!=null&&_0x4acb82[_0x13c661(0x277)][_0x13c661(0xe6)]===!![])this[_0x13c661(0x19a)]['mrz']=_0x4acb82;else _0x4acb82!=null&&_0x4acb82[_0x13c661(0xe6)]===!![]?this['curScan'][_0x13c661(0x1ba)]=MRZReader[_0x13c661(0x1d7)](_0x4acb82):this[_0x13c661(0x19a)][_0x13c661(0x1ba)]=null;typeof this[_0x13c661(0xef)][_0x13c661(0xbe)]===_0x13c661(0x121)&&this[_0x13c661(0xef)][_0x13c661(0xbe)](_0x4acb82),this[_0x13c661(0x180)]();}['checkScanResult'](){const _0x2de048=_0x4953ed;if(!this['isAllScanned']())return;let _0xc78284=this[_0x2de048(0x19a)],_0x4c594d=![];if(this[_0x2de048(0x128)][_0x2de048(0x218)][_0x2de048(0x27b)]===0x0&&(_0xc78284[_0x2de048(0x27a)]===DCScanDocFaces[_0x2de048(0x167)]||_0xc78284[_0x2de048(0x27a)]===DCScanDocFaces[_0x2de048(0x1c0)]))_0xc78284[_0x2de048(0x27a)]===DCScanDocFaces['ID_FRONT']?_0xc78284['card']!=null&&_0xc78284[_0x2de048(0x110)]!=null&&_0xc78284[_0x2de048(0x110)][_0x2de048(0x27b)]===0x1&&(this[_0x2de048(0x128)][_0x2de048(0x218)]['push'](_0xc78284),this[_0x2de048(0x128)][_0x2de048(0x111)]=DCScanDocType['ID'],this[_0x2de048(0x128)][_0x2de048(0x1d5)]=![],this['callDetectedEvent'](this[_0x2de048(0x19a)]),this['fireCommand'](DCScanCommand[_0x2de048(0x1e5)]),_0x4c594d=!![],this['unlock'](this['options'][_0x2de048(0xc4)])):_0xc78284[_0x2de048(0x18e)]!=null&&_0xc78284[_0x2de048(0x110)]!=null&&_0xc78284[_0x2de048(0x1ba)]!=null&&_0xc78284[_0x2de048(0x1ba)][_0x2de048(0x1f1)]!=null&&(this[_0x2de048(0x128)][_0x2de048(0x218)][_0x2de048(0x278)](_0xc78284),this[_0x2de048(0x128)][_0x2de048(0x111)]=DCScanDocType[_0x2de048(0xd4)],this['result'][_0x2de048(0x1d5)]=!![],this[_0x2de048(0x1b8)](this['curScan']),this['changeStep'](DCScanSteps[_0x2de048(0x270)]),this[_0x2de048(0x18b)]=new Date()['getTime'](),_0x4c594d=!![]);else this[_0x2de048(0x128)]['scans'][_0x2de048(0x27b)]===0x1&&this['result'][_0x2de048(0x111)]===DCScanDocType['ID']&&_0xc78284[_0x2de048(0x27a)]===DCScanDocFaces[_0x2de048(0x1e5)]&&(_0xc78284['card']!=null&&_0xc78284[_0x2de048(0x1ba)]!=null&&_0xc78284['mrz']['type']!=null&&(this[_0x2de048(0x128)][_0x2de048(0x218)]['push'](_0xc78284),this[_0x2de048(0x128)]['status']=!![],this[_0x2de048(0x1b8)](this[_0x2de048(0x19a)]),this[_0x2de048(0x1bc)](DCScanSteps[_0x2de048(0x270)]),this[_0x2de048(0x18b)]=new Date()[_0x2de048(0x261)](),_0x4c594d=!![]));!_0x4c594d&&this[_0x2de048(0x122)][_0x2de048(0x18e)]&&this[_0x2de048(0x122)]['face']&&this['scanned'][_0x2de048(0x1ba)]&&this[_0x2de048(0xfe)](this[_0x2de048(0xef)][_0x2de048(0xc4)]);}[_0x4953ed(0xc2)](){const _0xbdd4cc=_0x4953ed;for(let _0x10e5a4 in this[_0xbdd4cc(0x122)]){if(this[_0xbdd4cc(0x122)][_0x10e5a4]!==!![])return![];}return!![];}[_0x4953ed(0x1bc)](_0x389299){const _0x35e26a=_0x4953ed;this[_0x35e26a(0xc8)]!==_0x389299&&(this[_0x35e26a(0xc8)]=_0x389299,typeof this['options']['onStepChanged']=='function'&&this['options'][_0x35e26a(0x265)](_0x389299));}['callCardDetectedEvent'](_0x5d646b){const _0x4920d5=_0x4953ed;_0x5d646b!==null&&typeof this[_0x4920d5(0xef)]['onCardDetected']===_0x4920d5(0x121)&&this[_0x4920d5(0xef)][_0x4920d5(0x158)](_0x5d646b);}['callDetectedEvent'](_0x23cc3a){const _0x1627d5=_0x4953ed;typeof this[_0x1627d5(0xef)]['onDetected']==='function'&&this['options'][_0x1627d5(0x21f)](_0x23cc3a);}[_0x4953ed(0x235)](_0xe98098){const _0x437f0b=_0x4953ed;typeof this[_0x437f0b(0xef)][_0x437f0b(0x184)]===_0x437f0b(0x121)&&this[_0x437f0b(0xef)][_0x437f0b(0x184)](_0xe98098);}['getCurrentStep'](){return this['step'];}[_0x4953ed(0xfe)](_0xa1ec75=null){const _0x6217a4=_0x4953ed;_0xa1ec75=_0xa1ec75==null?this[_0x6217a4(0xc4)]:_0xa1ec75,clearTimeout(this['timeID']),this['timeID']=setTimeout(()=>{const _0x46c396=_0x6217a4;this[_0x46c396(0xb2)]=![];},_0xa1ec75);}[_0x4953ed(0xc0)](){const _0xfb7f2c=_0x4953ed;this[_0xfb7f2c(0xc8)]=DCScanCommand[_0xfb7f2c(0x229)],this[_0xfb7f2c(0x128)]={'status':![],'docType':DCScanDocType[_0xfb7f2c(0x229)],'scans':[],'tID':null},this[_0xfb7f2c(0x19a)]=null,this[_0xfb7f2c(0x122)]={},this['detectionLocked']=![],this['cardImage']=null,this[_0xfb7f2c(0x212)]=null;}[_0x4953ed(0x14d)](){const _0x34962d=_0x4953ed;this['step']=DCScanSteps['NONE'],this[_0x34962d(0x22d)](DCScanCommand[_0x34962d(0x229)]),this['startTime']=new Date()[_0x34962d(0x261)](),this[_0x34962d(0x212)]=String(this[_0x34962d(0x1f8)]+Math[_0x34962d(0xfc)](Math[_0x34962d(0x8a)]()*0x186a0)),this['result'][_0x34962d(0x212)]=this[_0x34962d(0x212)];}[_0x4953ed(0x20e)](){const _0x30208e=_0x4953ed;this[_0x30208e(0x22d)](DCScanCommand[_0x30208e(0x270)]),typeof this[_0x30208e(0xef)][_0x30208e(0x1da)]==='function'&&this[_0x30208e(0xef)][_0x30208e(0x1da)](this['result']);}['fireCommand'](_0x4ef64b){const _0x8dcf50=_0x4953ed;typeof this[_0x8dcf50(0xef)][_0x8dcf50(0x1e9)]==='function'&&this['options'][_0x8dcf50(0x1e9)](_0x4ef64b);}[_0x4953ed(0xda)](_0x40000e){const _0x5f2b10=_0x4953ed;switch(_0x40000e){case _0x5f2b10(0x21b):case _0x5f2b10(0x16c):return DCScanDocType['ID'];case'pass_main':return DCScanDocType['PASSPORT'];default:return DCScanDocType['NONE'];}}[_0x4953ed(0x22c)](_0x40d2bf){const _0x5d2180=_0x4953ed;switch(_0x40d2bf){case'id_front':return DCScanDocFaces['ID_FRONT'];case'id_back':return DCScanDocFaces[_0x5d2180(0x1e5)];case _0x5d2180(0xf2):return DCScanDocFaces[_0x5d2180(0x1c0)];default:return DCScanDocFaces[_0x5d2180(0x229)];}}[_0x4953ed(0x118)](){const _0x4c1004=_0x4953ed;return this[_0x4c1004(0xc8)];}};class vislayer_VisualLayer{constructor(_0x1f517e,_0x10260f={}){const _0x2d40e3=_0x4953ed;this[_0x2d40e3(0x1b3)]=_0x1f517e,this[_0x2d40e3(0xef)]={'srcDim':{'k':0x1,'dx':0x0,'dy':0x0,'dw':0x0,'dh':0x0},'mirrored':!![]},this[_0x2d40e3(0xef)]=deepMerge(this['options'],_0x10260f),this['cc']=new CoordConverter(this[_0x2d40e3(0xef)][_0x2d40e3(0x196)]);}['drawPath'](_0x14c673,_0x4d03f5,_0x1df068){}['drawMask'](){}[_0x4953ed(0xf3)](_0x46a64e){const _0x1d37c5=_0x4953ed;let _0x3161c4=_0x46a64e[_0x1d37c5(0x1ea)]+0x14,_0x5ebeaa=_0x46a64e['height']+0x14,_0x3a4fd2=(this[_0x1d37c5(0x1b3)]['width']-_0x3161c4*this[_0x1d37c5(0x1b3)][_0x1d37c5(0x1ea)]/0x64)/0x2,_0x480a33=(this[_0x1d37c5(0x1b3)][_0x1d37c5(0x99)]-_0x5ebeaa*this['canvas'][_0x1d37c5(0x99)]/0x64)/0x2,_0xc201c4=this['canvas']['getContext']('2d');_0xc201c4[_0x1d37c5(0x1de)](),_0xc201c4[_0x1d37c5(0x250)](),_0xc201c4[_0x1d37c5(0xc6)]='3',_0xc201c4[_0x1d37c5(0x1e6)]=_0x1d37c5(0x191),_0xc201c4['rect'](_0x3a4fd2,_0x480a33,this[_0x1d37c5(0x1b3)]['width']-_0x3a4fd2*0x2,this[_0x1d37c5(0x1b3)][_0x1d37c5(0x99)]-_0x480a33*0x2),_0xc201c4[_0x1d37c5(0x113)](),_0xc201c4[_0x1d37c5(0xbc)](),_0xc201c4[_0x1d37c5(0x92)]();}['drawCard'](_0x4584fa,_0x1b06a8=_0x4953ed(0x227),_0x22d7c2=''){const _0x1da2a1=_0x4953ed;let _0x511a70=this['canvas']['getContext']('2d'),_0x94e8cc=null,_0x2b4b2e=null,_0x5e769b=null;for(let _0x592d27 in _0x4584fa){_0x5e769b=_0x4584fa[_0x592d27],this[_0x1da2a1(0xef)][_0x1da2a1(0xd9)]?_0x94e8cc=this['canvas'][_0x1da2a1(0x1ea)]-this['cc'][_0x1da2a1(0x20c)](_0x5e769b[_0x1da2a1(0x243)][0x0])-this['cc']['getSize'](_0x5e769b[_0x1da2a1(0x243)][0x2]):_0x94e8cc=this['cc']['getCoordX'](_0x5e769b[_0x1da2a1(0x243)][0x0]),_0x2b4b2e=this['cc']['getCoordY'](_0x5e769b[_0x1da2a1(0x243)][0x1]),_0x511a70[_0x1da2a1(0x250)](),_0x511a70[_0x1da2a1(0xc6)]='2',_0x511a70[_0x1da2a1(0x1e6)]=_0x1b06a8,_0x511a70[_0x1da2a1(0x15a)](_0x94e8cc,_0x2b4b2e,this['cc']['getSize'](_0x5e769b[_0x1da2a1(0x243)][0x2]),this['cc']['getSize'](_0x5e769b[_0x1da2a1(0x243)][0x3])),_0x511a70[_0x1da2a1(0x113)](),_0x511a70['lineWidth']='0',_0x511a70['fillStyle']=_0x1b06a8,_0x511a70[_0x1da2a1(0x1d8)](_0x94e8cc-0x1,_0x2b4b2e-0x14,0x96,0x14),_0x511a70['font']=_0x1da2a1(0x260),_0x511a70[_0x1da2a1(0x155)]=_0x1da2a1(0xb4),_0x511a70[_0x1da2a1(0x213)]=_0x1da2a1(0x251),_0x511a70[_0x1da2a1(0x12d)](_0x5e769b[_0x1da2a1(0x1bf)]+'\x20'+Number(_0x5e769b[_0x1da2a1(0x1cd)])[_0x1da2a1(0x116)](0x2),_0x94e8cc+0x5,_0x2b4b2e-0x5),_0x511a70[_0x1da2a1(0x113)](),_0x511a70['font']=_0x1da2a1(0x108),_0x511a70[_0x1da2a1(0x155)]=_0x1b06a8,_0x511a70[_0x1da2a1(0x213)]=_0x1da2a1(0xa9),_0x511a70[_0x1da2a1(0x12d)](_0x22d7c2,_0x94e8cc+this['cc'][_0x1da2a1(0xd0)](_0x5e769b['bbox'][0x2])/0x2,_0x2b4b2e+this['cc'][_0x1da2a1(0xd0)](_0x5e769b[_0x1da2a1(0x243)][0x3])/0x2),_0x511a70[_0x1da2a1(0xbc)]();}_0x511a70['restore']();}};class ScanWebWorker{constructor(_0x1204c8={}){const _0x301f24=_0x4953ed;this[_0x301f24(0x1f0)]=null,this[_0x301f24(0xe3)]=null,this[_0x301f24(0xef)]={'path':null},this['options']=deepMerge(this[_0x301f24(0xef)],_0x1204c8),this[_0x301f24(0x1f5)]();}[_0x4953ed(0x1f5)](){const _0x58f39b=_0x4953ed;this[_0x58f39b(0xe3)]=stream['open'](_0x58f39b(0x1c8)),this[_0x58f39b(0xe3)]['on'](_0x58f39b(0x279),this[_0x58f39b(0x279)]['bind'](this)),this['stream']['on'](_0x58f39b(0x1c1),this[_0x58f39b(0x1c1)][_0x58f39b(0x16f)](this)),window[_0x58f39b(0x1b5)]&&this[_0x58f39b(0xef)][_0x58f39b(0x204)]!=null?(this[_0x58f39b(0x1f0)]=new Worker(this[_0x58f39b(0xef)]['path']),this[_0x58f39b(0x1f0)][_0x58f39b(0x222)]=this['onWorkerMessage']['bind'](this)):console[_0x58f39b(0x13c)](_0x58f39b(0x1f2));}['getCard'](_0x4f83c1){const _0x227176=_0x4953ed;let _0x1eae6f=null;if(_0x4f83c1 instanceof HTMLCanvasElement)_0x1eae6f=ImageProcessing[_0x227176(0x1c4)](_0x4f83c1);else _0x4f83c1 instanceof HTMLImageElement&&(_0x1eae6f=ImageProcessing[_0x227176(0x8e)](_0x4f83c1));this[_0x227176(0x1f0)]['postMessage']({'type':_0x227176(0x10e),'action':'getCard','data':_0x1eae6f});}[_0x4953ed(0x279)](){const _0x3a4476=_0x4953ed;this[_0x3a4476(0x1f0)][_0x3a4476(0x16e)]({'type':_0x3a4476(0x10e),'action':_0x3a4476(0x279)});}[_0x4953ed(0xdd)](_0x2d258b){const _0x46c9d9=_0x4953ed;let _0x29e65c=_0x2d258b[_0x46c9d9(0x11d)]['type'],_0x39c616=_0x2d258b[_0x46c9d9(0x11d)][_0x46c9d9(0x162)],_0x1ee73f=_0x2d258b['data'][_0x46c9d9(0x11d)];switch(_0x29e65c){case'scan':this[_0x46c9d9(0xe3)][_0x46c9d9(0x123)](_0x46c9d9(0xdf),_0x1ee73f);break;case _0x46c9d9(0x16b):this['stream'][_0x46c9d9(0x123)](_0x46c9d9(0x1ed),_0x1ee73f);break;default:break;}}};class DeepScanner{constructor(_0x2693d7,_0x30391f={}){const _0x3c90db=_0x4953ed;this[_0x3c90db(0x183)]=null,this[_0x3c90db(0x1b3)]=null,this[_0x3c90db(0x26b)]=null,this['state']={'start':![],'detectInit':![],'analyzeAfterOpen':![]},this[_0x3c90db(0x1f0)]=null,this[_0x3c90db(0xef)]={'url':null,'headers':null,'src':null,'sourceType':null,'width':0x780,'height':0x438,'onInit':null,'onFrameCaptured':null,'onCardDetected':null,'onDetected':null,'onCommand':null,'sessionTime':0xea60,'detectTime':0x64,'onFinished':null,'mirrored':!![],'scan_worker_path':_0x3c90db(0x10c),'face_worker_path':_0x3c90db(0xbb),'testURL':null,'mrzOptions':null,'useServerSide':null,'detector':{},'camera':{'fillOnMobile':!![],'fill':!![],'cutEdge':!![]}},this[_0x3c90db(0x247)]=null,this['visual']=null,this[_0x3c90db(0x245)]=null,this[_0x3c90db(0xaa)]=null,this[_0x3c90db(0x146)]=null,this[_0x3c90db(0x24a)]=null,this[_0x3c90db(0x152)]=null,this[_0x3c90db(0x1a7)]=null,this['lastCommand']=DCScanCommand[_0x3c90db(0x229)],this[_0x3c90db(0x1ad)]=null,this[_0x3c90db(0x88)]=0x0,this['options']=deepMerge(this[_0x3c90db(0xef)],_0x30391f),(this['options']['useServerSide']==null&&OSPlus[_0x3c90db(0x1ce)]()||OSPlus[_0x3c90db(0x1ac)]())&&(this['options'][_0x3c90db(0x1d4)]=!![]),this[_0x3c90db(0xab)](_0x2693d7),this[_0x3c90db(0x1f5)]();}[_0x4953ed(0xab)](_0x42277b){const _0x64e83f=_0x4953ed;this[_0x64e83f(0x26b)]=new camera(_0x42277b,{'src':this[_0x64e83f(0xef)][_0x64e83f(0x93)],'width':this[_0x64e83f(0xef)][_0x64e83f(0x1ea)],'height':this['options'][_0x64e83f(0x99)],'fill':this[_0x64e83f(0xef)]['camera'][_0x64e83f(0x1ab)],'fillOnMobile':this[_0x64e83f(0xef)]['camera'][_0x64e83f(0xe5)],'cutEdge':this['options']['camera'][_0x64e83f(0x12e)],'onFrameUpdated':this[_0x64e83f(0x263)][_0x64e83f(0x16f)](this),'onLoaded':this[_0x64e83f(0x1a8)][_0x64e83f(0x16f)](this),'onStart':this['onCameraStart'][_0x64e83f(0x16f)](this),'onStop':this[_0x64e83f(0xe4)]['bind'](this)}),this[_0x64e83f(0x183)]=this[_0x64e83f(0x26b)][_0x64e83f(0x183)],this[_0x64e83f(0x1b3)]=this[_0x64e83f(0x26b)][_0x64e83f(0x1b3)];}[_0x4953ed(0x1f5)](){const _0x53207f=_0x4953ed;this['cc']=new CoordConverter(this[_0x53207f(0x26b)][_0x53207f(0x26c)]),this[_0x53207f(0x209)]=new vislayer_VisualLayer(this[_0x53207f(0x1b3)],{'srcDim':this[_0x53207f(0x26b)]['sourceDim'],'mirrored':this[_0x53207f(0xef)][_0x53207f(0xd9)]}),this[_0x53207f(0x247)]=new ScanAnalyser(this[_0x53207f(0x26b)][_0x53207f(0x105)],{'host':this[_0x53207f(0xef)]['url'],'headers':this[_0x53207f(0xef)]['headers'],'mrzOptions':this[_0x53207f(0xef)]['mrzOptions'],'detector':this['options'][_0x53207f(0x192)],'useServerSide':this[_0x53207f(0xef)][_0x53207f(0x1d4)],'onCommand':this[_0x53207f(0x1e9)][_0x53207f(0x16f)](this),'onCardDetected':this['onCardDetected'][_0x53207f(0x16f)](this),'onDetected':this[_0x53207f(0x21f)]['bind'](this),'onFinished':this['onFinished']['bind'](this),'onError':this['onError']['bind'](this),'mirrored':this[_0x53207f(0xef)][_0x53207f(0xd9)]});if(!this['options'][_0x53207f(0x1d4)]){let _0x3777b0=_0x53207f(0x200)+new Date()['getTime']();this[_0x53207f(0x245)]=new WebWorker({'path':this['options'][_0x53207f(0x8b)]+_0x3777b0}),this[_0x53207f(0xaa)]=new ScanWebWorker({'path':this[_0x53207f(0xef)]['scan_worker_path']+_0x3777b0});}this[_0x53207f(0x247)]['cc']=this['cc'],typeof this[_0x53207f(0xef)][_0x53207f(0x1e4)]==_0x53207f(0x121)&&this['options'][_0x53207f(0x1e4)]();}['open'](){const _0x109f9c=_0x4953ed;!this['camera'][_0x109f9c(0x188)]()&&(this['camera']['start'](),this['analizer']['init']());}[_0x4953ed(0x244)](){const _0x9393b7=_0x4953ed;this['stop'](),this[_0x9393b7(0x26b)][_0x9393b7(0x1d9)]();}[_0x4953ed(0x14d)](){const _0xe75502=_0x4953ed;this[_0xe75502(0x1ad)]=null,this[_0xe75502(0x216)]=DCScanCommand['NONE'],!this[_0xe75502(0x26b)][_0xe75502(0x188)]()?(this[_0xe75502(0x1a0)](),this[_0xe75502(0x87)][_0xe75502(0xdb)]=!![]):(this[_0xe75502(0x87)]['start']=!![],this[_0xe75502(0x247)]['start']()),this[_0xe75502(0x248)](),this[_0xe75502(0x88)]=new Date()['getTime']();}[_0x4953ed(0x1d9)](){const _0x2d54b4=_0x4953ed;this[_0x2d54b4(0x87)][_0x2d54b4(0x14d)]=![],this[_0x2d54b4(0x87)]['analyzeAfterOpen']=![],this[_0x2d54b4(0x247)][_0x2d54b4(0xc0)](),this[_0x2d54b4(0x248)]();}[_0x4953ed(0x211)](_0xba2b89,_0x9eaeae){const _0x344a0d=_0x4953ed;ImageProcessing[_0x344a0d(0x1f4)](_0xba2b89)[_0x344a0d(0xed)](_0x397f5d=>{const _0x25a955=_0x344a0d;let _0x346dd7=ImageProcessing[_0x25a955(0x8e)](_0x397f5d);this[_0x25a955(0x247)]['testDetect'](_0x346dd7,_0x9eaeae);});}[_0x4953ed(0x248)](){const _0x22cabb=_0x4953ed;this[_0x22cabb(0x146)]=[],this[_0x22cabb(0x152)]=null,this['lastScannedTime']=null,this[_0x22cabb(0x24a)]=null,this['sessionTimeCount']=0x0;}['onFinished'](_0x105a99){const _0x2ae427=_0x4953ed;this['lastDetected']=[],this[_0x2ae427(0x152)]=null,this[_0x2ae427(0x209)][_0x2ae427(0x190)]([]),this[_0x2ae427(0x1d9)](),typeof this['options'][_0x2ae427(0x1da)]==_0x2ae427(0x121)&&this[_0x2ae427(0xef)][_0x2ae427(0x1da)](_0x105a99);}[_0x4953ed(0x158)](_0x9f169){const _0x2a0a81=_0x4953ed;this['lastDetected']=_0x9f169,this['lastDetectedTime']=new Date()[_0x2a0a81(0x261)](),typeof this[_0x2a0a81(0xef)]['onCardDetected']==='function'&&this['options']['onCardDetected'](_0x9f169);}[_0x4953ed(0x21f)](_0x30d708){const _0x5a2457=_0x4953ed;this['lastScanned']=_0x30d708,this['lastScannedTime']=new Date()[_0x5a2457(0x261)](),console[_0x5a2457(0x13c)](_0x5a2457(0xd1),_0x30d708),typeof this['options'][_0x5a2457(0x21f)]==='function'&&this['options'][_0x5a2457(0x21f)](this[_0x5a2457(0x152)]);}[_0x4953ed(0x1e9)](_0x3232bb){const _0x33c554=_0x4953ed;this[_0x33c554(0x216)]=_0x3232bb;if(!this[_0x33c554(0x87)][_0x33c554(0x14d)])return;typeof this[_0x33c554(0xef)]['onCommand']===_0x33c554(0x121)&&this['options'][_0x33c554(0x1e9)](_0x3232bb);}['onCommandResult'](){}[_0x4953ed(0x184)](_0x4bd4a9){const _0x260e40=_0x4953ed;switch(_0x4bd4a9){case DCScanError['TOO_SMALL']:console['log'](_0x260e40(0x264));break;default:}}['onFrameUpdated'](){const _0x359902=_0x4953ed;if(this['state'][_0x359902(0x14d)]){let _0x234100=this[_0x359902(0x152)]&&this[_0x359902(0x152)]['card']?[this[_0x359902(0x152)][_0x359902(0x18e)]]:[];if(_0x234100[_0x359902(0x27b)]===0x0&&this[_0x359902(0x146)]!=null&&this['lastDetected'][_0x359902(0x27b)]>0x0){_0x234100=this[_0x359902(0x146)];let _0x1d68c5='';if(this[_0x359902(0x216)]===DCScanCommand[_0x359902(0x1e5)]&&this[_0x359902(0x146)][0x0][_0x359902(0x1bf)]===_0x359902(0x16c))_0x1d68c5=_0x359902(0x254),this[_0x359902(0x209)][_0x359902(0x190)](_0x234100,_0x359902(0x238),_0x1d68c5);else this[_0x359902(0x216)]===DCScanCommand[_0x359902(0xbd)]&&this[_0x359902(0x146)][0x0][_0x359902(0x1bf)]===_0x359902(0xf2)&&(_0x1d68c5=_0x359902(0x254),this[_0x359902(0x209)][_0x359902(0x190)](_0x234100,_0x359902(0x238),_0x1d68c5));}else{let _0x1c8b39=this[_0x359902(0x242)](this['lastScannedTime']);_0x1c8b39!=null&&_0x1c8b39<0x7d0&&this[_0x359902(0x209)][_0x359902(0x190)](_0x234100);}this['analizer']['getStep']()===DCScanSteps[_0x359902(0x1df)]&&this[_0x359902(0x209)][_0x359902(0xf3)](this[_0x359902(0x247)][_0x359902(0xef)][_0x359902(0xa3)]);let _0x542b2d=new Date()['getTime']();_0x542b2d-this[_0x359902(0x88)]>this[_0x359902(0xef)][_0x359902(0x185)]?this[_0x359902(0x1da)]({'status':![],'msg':'session\x20timeout'}):this[_0x359902(0x247)][_0x359902(0x233)]();}}['onCameraLoaded'](_0x56902b,_0x294b59){this['cc']['setDim'](_0x294b59);}[_0x4953ed(0x168)](){const _0x5cd7c7=_0x4953ed;this['state']['analyzeAfterOpen']&&(this[_0x5cd7c7(0x87)][_0x5cd7c7(0xdb)]=![],this[_0x5cd7c7(0x14d)]());}['onCameraStop'](){}[_0x4953ed(0x242)](_0x355d03){const _0x3c04e0=_0x4953ed;if(_0x355d03==null)return null;return new Date()[_0x3c04e0(0x261)]()-_0x355d03;}};const DCAnalyzer={'FACE':_0x4953ed(0x110),'SCANNER':_0x4953ed(0x25f)};class DCFaceID{constructor(_0x440a16={}){const _0x438860=_0x4953ed;this[_0x438860(0xef)]={'url':null,'headers':null},this[_0x438860(0xef)]=deepMerge(this[_0x438860(0xef)],_0x440a16),this[_0x438860(0x11d)]=new DataModel(_0x440a16['url']||null,this[_0x438860(0xef)]);}[_0x4953ed(0x1a2)](_0x28aadc,_0x318d82){let _0x3cc342=new DeepFace(_0x28aadc,_0x318d82);return _0x3cc342;}[_0x4953ed(0x1ee)](_0x3261a4,_0x1b99f8){const _0x5241cf=_0x4953ed;let _0xffccd5=deepMerge({'url':this['options'][_0x5241cf(0xad)],'headers':this[_0x5241cf(0xef)][_0x5241cf(0x1fd)]},_0x1b99f8),_0x44b3d=new DeepScanner(_0x3261a4,_0xffccd5);return _0x44b3d;}[_0x4953ed(0x165)](_0x3d286d,_0x570432){}['verify'](_0x4dcd14,_0x11f277){const _0x14525a=_0x4953ed;this[_0x14525a(0x11d)][_0x14525a(0x154)](_0x4dcd14,_0x1043fa=>{typeof _0x11f277==='function'&&_0x11f277(_0x1043fa);});}[_0x4953ed(0x1ce)](){return OSPlus['isMobile']();}}
export default DCFaceID
