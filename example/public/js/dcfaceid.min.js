!function(t,s){"object"==typeof exports&&"object"==typeof module?module.exports=s():"function"==typeof define&&define.amd?define([],s):"object"==typeof exports?exports.DCFaceID=s():t.DCFaceID=s()}(this,function(){return(()=>{"use strict";var t={614:(t,s,i)=>{i.d(s,{default:()=>j});const e=["manyFace","card","blankCanvas","testDetect","appendChild","errorTime","parentElement","addActionTime","DIV","fit2Size","recognize","style","catch","Card model loaded","pos","toRealCoordY","server","Type","Finished","filter","onDetect","getVideoTracks","lowlight","getPassTime","orange","push","smile","raf","mirrored","setAttribute","video-layer","bind","outofbounds","kind","onStop","id_back","onloadeddata","time","croppedSize","card/ready","videoSize","area","defineCurrentAction","userAgent","box","SMILE","step","height","source-over","getInstance","cutEdge","Computing for finishing","center","ctx","lastScanned","1003592LTYClJ","offsetHeight","webgl","detectionLocked","blinking","single","getTinyFace","srcDim","scanWebWorker","showTextArea","finishWaitTime","defineCommands","loaded","30px","headers","isAllScanned","crossOrigin","then","drawCard","serverRequestDelay","stream","manycards","forEach","onLoaded","serverSide","ID_BACK","initWorker","bottom","textContent","defineContainer","ACTIONS","lineWidth","scale","__canvas","onStartDownCount","remove","request","right","actionWaitBeforeCheck","onDetected","function","isRearCameraUsed","df-container","rgb(66,109,139)","snapshotlist","forward","match","scan_worker_path","video","733766SGqlGa","getSnapshots","snapshot","resizeCanvas","web camera exception!","commander","worker_path","errorWaitTime","mrzOptions","analyzeAfterOpen","name","fillStyle","checkURI","onError","/verify","scans","onFinished","rect","canvasToImageData","onStart","fillOnMobile","cardImage","setText","serverDelay","collect","getSettings","results","state","width","getBox","testSource","visual","facingMode","startingWaitTime","pass_main","finishTime","parse","setFace","normalizing","loadCard","autoplay","lineTo","toDataURL","safari","landMarks","result","SUCCESS","getCoord","checkCurrentCommandAction","drawStreamToCanvas","dim","onCameraStop","onFaceResult","list","sizeKoef","?rand=","closePath","floor","hasCommand","initContainer","detector","landmark","position","dom","commandText","reset","headpos","426082tvZJgJ","onScanResult","getTimeDiff","getTime","getTracks","blur","white","SHOW","none","bbox","Worker","load","defineProcess","slice","curFrame","scanned","FINISH","detectTime","manyfaces","defineScanType","setCommand","detect","Error:","scan-worker","isReady","strokeStyle","arc","frontCamera","getFace","atan2","Valid","xor","drawArea","getCard","face","div","random","append","msg","init","success","noFace","observe","play","length","LEFT","tid","callCardDetectedEvent","lastDetectedTime","loadedTID","recognizeGlobal","index","pass_front","chooselist","json","setOptions","unlock","id_front","useServerSide","net","black","NONE","tID","getStep","detectTimer","substr","canvas2IMG","top","checkPosAndActions","1zNFXCK","auto","path","fillText","isMobile","devices","START","DOWN","onpause","790711jIkEEV","onCameraStart","toFixed","currentCommand","getImageFromURL","getUserMedia","globalAlpha","finished","face_worker_path","Lines","getLandmark","parseObject","onCardDetected","clearRect","curScan","worker","left","data","draw","stroke","getSize","scanLoaded","yaw","backgroundColor","/img/face.jpg","imageToCanvas","errors","calculate","analizer","application/json","detector result","onplaying","getImageData","undefined","ID_FRONT","face laplacian","loading","type","2131661qAlusy","callDetectedEvent","POST","createTextArea","videoWidth","innerHTML","end","PASS_FRONT","fillRect","actions","show","toLowerCase","getCoordX","SCANNING","getLastDetected","cardMinSize","checkScanResult","callback","interval","add","REJECT","scanner","devicePixelRatio","url","onFaceDetected","GET","onWorkerMessage","join","clearSnapshots","onerror","docFace","onCommandResult","faceWebWorker","classList","Error loading ","session timeout","lastDetected","currentAction","mrzcheck","gray","class","getImageB64","close","apply","muted","score","currentPosition","defineStream","actionText","tagName","rear camera used","checkSize","changeStep","number","stop","actualCanvas","max","fill","analyser","actionArea","command","hide","includes","image","createElement","FORWARD","Starting","onStep","display","20px Arial","defineScanFace","482132VKkaXX","PASSPORT","toRealCoordX","Initializing","onFrameUpdated","putImageData","getCurrentStep","videoHeight","act2Command","host","innerHtml","getLaplacianVariance","drawImage","open","timeID","isSafari","options","maskInited","roll","other","callStepChange","getCoordY","setup","canvas","onload","postMessage","notifyAll","Your browser doesn't support web workers.","delay","image/jpeg","inputSize","textAlign","Card is too small","streams","scanning","showCollection","globalCompositeOperation","sourceDim","beginPath","CANVAS","cutLastSlash","TOO_SMALL","absolute","currentStepActive","onCommand","src","getElementById","finish","moveTo","sessionTime","Success:","isErrorExist","down","lastResult","look right","quadraticCurveTo","start","dpr","anonymous","applyConstraints","onMRZDetected","notify","commands","status","fireCommand","log","actionWaitTime","outOfBounds","toOriginalSize","startTime","block","Received:","startSession","386861PPwwGt","highlight","setDim","save","card/detect","docType","js/deeptinyfaceworker.min.js","lock","lastScannedTime","data processing, please wait...","toosmall","round","enumerateDevices","maskSize","debug","image/png","maskLayer","1mQbEfW","passport","RIGHT","detectedFaceCountDownBeforeStart","environment","rgba(0, 0, 0, 1)","lastCommand","chrome","toVerify","clear","callError","1Fshyxr","observers","mrz","faceMask","scan","__canvas_original","count","0.5","pitch","onStepChanged","currentActionList","restore","canvas2grayscale","cropAndResizeCanvas","canvasToBase64","cropCanvas","action","fixedTime","originalSize","srcObject","showProcessing","resWidth","INIT","onInit","drawPath","assign","callCommandResult","onStreamLoaded","shuffle","onCameraLoaded","isPlaying","error","getArea","delete","camera","faceDetected","sessionTimeCount","getContext"],h=function(t,s){return e[t-=335]},n=h;!function(t,s){const i=h;for(;;)try{if(727219===parseInt(i(408))+-parseInt(i(593))*-parseInt(i(602))+-parseInt(i(711))+-parseInt(i(784))*-parseInt(i(812))+parseInt(i(457))+parseInt(i(524))+-parseInt(i(801))*parseInt(i(640)))break;t.push(t.shift())}catch(s){t.push(t.shift())}}(e);const o=(t,s)=>{const i=h;for(let e of Object.keys(s))s[e]instanceof Object&&Object[i(340)](s[e],o(t[e]||{},s[e]));return Object[i(340)](t||{},s),t};class a{static[n(751)](t){const s=n;return"/"===t[s(589)](t[s(568)]-1)?t[s(537)](0,-1):t}}class r{constructor(t="",s={}){const i=n;this[i(663)]=t,this.options={headers:{}},this[i(727)]=o(this[i(727)],s)}[n(809)](t,s){const i=n;if(null!=t&&null!=t.scanner&&null==t[i(558)]){let e={docType:t[i(661)][i(789)]||null,scans:[],tid:t.scanner[i(586)]};for(let s in t.scanner.scans)e[i(472)][i(378)]({docFace:t[i(661)][i(472)][s][i(670)]||null,image:t[i(661)][i(472)][s][i(703)]});let h=o({"Content-Type":"application/json"},this[i(727)][i(422)]||{});fetch(a.cutLastSlash(this[i(663)])+i(471),{method:i(642),headers:h,body:JSON.stringify(e)})[i(425)](t=>t[i(578)]()).then(t=>{const e=i;if(typeof s===e(448)){let i={success:t[e(564)],data:t[e(619)]||null,msg:t[e(562)]||null};s(i)}})[i(365)](t=>{const e=i;console[e(346)](e(546),t),typeof s===e(448)&&s({success:!1,error:t})})}}}class c{constructor(t){this[n(734)]=t}[n(481)](){}[n(746)](){}[n(561)](){}[n(444)](){}}class l{static[n(597)](){return[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(t=>{const s=h;return navigator[s(396)][s(454)](t)})}static isWebGLExist(){const t=n;try{document[t(704)](t(734))[t(352)](t(410))}catch(t){return!1}return!0}static isOffscreenCanvasSupport(){return typeof OffscreenCanvas===n(448)}static[n(726)](){const t=n;let s=navigator[t(396)][t(651)]();return-1!==s.indexOf(t(500))&&-1===s.indexOf(t(808))}}let d=null;class u{constructor(t={}){if(d)return d;d=this,this.options={debug:!1},this.setOptions(t)}static[n(402)](t=null){if(d)return null!=t&&d[n(579)](t),d;d=new u(t||{})}setOptions(t={}){this.options=o(this.options,t)}log(){const t=n;this.options[t(798)]&&console[t(776)][t(683)](null,arguments)}}const m=u;const p=class{constructor(t,s={}){const i=n;this[i(520)]=null,this.canvas=null,this[i(441)]=null,this[i(817)]=null,this.video=null,this[i(428)]=null,this[i(488)]=null,this[i(380)]=null,this.streamSize={width:0,height:0},this.sourceDim={k:1,dx:0,dy:0,dw:0,dh:0},this[i(452)]=[],this.devices=[],this.frontCamera=!0,this[i(768)]=1,this[i(727)]={src:null,sourceType:null,width:640,height:480,resWidth:1280,resHeight:720,fill:!1,fillOnMobile:!0,cutEdge:!1,onLoaded:null,onError:null,onStop:null,onStart:null,onFrameUpdated:null},this[i(727)]=o(this.options,s),this[i(437)](t),this.setup()}[n(437)](t){const s=n;if(this[s(768)]=window[s(662)]||1,"string"==typeof t){let i=document[s(757)](t);i&&i[s(689)]&&(i[s(689)]===s(361)?(this[s(520)]=i,this.dom[s(645)]="",this[s(734)]=document[s(704)](s(750)),this[s(734)][s(485)]=this[s(727)][s(485)],this[s(734)][s(400)]=this[s(727)][s(400)],this.dom[s(357)](this[s(734)])):i[s(689)]===s(750)&&(this[s(734)]=i,this.dom=document[s(704)]("DIV"),this[s(734)][s(359)].insertBefore(this[s(520)],this[s(734)]),this.dom[s(357)](this[s(734)])),this[s(520)]&&(this[s(520)][s(673)][s(659)](s(450)),this[s(520)][s(364)][s(485)]=this[s(727)][s(485)]+"px",this[s(520)][s(364)][s(400)]=this[s(727)][s(400)]+"px")),this[s(734)]&&(this[s(734)][s(673)][s(659)](s(383)),this.canvas[s(364)][s(625)]=s(679))}this[s(441)]=document[s(704)]("CANVAS"),this[s(441)][s(485)]=this.options[s(485)],this[s(441)][s(400)]=this[s(727)].height,this[s(817)]=document.createElement(s(750)),this[s(817)][s(485)]=this[s(727)].width,this[s(817)][s(400)]=this[s(727)][s(400)]}[n(733)](){this[n(488)]=new c(this.canvas)}[n(767)](){const t=n;(null==this.video||!this[t(345)]())&&this[t(687)]()}stop(){const t=n;this[t(428)]&&this[t(428)].getTracks()[t(568)]>0&&(this[t(428)][t(528)]()[0].stop(),this[t(428)]=null)}[n(687)](){const t=n;l[t(597)]()&&!0===this[t(727)][t(477)]&&(this[t(727)][t(697)]=!0),null==this[t(727)][t(756)]?null==this[t(428)]?navigator.mediaDevices&&navigator.mediaDevices[t(607)]&&(null===this[t(456)]&&(this[t(456)]=document[t(704)](t(456)),this[t(456)][t(382)](t(497),""),this[t(456)][t(382)](t(684),""),this[t(456)].setAttribute("playsinline",""),this.video[t(364)][t(485)]="30px",this[t(456)][t(364)][t(400)]=t(421),this[t(456)][t(364)][t(519)]=t(753),this[t(520)][t(357)](this[t(456)]),this[t(456)].style.opacity=t(819)),this[t(380)]=null,navigator.mediaDevices[t(796)]()[t(425)](s=>{const i=t;m.getInstance()[i(776)]("media devices",s),this.devices=s}),navigator.mediaDevices[t(607)]({audio:!1,video:{facingMode:t(805),width:{ideal:this.options[t(336)]},height:{ideal:this[t(727)].resHeight}}})[t(425)](i=>{const e=t;this.stream=i,this[e(456)][e(831)]=i,i[e(374)]()[0][e(770)]({focusMode:e(594),focusDistance:.33}),this.isRearCameraUsed()&&(m.getInstance()[e(776)](e(690)),this.frontCamera=!1),s(),this[e(456)][e(567)]()})[t(365)](s=>{const i=t;m.getInstance()[i(776)](i(461),s),this[i(470)](s)})):this.video[t(567)]():(this[t(456)][t(756)]=this[t(727)].src,this[t(456)][t(567)]());let s=()=>{const s=t;this[s(456)][s(389)]=(()=>{this[s(342)]()}),this[s(456)][s(633)]=(()=>{const t=s;this[t(441)][t(485)]=this[t(456)][t(644)],this[t(441)][t(400)]=this[t(456)][t(718)],this.__canvas_original[t(485)]=this[t(456)][t(644)],this[t(817)][t(400)]=this[t(456)][t(718)];let i=this[t(456)][t(644)],e=this.video.videoHeight,h=1;this[t(748)].dw=this[t(734)][t(485)],this.sourceDim.dh=this[t(734)][t(400)],this.options[t(697)]?this.canvas.height/e<this.canvas[t(485)]/i?(h=this.canvas[t(485)]/i,this[t(748)].dh=Math[t(795)](h*e),this[t(748)].dy=0,this[t(727)][t(403)]&&(this.__canvas_original[t(400)]=this[t(734)][t(400)]/h,this[t(441)][t(400)]=this[t(734)][t(400)]/h)):(h=this[t(734)].height/e,this[t(748)].dw=Math[t(795)](h*i),this[t(748)].dx=0,this[t(727)][t(403)]&&(this[t(817)].width=this[t(734)][t(485)]/h,this[t(441)][t(485)]=this[t(734)][t(485)]/h)):this[t(734)][t(400)]/e<this[t(734)].width/i?(h=this.canvas[t(400)]/e,this[t(748)].dw=Math[t(795)](h*i),this[t(748)].dx=(this[t(734)][t(485)]-this.sourceDim.dw)/2):(h=this.canvas[t(485)]/i,this[t(748)].dh=Math.round(h*e),this.sourceDim.dy=(this[t(734)][t(400)]-this[t(748)].dh)/2),this[t(748)].k=h,null!=this.raf&&cancelAnimationFrame(this[t(380)]),this.raf=requestAnimationFrame(this.drawStreamToCanvas[t(384)](this)),this.streamSize={width:this[t(456)].videoWidth,height:this[t(456)][t(718)]},this[t(476)]()}),this.video[s(601)]=(()=>{cancelAnimationFrame(this[s(380)]),this.onStop()})}}async[n(506)](){const t=n;let s=this[t(551)]?-1:1,i=this.sourceDim,e=this[t(456)][t(644)],h=this[t(456)][t(718)],o=this[t(817)][t(352)]("2d");o[t(787)](),o[t(440)](1,1),this[t(727)][t(697)]&&this[t(727)][t(403)]?o[t(723)](this[t(456)],(this[t(817)].width-e)/2,(this.__canvas_original.height-h)/2,e,h):o[t(723)](this[t(456)],0,0,this.__canvas_original[t(485)],this.__canvas_original[t(400)]),o.restore();let a=this[t(441)][t(352)]("2d");a[t(787)](),a[t(440)](s,1),this.options[t(697)]&&this[t(727)][t(403)]?a[t(723)](this.video,s*(this[t(441)][t(485)]-e)/2+(-1===s?s*e:0),(this.__canvas[t(400)]-h)/2,e,h):a[t(723)](this[t(456)],-1===s?s*e:0,0,this[t(441)][t(485)],this[t(441)][t(400)]),a[t(823)]();let r=this[t(734)][t(352)]("2d"),c=(this[t(734)][t(485)]-this[t(748)].dw)/2,l=(this[t(734)].height-this[t(748)].dh)/2;r[t(615)](0,0,this[t(734)].width,this.canvas.height),r.save(),r[t(440)](1*s,1),r[t(723)](this.video,s*c+(-1===s?s*i.dw:0),l,i.dw,i.dh),r[t(823)](),null!=this[t(428)]&&(this[t(715)](),this.raf=requestAnimationFrame(this[t(506)][t(384)](this)))}[n(449)](){const t=n;let s=[];for(let i in this.devices)"videoinput"===this[t(598)][i][t(386)]&&s[t(378)](this[t(598)][i]);let i=this[t(428)]&&this.stream.getVideoTracks()[0][t(482)]()[t(489)]||null;return m[t(402)]()[t(776)](t(598),this[t(598)]),m[t(402)]().log(t(489),i),"environment"===i}[n(345)](){const t=n;return this.stream&&this[t(456)]&&!this[t(456)].paused}[n(634)](){const t=n;return this.__canvas[t(352)]("2d")[t(634)](0,0,this[t(441)][t(485)],this[t(441)][t(400)])}getImageB64(){return this[n(441)].toDataURL()}[n(458)](){return this[n(452)]}[n(459)](){const t=n;this[t(452)][t(378)](this[t(681)]())}[n(668)](){this[n(452)]=[]}onError(t){"function"==typeof this[n(727)].onError&&this.options.onError(t)}[n(342)](){const t=n;typeof this[t(727)][t(431)]===t(448)&&this[t(727)][t(431)](this[t(456)],this[t(748)])}onStop(){const t=n;typeof this.options[t(387)]===t(448)&&this[t(727)].onStop()}[n(476)](){const t=n;"function"==typeof this[t(727)].onStart&&this[t(727)].onStart()}[n(715)](){const t=n;"function"==typeof this[t(727)][t(715)]&&this[t(727)][t(715)]()}};class f{constructor(t={k:1,dx:0,dy:0,dw:0,dh:0}){this[n(507)]=t}[n(786)](t){this.dim=t}[n(504)](t,s){const i=n;return{x:t*this.dim.k+this[i(507)].dx,y:s*this[i(507)].k+this.dim.dy}}[n(652)](t){const s=n;return t*this.dim.k+this[s(507)].dx}[n(732)](t){const s=n;return t*this[s(507)].k+this[s(507)].dy}[n(622)](t){return t*this.dim.k}[n(713)](t){return t/this[n(507)].k-this.dim.dx}[n(368)](t){const s=n;return t/this[s(507)].k-this[s(507)].dy}}class g{constructor(t,s={width:0,height:0},i={width:0,height:0}){const e=n;this[e(520)]=t,this[e(734)]=null,this[e(406)]=null,this[e(521)]=null,this[e(688)]=null,this[e(393)]=s,this[e(797)]=i,this[e(728)]=!1,this[e(511)]={h:.4,v:.6},(0===this[e(797)][e(485)]||0===this.maskSize.height)&&(this[e(797)]={width:this[e(393)][e(485)]*this[e(511)].h,height:this.videoSize[e(485)]*this.sizeKoef.v}),this.setup()}[n(733)](){const t=n;null!=this.dom&&(this[t(734)]=document.createElement(t(750)),this[t(734)].id=t(800),this[t(734)][t(485)]=this[t(393)][t(485)],this.canvas.height=this[t(393)][t(400)],this.dom[t(357)](this[t(734)]),this[t(406)]=this.canvas[t(352)]("2d"))}[n(643)](){const t=n;if(this[t(521)])this[t(521)][t(364)][t(708)]=t(781);else{this.commandText=document[t(704)](t(559)),this[t(521)].id="commandArea";let s=document[t(704)]("P");s[t(436)]="",this.commandText[t(357)](s),this[t(520)].appendChild(this[t(521)]);let i=((this[t(734)].height-this[t(797)].height)/2-this[t(521)][t(409)])/2;this.commandText[t(364)][t(591)]=i+"px"}if(this.actionText)this[t(688)][t(364)][t(708)]=t(781);else{this.actionText=document.createElement("div"),this[t(688)].id=t(699);let s=document.createElement("P");s.textContent="",this[t(688)][t(357)](s),this[t(520)][t(357)](this[t(688)]);let i=((this.canvas[t(400)]-this[t(797)][t(400)])/2-this[t(521)][t(409)])/2;this[t(688)][t(364)][t(435)]=i+"px"}}[n(417)](){const t=n;this[t(521)]&&(this[t(521)][t(364)][t(708)]=""),this.actionText&&(this[t(688)][t(364)][t(708)]="")}hideTextArea(){const t=n;this.commandText&&(this[t(521)][t(364)][t(708)]=t(532)),this[t(688)]&&(this[t(688)][t(364)].display=t(532))}[n(479)](t){const s=n;this[s(688)]&&(this[s(688)].innerHtml=t)}[n(544)](t){const s=n;this[s(521)]&&(this[s(521)][s(721)]=t)}[n(347)](){const t=n;return{x:this[t(734)][t(485)]/2-this[t(797)][t(485)]/2-20,y:this[t(734)][t(400)]/2-this[t(797)][t(485)]/2-20,width:this[t(797)].width,height:this.maskSize.height}}[n(620)](){const t=n;if(!this[t(728)]){console[t(776)]("draw mask layer"),this[t(406)][t(787)](),this[t(406)][t(749)](),this[t(406)].ellipse(this[t(734)][t(485)]/2,this.canvas[t(400)]/2,this.maskSize[t(485)]/2,this[t(797)][t(400)]/2,Math.PI,0,2*Math.PI),this[t(406)][t(468)]=t(451),this.ctx[t(697)](),this[t(406)].globalCompositeOperation=t(555),this[t(406)][t(749)](),this.ctx[t(474)](0,0,this[t(734)][t(485)],this.canvas.height),this.ctx.fillStyle=t(806),this[t(406)][t(513)](),this[t(406)][t(697)](),this[t(406)][t(608)]=.5;let s=this.canvas[t(499)]();this[t(406)][t(747)]=t(401);let i=new Image;i.onload=(()=>{const s=t;this[s(406)][s(615)](0,0,this[s(734)].width,this[s(734)].height),this[s(406)][s(723)](i,0,0)}),i[t(756)]=s,this[t(728)]=!0,this[t(643)]()}}[n(650)](){const t=n;this.maskInited?(this[t(417)](),this.canvas[t(364)][t(708)]=t(781)):(this.draw(),this[t(734)][t(364)][t(708)]=t(781))}hide(){const t=n;this.hideTextArea(),this[t(734)][t(364)][t(708)]=t(532)}[n(348)](){const t=n;this.ctx[t(615)](0,0,this[t(734)][t(485)],this.canvas[t(400)]),this.ctx[t(823)]()}}class w{constructor(t,s={}){const i=n;this[i(734)]=t,this[i(727)]={srcDim:{k:1,dx:0,dy:0,dw:0,dh:0}},this[i(727)]=o(this.options,s),this.cc=new f(this[i(727)][i(415)])}[n(339)](t,s,i){const e=n,h=new Path2D;h[e(759)](s[0][0],s[0][1]);for(let t=1;t<s[e(568)];t++){const i=s[t];h.lineTo(i[0],i[1])}i&&h.closePath(),t[e(621)](h)}drawFaces(t){const s=n;this[s(727)].srcDim.k;let i=null,e=this[s(734)].getContext("2d");e[s(787)]();for(let h=0;h<t[s(568)];h++){i=t[h][s(501)];for(let t=0;t<i[s(568)];t++){const h=i[t][0],n=i[t][1];e[s(749)](),e[s(550)](this.cc[s(652)](h),this.cc.getCoordY(n),1,0,2*Math.PI),e[s(697)](),e[s(513)]()}}e[s(823)]()}}class y{constructor(t){const s=n;this.name=t,this[s(813)]={}}on(t,s){const i=n;void 0===this[i(813)][t]&&(this[i(813)][t]=[]),typeof s==i(448)&&this.observers[t][i(378)](s)}[n(443)](t,s){const i=n;for(const t in this[i(813)])this[i(813)][t]=this[i(813)][t][i(372)](t=>t!==s)}[n(772)](t,s){const i=n;this[i(813)][t]&&this[i(813)][t][i(430)](t=>{"function"==typeof t&&t(s)})}[n(737)](t){const s=n;this[s(813)][s(430)](i=>{const e=s;i[e(430)](s=>{typeof s==e(448)&&s(t)})})}}const S=new class{constructor(){this[n(744)]={}}[n(724)](t){const s=n;return!this.streams[t]&&(this[s(744)][t]=new y(t)),this[s(744)][t]}};class C{constructor(){}static[n(827)](t,s,i,e,h){const o=n;let a=document[o(704)](o(750));return a[o(485)]=e,a[o(400)]=h,a[o(352)]("2d")[o(723)](t,s,i,e,h,0,0,e,h),a}static[n(460)](t,s={w:null,h:null}){const i=n;let e=document[i(704)](i(750));return null==s.w&&null==s.h?(e[i(485)]=t[i(485)],e[i(400)]=t[i(400)]):null==s.w?(e[i(400)]=s.h,e[i(485)]=s.h/t[i(400)]*t.width):null==s.h?(e[i(485)]=s.w,e[i(400)]=s.w/t[i(485)]*t[i(400)]):(e[i(485)]=s.w,e[i(400)]=s.h),e[i(352)]("2d")[i(723)](t,0,0,e[i(485)],e[i(400)]),e}static[n(825)](t,s,i,e,h,o,a){const r=n;let c=document.createElement("CANVAS");return c[r(485)]=o,c[r(400)]=a,c.getContext("2d")[r(723)](t,s,i,e,h,0,0,o,a),c}static imageDataToCanvas(t){const s=n;let i=document[s(704)]("CANVAS");return i[s(485)]=t[s(485)],i.height=t.height,i[s(352)]("2d")[s(716)](t,0,0),i}static[n(627)](t){const s=n;let i=document[s(704)](s(750));return i[s(485)]=t[s(485)],i[s(400)]=t.height,i[s(352)]("2d")[s(723)](t,0,0),i}static[n(475)](t){const s=n;return t[s(352)]("2d")[s(634)](0,0,t.width,t[s(400)])}static[n(826)](t,s=n(799),i=.92){return t.toDataURL(s,i)}static[n(590)](t,s=n(799),i=.92){return new Promise(function(e,n){const o=h;let a=new Image;a.setAttribute(o(424),o(769)),a[o(735)]=(()=>{e(a)}),a[o(669)]=(t=>{n(o(674)+t)}),a[o(756)]=C[o(826)](t,s,i)})}static[n(824)](t){const s=n;let i=t.getContext("2d")[s(634)](0,0,t.width,t[s(400)]),e=i[s(619)];for(let i=t[s(485)]*t[s(400)]*4-1;i>0;i-=4){let t=.3*e[i-3]+.59*e[i-2]+.11*e[i-1];e[i-3]=t,e[i-2]=t,e[i-1]=t}let h=document[s(704)]("CANVAS");return h[s(352)]("2d")[s(716)](i,0,0),h}static[n(355)](t,s,i=n(584)){const e=n;let h=document[e(704)]("CANVAS");h[e(485)]=t,h[e(400)]=s;let o=h.getContext("2d");return o.fillStyle=i,o.fillRect(0,0,t,s),h}static[n(722)](t,s=30){const i=n;let e=t[i(352)]("2d")[i(634)](0,0,t[i(485)],t[i(400)])[i(619)],h=[[0,1,0],[1,-4,1],[0,1,0]],o=4*t[i(485)],a=0,r=Math[i(514)](1.5),c=0,l=0;for(let n=1;n<t[i(400)]-1;n++)for(let t=4;t<o-4;t+=4){c=0;for(let s=0;s<3;s++)for(let i=0;i<3;i++){c+=(.3*e[a=o*(n+s-r)+t+4*(i-r)]+.59*e[a+1]+.11*e[a+2])*h[s][i]}c>s&&(l+=1)}return l}static getImageFromURL(t){return new Promise(function(s,i){const e=h;let n=new Image;n[e(382)](e(424),"anonymous"),n[e(735)]=(()=>{s(n)}),n.onerror=(()=>{i("Error loading "+t)}),n.src=t})}}class v{constructor(t={}){const s=n;this[s(617)]=null,this[s(428)]=null,this[s(727)]={path:null},this[s(727)]=o(this[s(727)],t),this[s(733)]()}[n(733)](){const t=n;this[t(428)]=S.open("worker"),this[t(428)].on(t(552),this[t(552)][t(384)](this)),this.stream.on(t(414),this[t(414)][t(384)](this)),this[t(428)].on(t(496),this[t(496)].bind(this)),this[t(428)].on(t(557),this[t(557)][t(384)](this)),window[t(534)]&&null!=this[t(727)][t(595)]?(this[t(617)]=new Worker(this[t(727)][t(595)]),this.worker.onmessage=this[t(666)].bind(this)):console[t(776)]("Your browser doesn't support web workers.")}getFace(t){const s=n;let i=null;if(t instanceof HTMLCanvasElement){i=t[s(352)]("2d")[s(634)](0,0,t[s(485)],t[s(400)])}else if(t instanceof HTMLImageElement){let e=document[s(704)](s(734)),h=e[s(352)]("2d");e[s(485)]=t[s(485)],e[s(400)]=t[s(400)],h[s(723)](t,0,0),i=h[s(634)](0,0,t[s(485)],t.height)}this[s(617)][s(736)]({type:s(558),action:s(552),data:i})}[n(414)](t){const s=n;let i=null;if(t instanceof HTMLCanvasElement){i=t.getContext("2d")[s(634)](0,0,t[s(485)],t[s(400)])}else if(t instanceof HTMLImageElement){let e=document[s(704)]("canvas"),h=e.getContext("2d");e[s(485)]=t[s(485)],e.height=t[s(400)],h.drawImage(t,0,0),i=h[s(634)](0,0,t[s(485)],t.height)}this[s(617)].postMessage({type:s(558),action:s(414),data:i})}getCard(t){const s=n;let i=null;t instanceof HTMLCanvasElement?i=C[s(475)](t):t instanceof HTMLImageElement&&(i=C[s(627)](t)),this.worker[s(736)]({type:s(816),action:s(557),data:i})}loadCard(){const t=n;this[t(617)][t(736)]({type:t(816),action:t(496)})}[n(666)](t){const s=n;let i=t[s(619)][s(639)],e=t.data[s(828)],h=t[s(619)][s(619)];switch(i){case s(558):e===s(350)?this[s(428)].notify(s(509),h):"tinyFaceDetected"===e&&this[s(428)].notify("onTinyFaceResult",h);break;case s(816):this[s(428)][s(772)](s(525),h);break;case"scanLoaded":this[s(428)].notify("onScanLoaded",h);break;case s(730):}}}const D=class{constructor(){const t=n;this.net=null,this[t(397)]={x:0,y:0,width:0,height:0},this[t(518)]=[],this.face=null,this[t(624)]=0,this.pitch=0,this[t(729)]=0}setFace(t){const s=n;this[s(558)]=t,this[s(397)]={x:t.x,y:t.y,height:t[s(400)],width:t.width},this[s(518)]=t[s(501)],this.calculate()}[n(810)](){const t=n;this[t(583)]=null,this[t(397)]={x:0,y:0,width:0,height:0},this[t(518)]=[],this[t(558)]=null,this[t(624)]=0,this[t(820)]=0,this[t(729)]=0}[n(629)](){const t=n;let s=this[t(558)].landMarks[234],i=this[t(558)][t(501)][454],e=this[t(558)].landMarks[10],h=this[t(558)][t(501)][152];this[t(624)]=180*Math[t(553)](i[2]-s[2],i[0]-s[0])/Math.PI,this[t(820)]=180*Math[t(553)](h[0]-e[0],h[2]-e[2])/Math.PI,this.roll=180*Math.atan2(i[1]-s[1],i[0]-s[0])/Math.PI}getPose(){}[n(486)](){return this.box}[n(612)](){return this[n(518)]}},T={FORWARD:"forward",LEFT:n(618),RIGHT:n(445),UP:"up",DOWN:n(763),SMILE:n(379),BLINKING:n(412),NONE:n(532)};class b{constructor(){const t=n;this[t(773)]=[],this[t(818)]=2,this[t(577)]=[T[t(569)],T.RIGHT,T.UP,T.DOWN,T[t(398)]],this[t(575)]=0}shuffle(){const t=n;this[t(810)]();for(let s=0;s<this[t(818)];s++)this[t(773)][t(378)]({name:T.FORWARD});return this.commands}next(){const t=n;return this[t(575)]<this[t(773)].length-1?(this[t(575)]++,this[t(773)][this[t(575)]]):null}current(){const t=n;return this[t(773)][this[t(575)]]}[n(515)](){const t=n;return this[t(575)]<this[t(773)][t(568)]-1}[n(810)](){const t=n;this[t(575)]=0,this[t(773)]=[]}}n(542),n(375),n(785),n(385);const x={NONE:"none",UP:"up",DOWN:n(763),FORWARD:n(453),LEFT:n(618),RIGHT:n(445)},k={NONE:n(532),INIT:n(563),START:n(767),ACTIONS:n(649),FINISH:n(758)},I={SUCCESS:n(564),NONE:n(532),REJECT:"reject"};class F{constructor(t,s={}){const i=n;this[i(734)]=t,this.options={video:null,area:{x:0,y:0,width:0,height:0},detectTime:100,startingWaitTime:2e3,onFaceDetected:null,onError:null,onFinished:null,onCommand:null,onCommandResult:null,onStep:null,onStartDownCount:null},this[i(727)]=o(this[i(727)],s),this.detectTimer=null,this.errors={lowLight:!1,highLight:!1,noFace:!1,manyFace:!1,outOfBounds:!1},this[i(686)]=x[i(585)],this[i(428)]=null,this.headpos=new D,this[i(462)]=new b,this.lock=!1,this[i(676)]=[],this[i(399)]=k.NONE,this[i(804)]=3,this.fixedTime=0,this[i(358)]=0,this.errorWaitTime=2e3,this[i(777)]=6e3,this[i(446)]=1e3,this[i(418)]=2e3,this.currentStepActive=!1,this.tid=null,this[i(483)]=[],this.currentCommand=T[i(585)],this[i(677)]=x[i(585)],this[i(822)]=[],this.cc=null,this[i(434)]()}[n(434)](){const t=n;this[t(428)]=S[t(724)](t(617)),this[t(428)].on(t(509),s=>{const i=t;null!=this[i(588)]&&(this[i(664)](s),this.lock=!1)})}[n(767)](){const t=n;this.lock=!1,this[t(676)]=[],this[t(754)]=!1,this[t(399)]=k[t(337)],this[t(483)]=[],this.detectedFaceCountDownBeforeStart=3,this[t(570)]=(new Date)[t(527)](),this.defineCommands(),this[t(731)](this[t(399)]),clearTimeout(this[t(588)]),this[t(588)]=setTimeout(this[t(566)].bind(this),this[t(727)][t(541)])}[n(694)](){const t=n;this.tid=null,clearTimeout(this[t(588)]),this[t(588)]=null,this[t(791)]=!1,this[t(810)]()}[n(810)](){const t=n;this[t(676)]=[],this.step=k[t(585)],this[t(804)]=3,this.currentAction=x[t(585)],this.currentActionList=[],this[t(754)]=!1}defineCommands(){const t=n;let s=this.commander[t(343)]();for(let i in s)this[t(483)][t(378)]({pos:x[t(585)],image:null,command:T.NONE,status:!1});m[t(402)]().log(t(419),s)}[n(566)](){const t=n;!this[t(791)]&&(this[t(428)][t(772)](t(552),this[t(734)]),this[t(791)]=!0),this[t(588)]=setTimeout(this[t(566)][t(384)](this),this[t(727)][t(541)])}[n(664)](t){const s=n;if(this[s(628)][s(565)]=!1,this[s(628)].manyFace=!1,this.currentPosition=x[s(585)],t[s(568)]>1)this[s(628)][s(353)]=!0;else if(0===t[s(568)])return this[s(628)].noFace=!0,typeof this[s(727)][s(664)]===s(448)&&this[s(727)][s(664)]([]),void(this[s(791)]=!1);this[s(676)]=t,typeof this[s(727)].onFaceDetected===s(448)&&this[s(727)].onFaceDetected(t),this[s(804)]>0?(this[s(804)]--,this[s(829)]=(new Date).getTime(),this[s(358)]=(new Date).getTime()):(this[s(523)][s(494)](t[0]),this[s(395)](),this[s(505)]()),this.lock=!1}[n(758)](t,s){const i=n;if(null==this[i(570)])return!1;let e={tid:this.tid,status:s,results:this[i(483)],image:null};for(let t in this[i(483)])if(this[i(483)][t][i(700)]===T[i(705)]&&!0===this[i(483)][t][i(774)]){e[t][i(703)]=this[i(483)][t][i(703)];break}typeof this.options.onFinished===i(448)&&this[i(727)][i(473)](e),this[i(694)]()}[n(395)](){const t=n;let s=this[t(523)][t(486)](),i={x:this.cc[t(652)](s.x),y:this.cc[t(732)](s.y),width:this.cc[t(622)](s[t(485)]),height:this.cc[t(622)](s[t(400)])},e=.3*this[t(727)][t(394)].width,h=.3*this[t(727)][t(394)].height,o=i.x+i[t(485)],a=i.y+i[t(400)];if(!(i.x>this[t(727)].area.x-e&&i.y>this[t(727)][t(394)].y-h&&o<this[t(727)][t(394)].x+this[t(727)].area[t(485)]+e&&a<this[t(727)].area.y+this.options.area[t(400)]+h))return this.errors[t(778)]=!0,!1;this[t(628)][t(778)]=!1,this[t(523)][t(729)]<12&&this[t(523)][t(729)]>-12&&this[t(523)].pitch<=-20&&this[t(523)][t(820)]>=-130&&this[t(523)].yaw>=-10&&this[t(523)][t(624)]<=10&&(this[t(677)]=x[t(705)]),this[t(523)][t(729)]<12&&this[t(523)][t(729)]>-12&&this.headpos[t(624)]<-10&&(this[t(677)]=x[t(569)]),this[t(523)][t(729)]<12&&this[t(523)][t(729)]>-12&&this[t(523)][t(624)]>10&&(this[t(677)]=x[t(803)]),this.headpos[t(729)]<12&&this[t(523)][t(729)]>-12&&this[t(523)][t(820)]<-130&&(this[t(677)]=x.UP),this[t(523)][t(729)]<12&&this[t(523)][t(729)]>-12&&this.headpos[t(820)]>-20&&(this[t(677)]=x[t(600)])}[n(505)](){const t=n;let s=this[t(762)](),i=this[t(526)](this[t(829)]);if(s?(this[t(686)]=x[t(585)],this.callError(this[t(628)])):this[t(358)]=(new Date)[t(527)](),this[t(399)]===k.INIT&&(this.currentStepActive=!1,this.step=k[t(599)],this.callStepChange(this[t(399)])),this[t(399)]===k[t(599)]){let s=Math.round((this[t(727)][t(490)]-i)/1e3);s>0?typeof this.options[t(442)]===t(448)&&this[t(727)][t(442)](s):(this[t(399)]=k[t(438)],this.currentStepActive=!1,this[t(829)]=(new Date)[t(527)](),this[t(760)]=(new Date).getTime(),this.callStepChange(this[t(399)]))}if(this[t(399)]===k[t(438)]&&(!1===s||0===this[t(464)])){let s=this[t(462)][t(575)],e=this[t(462)].current();this[t(605)]!==e[t(467)]&&(this[t(605)]=e.name,this[t(822)]=[],this.callCommandChange(e[t(467)])),i>0&&this[t(822)][t(378)]({pos:this.currentAction,posPitch:this[t(523)][t(820)],posYaw:this[t(523)][t(624)],time:(new Date)[t(527)](),valid:!0,command:e});let h=this[t(777)]+this[t(446)]-i,n=i>this[t(446)]?this[t(592)](e.name,this[t(677)]):I[t(585)];if(h>0&&n===I[t(585)]);else if(i>this[t(446)]){let i=C[t(827)](this[t(734)],this[t(523)][t(397)].x,this[t(523)][t(397)].y,this[t(523)].box[t(485)],this[t(523)].box[t(400)]);n===I[t(503)]?this[t(483)][s]={pos:this[t(677)],command:e,status:!0,image:i}:this[t(483)][s]={pos:this.currentAction,command:e,status:!1,image:i},this[t(341)](this.results[s]),this.commander[t(515)]()?this[t(462)].next():(this[t(399)]=k[t(540)],this[t(523)].clear(),this[t(731)](this[t(399)])),this[t(829)]=(new Date)[t(527)]()}}if(this[t(399)]===k[t(540)]){this.finishWaitTime-i>0||(this[t(399)]=k[t(540)],this[t(829)]=(new Date)[t(527)](),this.finish(!0,!0))}}[n(592)](t,s){const i=n;let e={},h=T[i(585)],o=T[i(585)],a={};for(let t in this.currentActionList){let s=this[i(822)][t];null!=s&&s.valid&&(null!=s[i(367)]&&(h=this[i(719)](s[i(367)])),null==e[h]&&(e[h]={list:[],max:0}),e[h]=this[i(360)](e[h],s,o!==h),a[h]=(a[h]||0)+1,o=h)}let r=a[i(568)];if(t===T[i(569)]||t===T.UP||t===T[i(803)]||t===T[i(600)]){if(r>3)return I[i(660)];if(null!=e[t]&&e[t][i(696)]>1e3)return I.SUCCESS}if(t===T[i(705)]){if(r>=3)return I.REJECT;if(null!=e[t]&&e[t].max>1e3)return I.SUCCESS}return I[i(585)]}[n(731)](t){const s=n;"function"==typeof this[s(727)].onStep&&this[s(727)][s(707)](t)}[n(811)](t){const s=n;"function"==typeof this[s(727)].onError&&this.options[s(470)](t)}callCommandChange(t){const s=n;typeof this.options[s(755)]===s(448)&&this.options[s(755)](t)}[n(341)](t){const s=n;"function"==typeof this.options.onCommandResult&&this.options[s(671)](t)}[n(654)](){return this.lastDetected}[n(762)](){const t=n;for(const s in this[t(628)])if(!0===this.errors[s])return!0;return!1}[n(526)](t){const s=n;return(new Date)[s(527)]()-t}act2Command(t){const s=n;switch(t){case x[s(569)]:return T.LEFT;case x.UP:return T.UP;case x.RIGHT:return T.RIGHT;case x[s(600)]:return T.DOWN;case x[s(705)]:return T[s(705)];default:return T[s(585)]}}[n(360)](t,s,i){const e=n;let h=t,o=0;return h.list[e(568)]>0&&null!=h[e(510)][o][e(767)]&&i?(o=h[e(510)][e(568)]-1,null!=s.time&&(h[e(510)][o][e(646)]=s[e(390)],h[e(510)][o][e(658)]=s.time-h.list[o][e(767)],h[e(696)]=(h[e(510)][o][e(658)]||0)>h[e(696)]?h[e(510)][o][e(658)]||0:h[e(696)])):h[e(510)].push({start:s[e(390)],end:null,interval:null}),h}}class A{constructor(t,s={}){const i=n;this[i(520)]=null,this[i(734)]=null,this[i(349)]=null,this[i(484)]={start:!1,detectInit:!1,analyzeAfterOpen:!1},this[i(727)]={src:null,sourceType:null,width:640,height:480,liveness:!0,onFrameCaptured:null,detectTime:100,onFinished:null,worker_path:"js/deepfaceworker.js"},this[i(727)]=o(this[i(727)],s),this.initContainer(t),this[i(733)]()}[n(516)](t){const s=n;this[s(349)]=new p(t,{src:this.options[s(756)],width:this.options[s(485)],height:this.options.height,onFrameUpdated:this[s(715)].bind(this),onLoaded:this.onCameraLoaded[s(384)](this),onStart:this[s(603)][s(384)](this),onStop:this[s(508)][s(384)](this)}),this[s(520)]=this[s(349)][s(520)],this[s(734)]=this.camera[s(734)]}setup(){const t=n;this.cc=new f(this[t(349)][t(748)]),this.faceMask=new g(this[t(520)],{width:this[t(727)][t(485)],height:this[t(727)].height}),this.visual=new w(this.canvas),this.webWorker=new v({path:this.options[t(463)]}),this.analyser=new F(this[t(349)][t(441)],{area:this[t(815)].getArea(),detectTime:this.options.detectTime,onFaceDetected:this.onFaceDetected.bind(this),onError:this[t(470)].bind(this),onFinished:this[t(473)][t(384)](this),onCommand:this.onCommand.bind(this),onCommandResult:this[t(671)][t(384)](this),onStep:this.onStep.bind(this),onStartDownCount:this[t(442)][t(384)](this)}),this[t(698)].cc=this.cc}[n(724)](){const t=n;!this[t(349)][t(345)]()&&(this[t(349)].start(),this[t(815)][t(650)]())}[n(682)](){const t=n;this[t(694)](),this.camera.stop(),this.faceMask[t(701)]()}[n(767)](){const t=n;this[t(349)].isPlaying()?(this[t(484)].start=!0,this.analyser[t(767)]()):(this[t(724)](),this[t(484)][t(466)]=!0)}[n(694)](){const t=n;this[t(484)][t(767)]=!1,this.analyser[t(694)](),this[t(484)].analyzeAfterOpen=!1}[n(473)](t,s){const i=n;m[i(402)]()[i(776)](i(609)),this.faceMask[i(544)](i(371)),typeof this[i(727)][i(473)]==i(448)&&this.options[i(473)](t,s)}onFaceDetected(t){}onCommand(t){const s=n;m[s(402)]().log(s(755),t);let i="";switch(t){case T[s(705)]:i="look forward";break;case T[s(569)]:i="look left";break;case T[s(803)]:i=s(765);break;case T.UP:i="look up";break;case T[s(600)]:i="look down";break;default:i=""}this[s(815)][s(544)](i)}[n(671)](){}[n(707)](t){const s=n;m[s(402)]()[s(776)]("onStepChanged",t);let i="";switch(t){case k[s(337)]:i=s(714);break;case k[s(599)]:i=s(706);break;case k[s(438)]:i="Please follow the commands";break;case k[s(540)]:i=s(404);break;default:i=""}this.faceMask[s(544)](i)}[n(442)](t){const s=n;m[s(402)]().log(s(442),t)}onError(t){const s=n;m[s(402)]().log(s(470),t)}[n(715)](){const t=n;let s=this[t(698)].getLastDetected();this[t(488)].drawFaces(s)}[n(344)](t,s){const i=n;this.cc[i(786)](s),this[i(488)].cc[i(786)](s),this[i(698)][i(727)][i(456)]=t}[n(603)](){const t=n;this[t(484)][t(466)]&&(this[t(484)].analyzeAfterOpen=!1,this[t(767)]())}[n(508)](){}[n(335)](t){const s=n;this[s(520)]&&(this[s(520)][s(673)].remove("loading"),this[s(520)][s(673)].remove("blur"),t&&(this.dom[s(673)][s(659)](s(638)),this.dom[s(673)][s(659)](s(529))))}}class O{constructor(t={}){const s=n;this.options={host:null,headers:null,serverSide:null,modelUrl:null,mirrored:!0,single:!0},this[s(657)]=null,this[s(420)]=!1,this[s(573)]=null,this[s(727)]=o(this[s(727)],t),this.originalSize={width:0,height:0},this[s(391)]={x:0,y:0,width:0,height:0},this[s(741)]={width:300,height:300},this[s(727)][s(432)]||this[s(434)]()}[n(536)](){const t=n;this[t(727)][t(432)]=l[t(597)]()||l[t(726)]()}initWorker(){const t=n;this[t(428)]=S.open(t(547)),this[t(428)].on(t(525),s=>{const i=t;if(typeof this[i(657)]===i(448)){let t=this[i(495)](s,!0);this[i(657)](t)}}),this.stream.on("onScanLoaded",s=>{const i=t;m.getInstance()[i(776)](i(366)),this[i(420)]=s})}[n(535)](){const t=n;if(this[t(727)].serverSide){let s=(null!=this[t(727)][t(720)]?a.cutLastSlash(this[t(727)][t(720)]):"")+"/"+t(392),i=o({"Content-Type":t(631)},this.options[t(422)]||{});fetch(s,{method:t(665),headers:i})[t(425)](s=>s[t(578)]()).then(s=>{const i=t;this[i(420)]=s[i(564)],m[i(402)]()[i(776)](i(761),s)})[t(365)](s=>{const i=t;this[i(420)]=!1,m[i(402)]()[i(776)](i(546),s)})}else this[t(428)][t(772)](t(496))}[n(783)](t=null){const s=n;let i=(null!=this[s(727)].host?a.cutLastSlash(this[s(727)][s(720)]):"")+"/"+s(767),e=o({"Content-Type":s(631)},this[s(727)][s(422)]||{});fetch(i,{method:s(665),headers:e}).then(t=>t[s(578)]()).then(i=>{const e=s;this[e(573)]=i[e(570)]||null,m.getInstance()[e(776)](e(761),i),"function"==typeof t&&t(this[e(420)],this.loadedTID)}).catch(t=>{const i=s;this[i(573)]=null,m[i(402)]()[i(776)](i(546),t)})}[n(545)](t,s,i){const e=n;if(this[e(727)].serverSide){let h=C.canvasToBase64(t,e(740),.95),n=new FormData;n[e(561)](e(703),h),n[e(561)](e(639),"0"),n[e(561)](e(570),s);let r=(null!=this[e(727)][e(720)]?a[e(751)](this[e(727)][e(720)]):"")+"/"+e(788),c=o({},this[e(727)][e(422)]||{});fetch(r,{method:e(642),body:n,headers:c}).then(function(t){const s=e;if(t.ok)return t[s(578)]();console[s(346)](s(546),t),typeof i===s(448)&&i(null)})[e(425)](t=>{const s=e;m.getInstance()[s(776)](s(782),t);let h=[];if(!0===t[s(564)]&&void 0!==t[s(619)]&&(h=t[s(619)]),h[s(568)],"function"==typeof i){let t=this[s(495)](h);i(t)}}).catch(t=>{const s=e;console.error(s(546),t),"function"==typeof i&&i(null)})}else{this[e(657)]=i;let s=this[e(362)](t);this.stream[e(772)](e(557),s)}}[n(548)](){return this.loaded}[n(362)](t){const s=n;let i={x:0,y:0,w:t[s(485)],h:t[s(400)]};return t[s(485)]>t[s(400)]?(i.w=t[s(400)],i.x=(t[s(485)]-i.w)/2):(i.h=t[s(485)],i.y=(t[s(400)]-i.h)/2),this[s(830)]={x:t[s(485)],y:t[s(400)]},this[s(391)]=i,C.cropAndResizeCanvas(t,i.x,i.y,i.w,i.h,this[s(741)].width,this.inputSize.height)}[n(779)](t,s){const i=n;let e=1;switch(s){case"x":return t*(e=this[i(391)].w/this[i(741)][i(485)])+this[i(391)].x;case"y":return t*(e=this[i(391)].h/this.inputSize[i(400)])+this[i(391)].y;case"width":return t*(e=this[i(391)].w/this[i(741)][i(485)]);case i(400):return t*(e=this[i(391)].h/this[i(741)].height)}}normalizing(t,s=!1){const i=n;let e=[],h=null,o=!1;for(let n in t){h=t[n],s&&(h.bbox[0]=this[i(779)](h[i(533)][0],"x"),h[i(533)][1]=this[i(779)](h[i(533)][1],"y"),h[i(533)][2]=this[i(779)](h[i(533)][2],i(485)),h[i(533)][3]=this[i(779)](h.bbox[3],i(400))),o=!1;for(let t in e)if(e[t][i(680)]===h[i(680)]){let s=e[t],n=h,a=0,r=0;n[i(533)][0]>s[i(533)][0]&&n[i(533)][0]<s[i(533)][0]+s.bbox[2]?r=(a=s.bbox[0]+s[i(533)][2]-n.bbox[0])/n[i(533)][2]:s[i(533)][0]>n.bbox[0]&&s[i(533)][0]<n[i(533)][0]+n[i(533)][2]&&(r=(a=n[i(533)][0]+n.bbox[2]-s.bbox[0])/s.bbox[2]);let c=0,l=0;n[i(533)][1]>s.bbox[1]&&n[i(533)][1]<s[i(533)][1]+s[i(533)][3]?(c=s[i(533)][1]+s[i(533)][3]-n.bbox[1],l=a/n[i(533)][3]):s[i(533)][1]>n[i(533)][1]&&s[i(533)][1]<n.bbox[1]+n[i(533)][3]&&(c=n[i(533)][1]+n[i(533)][3]-s[i(533)][1],l=a/s[i(533)][3]),r>.6&&l>.6&&(o=!0,n[i(685)]>s[i(685)]&&(e[t]=h))}!o&&e[i(378)](t[n])}if(this[i(727)][i(413)]&&e[i(568)]>0){let t=0,s=0;for(let i in e)e[i].score>t&&(t=e[i].score,s=i);return[e[s]]}return e}[n(522)](){this[n(573)]=null}}class E{constructor(t={}){const s=n;this[s(727)]={server:!0,url:null,host:null,checkURI:null},this[s(727)]=o(this[s(727)],t),null==this.options[s(469)]&&(this[s(727)][s(469)]=s(678)),this[s(420)]=!1,this[s(733)]()}[n(733)](){this[n(727)].server}[n(535)](){const t=n;this[t(727)][t(369)]&&(this[t(420)]=!0)}[n(363)](t,s,i){this[n(727)].server&&this.recognizeGlobal(t,s,i)}[n(574)](t,s,i){const e=n;let h=C[e(826)](t,e(740),.9),o=new FormData;o[e(561)]("image",h),o[e(561)](e(570),s);let r=null!=this[e(727)][e(720)]?a.cutLastSlash(this.options[e(720)]):"",c=null!=this[e(727)][e(663)]?this[e(727)][e(663)]:r+"/"+this.options[e(469)];fetch(c,{method:"POST",body:o})[e(425)](t=>t.json())[e(425)](t=>{const s=e;m[s(402)]()[s(776)]("Received:",t);let h=E[s(613)](t[s(619)]);!1===t[s(564)]&&(h.type=null),typeof i===s(448)&&i(h)}).catch(t=>{const s=e;console[s(346)]("Error:",t),typeof i===s(448)&&i(null)})}recognizeLocal(t,s){}[n(493)](t){const s=n;let i={type:null,text:t,object:null};if(i.count>75){const e=t.substring(0,3);e[s(702)]("I<")||e.includes("1<")?i[s(639)]="I":(e[s(702)]("P<")||e[s(702)]("PC"))&&(i[s(639)]="P")}return i}static[n(613)](t){const s=n;let i={type:null,text:t[s(611)][s(667)](""),object:t};if(i.text[s(568)]>75){const e=t[s(370)];e[s(702)]("I<")||e[s(702)]("1<")?i[s(639)]="I":(e.includes("P<")||e[s(702)]("PC"))&&(i[s(639)]="P")}return i}}const R={NO_CARD:"nocard",MANY_CARDS:n(429),LOW_LIGHT:"lowlight",HIGH_LIGHT:n(785),TOO_SMALL:n(794)},N={NONE:n(532),ID:"id",PASSPORT:n(802)},L={NONE:n(532),ID_FRONT:n(581),ID_BACK:n(388),PASS_FRONT:n(576)},M={NONE:n(532),SHOW:n(650),ID_BACK:n(388),FINISH:n(758)},z={NONE:n(532),SCANNING:n(745),FINISH:n(758)};class P{constructor(t,s={}){const i=n;this.canvas=t,this[i(727)]={host:null,headers:null,mrzOptions:null,detector:null,video:null,area:{x:0,y:0,width:0,height:0},detectTime:100,useServerSide:null,onCardDetected:null,onFaceDetected:null,onMRZDetected:null,onDetected:null,onError:null,onFinished:null,onCommand:null,onCommandResult:null,onStepChanged:null,mirrored:!0,delay:500,serverDelay:500,cardMinSize:{width:70,height:55}},this[i(727)]=o(this[i(727)],s),this[i(428)]=null,this[i(411)]=!1,this[i(725)]=null,this[i(399)]=z.NONE,this[i(616)]=null,this[i(539)]={},this[i(502)]={},this[i(538)]=null,this[i(695)]=null,this[i(478)]=null,this[i(780)]=null,this[i(492)]=null,this.delay=this[i(727)][i(739)],this[i(586)]=null,this[i(727)].useServerSide&&(this[i(739)]=this[i(727)][i(480)]),this[i(517)]=new O({mirrored:this[i(727)][i(381)],single:!0,serverSide:this[i(727)][i(582)],host:this[i(727)][i(720)],headers:this[i(727)][i(422)]}),this.mrz=new E({host:this[i(727)][i(720)],url:this[i(727)][i(465)]&&this[i(727)][i(465)][i(663)]||null}),this.cc=null,this[i(522)](),!this.options[i(582)]&&this.initWorker()}[n(563)](){const t=n;this[t(517)].load(),this[t(814)].load(),null!=this.stream&&C[t(606)](t(626)).then(s=>{const i=t;this[i(428)].notify(i(414),s)})}[n(434)](){const t=n;this[t(428)]=S[t(724)](t(617)),this[t(428)].on("onTinyFaceResult",s=>{const i=t;m[i(402)]()[i(776)]("onFaceResult",s),this.step===z[i(653)]&&null!=this[i(616)]&&this[i(664)](s)})}testDetect(t,s){const i=n;this.detector[i(548)]()&&this[i(517)][i(545)](t,t=>{"function"==typeof s&&s(t)})}observe(){const t=n;if(this[t(517)][t(548)]()&&null!=this[t(586)]){{let s=(new Date)[t(527)]();if(this[t(399)]===z.NONE&&s-this[t(780)]>1e3)this[t(399)]=z[t(653)],this[t(775)](M[t(531)]);else{if(this[t(399)]===z[t(585)])return;if(this[t(399)]===M[t(540)])return void(null!=this[t(492)]&&s-this[t(492)]>2e3&&(this.finish(),this[t(492)]=null))}}!this[t(411)]&&(this[t(616)]=null,this[t(539)]={card:!1,face:!1,mrz:!1},this[t(411)]=!0,this.actualCanvas=this.canvas,this[t(538)]=C.canvasToImageData(this[t(695)]),this[t(517)][t(545)](this[t(695)],this.tID,s=>{this[t(614)](s)}))}}[n(614)](t){const s=n;let i=null!=t&&t[s(568)]>0?t[0]:null,e=null;this[s(539)][s(354)]=!0;let h=null!=i&&this[s(691)](i.bbox);if(null!=i&&!h&&this.callError(R[s(752)]),null!=i&&!0===h){m[s(402)]()[s(776)](s(632),t);let h={docType:this[s(543)](i.class),docFace:this[s(710)](i.class),card:i,face:null,mrz:null,image:null};this[s(616)]=h;let n=C.imageDataToCanvas(this[s(538)]);if(e=C.cropCanvas(n,i.bbox[0],i[s(533)][1],i[s(533)][2],i[s(533)][3]),h[s(703)]=e.toDataURL(s(740),.9),this[s(478)]=e,0!==this[s(502)][s(472)].length||h.docFace!==L[s(636)]&&h[s(670)]!==L[s(647)])if(this[s(502)].scans[s(568)]>0&&this.result.docType===N.ID&&h[s(670)]===L.ID_BACK){let t=.6*e[s(400)],h=C[s(827)](e,0,t,e.width,e[s(400)]-t);if(void 0===i[s(814)]||null==i.mrz){C[s(722)](h,10)>10?this[s(814)][s(363)](h,this[s(586)],t=>{this[s(771)](t)}):this[s(580)](this[s(739)])}else this[s(771)](i[s(814)]);this[s(539)].face=!0}else this[s(580)](this[s(739)]);else if(void 0===i.face||null==i.face?this[s(428)][s(772)]("getTinyFace",e):this[s(664)]([i[s(558)]]),h[s(670)]===L[s(647)]){let t=.7*e[s(400)],h=C.cropCanvas(e,0,t,e[s(485)],e[s(400)]-t);if(void 0===i[s(814)]||null==i.mrz){C.getLaplacianVariance(h)>5?this.mrz[s(363)](h,this[s(586)],t=>{this[s(771)](t)}):this[s(580)](this.delay)}else this.onMRZDetected(i[s(814)])}else this[s(539)][s(814)]=!0;this[s(571)](t),this[s(656)]()}else this[s(571)]([]),this[s(641)]([]),this[s(580)](this[s(739)])}checkSize(t){const s=n;let i=this.actualCanvas[s(485)],e=this[s(695)][s(400)],h=this.options.cardMinSize;return null!=t&&t[s(568)]>=4&&(t[2]/i*100>h[s(485)]||t[3]/e*100>h[s(400)])}onFaceDetected(t){const s=n;if(m[s(402)]()[s(776)](s(664),t),this[s(539)][s(558)]=!0,null!=this[s(616)]){if(this.curScan[s(558)]=null,t[s(568)]>0){let i=C[s(827)](this[s(478)],t[0].x,t[0].y,t[0].width,t[0][s(400)]),e=C[s(722)](i,10);m[s(402)]().log(s(637),e),e>10&&(this[s(616)].face=t)}typeof this[s(727)].onFaceDetected===s(448)&&this[s(727)][s(664)](t),this[s(656)]()}}[n(771)](t){const s=n;m[s(402)]()[s(776)](s(771),t),this[s(539)][s(814)]=!0,null!=this[s(616)]&&(null!=t&&null!=t.object&&!0===t.object[s(554)]?this[s(616)].mrz=t:null!=t&&!0===t[s(554)]?this[s(616)][s(814)]=E[s(613)](t):this[s(616)][s(814)]=null,"function"==typeof this[s(727)].onMRZDetected&&this[s(727)].onMRZDetected(t),this[s(656)]())}[n(656)](){const t=n;if(!this.isAllScanned())return;let s=this[t(616)],i=!1;0!==this[t(502)][t(472)][t(568)]||s[t(670)]!==L[t(636)]&&s[t(670)]!==L[t(647)]?1===this.result[t(472)].length&&this.result[t(789)]===N.ID&&s[t(670)]===L[t(433)]&&null!=s[t(354)]&&null!=s[t(814)]&&null!=s[t(814)].type&&(this.result[t(472)][t(378)](s),this.result[t(774)]=!0,this[t(641)](this[t(616)]),this[t(692)](z[t(540)]),this[t(492)]=(new Date).getTime(),i=!0):s[t(670)]===L[t(636)]?null!=s[t(354)]&&null!=s.face&&1===s.face.length&&(this[t(502)].scans[t(378)](s),this[t(502)][t(789)]=N.ID,this.result[t(774)]=!1,this[t(641)](this[t(616)]),this[t(775)](M[t(433)]),i=!0,this[t(580)](this[t(739)])):null!=s[t(354)]&&null!=s[t(558)]&&null!=s[t(814)]&&null!=s.mrz[t(639)]&&(this[t(502)].scans[t(378)](s),this[t(502)][t(789)]=N.PASSPORT,this[t(502)].status=!0,this[t(641)](this[t(616)]),this[t(692)](z[t(540)]),this[t(492)]=(new Date)[t(527)](),i=!0),!i&&this[t(539)][t(354)]&&this.scanned[t(558)]&&this[t(539)][t(814)]&&this[t(580)](this[t(739)])}[n(423)](){const t=n;for(let s in this[t(539)])if(!0!==this.scanned[s])return!1;return!0}changeStep(t){const s=n;this.step!==t&&(this[s(399)]=t,typeof this[s(727)][s(821)]==s(448)&&this[s(727)][s(821)](t))}callCardDetectedEvent(t){const s=n;null!==t&&typeof this[s(727)][s(614)]===s(448)&&this[s(727)][s(614)](t)}[n(641)](t){const s=n;"function"==typeof this[s(727)][s(447)]&&this.options[s(447)](t)}[n(811)](t){const s=n;typeof this[s(727)][s(470)]===s(448)&&this[s(727)][s(470)](t)}[n(717)](){return this[n(399)]}[n(580)](t=null){const s=n;t=null==t?this[s(739)]:t,clearTimeout(this.timeID),this[s(725)]=setTimeout(()=>{this[s(411)]=!1},t)}[n(522)](){const t=n;this[t(399)]=M[t(585)],this[t(502)]={status:!1,docType:N.NONE,scans:[],tID:null},this.curScan=null,this[t(539)]={},this[t(411)]=!1,this[t(478)]=null,this[t(586)]=null,this.detector.reset()}[n(767)](){const t=n;this[t(399)]=z[t(585)],this[t(775)](M[t(585)]),this[t(780)]=(new Date)[t(527)](),this[t(517)][t(727)][t(432)]?this[t(517)][t(783)]((s,i)=>{const e=t;this[e(586)]=i,this[e(502)].tID=this.tID}):(this[t(586)]=String(this[t(780)]+Math[t(795)](1e5*Math[t(560)]())),this[t(502)][t(586)]=this[t(586)])}[n(758)](){const t=n;this[t(775)](M.FINISH),"function"==typeof this.options.onFinished&&this[t(727)].onFinished(this[t(502)])}[n(775)](t){const s=n;typeof this[s(727)].onCommand===s(448)&&this[s(727)][s(755)](t)}[n(543)](t){const s=n;switch(t){case"id_front":case s(388):return N.ID;case s(491):return N[s(712)];default:return N[s(585)]}}defineScanFace(t){const s=n;switch(t){case"id_front":return L.ID_FRONT;case s(388):return L[s(433)];case s(491):return L[s(647)];default:return L.NONE}}[n(587)](){return this[n(399)]}}class _{constructor(t,s={}){const i=n;this[i(734)]=t,this.options={srcDim:{k:1,dx:0,dy:0,dw:0,dh:0},mirrored:!0},this[i(727)]=o(this[i(727)],s),this.cc=new f(this.options[i(415)])}[n(339)](t,s,i){}drawMask(){}[n(556)](t){const s=n;let i=t.width+20,e=t[s(400)]+20,h=(this[s(734)][s(485)]-i*this[s(734)][s(485)]/100)/2,o=(this[s(734)].height-e*this[s(734)][s(400)]/100)/2,a=this[s(734)][s(352)]("2d");a[s(787)](),a[s(749)](),a.lineWidth="3",a.strokeStyle="rgba(255,160,24,0.5)",a[s(474)](h,o,this[s(734)].width-2*h,this[s(734)][s(400)]-2*o),a[s(621)](),a[s(513)](),a[s(823)]()}[n(426)](t,s="green",i=""){const e=n;let h=this[e(734)].getContext("2d"),o=null,a=null,r=null;for(let n in t)r=t[n],o=this[e(727)].mirrored?this[e(734)].width-this.cc[e(652)](r[e(533)][0])-this.cc.getSize(r.bbox[2]):this.cc[e(652)](r[e(533)][0]),a=this.cc.getCoordY(r[e(533)][1]),h.beginPath(),h[e(439)]="2",h[e(549)]=s,h[e(474)](o,a,this.cc[e(622)](r[e(533)][2]),this.cc[e(622)](r[e(533)][3])),h.stroke(),h.lineWidth="0",h.fillStyle=s,h[e(648)](o-1,a-20,150,20),h.font="14px Arial",h[e(468)]=e(530),h[e(742)]=e(618),h[e(596)](r.class+" "+Number(r[e(685)])[e(604)](2),o+5,a-5),h[e(621)](),h.font=e(709),h[e(468)]=s,h[e(742)]=e(405),h[e(596)](i,o+this.cc.getSize(r.bbox[2])/2,a+this.cc.getSize(r[e(533)][3])/2),h[e(513)]();h[e(823)]()}}class W{constructor(t={}){const s=n;this[s(617)]=null,this[s(428)]=null,this[s(727)]={path:null},this[s(727)]=o(this[s(727)],t),this[s(733)]()}[n(733)](){const t=n;this[t(428)]=S.open(t(547)),this[t(428)].on(t(496),this[t(496)].bind(this)),this.stream.on(t(557),this[t(557)][t(384)](this)),window.Worker&&null!=this.options[t(595)]?(this[t(617)]=new Worker(this.options[t(595)]),this[t(617)].onmessage=this.onWorkerMessage[t(384)](this)):m[t(402)]()[t(776)](t(738))}[n(557)](t){const s=n;let i=null;t instanceof HTMLCanvasElement?i=C[s(475)](t):t instanceof HTMLImageElement&&(i=C[s(627)](t)),this[s(617)][s(736)]({type:s(816),action:"getCard",data:i})}loadCard(){const t=n;this[t(617)][t(736)]({type:t(816),action:"loadCard"})}onWorkerMessage(t){const s=n;let i=t[s(619)][s(639)],e=(t[s(619)][s(828)],t.data[s(619)]);switch(i){case"scan":this.stream[s(772)](s(525),e);break;case s(623):this[s(428)].notify("onScanLoaded",e)}}}class H{constructor(t,s={}){const i=n;this[i(520)]=null,this[i(734)]=null,this[i(349)]=null,this[i(484)]={start:!1,detectInit:!1,analyzeAfterOpen:!1},this[i(617)]=null,this[i(727)]={url:null,headers:null,src:null,sourceType:null,width:1920,height:1080,onInit:null,onFrameCaptured:null,onCardDetected:null,onDetected:null,onCommand:null,sessionTime:6e4,detectTime:100,onFinished:null,mirrored:!0,scan_worker_path:"js/deepscanworker.min.js",face_worker_path:i(790),testURL:null,mrzOptions:null,useServerSide:null,serverRequestDelay:500,detector:{},camera:{fillOnMobile:!0,fill:!0,cutEdge:!0}},this[i(630)]=null,this.visual=null,this[i(672)]=null,this[i(416)]=null,this[i(676)]=null,this[i(572)]=null,this[i(407)]=null,this[i(792)]=null,this[i(807)]=M[i(585)],this.lastResult=null,this[i(351)]=0,this[i(727)]=o(this[i(727)],s),(null==this.options.useServerSide&&l.isMobile()||l[i(726)]())&&(this[i(727)][i(582)]=!0),this[i(516)](t),this[i(733)]()}[n(516)](t){const s=n;this.camera=new p(t,{src:this[s(727)][s(756)],width:this[s(727)][s(485)],height:this[s(727)][s(400)],fill:this.options[s(349)].fill,fillOnMobile:this[s(727)][s(349)][s(477)],cutEdge:this.options[s(349)][s(403)],onFrameUpdated:this[s(715)][s(384)](this),onLoaded:this.onCameraLoaded[s(384)](this),onStart:this[s(603)].bind(this),onStop:this[s(508)].bind(this)}),this[s(520)]=this[s(349)][s(520)],this.canvas=this.camera[s(734)]}[n(733)](){const t=n;if(this.cc=new f(this[t(349)][t(748)]),this[t(488)]=new _(this[t(734)],{srcDim:this[t(349)].sourceDim,mirrored:this.options[t(381)]}),this.analizer=new P(this[t(349)].__canvas_original,{host:this[t(727)][t(663)],headers:this[t(727)].headers,mrzOptions:this[t(727)][t(465)],detector:this[t(727)][t(517)],useServerSide:this[t(727)][t(582)],onCommand:this[t(755)][t(384)](this),onCardDetected:this.onCardDetected[t(384)](this),onDetected:this.onDetected[t(384)](this),onFinished:this[t(473)][t(384)](this),onError:this[t(470)].bind(this),mirrored:this[t(727)].mirrored,serverDelay:this[t(727)][t(427)]}),!this[t(727)][t(582)]){let s=t(512)+(new Date)[t(527)]();this[t(672)]=new v({path:this.options[t(610)]+s}),this[t(416)]=new W({path:this.options[t(455)]+s})}this.analizer.cc=this.cc,typeof this[t(727)][t(338)]==t(448)&&this[t(727)][t(338)]()}[n(724)](){const t=n;!this.camera.isPlaying()&&(this[t(349)][t(767)](),this.analizer[t(563)]())}close(){const t=n;this[t(694)](),this[t(349)][t(694)]()}[n(767)](){const t=n;this[t(764)]=null,this[t(807)]=M[t(585)],this[t(349)][t(345)]()?(this[t(484)][t(767)]=!0,this[t(630)][t(767)]()):(this.open(),this[t(484)][t(466)]=!0),this[t(810)](),this[t(351)]=(new Date)[t(527)]()}stop(){const t=n;this.state[t(767)]=!1,this[t(484)].analyzeAfterOpen=!1,this[t(630)].reset(),this[t(810)]()}[n(487)](t,s){const i=n;C[i(606)](t)[i(425)](t=>{const e=i;let h=C[e(627)](t);this[e(630)][e(356)](h,s)})}[n(810)](){const t=n;this[t(676)]=[],this[t(407)]=null,this[t(792)]=null,this.lastDetectedTime=null,this[t(351)]=0}[n(473)](t){const s=n;this[s(676)]=[],this.lastScanned=null,this[s(488)][s(426)]([]),this[s(694)](),typeof this.options[s(473)]==s(448)&&this.options[s(473)](t)}[n(614)](t){const s=n;this.lastDetected=t,this[s(572)]=(new Date).getTime(),typeof this.options.onCardDetected===s(448)&&this[s(727)][s(614)](t)}onDetected(t){const s=n;this.lastScanned=t,this.lastScannedTime=(new Date)[s(527)](),m[s(402)]()[s(776)](s(373),t),typeof this[s(727)][s(447)]===s(448)&&this.options.onDetected(this[s(407)])}[n(755)](t){const s=n;this.lastCommand=t,this.state[s(767)]&&typeof this[s(727)][s(755)]===s(448)&&this[s(727)].onCommand(t)}[n(671)](){}[n(470)](t){const s=n;switch(t){case R.TOO_SMALL:m[s(402)]()[s(776)](s(743))}}onFrameUpdated(){const t=n;if(this[t(484)][t(767)]){let s=this.lastScanned&&this[t(407)][t(354)]?[this.lastScanned[t(354)]]:[];if(0===s.length&&null!=this.lastDetected&&this[t(676)].length>0){s=this[t(676)];let i="";this[t(807)]===M[t(433)]&&this[t(676)][0][t(680)]===t(388)?(i=t(793),this[t(488)][t(426)](s,t(377),i)):this.lastCommand===M[t(531)]&&"pass_main"===this[t(676)][0][t(680)]&&(i=t(793),this[t(488)][t(426)](s,t(377),i))}else{let i=this[t(376)](this[t(792)]);null!=i&&i<2e3&&this[t(488)][t(426)](s)}this[t(630)][t(587)]()===z[t(653)]&&this[t(488)][t(556)](this.analizer[t(727)][t(655)]),(new Date)[t(527)]()-this[t(351)]>this[t(727)][t(760)]?this.onFinished({status:!1,msg:t(675)}):this[t(630)][t(566)]()}}[n(344)](t,s){const i=n;this.cc[i(786)](s)}onCameraStart(){const t=n;this[t(484)][t(466)]&&(this[t(484)][t(466)]=!1,this[t(767)]())}onCameraStop(){}[n(376)](t){return null==t?null:(new Date).getTime()-t}}n(558),n(661);const j=class{constructor(t={}){const s=n;this.options={url:null,headers:null,debug:!1},this[s(727)]=o(this[s(727)],t),this[s(619)]=new r(t[s(663)]||null,this[s(727)]),new m({debug:this[s(727)][s(798)]})}createDeepFace(t,s){return new A(t,s)}createDeepScan(t,s){const i=n;let e=o({url:this[i(727)][i(663)],headers:this.options[i(422)]},s);return new H(t,e)}createDeepStory(t,s){}verify(t,s){const i=n;this.data[i(809)](t,t=>{typeof s===i(448)&&s(t)})}[n(597)](){return l[n(597)]()}}}},s={};function i(e){if(s[e])return s[e].exports;var h=s[e]={exports:{}};return t[e](h,h.exports,i),h.exports}return i.d=((t,s)=>{for(var e in s)i.o(s,e)&&!i.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:s[e]})}),i.o=((t,s)=>Object.prototype.hasOwnProperty.call(t,s)),i(614)})().default});
