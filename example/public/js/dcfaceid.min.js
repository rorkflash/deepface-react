!function(t,s){"object"==typeof exports&&"object"==typeof module?module.exports=s():"function"==typeof define&&define.amd?define([],s):"object"==typeof exports?exports.DCFaceID=s():t.DCFaceID=s()}(this,function(){return(()=>{"use strict";var t={614:(t,s,i)=>{i.d(s,{default:()=>z});const e=["mrz","devices","onStart","hasCommand","observers","length","initWorker","callStepChange","LEFT","116424JCkErK","valid","function","recognizeLocal","reset","scanWebWorker","TOO_SMALL","forEach","defineScanType","filter","getCurrentStep","tagName","close","data","Received:","canvasToImageData","black","status","testSource","toOriginalSize","727653wrFrfK","?rand=","single","createDeepFace","none","getImageFromURL","box","rgba(0, 0, 0, 1)","id_back","commander","clearRect","passport","card","actionText","scan","index","catch","cutLastSlash","look forward","analyzeAfterOpen","draw mask layer","rgba(255,160,24,0.5)","setCommand","setFace","appendChild","assign","action","__canvas","onStep","rgb(66,109,139)","number","setDim","dim","style","lowlight","delay","errors","play","fillOnMobile","look left","loadedTID","smile","serverDelay","path","getBox","tid","look right","notifyAll","currentCommand","outofbounds","drawMask","lineWidth","startingWaitTime","options","actionWaitBeforeCheck","autoplay","playsinline","stringify","getContext","ID_FRONT","__canvas_original","innerHtml","drawFaces","tinyFaceDetected","globalAlpha","look down","undefined","request","onStepChanged","hide","pitch","streamSize","callError","interval","finishWaitTime","onError","display","SUCCESS","FORWARD","snapshot","bind","checkSize","getTinyFace","anonymous","toDataURL","height","defineContainer","video","landMarks","ID_BACK","INIT","currentStepActive","init","msg","chrome","getLandmark","drawCard","getCoord","image/png","resWidth","detectTimer","imageToCanvas","orange","arc","lastScanned","collect","end","checkScanResult","videoWidth","manyFace","isOffscreenCanvasSupport","toFixed","onScanResult","chooselist","SHOW","substr","remove","onStop","position","getImageData","worker_path","onInit","canvasToBase64","onCameraLoaded","Worker","finish","detector","notify","face_worker_path","lastResult","scale","parentElement","outOfBounds","isReady","sizeKoef","SMILE","videoSize","getCoordY","getArea","errorTime","opacity","keys","getStep","match","DIV","id_front","onDetect","1pWogiS","onFinished","PASS_FRONT","checkPosAndActions","beginPath","defineScanFace","672205XERWwI","backgroundColor","defineProcess","docFace","rect","restore","lastScannedTime","lastCommand","nocard","getVideoTracks","green","curFrame","detectionLocked","30px","dom","commands","checkCurrentCommandAction","addActionTime","3qbKfHG","isRearCameraUsed","drawPath","initContainer","isAllScanned","kind","classList","commandArea","streams","dpr","/verify","FINISH","area","normalizing","block","CANVAS","maskSize","log","isSafari","canvas2grayscale","mrzOptions","success","userAgent","scans","current","getPassTime","rear camera used","server","paused","croppedSize","type","left","defineStream","sourceDim","card/detect","raf","serverSide","start","resHeight","div","verify","createTextArea","image","recognize","onDetected","append","callDetectedEvent","callCardDetectedEvent","Please follow the commands","count","getCard","errorWaitTime","open","resizeCanvas","getImageB64","webWorker","getFace","bbox","host","closePath","onload","onmessage","js/deepfaceworker.js","some","serverRequestDelay","image/jpeg","frontCamera","toLowerCase","currentPosition","command","REJECT","putImageData","Lines","startTime","getTimeDiff","onCommandResult","step","list","toVerify","visual","NONE","getPose","score","onCameraStart","defineCommands","includes","116261bazoNX","getLaplacianVariance","stroke","isErrorExist","fillText","yaw","currentAction","time","onStartDownCount","web camera exception!","fillStyle","unlock","callback","face","highlight","look up","indexOf","defineCurrentAction","scanned","result","analyser","actionWaitTime","forward","drawArea","canvas","actualCanvas","session timeout","stream","json","currentActionList","timeID","worker","stop","detect","center","down","onCardDetected","Success:","onFaceDetected","14px Arial","onStreamLoaded","hideTextArea","onMRZDetected","right","width","getTracks","data processing, please wait...","src","lock","push","canvas2IMG","clear","Initializing","recognizeGlobal","load","lineTo","strokeStyle","globalCompositeOperation","name","toosmall","detectTime","shuffle","createDeepScan","showTextArea","tID","isMobile","docType","getLastDetected","show","next","createElement","source-over","showCollection","cropCanvas","detectedFaceCountDownBeforeStart","max","error","ACTIONS","scan-worker","textAlign","START","roll","atan2","GET","cutEdge","20px Arial","maskLayer","fill","PASSPORT","1097809LjlZcn","fireCommand","scanner","net","Error loading ","add","onScanLoaded","calculate","quadraticCurveTo","crossOrigin","object","noface","faceMask","reject","lastDetected","act2Command","state","onFrameUpdated","Starting","scanning","changeStep","pos","applyConstraints","getCoordX","parseObject","js/deeptinyfaceworker.min.js","sessionTimeCount","onWorkerMessage","muted","onCameraStop","fixedTime","POST","getSettings","headpos","Valid","Card is too small","getUserMedia","Computing for finishing","cardImage","maskInited","RIGHT","finishTime","xor","videoHeight","url","onplaying","absolute","font","onTinyFaceResult","callCommandChange","Type","ctx","analizer","pass_main","manyfaces","results","curScan","checkURI","659916dZVCzS","lastDetectedTime","inputSize","createDeepStory","environment","toRealCoordY","Error:","getTime","videoinput","startSession","testDetect","substring","save","fit2Size","originalSize","srcDim","round","400477aRwkSX","Card model loaded","moveTo","setup","observe","onLoaded","join","Your browser doesn't support web workers.","cropAndResizeCanvas","webgl","video-layer","loading","snapshotlist","offsetHeight","scanLoaded","mirrored","cardMinSize","detector result","showProcessing","postMessage","onCommand","drawStreamToCanvas","blankCanvas","mediaDevices","commandText","getSnapshots","imageDataToCanvas","drawImage","useServerSide","loadCard","then","camera","landmark","fillRect","loaded","setAttribute","faceWebWorker","textContent","headers","onFaceResult","SCANNING","DOWN","getSize","class","isPlaying"],h=function(t,s){return e[t-=390]},n=h;!function(t,s){const i=h;for(;;)try{if(372343===-parseInt(i(705))*parseInt(i(852))+parseInt(i(876))*parseInt(i(467))+parseInt(i(631))+parseInt(i(614))+parseInt(i(685))+parseInt(i(858))+-parseInt(i(556)))break;t.push(t.shift())}catch(s){t.push(t.shift())}}(e);const o=(t,s)=>{const i=h;for(let e of Object[i(846)](s))s[e]instanceof Object&&Object[i(730)](s[e],o(t[e]||{},s[e]));return Object.assign(t||{},s),t};class a{static[n(722)](t){return"/"===t[n(820)](t.length-1)?t.slice(0,-1):t}}class c{constructor(t="",s={}){const i=n;this.url=t,this[i(758)]={headers:{}},this[i(758)]=o(this[i(758)],s)}toVerify(t,s){const i=n;if(null!=t&&null!=t.scanner&&null==t[i(480)]){let e={docType:t.scanner[i(533)]||null,scans:[],tid:t[i(558)][i(531)]};for(let s in t[i(558)][i(404)])e[i(404)][i(516)]({docFace:t[i(558)][i(404)][s][i(861)]||null,image:t[i(558)][i(404)][s][i(423)]});let h=o({"Content-Type":"application/json"},this[i(758)][i(669)]||{});fetch(a[i(722)](this[i(600)])+i(391),{method:"POST",headers:h,body:JSON[i(762)](e)})[i(661)](t=>t[i(495)]())[i(661)](t=>{const e=i;if(typeof s===e(687)){let i={success:t[e(402)],data:t[e(698)]||null,msg:t[e(798)]||null};s(i)}}).catch(t=>{const e=i;console.error(e(620),t),"function"==typeof s&&s({success:!1,error:t})})}}}class l{constructor(t){this[n(491)]=t}[n(810)](){}[n(539)](){}[n(426)](){}[n(772)](){}}class r{static[n(532)](){const t=n;return[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i][t(444)](s=>{const i=t;return navigator.userAgent[i(848)](s)})}static isWebGLExist(){const t=n;try{document[t(537)](t(491))[t(763)](t(640))}catch(t){return!1}return!0}static[n(815)](){return typeof OffscreenCanvas===n(687)}static[n(399)](){const t=n;let s=navigator[t(403)][t(448)]();return-1!==s[t(483)]("safari")&&-1===s[t(483)](t(799))}}const d=class{constructor(t,s={}){const i=n;this[i(872)]=null,this[i(491)]=null,this[i(732)]=null,this[i(765)]=null,this[i(792)]=null,this[i(494)]=null,this[i(460)]=null,this[i(416)]=null,this[i(776)]={width:0,height:0},this[i(414)]={k:1,dx:0,dy:0,dw:0,dh:0},this[i(643)]=[],this[i(677)]=[],this[i(447)]=!0,this[i(390)]=1,this[i(758)]={src:null,sourceType:null,width:640,height:480,resWidth:1280,resHeight:720,fill:!1,fillOnMobile:!0,cutEdge:!1,onLoaded:null,onError:null,onStop:null,onStart:null,onFrameUpdated:null},this[i(758)]=o(this.options,s),this[i(791)](t),this[i(634)]()}[n(791)](t){const s=n;if(this[s(390)]=window.devicePixelRatio||1,"string"==typeof t){let i=document.getElementById(t);i&&i[s(696)]&&("DIV"===i[s(696)]?(this[s(872)]=i,this[s(872)].innerHTML="",this[s(491)]=document[s(537)](s(396)),this[s(491)][s(511)]=this[s(758)][s(511)],this.canvas[s(790)]=this[s(758)][s(790)],this[s(872)][s(729)](this[s(491)])):i[s(696)]===s(396)&&(this.canvas=i,this[s(872)]=document.createElement(s(849)),this[s(491)][s(836)].insertBefore(this[s(872)],this[s(491)]),this[s(872)][s(729)](this[s(491)])),this[s(872)]&&(this[s(872)][s(882)].add("df-container"),this[s(872)].style[s(511)]=this[s(758)][s(511)]+"px",this.dom[s(738)][s(790)]=this.options[s(790)]+"px")),this[s(491)]&&(this.canvas[s(882)][s(561)](s(641)),this[s(491)].style[s(859)]="gray")}this[s(732)]=document.createElement(s(396)),this.__canvas[s(511)]=this[s(758)].width,this[s(732)].height=this[s(758)].height,this[s(765)]=document[s(537)](s(396)),this[s(765)].width=this[s(758)][s(511)],this[s(765)][s(790)]=this[s(758)][s(790)]}setup(){const t=n;this.visual=new l(this[t(491)])}start(){const t=n;(null==this.video||!this.isPlaying())&&this[t(413)]()}[n(499)](){const t=n;this[t(494)]&&this[t(494)].getTracks()[t(681)]>0&&(this[t(494)][t(512)]()[0][t(499)](),this.stream=null)}[n(413)](){const t=n;r.isMobile()&&!0===this[t(758)][t(743)]&&(this[t(758)][t(554)]=!0),null==this[t(758)][t(514)]?null==this.stream?navigator[t(654)]&&navigator[t(654)][t(592)]&&(null===this[t(792)]&&(this[t(792)]=document[t(537)]("video"),this.video[t(666)](t(760),""),this.video[t(666)](t(584),""),this[t(792)][t(666)](t(761),""),this[t(792)][t(738)][t(511)]=t(871),this.video[t(738)][t(790)]=t(871),this.video[t(738)][t(823)]=t(602),this[t(872)][t(729)](this[t(792)]),this[t(792)][t(738)][t(845)]="0.5"),this[t(416)]=null,navigator.mediaDevices.enumerateDevices()[t(661)](s=>{const i=t;console.log("media devices",s),this[i(677)]=s}),navigator[t(654)][t(592)]({audio:!1,video:{facingMode:t(618),width:{ideal:this.options[t(804)]},height:{ideal:this.options[t(419)]}}})[t(661)](i=>{const e=t;this[e(494)]=i,this[e(792)].srcObject=i,i[e(867)]()[0][e(578)]({focusMode:"auto",focusDistance:.33}),this.isRearCameraUsed()&&(console[e(398)](e(407)),this[e(447)]=!1),s(),this[e(792)][e(742)]()})[t(721)](s=>{const i=t;console[i(398)](i(476),s),this[i(780)](s)})):this[t(792)][t(742)]():(this[t(792)][t(514)]=this[t(758)].src,this[t(792)][t(742)]());let s=()=>{const s=t;this[s(792)].onloadeddata=(()=>{this[s(507)]()}),this.video[s(601)]=(()=>{const t=s;this[t(732)][t(511)]=this[t(792)][t(813)],this[t(732)][t(790)]=this[t(792)][t(599)],this[t(765)][t(511)]=this[t(792)][t(813)],this[t(765)].height=this[t(792)][t(599)];let i=this[t(792)][t(813)],e=this[t(792)][t(599)],h=1;this[t(414)].dw=this[t(491)][t(511)],this[t(414)].dh=this[t(491)][t(790)],this[t(758)].fill?this.canvas[t(790)]/e<this[t(491)][t(511)]/i?(h=this[t(491)][t(511)]/i,this[t(414)].dh=Math[t(630)](h*e),this[t(414)].dy=0,this[t(758)].cutEdge&&(this[t(765)].height=this.canvas[t(790)]/h,this.__canvas[t(790)]=this[t(491)][t(790)]/h)):(h=this[t(491)].height/e,this[t(414)].dw=Math[t(630)](h*i),this[t(414)].dx=0,this[t(758)][t(551)]&&(this[t(765)][t(511)]=this[t(491)].width/h,this[t(732)][t(511)]=this[t(491)].width/h)):this[t(491)][t(790)]/e<this[t(491)][t(511)]/i?(h=this[t(491)][t(790)]/e,this[t(414)].dw=Math[t(630)](h*i),this[t(414)].dx=(this[t(491)].width-this[t(414)].dw)/2):(h=this[t(491)][t(511)]/i,this[t(414)].dh=Math[t(630)](h*e),this[t(414)].dy=(this.canvas[t(790)]-this[t(414)].dh)/2),this.sourceDim.k=h,null!=this.raf&&cancelAnimationFrame(this[t(416)]),this[t(416)]=requestAnimationFrame(this[t(652)][t(785)](this)),this[t(776)]={width:this[t(792)][t(813)],height:this[t(792)][t(599)]},this[t(678)]()}),this[s(792)].onpause=(()=>{cancelAnimationFrame(this.raf),this.onStop()})}}async[n(652)](){const t=n;let s=this.frontCamera?-1:1,i=this[t(414)],e=this[t(792)].videoWidth,h=this[t(792)][t(599)],o=this[t(765)][t(763)]("2d");o[t(626)](),o[t(835)](1,1),this[t(758)][t(554)]&&this[t(758)][t(551)]?o[t(658)](this[t(792)],(this.__canvas_original.width-e)/2,(this[t(765)][t(790)]-h)/2,e,h):o.drawImage(this.video,0,0,this.__canvas_original[t(511)],this.__canvas_original.height),o[t(863)]();let a=this[t(732)].getContext("2d");a.save(),a[t(835)](s,1),this[t(758)][t(554)]&&this.options.cutEdge?a[t(658)](this[t(792)],s*(this.__canvas[t(511)]-e)/2+(-1===s?s*e:0),(this[t(732)][t(790)]-h)/2,e,h):a[t(658)](this.video,-1===s?s*e:0,0,this.__canvas.width,this[t(732)][t(790)]),a.restore();let c=this[t(491)][t(763)]("2d"),l=(this[t(491)][t(511)]-this.sourceDim.dw)/2,r=(this.canvas[t(790)]-this[t(414)].dh)/2;c[t(715)](0,0,this[t(491)][t(511)],this[t(491)].height),c[t(626)](),c[t(835)](1*s,1),c[t(658)](this[t(792)],s*l+(-1===s?s*i.dw:0),r,i.dw,i.dh),c[t(863)](),null!=this[t(494)]&&(this[t(573)](),this[t(416)]=requestAnimationFrame(this[t(652)][t(785)](this)))}[n(877)](){const t=n;let s=[];for(let i in this[t(677)])this[t(677)][i][t(881)]===t(622)&&s[t(516)](this[t(677)][i]);let i=this.stream&&this[t(494)][t(867)]()[0][t(588)]().facingMode||null;return console[t(398)](t(677),this[t(677)]),console[t(398)]("facingMode",i),i===t(618)}[n(675)](){const t=n;return this.stream&&this[t(792)]&&!this[t(792)][t(409)]}getImageData(){const t=n;return this[t(732)][t(763)]("2d")[t(824)](0,0,this[t(732)][t(511)],this[t(732)].height)}[n(435)](){const t=n;return this[t(732)][t(789)]()}[n(656)](){return this[n(643)]}[n(784)](){const t=n;this[t(643)][t(516)](this[t(435)]())}clearSnapshots(){this[n(643)]=[]}onError(t){const s=n;typeof this[s(758)][s(780)]===s(687)&&this[s(758)][s(780)](t)}[n(507)](){const t=n;typeof this[t(758)][t(636)]===t(687)&&this[t(758)].onLoaded(this.video,this[t(414)])}[n(822)](){const t=n;"function"==typeof this.options.onStop&&this[t(758)][t(822)]()}onStart(){const t=n;typeof this[t(758)][t(678)]===t(687)&&this[t(758)][t(678)]()}[n(573)](){const t=n;"function"==typeof this[t(758)][t(573)]&&this[t(758)].onFrameUpdated()}};class u{constructor(t={k:1,dx:0,dy:0,dw:0,dh:0}){this[n(737)]=t}[n(736)](t){this[n(737)]=t}[n(802)](t,s){const i=n;return{x:t*this[i(737)].k+this.dim.dx,y:s*this[i(737)].k+this[i(737)].dy}}getCoordX(t){return t*this[n(737)].k+this.dim.dx}[n(842)](t){const s=n;return t*this[s(737)].k+this[s(737)].dy}getSize(t){return t*this[n(737)].k}toRealCoordX(t){const s=n;return t/this.dim.k-this[s(737)].dx}[n(619)](t){return t/this[n(737)].k-this.dim.dy}}class m{constructor(t,s={width:0,height:0},i={width:0,height:0}){const e=n;this[e(872)]=t,this.canvas=null,this[e(607)]=null,this.commandText=null,this[e(718)]=null,this[e(841)]=s,this[e(397)]=i,this[e(595)]=!1,this.sizeKoef={h:.4,v:.6},(0===this[e(397)][e(511)]||0===this[e(397)][e(790)])&&(this[e(397)]={width:this[e(841)].width*this[e(839)].h,height:this.videoSize[e(511)]*this.sizeKoef.v}),this[e(634)]()}[n(634)](){const t=n;null!=this[t(872)]&&(this[t(491)]=document[t(537)](t(396)),this[t(491)].id=t(553),this[t(491)][t(511)]=this[t(841)][t(511)],this.canvas[t(790)]=this[t(841)][t(790)],this[t(872)][t(729)](this[t(491)]),this.ctx=this[t(491)][t(763)]("2d"))}[n(422)](){const t=n;if(this[t(655)])this[t(655)][t(738)][t(781)]=t(395);else{this[t(655)]=document[t(537)](t(420)),this[t(655)].id=t(883);let s=document.createElement("P");s[t(668)]="",this[t(655)][t(729)](s),this.dom[t(729)](this[t(655)]);let i=((this[t(491)][t(790)]-this[t(397)][t(790)])/2-this[t(655)][t(644)])/2;this[t(655)].style.top=i+"px"}if(this[t(718)])this[t(718)][t(738)][t(781)]="block";else{this[t(718)]=document[t(537)](t(420)),this[t(718)].id="actionArea";let s=document[t(537)]("P");s.textContent="",this[t(718)][t(729)](s),this.dom[t(729)](this.actionText);let i=((this[t(491)][t(790)]-this[t(397)][t(790)])/2-this[t(655)][t(644)])/2;this[t(718)][t(738)].bottom=i+"px"}}[n(530)](){const t=n;this[t(655)]&&(this.commandText.style.display=""),this.actionText&&(this.actionText.style[t(781)]="")}[n(508)](){const t=n;this[t(655)]&&(this[t(655)].style[t(781)]="none"),this[t(718)]&&(this[t(718)][t(738)].display=t(709))}setText(t){const s=n;this.actionText&&(this.actionText[s(766)]=t)}[n(727)](t){const s=n;this[s(655)]&&(this[s(655)][s(766)]=t)}[n(843)](){const t=n;return{x:this[t(491)][t(511)]/2-this.maskSize[t(511)]/2-20,y:this[t(491)].height/2-this[t(397)][t(511)]/2-20,width:this[t(397)][t(511)],height:this[t(397)][t(790)]}}draw(){const t=n;if(!this.maskInited){console.log(t(725)),this[t(607)][t(626)](),this.ctx[t(856)](),this.ctx.ellipse(this[t(491)][t(511)]/2,this[t(491)].height/2,this[t(397)][t(511)]/2,this[t(397)].height/2,Math.PI,0,2*Math.PI),this[t(607)].fillStyle=t(734),this[t(607)][t(554)](),this.ctx[t(524)]=t(598),this[t(607)][t(856)](),this[t(607)][t(862)](0,0,this[t(491)][t(511)],this[t(491)][t(790)]),this[t(607)][t(477)]=t(712),this[t(607)][t(440)](),this[t(607)][t(554)](),this.ctx[t(769)]=.5;let s=this[t(491)][t(789)]();this[t(607)].globalCompositeOperation=t(538);let i=new Image;i[t(441)]=(()=>{const s=t;this[s(607)][s(715)](0,0,this[s(491)].width,this.canvas[s(790)]),this[s(607)][s(658)](i,0,0)}),i[t(514)]=s,this[t(595)]=!0,this[t(422)]()}}show(){const t=n;this[t(595)]?(this[t(530)](),this.canvas.style[t(781)]=t(395)):(this.draw(),this[t(491)][t(738)][t(781)]=t(395))}hide(){const t=n;this.hideTextArea(),this[t(491)][t(738)][t(781)]=t(709)}delete(){const t=n;this[t(607)][t(715)](0,0,this[t(491)][t(511)],this[t(491)].height),this[t(607)][t(863)]()}}class p{constructor(t,s={}){const i=n;this[i(491)]=t,this[i(758)]={srcDim:{k:1,dx:0,dy:0,dw:0,dh:0}},this.options=o(this.options,s),this.cc=new u(this[i(758)][i(629)])}[n(878)](t,s,i){const e=n,h=new Path2D;h[e(633)](s[0][0],s[0][1]);for(let t=1;t<s[e(681)];t++){const i=s[t];h.lineTo(i[0],i[1])}i&&h[e(440)](),t[e(469)](h)}[n(767)](t){const s=n;this[s(758)][s(629)].k;let i=null,e=this[s(491)][s(763)]("2d");e[s(626)]();for(let h=0;h<t.length;h++){i=t[h].landMarks;for(let t=0;t<i.length;t++){const h=i[t][0],n=i[t][1];e.beginPath(),e[s(808)](this.cc.getCoordX(h),this.cc.getCoordY(n),1,0,2*Math.PI),e[s(554)](),e.closePath()}}e[s(863)]()}}class f{constructor(t){const s=n;this[s(525)]=t,this[s(680)]={}}on(t,s){const i=n;void 0===this[i(680)][t]&&(this[i(680)][t]=[]),typeof s==i(687)&&this[i(680)][t][i(516)](s)}remove(t,s){const i=n;for(const t in this[i(680)])this[i(680)][t]=this.observers[t][i(694)](t=>t!==s)}[n(832)](t,s){const i=n;this[i(680)][t]&&this[i(680)][t].forEach(t=>{typeof t==i(687)&&t(s)})}[n(752)](t){const s=n;this[s(680)][s(692)](i=>{i[s(692)](s=>{"function"==typeof s&&s(t)})})}}const g=new class{constructor(){this.streams={}}[n(433)](t){const s=n;return!this[s(884)][t]&&(this[s(884)][t]=new f(t)),this[s(884)][t]}};class w{constructor(){}static[n(540)](t,s,i,e,h){const o=n;let a=document.createElement("CANVAS");return a.width=e,a[o(790)]=h,a[o(763)]("2d")[o(658)](t,s,i,e,h,0,0,e,h),a}static[n(434)](t,s={w:null,h:null}){const i=n;let e=document.createElement(i(396));return null==s.w&&null==s.h?(e[i(511)]=t[i(511)],e[i(790)]=t[i(790)]):null==s.w?(e[i(790)]=s.h,e[i(511)]=s.h/t[i(790)]*t.width):null==s.h?(e[i(511)]=s.w,e[i(790)]=s.w/t[i(511)]*t[i(790)]):(e[i(511)]=s.w,e[i(790)]=s.h),e.getContext("2d")[i(658)](t,0,0,e[i(511)],e[i(790)]),e}static[n(639)](t,s,i,e,h,o,a){const c=n;let l=document.createElement(c(396));return l[c(511)]=o,l[c(790)]=a,l[c(763)]("2d").drawImage(t,s,i,e,h,0,0,o,a),l}static[n(657)](t){const s=n;let i=document.createElement("CANVAS");return i[s(511)]=t[s(511)],i[s(790)]=t[s(790)],i.getContext("2d").putImageData(t,0,0),i}static[n(806)](t){const s=n;let i=document[s(537)](s(396));return i[s(511)]=t[s(511)],i[s(790)]=t[s(790)],i[s(763)]("2d")[s(658)](t,0,0),i}static[n(700)](t){const s=n;return t[s(763)]("2d")[s(824)](0,0,t[s(511)],t[s(790)])}static[n(827)](t,s=n(803),i=.92){return t[n(789)](s,i)}static[n(517)](t,s=n(803),i=.92){return new Promise(function(e,n){const o=h;let a=new Image;a.setAttribute(o(565),o(788)),a[o(441)]=(()=>{e(a)}),a.onerror=(t=>{n(o(560)+t)}),a[o(514)]=w.canvasToBase64(t,s,i)})}static[n(400)](t){const s=n;let i=t[s(763)]("2d")[s(824)](0,0,t[s(511)],t[s(790)]),e=i[s(698)];for(let i=t[s(511)]*t.height*4-1;i>0;i-=4){let t=.3*e[i-3]+.59*e[i-2]+.11*e[i-1];e[i-3]=t,e[i-2]=t,e[i-1]=t}let h=document[s(537)]("CANVAS");return h[s(763)]("2d")[s(452)](i,0,0),h}static[n(653)](t,s,i=n(701)){const e=n;let h=document[e(537)]("CANVAS");h[e(511)]=t,h[e(790)]=s;let o=h[e(763)]("2d");return o[e(477)]=i,o[e(664)](0,0,t,s),h}static getLaplacianVariance(t,s=30){const i=n;let e=t.getContext("2d")[i(824)](0,0,t[i(511)],t[i(790)])[i(698)],h=[[0,1,0],[1,-4,1],[0,1,0]],o=4*t.width,a=0,c=Math.floor(1.5),l=0,r=0;for(let n=1;n<t[i(790)]-1;n++)for(let t=4;t<o-4;t+=4){l=0;for(let s=0;s<3;s++)for(let i=0;i<3;i++){l+=(.3*e[a=o*(n+s-c)+t+4*(i-c)]+.59*e[a+1]+.11*e[a+2])*h[s][i]}l>s&&(r+=1)}return r}static[n(710)](t){return new Promise(function(s,i){const e=h;let n=new Image;n.setAttribute(e(565),e(788)),n.onload=(()=>{s(n)}),n.onerror=(()=>{i(e(560)+t)}),n[e(514)]=t})}}class y{constructor(t={}){const s=n;this.worker=null,this.stream=null,this[s(758)]={path:null},this[s(758)]=o(this[s(758)],t),this[s(634)]()}[n(634)](){const t=n;this[t(494)]=g.open(t(498)),this[t(494)].on("getFace",this[t(437)].bind(this)),this.stream.on(t(787),this.getTinyFace[t(785)](this)),this[t(494)].on(t(660),this[t(660)][t(785)](this)),this.stream.on(t(431),this.getCard[t(785)](this)),window[t(829)]&&null!=this[t(758)][t(748)]?(this[t(498)]=new Worker(this[t(758)][t(748)]),this[t(498)][t(442)]=this.onWorkerMessage.bind(this)):console[t(398)](t(638))}[n(437)](t){const s=n;let i=null;if(t instanceof HTMLCanvasElement){i=t[s(763)]("2d")[s(824)](0,0,t[s(511)],t[s(790)])}else if(t instanceof HTMLImageElement){let e=document.createElement(s(491)),h=e[s(763)]("2d");e[s(511)]=t[s(511)],e.height=t.height,h[s(658)](t,0,0),i=h[s(824)](0,0,t[s(511)],t[s(790)])}this[s(498)][s(650)]({type:s(480),action:"getFace",data:i})}[n(787)](t){const s=n;let i=null;if(t instanceof HTMLCanvasElement){i=t[s(763)]("2d").getImageData(0,0,t[s(511)],t[s(790)])}else if(t instanceof HTMLImageElement){let e=document[s(537)](s(491)),h=e.getContext("2d");e[s(511)]=t[s(511)],e[s(790)]=t[s(790)],h[s(658)](t,0,0),i=h[s(824)](0,0,t.width,t[s(790)])}this[s(498)][s(650)]({type:s(480),action:"getTinyFace",data:i})}getCard(t){const s=n;let i=null;t instanceof HTMLCanvasElement?i=w[s(700)](t):t instanceof HTMLImageElement&&(i=w.imageToCanvas(t)),this[s(498)][s(650)]({type:"scan",action:s(431),data:i})}[n(660)](){const t=n;this.worker[t(650)]({type:t(719),action:t(660)})}[n(583)](t){const s=n;let i=t[s(698)].type,e=t.data[s(731)],h=t[s(698)].data;switch(i){case s(480):"faceDetected"===e?this[s(494)][s(832)]("onFaceResult",h):e===s(768)&&this[s(494)][s(832)]("onTinyFaceResult",h);break;case"scan":this[s(494)][s(832)]("onScanResult",h);break;case"scanLoaded":this[s(494)][s(832)](s(562),h)}}}const S=class{constructor(){const t=n;this[t(559)]=null,this[t(711)]={x:0,y:0,width:0,height:0},this[t(663)]=[],this[t(480)]=null,this[t(472)]=0,this.pitch=0,this[t(548)]=0}[n(728)](t){const s=n;this[s(480)]=t,this[s(711)]={x:t.x,y:t.y,height:t.height,width:t[s(511)]},this[s(663)]=t[s(793)],this[s(563)]()}clear(){const t=n;this[t(559)]=null,this[t(711)]={x:0,y:0,width:0,height:0},this[t(663)]=[],this.face=null,this.yaw=0,this[t(775)]=0,this.roll=0}[n(563)](){const t=n;let s=this[t(480)].landMarks[234],i=this[t(480)][t(793)][454],e=this[t(480)].landMarks[10],h=this.face.landMarks[152];this[t(472)]=180*Math[t(549)](i[2]-s[2],i[0]-s[0])/Math.PI,this.pitch=180*Math[t(549)](h[0]-e[0],h[2]-e[2])/Math.PI,this[t(548)]=180*Math[t(549)](i[1]-s[1],i[0]-s[0])/Math.PI}[n(462)](){}[n(749)](){return this[n(711)]}[n(800)](){return this[n(663)]}},C={FORWARD:n(489),LEFT:n(412),RIGHT:n(510),UP:"up",DOWN:"down",SMILE:n(746),BLINKING:"blinking",NONE:n(709)};class T{constructor(){const t=n;this[t(873)]=[],this.count=2,this[t(818)]=[C[t(684)],C[t(596)],C.UP,C[t(672)],C[t(840)]],this[t(720)]=0}[n(528)](){const t=n;this[t(518)]();for(let s=0;s<this.count;s++)this[t(873)][t(516)]({name:C[t(783)]});return this[t(873)]}[n(536)](){const t=n;return this[t(720)]<this[t(873)].length-1?(this[t(720)]++,this.commands[this[t(720)]]):null}[n(405)](){const t=n;return this[t(873)][this[t(720)]]}hasCommand(){const t=n;return this[t(720)]<this[t(873)][t(681)]-1}[n(518)](){this[n(720)]=0,this.commands=[]}}n(567),n(610),n(739),n(481),n(754);const v={NONE:"none",UP:"up",DOWN:n(502),FORWARD:n(489),LEFT:n(412),RIGHT:n(510)},D={NONE:n(709),INIT:n(797),START:n(418),ACTIONS:"actions",FINISH:n(830)},b={SUCCESS:n(402),NONE:"none",REJECT:n(569)};class x{constructor(t,s={}){const i=n;this[i(491)]=t,this[i(758)]={video:null,area:{x:0,y:0,width:0,height:0},detectTime:100,startingWaitTime:2e3,onFaceDetected:null,onError:null,onFinished:null,onCommand:null,onCommandResult:null,onStep:null,onStartDownCount:null},this[i(758)]=o(this.options,s),this[i(805)]=null,this[i(741)]={lowLight:!1,highLight:!1,noFace:!1,manyFace:!1,outOfBounds:!1},this[i(449)]=v[i(461)],this[i(494)]=null,this.headpos=new S,this.commander=new T,this[i(515)]=!1,this[i(570)]=[],this.step=D.NONE,this.detectedFaceCountDownBeforeStart=3,this[i(586)]=0,this.errorTime=0,this[i(432)]=2e3,this[i(488)]=6e3,this.actionWaitBeforeCheck=1e3,this[i(779)]=2e3,this[i(796)]=!1,this[i(750)]=null,this[i(611)]=[],this.currentCommand=C[i(461)],this[i(473)]=v.NONE,this[i(496)]=[],this.cc=null,this[i(682)]()}[n(682)](){const t=n;this[t(494)]=g.open(t(498)),this[t(494)].on(t(670),s=>{const i=t;null!=this.detectTimer&&(this[i(505)](s),this[i(515)]=!1)})}start(){const t=n;this[t(515)]=!1,this[t(570)]=[],this[t(796)]=!1,this[t(457)]=D.INIT,this[t(611)]=[],this.detectedFaceCountDownBeforeStart=3,this[t(750)]=(new Date)[t(621)](),this[t(465)](),this[t(683)](this[t(457)]),clearTimeout(this[t(805)]),this[t(805)]=setTimeout(this.observe[t(785)](this),this[t(758)][t(527)])}[n(499)](){const t=n;this.tid=null,clearTimeout(this.detectTimer),this.detectTimer=null,this.lock=!1,this[t(518)]()}[n(518)](){const t=n;this[t(570)]=[],this[t(457)]=D[t(461)],this[t(541)]=3,this[t(473)]=v[t(461)],this.currentActionList=[],this.currentStepActive=!1}[n(465)](){const t=n;let s=this[t(714)].shuffle();for(let i in s)this[t(611)][t(516)]({pos:v[t(461)],image:null,command:C[t(461)],status:!1});console[t(398)](t(465),s)}observe(){const t=n;!this[t(515)]&&(this[t(494)][t(832)](t(437),this.canvas),this[t(515)]=!0),this.detectTimer=setTimeout(this[t(635)][t(785)](this),this[t(758)].detectTime)}[n(505)](t){const s=n;if(this[s(741)].noFace=!1,this[s(741)][s(814)]=!1,this[s(449)]=v[s(461)],t[s(681)]>1)this[s(741)][s(814)]=!0;else if(0===t[s(681)])return this[s(741)].noFace=!0,typeof this.options.onFaceDetected===s(687)&&this[s(758)][s(505)]([]),void(this.lock=!1);this[s(570)]=t,typeof this[s(758)][s(505)]===s(687)&&this[s(758)].onFaceDetected(t),this.detectedFaceCountDownBeforeStart>0?(this.detectedFaceCountDownBeforeStart--,this[s(586)]=(new Date)[s(621)](),this[s(844)]=(new Date)[s(621)]()):(this[s(589)][s(728)](t[0]),this[s(484)](),this[s(874)]()),this[s(515)]=!1}[n(830)](t,s){const i=n;if(null==this[i(750)])return!1;let e={tid:this[i(750)],status:s,results:this[i(611)],image:null};for(let t in this.results)if(this[i(611)][t][i(450)]===C[i(783)]&&!0===this[i(611)][t][i(702)]){e[t].image=this[i(611)][t][i(423)];break}typeof this[i(758)][i(853)]===i(687)&&this[i(758)][i(853)](e),this[i(499)]()}defineCurrentAction(){const t=n;let s=this[t(589)].getBox(),i={x:this.cc[t(579)](s.x),y:this.cc[t(842)](s.y),width:this.cc.getSize(s.width),height:this.cc[t(673)](s.height)},e=.3*this.options[t(393)][t(511)],h=.3*this[t(758)][t(393)].height,o=i.x+i.width,a=i.y+i[t(790)];if(!(i.x>this[t(758)][t(393)].x-e&&i.y>this[t(758)][t(393)].y-h&&o<this[t(758)].area.x+this.options.area.width+e&&a<this[t(758)].area.y+this.options[t(393)].height+h))return this[t(741)][t(837)]=!0,!1;this[t(741)][t(837)]=!1,this[t(589)][t(548)]<12&&this[t(589)][t(548)]>-12&&this.headpos[t(775)]<=-20&&this[t(589)][t(775)]>=-130&&this[t(589)][t(472)]>=-10&&this.headpos[t(472)]<=10&&(this.currentAction=v.FORWARD),this.headpos.roll<12&&this.headpos[t(548)]>-12&&this[t(589)][t(472)]<-10&&(this.currentAction=v[t(684)]),this.headpos[t(548)]<12&&this[t(589)].roll>-12&&this.headpos[t(472)]>10&&(this[t(473)]=v.RIGHT),this[t(589)].roll<12&&this[t(589)].roll>-12&&this[t(589)].pitch<-130&&(this[t(473)]=v.UP),this[t(589)][t(548)]<12&&this[t(589)][t(548)]>-12&&this[t(589)][t(775)]>-20&&(this[t(473)]=v.DOWN)}[n(874)](){const t=n;let s=this[t(470)](),i=this.getTimeDiff(this[t(586)]);if(s?(this[t(449)]=v.NONE,this.callError(this[t(741)])):this[t(844)]=(new Date)[t(621)](),this.step===D.INIT&&(this[t(796)]=!1,this.step=D[t(547)],this.callStepChange(this.step)),this.step===D[t(547)]){let s=Math.round((this[t(758)][t(757)]-i)/1e3);s>0?"function"==typeof this[t(758)][t(475)]&&this[t(758)][t(475)](s):(this.step=D[t(544)],this[t(796)]=!1,this[t(586)]=(new Date).getTime(),this.sessionTime=(new Date).getTime(),this[t(683)](this[t(457)]))}if(this[t(457)]===D[t(544)]&&(!1===s||0===this[t(432)])){let s=this[t(714)][t(720)],e=this.commander.current();this[t(753)]!==e[t(525)]&&(this.currentCommand=e[t(525)],this.currentActionList=[],this[t(605)](e[t(525)])),i>0&&this[t(496)].push({pos:this[t(473)],posPitch:this.headpos[t(775)],posYaw:this.headpos.yaw,time:(new Date)[t(621)](),valid:!0,command:e});let h=this[t(488)]+this[t(759)]-i,n=i>this[t(759)]?this[t(855)](e[t(525)],this.currentAction):b[t(461)];if(h>0&&n===b[t(461)]);else if(i>this[t(759)]){let i=w[t(540)](this[t(491)],this[t(589)][t(711)].x,this[t(589)][t(711)].y,this[t(589)].box[t(511)],this[t(589)].box[t(790)]);n===b[t(782)]?this[t(611)][s]={pos:this[t(473)],command:e,status:!0,image:i}:this[t(611)][s]={pos:this.currentAction,command:e,status:!1,image:i},this.callCommandResult(this[t(611)][s]),this[t(714)][t(679)]()?this[t(714)].next():(this[t(457)]=D[t(392)],this[t(589)][t(518)](),this.callStepChange(this[t(457)])),this[t(586)]=(new Date)[t(621)]()}}if(this.step===D[t(392)]){this[t(779)]-i>0||(this[t(457)]=D[t(392)],this.fixedTime=(new Date)[t(621)](),this[t(830)](!0,!0))}}[n(855)](t,s){const i=n;let e={},h=C.NONE,o=C[i(461)],a={};for(let t in this[i(496)]){let s=this[i(496)][t];null!=s&&s[i(686)]&&(null!=s[i(577)]&&(h=this[i(571)](s[i(577)])),null==e[h]&&(e[h]={list:[],max:0}),e[h]=this[i(875)](e[h],s,o!==h),a[h]=(a[h]||0)+1,o=h)}let c=a[i(681)];if(t===C[i(684)]||t===C.UP||t===C[i(596)]||t===C[i(672)]){if(c>3)return b[i(451)];if(null!=e[t]&&e[t].max>1e3)return b[i(782)]}if(t===C.FORWARD){if(c>=3)return b[i(451)];if(null!=e[t]&&e[t][i(542)]>1e3)return b.SUCCESS}return b.NONE}callStepChange(t){const s=n;typeof this[s(758)][s(733)]===s(687)&&this.options.onStep(t)}callError(t){const s=n;typeof this[s(758)][s(780)]===s(687)&&this.options[s(780)](t)}[n(605)](t){const s=n;typeof this[s(758)][s(651)]===s(687)&&this.options[s(651)](t)}callCommandResult(t){const s=n;typeof this[s(758)][s(456)]===s(687)&&this[s(758)][s(456)](t)}[n(534)](){return this[n(570)]}[n(470)](){const t=n;for(const s in this[t(741)])if(!0===this[t(741)][s])return!0;return!1}[n(455)](t){const s=n;return(new Date)[s(621)]()-t}[n(571)](t){const s=n;switch(t){case v.LEFT:return C.LEFT;case v.UP:return C.UP;case v[s(596)]:return C.RIGHT;case v.DOWN:return C[s(672)];case v[s(783)]:return C[s(783)];default:return C[s(461)]}}addActionTime(t,s,i){const e=n;let h=t,o=0;return h[e(458)][e(681)]>0&&null!=h[e(458)][o].start&&i?(o=h[e(458)].length-1,null!=s[e(474)]&&(h.list[o][e(811)]=s[e(474)],h[e(458)][o][e(778)]=s[e(474)]-h[e(458)][o][e(418)],h[e(542)]=(h.list[o][e(778)]||0)>h[e(542)]?h[e(458)][o][e(778)]||0:h[e(542)])):h[e(458)][e(516)]({start:s.time,end:null,interval:null}),h}}class k{constructor(t,s={}){const i=n;this[i(872)]=null,this.canvas=null,this[i(662)]=null,this[i(572)]={start:!1,detectInit:!1,analyzeAfterOpen:!1},this[i(758)]={src:null,sourceType:null,width:640,height:480,liveness:!0,onFrameCaptured:null,detectTime:100,onFinished:null,worker_path:i(443)},this[i(758)]=o(this[i(758)],s),this[i(879)](t),this[i(634)]()}initContainer(t){const s=n;this[s(662)]=new d(t,{src:this.options[s(514)],width:this[s(758)][s(511)],height:this[s(758)][s(790)],onFrameUpdated:this[s(573)][s(785)](this),onLoaded:this[s(828)][s(785)](this),onStart:this[s(464)][s(785)](this),onStop:this[s(585)][s(785)](this)}),this[s(872)]=this[s(662)].dom,this[s(491)]=this[s(662)].canvas}[n(634)](){const t=n;this.cc=new u(this.camera.sourceDim),this.faceMask=new m(this[t(872)],{width:this[t(758)].width,height:this[t(758)].height}),this.visual=new p(this[t(491)]),this[t(436)]=new y({path:this[t(758)][t(825)]}),this.analyser=new x(this[t(662)][t(732)],{area:this[t(568)].getArea(),detectTime:this[t(758)].detectTime,onFaceDetected:this[t(505)][t(785)](this),onError:this[t(780)][t(785)](this),onFinished:this[t(853)][t(785)](this),onCommand:this[t(651)][t(785)](this),onCommandResult:this.onCommandResult[t(785)](this),onStep:this[t(733)][t(785)](this),onStartDownCount:this.onStartDownCount[t(785)](this)}),this[t(487)].cc=this.cc}[n(433)](){const t=n;!this[t(662)].isPlaying()&&(this[t(662)].start(),this[t(568)][t(535)]())}[n(697)](){const t=n;this.stop(),this[t(662)][t(499)](),this[t(568)][t(774)]()}[n(418)](){const t=n;this[t(662)][t(675)]()?(this[t(572)].start=!0,this[t(487)][t(418)]()):(this[t(433)](),this[t(572)][t(724)]=!0)}stop(){const t=n;this[t(572)][t(418)]=!1,this[t(487)][t(499)](),this[t(572)].analyzeAfterOpen=!1}[n(853)](t,s){const i=n;console.log("finished"),this.faceMask[i(727)]("Finished"),typeof this[i(758)].onFinished==i(687)&&this.options[i(853)](t,s)}[n(505)](t){}onCommand(t){const s=n;console[s(398)]("onCommand",t);let i="";switch(t){case C[s(783)]:i=s(723);break;case C[s(684)]:i=s(744);break;case C[s(596)]:i=s(751);break;case C.UP:i=s(482);break;case C[s(672)]:i=s(770);break;default:i=""}this[s(568)][s(727)](i)}[n(456)](){}onStep(t){const s=n;console[s(398)](s(773),t);let i="";switch(t){case D[s(795)]:i=s(519);break;case D[s(547)]:i=s(574);break;case D[s(544)]:i=s(429);break;case D[s(392)]:i=s(593);break;default:i=""}this[s(568)][s(727)](i)}onStartDownCount(t){const s=n;console[s(398)](s(475),t)}[n(780)](t){const s=n;console.log(s(780),t)}onFrameUpdated(){const t=n;let s=this[t(487)][t(534)]();this[t(460)][t(767)](s)}[n(828)](t,s){const i=n;this.cc[i(736)](s),this.visual.cc[i(736)](s),this[i(487)][i(758)].video=t}[n(464)](){const t=n;this[t(572)].analyzeAfterOpen&&(this[t(572)][t(724)]=!1,this.start())}[n(585)](){}[n(649)](t){const s=n;this[s(872)]&&(this.dom[s(882)][s(821)](s(642)),this[s(872)][s(882)][s(821)]("blur"),t&&(this[s(872)][s(882)][s(561)](s(642)),this[s(872)][s(882)][s(561)]("blur")))}}class I{constructor(t={}){const s=n;this.options={host:null,headers:null,serverSide:null,modelUrl:null,mirrored:!0,single:!0},this[s(479)]=null,this[s(665)]=!1,this[s(745)]=null,this[s(758)]=o(this[s(758)],t),this[s(628)]={width:0,height:0},this.croppedSize={x:0,y:0,width:0,height:0},this[s(616)]={width:300,height:300},this[s(758)][s(417)]||this.initWorker()}[n(860)](){const t=n;this[t(758)][t(417)]=r[t(532)]()||r[t(399)]()}[n(682)](){const t=n;this[t(494)]=g[t(433)](t(545)),this[t(494)].on(t(817),s=>{const i=t;if(typeof this[i(479)]===i(687)){let t=this[i(394)](s,!0);this[i(479)](t)}}),this[t(494)].on(t(562),s=>{const i=t;console[i(398)](i(632)),this[i(665)]=s})}[n(521)](){const t=n;if(this[t(758)][t(417)]){let s=(null!=this[t(758)][t(439)]?a[t(722)](this.options[t(439)]):"")+"/card/ready",i=o({"Content-Type":"application/json"},this[t(758)][t(669)]||{});fetch(s,{method:t(550),headers:i}).then(s=>s[t(495)]())[t(661)](s=>{const i=t;this[i(665)]=s.success,console[i(398)](i(504),s)})[t(721)](s=>{const i=t;this[i(665)]=!1,console[i(543)](i(620),s)})}else this[t(494)][t(832)](t(660))}[n(623)](t=null){const s=n;let i=(null!=this.options[s(439)]?a.cutLastSlash(this[s(758)][s(439)]):"")+"/"+s(418),e=o({"Content-Type":"application/json"},this[s(758)].headers||{});fetch(i,{method:s(550),headers:e})[s(661)](t=>t[s(495)]())[s(661)](i=>{const e=s;this[e(745)]=i[e(750)]||null,console[e(398)](e(504),i),typeof t===e(687)&&t(this.loaded,this[e(745)])})[s(721)](t=>{const i=s;this[i(745)]=null,console.error(i(620),t)})}detect(t,s,i){const e=n;if(this.options[e(417)]){let h=w[e(827)](t,e(446),.95),n=new FormData;n[e(426)](e(423),h),n[e(426)](e(411),"0"),n[e(426)](e(750),s);let c=(null!=this.options[e(439)]?a[e(722)](this[e(758)][e(439)]):"")+"/"+e(415),l=o({},this.options.headers||{});fetch(c,{method:e(587),body:n,headers:l}).then(function(t){const s=e;if(t.ok)return t[s(495)]();console[s(543)](s(620),t),typeof i===s(687)&&i(null)})[e(661)](t=>{const s=e;console.log(s(699),t);let h=[];if(!0===t.success&&void 0!==t.data&&(h=t.data),h[s(681)],typeof i===s(687)){let t=this[s(394)](h);i(t)}})[e(721)](t=>{const s=e;console[s(543)]("Error:",t),typeof i===s(687)&&i(null)})}else{this[e(479)]=i;let s=this[e(627)](t);this[e(494)][e(832)]("getCard",s)}}[n(838)](){return this[n(665)]}[n(627)](t){const s=n;let i={x:0,y:0,w:t[s(511)],h:t[s(790)]};return t[s(511)]>t[s(790)]?(i.w=t[s(790)],i.x=(t[s(511)]-i.w)/2):(i.h=t.width,i.y=(t[s(790)]-i.h)/2),this[s(628)]={x:t[s(511)],y:t[s(790)]},this[s(410)]=i,w.cropAndResizeCanvas(t,i.x,i.y,i.w,i.h,this[s(616)][s(511)],this.inputSize[s(790)])}[n(704)](t,s){const i=n;let e=1;switch(s){case"x":return t*(e=this[i(410)].w/this[i(616)].width)+this[i(410)].x;case"y":return t*(e=this.croppedSize.h/this[i(616)][i(790)])+this.croppedSize.y;case i(511):return t*(e=this[i(410)].w/this[i(616)][i(511)]);case"height":return t*(e=this[i(410)].h/this[i(616)][i(790)])}}[n(394)](t,s=!1){const i=n;let e=[],h=null,o=!1;for(let n in t){h=t[n],s&&(h[i(438)][0]=this[i(704)](h[i(438)][0],"x"),h[i(438)][1]=this[i(704)](h[i(438)][1],"y"),h[i(438)][2]=this[i(704)](h[i(438)][2],i(511)),h[i(438)][3]=this[i(704)](h[i(438)][3],i(790))),o=!1;for(let t in e)if(e[t][i(674)]===h[i(674)]){let s=e[t],n=h,a=0,c=0;n[i(438)][0]>s[i(438)][0]&&n[i(438)][0]<s.bbox[0]+s[i(438)][2]?c=(a=s.bbox[0]+s[i(438)][2]-n.bbox[0])/n[i(438)][2]:s.bbox[0]>n[i(438)][0]&&s[i(438)][0]<n[i(438)][0]+n[i(438)][2]&&(c=(a=n[i(438)][0]+n[i(438)][2]-s[i(438)][0])/s[i(438)][2]);let l=0,r=0;n[i(438)][1]>s.bbox[1]&&n[i(438)][1]<s[i(438)][1]+s[i(438)][3]?(l=s[i(438)][1]+s[i(438)][3]-n.bbox[1],r=a/n[i(438)][3]):s[i(438)][1]>n.bbox[1]&&s.bbox[1]<n[i(438)][1]+n[i(438)][3]&&(l=n[i(438)][1]+n[i(438)][3]-s.bbox[1],r=a/s.bbox[3]),c>.6&&r>.6&&(o=!0,n[i(463)]>s[i(463)]&&(e[t]=h))}!o&&e[i(516)](t[n])}if(this[i(758)][i(707)]&&e[i(681)]>0){let t=0,s=0;for(let h in e)e[h][i(463)]>t&&(t=e[h].score,s=h);return[e[s]]}return e}[n(689)](){this[n(745)]=null}}class F{constructor(t={}){const s=n;this.options={server:!0,url:null,host:null,checkURI:null},this[s(758)]=o(this.options,t),null==this[s(758)].checkURI&&(this[s(758)][s(613)]="mrzcheck"),this[s(665)]=!1,this[s(634)]()}[n(634)](){const t=n;this[t(758)][t(408)]}[n(521)](){const t=n;this[t(758)][t(408)]&&(this[t(665)]=!0)}[n(424)](t,s,i){const e=n;this[e(758)].server&&this[e(520)](t,s,i)}[n(520)](t,s,i){const e=n;let h=w.canvasToBase64(t,e(446),.9),o=new FormData;o.append(e(423),h),o[e(426)]("tid",s);let c=null!=this[e(758)].host?a.cutLastSlash(this[e(758)][e(439)]):"",l=null!=this[e(758)][e(600)]?this[e(758)][e(600)]:c+"/"+this.options[e(613)];fetch(l,{method:e(587),body:o})[e(661)](t=>t.json())[e(661)](t=>{const s=e;console[s(398)](s(699),t);let h=F[s(580)](t[s(698)]);!1===t[s(402)]&&(h[s(411)]=null),typeof i===s(687)&&i(h)}).catch(t=>{const s=e;console[s(543)](s(620),t),typeof i===s(687)&&i(null)})}[n(688)](t,s){}parse(t){const s=n;let i={type:null,text:t,object:null};if(i[s(430)]>75){const e=t[s(625)](0,3);e.includes("I<")||e.includes("1<")?i[s(411)]="I":(e.includes("P<")||e[s(466)]("PC"))&&(i[s(411)]="P")}return i}static parseObject(t){const s=n;let i={type:null,text:t[s(453)][s(637)](""),object:t};if(i.text[s(681)]>75){const e=t[s(606)];e[s(466)]("I<")||e[s(466)]("1<")?i[s(411)]="I":(e.includes("P<")||e.includes("PC"))&&(i[s(411)]="P")}return i}}const A={NO_CARD:n(866),MANY_CARDS:"manycards",LOW_LIGHT:n(739),HIGH_LIGHT:n(481),TOO_SMALL:n(526)},E={NONE:"none",ID:"id",PASSPORT:n(716)},O={NONE:n(709),ID_FRONT:n(850),ID_BACK:n(713),PASS_FRONT:"pass_front"},R={NONE:n(709),SHOW:n(535),ID_BACK:n(713),FINISH:n(830)},N={NONE:n(709),SCANNING:n(575),FINISH:n(830)};class M{constructor(t,s={}){const i=n;this[i(491)]=t,this[i(758)]={host:null,headers:null,mrzOptions:null,detector:null,video:null,area:{x:0,y:0,width:0,height:0},detectTime:100,useServerSide:null,onCardDetected:null,onFaceDetected:null,onMRZDetected:null,onDetected:null,onError:null,onFinished:null,onCommand:null,onCommandResult:null,onStepChanged:null,mirrored:!0,delay:500,serverDelay:500,cardMinSize:{width:70,height:55}},this[i(758)]=o(this.options,s),this.stream=null,this[i(870)]=!1,this[i(497)]=null,this.step=N.NONE,this[i(612)]=null,this[i(485)]={},this[i(486)]={},this[i(869)]=null,this[i(492)]=null,this[i(594)]=null,this[i(454)]=null,this[i(597)]=null,this[i(740)]=this.options[i(740)],this.tID=null,this[i(758)][i(659)]&&(this[i(740)]=this[i(758)][i(747)]),this[i(831)]=new I({mirrored:this[i(758)][i(646)],single:!0,serverSide:this.options[i(659)],host:this[i(758)][i(439)],headers:this[i(758)][i(669)]}),this[i(676)]=new F({host:this.options[i(439)],url:this[i(758)][i(401)]&&this[i(758)].mrzOptions[i(600)]||null}),this.cc=null,this.reset(),!this.options[i(659)]&&this[i(682)]()}[n(797)](){const t=n;this[t(831)].load(),this.mrz.load(),null!=this[t(494)]&&w.getImageFromURL("/img/face.jpg")[t(661)](s=>{const i=t;this[i(494)][i(832)](i(787),s)})}[n(682)](){const t=n;this[t(494)]=g[t(433)](t(498)),this.stream.on(t(604),s=>{const i=t;console[i(398)]("onFaceResult",s),this.step===N[i(671)]&&null!=this[i(612)]&&this[i(505)](s)})}[n(624)](t,s){const i=n;this.detector[i(838)]()&&this[i(831)][i(500)](t,t=>{typeof s===i(687)&&s(t)})}[n(635)](){const t=n;if(this.detector[t(838)]()&&null!=this[t(531)]){{let s=(new Date)[t(621)]();if(this.step===N[t(461)]&&s-this[t(454)]>1e3)this[t(457)]=N[t(671)],this[t(557)](R[t(819)]);else{if(this.step===N[t(461)])return;if(this[t(457)]===R[t(392)])return void(null!=this.finishTime&&s-this.finishTime>2e3&&(this[t(830)](),this[t(597)]=null))}}!this.detectionLocked&&(this[t(612)]=null,this.scanned={card:!1,face:!1,mrz:!1},this[t(870)]=!0,this[t(492)]=this[t(491)],this[t(869)]=w[t(700)](this[t(492)]),this[t(831)][t(500)](this[t(492)],this[t(531)],s=>{this[t(503)](s)}))}}[n(503)](t){const s=n;let i=null!=t&&t.length>0?t[0]:null,e=null;this.scanned[s(717)]=!0;let h=null!=i&&this[s(786)](i[s(438)]);if(null!=i&&!h&&this[s(777)](A.TOO_SMALL),null!=i&&!0===h){console.log(s(648),t);let h={docType:this.defineScanType(i.class),docFace:this[s(857)](i[s(674)]),card:i,face:null,mrz:null,image:null};this.curScan=h;let n=w[s(657)](this[s(869)]);if(e=w[s(540)](n,i.bbox[0],i[s(438)][1],i[s(438)][2],i[s(438)][3]),h[s(423)]=e[s(789)](s(446),.9),this.cardImage=e,0!==this[s(486)][s(404)][s(681)]||h[s(861)]!==O[s(764)]&&h[s(861)]!==O[s(854)])if(this[s(486)][s(404)][s(681)]>0&&this[s(486)].docType===E.ID&&h[s(861)]===O[s(794)]){let t=.6*e[s(790)],h=w[s(540)](e,0,t,e[s(511)],e.height-t);if(void 0===i[s(676)]||null==i[s(676)]){w.getLaplacianVariance(h,10)>10?this[s(676)][s(424)](h,this[s(531)],t=>{this[s(509)](t)}):this.unlock(this[s(740)])}else this[s(509)](i.mrz);this[s(485)][s(480)]=!0}else this[s(478)](this[s(740)]);else if(void 0===i[s(480)]||null==i[s(480)]?this[s(494)][s(832)](s(787),e):this[s(505)]([i[s(480)]]),h[s(861)]===O[s(854)]){let t=.7*e.height,h=w[s(540)](e,0,t,e.width,e[s(790)]-t);if(void 0===i.mrz||null==i[s(676)]){w[s(468)](h)>5?this[s(676)][s(424)](h,this[s(531)],t=>{this.onMRZDetected(t)}):this[s(478)](this[s(740)])}else this[s(509)](i[s(676)])}else this.scanned[s(676)]=!0;this[s(428)](t),this[s(812)]()}else this[s(428)]([]),this[s(427)]([]),this[s(478)](this[s(740)])}[n(786)](t){const s=n;let i=this[s(492)].width,e=this[s(492)][s(790)],h=this.options[s(647)];return null!=t&&t.length>=4&&(t[2]/i*100>h[s(511)]||t[3]/e*100>h.height)}onFaceDetected(t){const s=n;if(console[s(398)](s(505),t),this[s(485)][s(480)]=!0,null!=this[s(612)]){if(this[s(612)][s(480)]=null,t[s(681)]>0){let i=w[s(540)](this[s(594)],t[0].x,t[0].y,t[0][s(511)],t[0][s(790)]),e=w[s(468)](i,10);console[s(398)]("face laplacian",e),e>10&&(this[s(612)][s(480)]=t)}typeof this[s(758)][s(505)]===s(687)&&this.options[s(505)](t),this[s(812)]()}}onMRZDetected(t){const s=n;console[s(398)]("onMRZDetected",t),this.scanned.mrz=!0,null!=this[s(612)]&&(null!=t&&null!=t[s(566)]&&!0===t[s(566)][s(590)]?this.curScan[s(676)]=t:null!=t&&!0===t[s(590)]?this.curScan[s(676)]=F[s(580)](t):this.curScan.mrz=null,typeof this[s(758)][s(509)]===s(687)&&this[s(758)][s(509)](t),this[s(812)]())}checkScanResult(){const t=n;if(!this[t(880)]())return;let s=this[t(612)],i=!1;0!==this.result[t(404)][t(681)]||s.docFace!==O[t(764)]&&s.docFace!==O[t(854)]?1===this[t(486)].scans.length&&this[t(486)].docType===E.ID&&s[t(861)]===O.ID_BACK&&null!=s[t(717)]&&null!=s[t(676)]&&null!=s[t(676)].type&&(this[t(486)][t(404)].push(s),this.result[t(702)]=!0,this[t(427)](this[t(612)]),this[t(576)](N.FINISH),this[t(597)]=(new Date)[t(621)](),i=!0):s.docFace===O[t(764)]?null!=s[t(717)]&&null!=s[t(480)]&&1===s[t(480)][t(681)]&&(this.result[t(404)][t(516)](s),this[t(486)][t(533)]=E.ID,this[t(486)][t(702)]=!1,this.callDetectedEvent(this.curScan),this.fireCommand(R.ID_BACK),i=!0,this[t(478)](this[t(740)])):null!=s[t(717)]&&null!=s.face&&null!=s[t(676)]&&null!=s.mrz[t(411)]&&(this[t(486)][t(404)][t(516)](s),this.result.docType=E[t(555)],this[t(486)][t(702)]=!0,this[t(427)](this.curScan),this.changeStep(N[t(392)]),this[t(597)]=(new Date)[t(621)](),i=!0),!i&&this[t(485)].card&&this[t(485)][t(480)]&&this[t(485)][t(676)]&&this[t(478)](this[t(740)])}[n(880)](){const t=n;for(let s in this[t(485)])if(!0!==this[t(485)][s])return!1;return!0}[n(576)](t){const s=n;this[s(457)]!==t&&(this[s(457)]=t,typeof this[s(758)][s(773)]==s(687)&&this[s(758)][s(773)](t))}[n(428)](t){const s=n;null!==t&&typeof this[s(758)][s(503)]===s(687)&&this[s(758)][s(503)](t)}[n(427)](t){const s=n;"function"==typeof this[s(758)].onDetected&&this[s(758)][s(425)](t)}callError(t){const s=n;"function"==typeof this[s(758)].onError&&this[s(758)][s(780)](t)}[n(695)](){return this[n(457)]}[n(478)](t=null){const s=n;t=null==t?this[s(740)]:t,clearTimeout(this.timeID),this[s(497)]=setTimeout(()=>{this[s(870)]=!1},t)}reset(){const t=n;this[t(457)]=R[t(461)],this[t(486)]={status:!1,docType:E[t(461)],scans:[],tID:null},this[t(612)]=null,this[t(485)]={},this[t(870)]=!1,this[t(594)]=null,this.tID=null,this[t(831)].reset()}[n(418)](){const t=n;this[t(457)]=N[t(461)],this[t(557)](R[t(461)]),this[t(454)]=(new Date).getTime(),this[t(831)][t(758)][t(417)]?this[t(831)].startSession((s,i)=>{const e=t;this.tID=i,this[e(486)][e(531)]=this[e(531)]}):(this[t(531)]=String(this[t(454)]+Math.round(1e5*Math.random())),this[t(486)][t(531)]=this.tID)}[n(830)](){const t=n;this[t(557)](R[t(392)]),typeof this[t(758)].onFinished===t(687)&&this.options[t(853)](this[t(486)])}fireCommand(t){const s=n;typeof this.options[s(651)]===s(687)&&this[s(758)].onCommand(t)}[n(693)](t){const s=n;switch(t){case s(850):case"id_back":return E.ID;case s(609):return E[s(555)];default:return E[s(461)]}}[n(857)](t){const s=n;switch(t){case"id_front":return O[s(764)];case s(713):return O.ID_BACK;case s(609):return O[s(854)];default:return O[s(461)]}}[n(847)](){return this[n(457)]}}class L{constructor(t,s={}){const i=n;this[i(491)]=t,this[i(758)]={srcDim:{k:1,dx:0,dy:0,dw:0,dh:0},mirrored:!0},this[i(758)]=o(this[i(758)],s),this.cc=new u(this.options[i(629)])}drawPath(t,s,i){}[n(755)](){}[n(490)](t){const s=n;let i=t.width+20,e=t[s(790)]+20,h=(this[s(491)].width-i*this.canvas.width/100)/2,o=(this[s(491)].height-e*this[s(491)][s(790)]/100)/2,a=this[s(491)][s(763)]("2d");a.save(),a[s(856)](),a.lineWidth="3",a[s(523)]=s(726),a[s(862)](h,o,this[s(491)][s(511)]-2*h,this[s(491)][s(790)]-2*o),a[s(469)](),a.closePath(),a.restore()}[n(801)](t,s=n(868),i=""){const e=n;let h=this.canvas[e(763)]("2d"),o=null,a=null,c=null;for(let n in t)c=t[n],o=this[e(758)][e(646)]?this[e(491)].width-this.cc[e(579)](c[e(438)][0])-this.cc.getSize(c.bbox[2]):this.cc[e(579)](c[e(438)][0]),a=this.cc[e(842)](c.bbox[1]),h.beginPath(),h[e(756)]="2",h.strokeStyle=s,h[e(862)](o,a,this.cc.getSize(c.bbox[2]),this.cc[e(673)](c.bbox[3])),h[e(469)](),h.lineWidth="0",h[e(477)]=s,h[e(664)](o-1,a-20,150,20),h.font=e(506),h.fillStyle="white",h[e(546)]=e(412),h[e(471)](c[e(674)]+" "+Number(c.score)[e(816)](2),o+5,a-5),h[e(469)](),h[e(603)]=e(552),h[e(477)]=s,h[e(546)]=e(501),h.fillText(i,o+this.cc[e(673)](c[e(438)][2])/2,a+this.cc[e(673)](c.bbox[3])/2),h[e(440)]();h[e(863)]()}}class P{constructor(t={}){const s=n;this[s(498)]=null,this[s(494)]=null,this[s(758)]={path:null},this[s(758)]=o(this[s(758)],t),this.setup()}[n(634)](){const t=n;this.stream=g[t(433)](t(545)),this[t(494)].on(t(660),this.loadCard[t(785)](this)),this[t(494)].on(t(431),this[t(431)].bind(this)),window.Worker&&null!=this[t(758)][t(748)]?(this[t(498)]=new Worker(this[t(758)][t(748)]),this[t(498)].onmessage=this[t(583)][t(785)](this)):console[t(398)](t(638))}[n(431)](t){const s=n;let i=null;t instanceof HTMLCanvasElement?i=w.canvasToImageData(t):t instanceof HTMLImageElement&&(i=w[s(806)](t)),this[s(498)][s(650)]({type:s(719),action:s(431),data:i})}[n(660)](){const t=n;this.worker[t(650)]({type:"scan",action:t(660)})}onWorkerMessage(t){const s=n;let i=t[s(698)][s(411)],e=(t.data[s(731)],t[s(698)][s(698)]);switch(i){case s(719):this[s(494)][s(832)](s(817),e);break;case s(645):this[s(494)][s(832)]("onScanLoaded",e)}}}class _{constructor(t,s={}){const i=n;this.dom=null,this.canvas=null,this.camera=null,this[i(572)]={start:!1,detectInit:!1,analyzeAfterOpen:!1},this[i(498)]=null,this[i(758)]={url:null,headers:null,src:null,sourceType:null,width:1920,height:1080,onInit:null,onFrameCaptured:null,onCardDetected:null,onDetected:null,onCommand:null,sessionTime:6e4,detectTime:100,onFinished:null,mirrored:!0,scan_worker_path:"js/deepscanworker.min.js",face_worker_path:i(581),testURL:null,mrzOptions:null,useServerSide:null,serverRequestDelay:500,detector:{},camera:{fillOnMobile:!0,fill:!0,cutEdge:!0}},this[i(608)]=null,this[i(460)]=null,this.faceWebWorker=null,this[i(690)]=null,this[i(570)]=null,this[i(615)]=null,this.lastScanned=null,this[i(864)]=null,this[i(865)]=R[i(461)],this[i(834)]=null,this[i(582)]=0,this[i(758)]=o(this[i(758)],s),(null==this[i(758)].useServerSide&&r[i(532)]()||r[i(399)]())&&(this[i(758)][i(659)]=!0),this[i(879)](t),this.setup()}[n(879)](t){const s=n;this[s(662)]=new d(t,{src:this[s(758)][s(514)],width:this[s(758)][s(511)],height:this[s(758)][s(790)],fill:this.options[s(662)][s(554)],fillOnMobile:this.options[s(662)][s(743)],cutEdge:this[s(758)][s(662)].cutEdge,onFrameUpdated:this[s(573)].bind(this),onLoaded:this[s(828)][s(785)](this),onStart:this[s(464)][s(785)](this),onStop:this[s(585)][s(785)](this)}),this[s(872)]=this[s(662)].dom,this[s(491)]=this[s(662)].canvas}[n(634)](){const t=n;if(this.cc=new u(this[t(662)].sourceDim),this[t(460)]=new L(this[t(491)],{srcDim:this[t(662)].sourceDim,mirrored:this[t(758)][t(646)]}),this[t(608)]=new M(this[t(662)].__canvas_original,{host:this[t(758)][t(600)],headers:this.options[t(669)],mrzOptions:this[t(758)][t(401)],detector:this[t(758)][t(831)],useServerSide:this[t(758)].useServerSide,onCommand:this[t(651)].bind(this),onCardDetected:this[t(503)][t(785)](this),onDetected:this.onDetected[t(785)](this),onFinished:this[t(853)].bind(this),onError:this[t(780)][t(785)](this),mirrored:this[t(758)][t(646)],serverDelay:this[t(758)][t(445)]}),!this[t(758)][t(659)]){let s=t(706)+(new Date)[t(621)]();this[t(667)]=new y({path:this[t(758)][t(833)]+s}),this[t(690)]=new P({path:this[t(758)].scan_worker_path+s})}this[t(608)].cc=this.cc,"function"==typeof this[t(758)][t(826)]&&this[t(758)][t(826)]()}[n(433)](){const t=n;!this[t(662)][t(675)]()&&(this[t(662)][t(418)](),this[t(608)][t(797)]())}[n(697)](){const t=n;this.stop(),this[t(662)][t(499)]()}start(){const t=n;this.lastResult=null,this[t(865)]=R[t(461)],this.camera[t(675)]()?(this[t(572)][t(418)]=!0,this[t(608)][t(418)]()):(this[t(433)](),this.state[t(724)]=!0),this.clear(),this.sessionTimeCount=(new Date)[t(621)]()}stop(){const t=n;this.state[t(418)]=!1,this[t(572)][t(724)]=!1,this[t(608)][t(689)](),this[t(518)]()}[n(703)](t,s){const i=n;w.getImageFromURL(t)[i(661)](t=>{let e=w[i(806)](t);this.analizer.testDetect(e,s)})}[n(518)](){const t=n;this[t(570)]=[],this[t(809)]=null,this.lastScannedTime=null,this[t(615)]=null,this[t(582)]=0}[n(853)](t){const s=n;this.lastDetected=[],this[s(809)]=null,this[s(460)][s(801)]([]),this[s(499)](),typeof this[s(758)].onFinished==s(687)&&this[s(758)].onFinished(t)}onCardDetected(t){const s=n;this[s(570)]=t,this[s(615)]=(new Date)[s(621)](),typeof this[s(758)].onCardDetected===s(687)&&this[s(758)].onCardDetected(t)}[n(425)](t){const s=n;this[s(809)]=t,this.lastScannedTime=(new Date).getTime(),console.log(s(851),t),typeof this[s(758)][s(425)]===s(687)&&this[s(758)][s(425)](this[s(809)])}[n(651)](t){const s=n;this.lastCommand=t,this[s(572)][s(418)]&&typeof this.options[s(651)]===s(687)&&this[s(758)][s(651)](t)}[n(456)](){}[n(780)](t){const s=n;switch(t){case A[s(691)]:console[s(398)](s(591))}}[n(573)](){const t=n;if(this[t(572)][t(418)]){let s=this[t(809)]&&this[t(809)][t(717)]?[this.lastScanned[t(717)]]:[];if(0===s[t(681)]&&null!=this[t(570)]&&this[t(570)][t(681)]>0){s=this.lastDetected;let i="";this[t(865)]===R[t(794)]&&"id_back"===this[t(570)][0][t(674)]?(i="data processing, please wait...",this.visual[t(801)](s,t(807),i)):this[t(865)]===R[t(819)]&&this[t(570)][0][t(674)]===t(609)&&(i=t(513),this[t(460)][t(801)](s,t(807),i))}else{let i=this[t(406)](this[t(864)]);null!=i&&i<2e3&&this[t(460)][t(801)](s)}this[t(608)][t(847)]()===N[t(671)]&&this[t(460)].drawArea(this.analizer[t(758)][t(647)]),(new Date)[t(621)]()-this[t(582)]>this[t(758)].sessionTime?this[t(853)]({status:!1,msg:t(493)}):this[t(608)][t(635)]()}}[n(828)](t,s){const i=n;this.cc[i(736)](s)}[n(464)](){const t=n;this[t(572)][t(724)]&&(this[t(572)][t(724)]=!1,this[t(418)]())}[n(585)](){}[n(406)](t){return null==t?null:(new Date).getTime()-t}}n(480),n(558);const z=class{constructor(t={}){const s=n;this.options={url:null,headers:null},this[s(758)]=o(this[s(758)],t),this[s(698)]=new c(t[s(600)]||null,this.options)}[n(708)](t,s){return new k(t,s)}[n(529)](t,s){const i=n;let e=o({url:this[i(758)].url,headers:this[i(758)][i(669)]},s);return new _(t,e)}[n(617)](t,s){}[n(421)](t,s){const i=n;this[i(698)][i(459)](t,t=>{"function"==typeof s&&s(t)})}[n(532)](){return r.isMobile()}}}},s={};function i(e){if(s[e])return s[e].exports;var h=s[e]={exports:{}};return t[e](h,h.exports,i),h.exports}return i.d=((t,s)=>{for(var e in s)i.o(s,e)&&!i.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:s[e]})}),i.o=((t,s)=>Object.prototype.hasOwnProperty.call(t,s)),i(614)})().default});
