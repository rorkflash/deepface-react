(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["DCFaceID"] = factory();
	else
		root["DCFaceID"] = factory();
})(this, function() {
return /******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ 614:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => /* binding */ dcfaceid
});

      const _0x54f2=['mrz','devices','onStart','hasCommand','observers','length','initWorker','callStepChange','LEFT','116424JCkErK','valid','function','recognizeLocal','reset','scanWebWorker','TOO_SMALL','forEach','defineScanType','filter','getCurrentStep','tagName','close','data','Received:','canvasToImageData','black','status','testSource','toOriginalSize','727653wrFrfK','?rand=','single','createDeepFace','none','getImageFromURL','box','rgba(0,\x200,\x200,\x201)','id_back','commander','clearRect','passport','card','actionText','scan','index','catch','cutLastSlash','look\x20forward','analyzeAfterOpen','draw\x20mask\x20layer','rgba(255,160,24,0.5)','setCommand','setFace','appendChild','assign','action','__canvas','onStep','rgb(66,109,139)','number','setDim','dim','style','lowlight','delay','errors','play','fillOnMobile','look\x20left','loadedTID','smile','serverDelay','path','getBox','tid','look\x20right','notifyAll','currentCommand','outofbounds','drawMask','lineWidth','startingWaitTime','options','actionWaitBeforeCheck','autoplay','playsinline','stringify','getContext','ID_FRONT','__canvas_original','innerHtml','drawFaces','tinyFaceDetected','globalAlpha','look\x20down','undefined','request','onStepChanged','hide','pitch','streamSize','callError','interval','finishWaitTime','onError','display','SUCCESS','FORWARD','snapshot','bind','checkSize','getTinyFace','anonymous','toDataURL','height','defineContainer','video','landMarks','ID_BACK','INIT','currentStepActive','init','msg','chrome','getLandmark','drawCard','getCoord','image/png','resWidth','detectTimer','imageToCanvas','orange','arc','lastScanned','collect','end','checkScanResult','videoWidth','manyFace','isOffscreenCanvasSupport','toFixed','onScanResult','chooselist','SHOW','substr','remove','onStop','position','getImageData','worker_path','onInit','canvasToBase64','onCameraLoaded','Worker','finish','detector','notify','face_worker_path','lastResult','scale','parentElement','outOfBounds','isReady','sizeKoef','SMILE','videoSize','getCoordY','getArea','errorTime','opacity','keys','getStep','match','DIV','id_front','onDetect','1pWogiS','onFinished','PASS_FRONT','checkPosAndActions','beginPath','defineScanFace','672205XERWwI','backgroundColor','defineProcess','docFace','rect','restore','lastScannedTime','lastCommand','nocard','getVideoTracks','green','curFrame','detectionLocked','30px','dom','commands','checkCurrentCommandAction','addActionTime','3qbKfHG','isRearCameraUsed','drawPath','initContainer','isAllScanned','kind','classList','commandArea','streams','dpr','/verify','FINISH','area','normalizing','block','CANVAS','maskSize','log','isSafari','canvas2grayscale','mrzOptions','success','userAgent','scans','current','getPassTime','rear\x20camera\x20used','server','paused','croppedSize','type','left','defineStream','sourceDim','card/detect','raf','serverSide','start','resHeight','div','verify','createTextArea','image','recognize','onDetected','append','callDetectedEvent','callCardDetectedEvent','Please\x20follow\x20the\x20commands','count','getCard','errorWaitTime','open','resizeCanvas','getImageB64','webWorker','getFace','bbox','host','closePath','onload','onmessage','js/deepfaceworker.js','some','serverRequestDelay','image/jpeg','frontCamera','toLowerCase','currentPosition','command','REJECT','putImageData','Lines','startTime','getTimeDiff','onCommandResult','step','list','toVerify','visual','NONE','getPose','score','onCameraStart','defineCommands','includes','116261bazoNX','getLaplacianVariance','stroke','isErrorExist','fillText','yaw','currentAction','time','onStartDownCount','web\x20camera\x20exception!','fillStyle','unlock','callback','face','highlight','look\x20up','indexOf','defineCurrentAction','scanned','result','analyser','actionWaitTime','forward','drawArea','canvas','actualCanvas','session\x20timeout','stream','json','currentActionList','timeID','worker','stop','detect','center','down','onCardDetected','Success:','onFaceDetected','14px\x20Arial','onStreamLoaded','hideTextArea','onMRZDetected','right','width','getTracks','data\x20processing,\x20please\x20wait...','src','lock','push','canvas2IMG','clear','Initializing','recognizeGlobal','load','lineTo','strokeStyle','globalCompositeOperation','name','toosmall','detectTime','shuffle','createDeepScan','showTextArea','tID','isMobile','docType','getLastDetected','show','next','createElement','source-over','showCollection','cropCanvas','detectedFaceCountDownBeforeStart','max','error','ACTIONS','scan-worker','textAlign','START','roll','atan2','GET','cutEdge','20px\x20Arial','maskLayer','fill','PASSPORT','1097809LjlZcn','fireCommand','scanner','net','Error\x20loading\x20','add','onScanLoaded','calculate','quadraticCurveTo','crossOrigin','object','noface','faceMask','reject','lastDetected','act2Command','state','onFrameUpdated','Starting','scanning','changeStep','pos','applyConstraints','getCoordX','parseObject','js/deeptinyfaceworker.min.js','sessionTimeCount','onWorkerMessage','muted','onCameraStop','fixedTime','POST','getSettings','headpos','Valid','Card\x20is\x20too\x20small','getUserMedia','Computing\x20for\x20finishing','cardImage','maskInited','RIGHT','finishTime','xor','videoHeight','url','onplaying','absolute','font','onTinyFaceResult','callCommandChange','Type','ctx','analizer','pass_main','manyfaces','results','curScan','checkURI','659916dZVCzS','lastDetectedTime','inputSize','createDeepStory','environment','toRealCoordY','Error:','getTime','videoinput','startSession','testDetect','substring','save','fit2Size','originalSize','srcDim','round','400477aRwkSX','Card\x20model\x20loaded','moveTo','setup','observe','onLoaded','join','Your\x20browser\x20doesn\x27t\x20support\x20web\x20workers.','cropAndResizeCanvas','webgl','video-layer','loading','snapshotlist','offsetHeight','scanLoaded','mirrored','cardMinSize','detector\x20result','showProcessing','postMessage','onCommand','drawStreamToCanvas','blankCanvas','mediaDevices','commandText','getSnapshots','imageDataToCanvas','drawImage','useServerSide','loadCard','then','camera','landmark','fillRect','loaded','setAttribute','faceWebWorker','textContent','headers','onFaceResult','SCANNING','DOWN','getSize','class','isPlaying'];const _0x36e5=function(_0x3e378f,_0x3443f0){_0x3e378f=_0x3e378f-0x186;let _0x54f28c=_0x54f2[_0x3e378f];return _0x54f28c;};const _0x21dfaf=_0x36e5;(function(_0x48a612,_0x2b244b){const _0x2927d0=_0x36e5;while(!![]){try{const _0x4915e1=-parseInt(_0x2927d0(0x2c1))*parseInt(_0x2927d0(0x354))+parseInt(_0x2927d0(0x36c))*parseInt(_0x2927d0(0x1d3))+parseInt(_0x2927d0(0x277))+parseInt(_0x2927d0(0x266))+parseInt(_0x2927d0(0x2ad))+parseInt(_0x2927d0(0x35a))+-parseInt(_0x2927d0(0x22c));if(_0x4915e1===_0x2b244b)break;else _0x48a612['push'](_0x48a612['shift']());}catch(_0x594457){_0x48a612['push'](_0x48a612['shift']());}}}(_0x54f2,0x5ae77));const deepMerge=(_0x551ac7,_0x56d93e)=>{const _0x3e6d62=_0x36e5;for(let _0x5476a9 of Object[_0x3e6d62(0x34e)](_0x56d93e)){_0x56d93e[_0x5476a9]instanceof Object&&Object[_0x3e6d62(0x2da)](_0x56d93e[_0x5476a9],deepMerge(_0x551ac7[_0x5476a9]||{},_0x56d93e[_0x5476a9]));}return Object['assign'](_0x551ac7||{},_0x56d93e),_0x551ac7;},canvasRoundRect=(_0x5ee94c,_0x1afd79,_0x3274f9,_0x36f251,_0x39121f,_0x1c2b83,_0x440397,_0x265406)=>{const _0xb010cc=_0x36e5;typeof _0x265406==='undefined'&&(_0x265406=!![]);typeof _0x1c2b83===_0xb010cc(0x303)&&(_0x1c2b83=0x5);if(typeof _0x1c2b83===_0xb010cc(0x2df))_0x1c2b83={'tl':_0x1c2b83,'tr':_0x1c2b83,'br':_0x1c2b83,'bl':_0x1c2b83};else{var _0x554188={'tl':0x0,'tr':0x0,'br':0x0,'bl':0x0};for(var _0x2c35f0 in _0x554188){_0x1c2b83[_0x2c35f0]=_0x1c2b83[_0x2c35f0]||_0x554188[_0x2c35f0];}}_0x5ee94c[_0xb010cc(0x358)](),_0x5ee94c[_0xb010cc(0x279)](_0x1afd79+_0x1c2b83['tl'],_0x3274f9),_0x5ee94c['lineTo'](_0x1afd79+_0x36f251-_0x1c2b83['tr'],_0x3274f9),_0x5ee94c[_0xb010cc(0x234)](_0x1afd79+_0x36f251,_0x3274f9,_0x1afd79+_0x36f251,_0x3274f9+_0x1c2b83['tr']),_0x5ee94c[_0xb010cc(0x20a)](_0x1afd79+_0x36f251,_0x3274f9+_0x39121f-_0x1c2b83['br']),_0x5ee94c[_0xb010cc(0x234)](_0x1afd79+_0x36f251,_0x3274f9+_0x39121f,_0x1afd79+_0x36f251-_0x1c2b83['br'],_0x3274f9+_0x39121f),_0x5ee94c[_0xb010cc(0x20a)](_0x1afd79+_0x1c2b83['bl'],_0x3274f9+_0x39121f),_0x5ee94c['quadraticCurveTo'](_0x1afd79,_0x3274f9+_0x39121f,_0x1afd79,_0x3274f9+_0x39121f-_0x1c2b83['bl']),_0x5ee94c[_0xb010cc(0x20a)](_0x1afd79,_0x3274f9+_0x1c2b83['tl']),_0x5ee94c['quadraticCurveTo'](_0x1afd79,_0x3274f9,_0x1afd79+_0x1c2b83['tl'],_0x3274f9),_0x5ee94c[_0xb010cc(0x1b8)](),_0x440397&&_0x5ee94c[_0xb010cc(0x22a)](),_0x265406&&_0x5ee94c[_0xb010cc(0x1d5)]();};class StringExtra{static[_0x21dfaf(0x2d2)](_0x13efcd){const _0x1d5347=_0x21dfaf;if(_0x13efcd[_0x1d5347(0x334)](_0x13efcd['length']-0x1)==='/')return _0x13efcd['slice'](0x0,-0x1);return _0x13efcd;}};class DataModel{constructor(_0x383a3b='',_0x3da2a8={}){const _0x24e19e=_0x21dfaf;this['url']=_0x383a3b,this[_0x24e19e(0x2f6)]={'headers':{}},this[_0x24e19e(0x2f6)]=deepMerge(this[_0x24e19e(0x2f6)],_0x3da2a8);}['toVerify'](_0xcc72ec,_0xc8428){const _0x4e2b2f=_0x21dfaf;if(_0xcc72ec==null)return;if(_0xcc72ec['scanner']!=null&&_0xcc72ec[_0x4e2b2f(0x1e0)]==null){let _0x3a9557={'docType':_0xcc72ec['scanner'][_0x4e2b2f(0x215)]||null,'scans':[],'tid':_0xcc72ec[_0x4e2b2f(0x22e)][_0x4e2b2f(0x213)]};for(let _0x303387 in _0xcc72ec[_0x4e2b2f(0x22e)][_0x4e2b2f(0x194)]){_0x3a9557[_0x4e2b2f(0x194)][_0x4e2b2f(0x204)]({'docFace':_0xcc72ec[_0x4e2b2f(0x22e)][_0x4e2b2f(0x194)][_0x303387][_0x4e2b2f(0x35d)]||null,'image':_0xcc72ec[_0x4e2b2f(0x22e)][_0x4e2b2f(0x194)][_0x303387][_0x4e2b2f(0x1a7)]});}let _0x54ae33=deepMerge({'Content-Type':'application/json'},this[_0x4e2b2f(0x2f6)][_0x4e2b2f(0x29d)]||{});fetch(StringExtra[_0x4e2b2f(0x2d2)](this[_0x4e2b2f(0x258)])+_0x4e2b2f(0x187),{'method':'POST','headers':_0x54ae33,'body':JSON[_0x4e2b2f(0x2fa)](_0x3a9557)})[_0x4e2b2f(0x295)](_0x34347c=>_0x34347c[_0x4e2b2f(0x1ef)]())[_0x4e2b2f(0x295)](_0x41293b=>{const _0x1e5de4=_0x4e2b2f;if(typeof _0xc8428===_0x1e5de4(0x2af)){let _0x4cb0b9={'success':_0x41293b[_0x1e5de4(0x192)],'data':_0x41293b[_0x1e5de4(0x2ba)]||null,'msg':_0x41293b[_0x1e5de4(0x31e)]||null};_0xc8428(_0x4cb0b9);}})['catch'](_0x57cc50=>{const _0x38a9fe=_0x4e2b2f;console['error'](_0x38a9fe(0x26c),_0x57cc50),typeof _0xc8428==='function'&&_0xc8428({'success':![],'error':_0x57cc50});});}}};class CameraVisualLayer{constructor(_0x468d09){const _0x4b6b96=_0x21dfaf;this[_0x4b6b96(0x1eb)]=_0x468d09;}[_0x21dfaf(0x32a)](){}[_0x21dfaf(0x21b)](){}[_0x21dfaf(0x1aa)](){}[_0x21dfaf(0x304)](){}};class OSPlus{static[_0x21dfaf(0x214)](){const _0x545a71=_0x21dfaf,_0x2340ef=[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i];return _0x2340ef[_0x545a71(0x1bc)](_0x5d9407=>{const _0x5c513c=_0x545a71;return navigator['userAgent'][_0x5c513c(0x350)](_0x5d9407);});}static['isWebGLExist'](){const _0x40eb99=_0x21dfaf;try{let _0x190d17=document[_0x40eb99(0x219)](_0x40eb99(0x1eb));_0x190d17[_0x40eb99(0x2fb)](_0x40eb99(0x280));}catch(_0x4d15aa){return![];}return!![];}static[_0x21dfaf(0x32f)](){const _0x3773d3=_0x21dfaf;return typeof OffscreenCanvas===_0x3773d3(0x2af);}static[_0x21dfaf(0x18f)](){const _0x40b957=_0x21dfaf;let _0x49939d=navigator[_0x40b957(0x193)][_0x40b957(0x1c0)]();return _0x49939d[_0x40b957(0x1e3)]('safari')!==-0x1&&_0x49939d[_0x40b957(0x1e3)](_0x40b957(0x31f))===-0x1;}};class DCCamera{constructor(_0x1f2645,_0x1b38bd={}){const _0xe137ce=_0x21dfaf;this[_0xe137ce(0x368)]=null,this[_0xe137ce(0x1eb)]=null,this[_0xe137ce(0x2dc)]=null,this[_0xe137ce(0x2fd)]=null,this[_0xe137ce(0x318)]=null,this[_0xe137ce(0x1ee)]=null,this[_0xe137ce(0x1cc)]=null,this[_0xe137ce(0x1a0)]=null,this[_0xe137ce(0x308)]={'width':0x0,'height':0x0},this[_0xe137ce(0x19e)]={'k':0x1,'dx':0x0,'dy':0x0,'dw':0x0,'dh':0x0},this[_0xe137ce(0x283)]=[],this[_0xe137ce(0x2a5)]=[],this[_0xe137ce(0x1bf)]=!![],this[_0xe137ce(0x186)]=0x1,this[_0xe137ce(0x2f6)]={'src':null,'sourceType':null,'width':0x280,'height':0x1e0,'resWidth':0x500,'resHeight':0x2d0,'fill':![],'fillOnMobile':!![],'cutEdge':![],'onLoaded':null,'onError':null,'onStop':null,'onStart':null,'onFrameUpdated':null},this[_0xe137ce(0x2f6)]=deepMerge(this['options'],_0x1b38bd),this[_0xe137ce(0x317)](_0x1f2645),this[_0xe137ce(0x27a)]();}[_0x21dfaf(0x317)](_0x412046){const _0x9478cf=_0x21dfaf;this[_0x9478cf(0x186)]=window['devicePixelRatio']||0x1;if(typeof _0x412046=='string'){let _0x4d895a=document['getElementById'](_0x412046);if(_0x4d895a&&_0x4d895a[_0x9478cf(0x2b8)]){if(_0x4d895a[_0x9478cf(0x2b8)]==='DIV')this[_0x9478cf(0x368)]=_0x4d895a,this[_0x9478cf(0x368)]['innerHTML']='',this[_0x9478cf(0x1eb)]=document[_0x9478cf(0x219)](_0x9478cf(0x18c)),this[_0x9478cf(0x1eb)][_0x9478cf(0x1ff)]=this[_0x9478cf(0x2f6)][_0x9478cf(0x1ff)],this['canvas'][_0x9478cf(0x316)]=this[_0x9478cf(0x2f6)][_0x9478cf(0x316)],this[_0x9478cf(0x368)][_0x9478cf(0x2d9)](this[_0x9478cf(0x1eb)]);else _0x4d895a[_0x9478cf(0x2b8)]===_0x9478cf(0x18c)&&(this['canvas']=_0x4d895a,this[_0x9478cf(0x368)]=document['createElement'](_0x9478cf(0x351)),this[_0x9478cf(0x1eb)][_0x9478cf(0x344)]['insertBefore'](this[_0x9478cf(0x368)],this[_0x9478cf(0x1eb)]),this[_0x9478cf(0x368)][_0x9478cf(0x2d9)](this[_0x9478cf(0x1eb)]));this[_0x9478cf(0x368)]&&(this[_0x9478cf(0x368)][_0x9478cf(0x372)]['add']('df-container'),this[_0x9478cf(0x368)]['style'][_0x9478cf(0x1ff)]=this[_0x9478cf(0x2f6)][_0x9478cf(0x1ff)]+'px',this['dom'][_0x9478cf(0x2e2)][_0x9478cf(0x316)]=this['options'][_0x9478cf(0x316)]+'px');}this[_0x9478cf(0x1eb)]&&(this['canvas'][_0x9478cf(0x372)][_0x9478cf(0x231)](_0x9478cf(0x281)),this[_0x9478cf(0x1eb)]['style'][_0x9478cf(0x35b)]='gray');}this[_0x9478cf(0x2dc)]=document['createElement'](_0x9478cf(0x18c)),this['__canvas'][_0x9478cf(0x1ff)]=this[_0x9478cf(0x2f6)]['width'],this[_0x9478cf(0x2dc)]['height']=this[_0x9478cf(0x2f6)]['height'],this[_0x9478cf(0x2fd)]=document[_0x9478cf(0x219)](_0x9478cf(0x18c)),this[_0x9478cf(0x2fd)]['width']=this[_0x9478cf(0x2f6)][_0x9478cf(0x1ff)],this[_0x9478cf(0x2fd)][_0x9478cf(0x316)]=this[_0x9478cf(0x2f6)][_0x9478cf(0x316)];}['setup'](){const _0x1342a9=_0x21dfaf;this['visual']=new CameraVisualLayer(this[_0x1342a9(0x1eb)]);}['start'](){const _0x4e058c=_0x21dfaf;(this['video']==null||!this['isPlaying']())&&this[_0x4e058c(0x19d)]();}[_0x21dfaf(0x1f3)](){const _0x6cd464=_0x21dfaf;this[_0x6cd464(0x1ee)]&&this[_0x6cd464(0x1ee)]['getTracks']()[_0x6cd464(0x2a9)]>0x0&&(this[_0x6cd464(0x1ee)][_0x6cd464(0x200)]()[0x0][_0x6cd464(0x1f3)](),this['stream']=null);}[_0x21dfaf(0x19d)](){const _0x1d63d9=_0x21dfaf;OSPlus['isMobile']()&&this[_0x1d63d9(0x2f6)][_0x1d63d9(0x2e7)]===!![]&&(this[_0x1d63d9(0x2f6)][_0x1d63d9(0x22a)]=!![]);this[_0x1d63d9(0x2f6)][_0x1d63d9(0x202)]==null?this['stream']==null?navigator[_0x1d63d9(0x28e)]&&navigator[_0x1d63d9(0x28e)][_0x1d63d9(0x250)]&&(this[_0x1d63d9(0x318)]===null&&(this[_0x1d63d9(0x318)]=document[_0x1d63d9(0x219)]('video'),this['video'][_0x1d63d9(0x29a)](_0x1d63d9(0x2f8),''),this['video'][_0x1d63d9(0x29a)](_0x1d63d9(0x248),''),this[_0x1d63d9(0x318)][_0x1d63d9(0x29a)](_0x1d63d9(0x2f9),''),this[_0x1d63d9(0x318)][_0x1d63d9(0x2e2)][_0x1d63d9(0x1ff)]=_0x1d63d9(0x367),this['video'][_0x1d63d9(0x2e2)][_0x1d63d9(0x316)]=_0x1d63d9(0x367),this['video'][_0x1d63d9(0x2e2)][_0x1d63d9(0x337)]=_0x1d63d9(0x25a),this[_0x1d63d9(0x368)][_0x1d63d9(0x2d9)](this[_0x1d63d9(0x318)]),this[_0x1d63d9(0x318)][_0x1d63d9(0x2e2)][_0x1d63d9(0x34d)]='0.5'),this[_0x1d63d9(0x1a0)]=null,navigator['mediaDevices']['enumerateDevices']()[_0x1d63d9(0x295)](_0x405256=>{const _0x10e05d=_0x1d63d9;console['log']('media\x20devices',_0x405256),this[_0x10e05d(0x2a5)]=_0x405256;}),navigator[_0x1d63d9(0x28e)][_0x1d63d9(0x250)]({'audio':![],'video':{'facingMode':_0x1d63d9(0x26a),'width':{'ideal':this['options'][_0x1d63d9(0x324)]},'height':{'ideal':this['options'][_0x1d63d9(0x1a3)]}}})[_0x1d63d9(0x295)](_0x239954=>{const _0x373fce=_0x1d63d9;this[_0x373fce(0x1ee)]=_0x239954,this[_0x373fce(0x318)]['srcObject']=_0x239954;let _0x5cac9c=_0x239954[_0x373fce(0x363)]()[0x0];_0x5cac9c[_0x373fce(0x242)]({'focusMode':'auto','focusDistance':0.33}),this['isRearCameraUsed']()&&(console[_0x373fce(0x18e)](_0x373fce(0x197)),this[_0x373fce(0x1bf)]=![]),_0x1021e2(),this[_0x373fce(0x318)][_0x373fce(0x2e6)]();})[_0x1d63d9(0x2d1)](_0x881a14=>{const _0x5a6fba=_0x1d63d9;console[_0x5a6fba(0x18e)](_0x5a6fba(0x1dc),_0x881a14),this[_0x5a6fba(0x30c)](_0x881a14);})):this[_0x1d63d9(0x318)][_0x1d63d9(0x2e6)]():(this[_0x1d63d9(0x318)][_0x1d63d9(0x202)]=this[_0x1d63d9(0x2f6)]['src'],this[_0x1d63d9(0x318)][_0x1d63d9(0x2e6)]());let _0x1021e2=()=>{const _0xb8bbf=_0x1d63d9;this[_0xb8bbf(0x318)]['onloadeddata']=()=>{const _0xdd169e=_0xb8bbf;this[_0xdd169e(0x1fb)]();},this['video'][_0xb8bbf(0x259)]=()=>{const _0x5d774c=_0xb8bbf;this[_0x5d774c(0x2dc)][_0x5d774c(0x1ff)]=this[_0x5d774c(0x318)][_0x5d774c(0x32d)],this[_0x5d774c(0x2dc)][_0x5d774c(0x316)]=this[_0x5d774c(0x318)][_0x5d774c(0x257)],this[_0x5d774c(0x2fd)][_0x5d774c(0x1ff)]=this[_0x5d774c(0x318)][_0x5d774c(0x32d)],this[_0x5d774c(0x2fd)]['height']=this[_0x5d774c(0x318)][_0x5d774c(0x257)];let _0x1292c5=this[_0x5d774c(0x318)][_0x5d774c(0x32d)],_0x36aa68=this[_0x5d774c(0x318)][_0x5d774c(0x257)],_0x1c8e96=0x1;this[_0x5d774c(0x19e)]['dw']=this[_0x5d774c(0x1eb)][_0x5d774c(0x1ff)],this[_0x5d774c(0x19e)]['dh']=this[_0x5d774c(0x1eb)][_0x5d774c(0x316)];this[_0x5d774c(0x2f6)]['fill']?this['canvas'][_0x5d774c(0x316)]/_0x36aa68<this[_0x5d774c(0x1eb)][_0x5d774c(0x1ff)]/_0x1292c5?(_0x1c8e96=this[_0x5d774c(0x1eb)][_0x5d774c(0x1ff)]/_0x1292c5,this[_0x5d774c(0x19e)]['dh']=Math[_0x5d774c(0x276)](_0x1c8e96*_0x36aa68),this[_0x5d774c(0x19e)]['dy']=0x0,this[_0x5d774c(0x2f6)]['cutEdge']&&(this[_0x5d774c(0x2fd)]['height']=this['canvas'][_0x5d774c(0x316)]/_0x1c8e96,this['__canvas'][_0x5d774c(0x316)]=this[_0x5d774c(0x1eb)][_0x5d774c(0x316)]/_0x1c8e96)):(_0x1c8e96=this[_0x5d774c(0x1eb)]['height']/_0x36aa68,this[_0x5d774c(0x19e)]['dw']=Math[_0x5d774c(0x276)](_0x1c8e96*_0x1292c5),this[_0x5d774c(0x19e)]['dx']=0x0,this[_0x5d774c(0x2f6)][_0x5d774c(0x227)]&&(this[_0x5d774c(0x2fd)][_0x5d774c(0x1ff)]=this[_0x5d774c(0x1eb)]['width']/_0x1c8e96,this[_0x5d774c(0x2dc)][_0x5d774c(0x1ff)]=this[_0x5d774c(0x1eb)]['width']/_0x1c8e96)):this[_0x5d774c(0x1eb)][_0x5d774c(0x316)]/_0x36aa68<this[_0x5d774c(0x1eb)][_0x5d774c(0x1ff)]/_0x1292c5?(_0x1c8e96=this[_0x5d774c(0x1eb)][_0x5d774c(0x316)]/_0x36aa68,this[_0x5d774c(0x19e)]['dw']=Math[_0x5d774c(0x276)](_0x1c8e96*_0x1292c5),this[_0x5d774c(0x19e)]['dx']=(this[_0x5d774c(0x1eb)]['width']-this[_0x5d774c(0x19e)]['dw'])/0x2):(_0x1c8e96=this[_0x5d774c(0x1eb)][_0x5d774c(0x1ff)]/_0x1292c5,this[_0x5d774c(0x19e)]['dh']=Math[_0x5d774c(0x276)](_0x1c8e96*_0x36aa68),this[_0x5d774c(0x19e)]['dy']=(this['canvas'][_0x5d774c(0x316)]-this[_0x5d774c(0x19e)]['dh'])/0x2);this['sourceDim']['k']=_0x1c8e96;if(this['raf']!=null)cancelAnimationFrame(this[_0x5d774c(0x1a0)]);this[_0x5d774c(0x1a0)]=requestAnimationFrame(this[_0x5d774c(0x28c)][_0x5d774c(0x311)](this)),this[_0x5d774c(0x308)]={'width':this[_0x5d774c(0x318)][_0x5d774c(0x32d)],'height':this[_0x5d774c(0x318)][_0x5d774c(0x257)]},this[_0x5d774c(0x2a6)]();},this[_0xb8bbf(0x318)]['onpause']=()=>{cancelAnimationFrame(this['raf']),this['onStop']();};};}async[_0x21dfaf(0x28c)](){const _0xb0335d=_0x21dfaf;let _0x270613=this['frontCamera']?-0x1:0x1,_0x5a0f59=this[_0xb0335d(0x19e)],_0x3bd0bc=this[_0xb0335d(0x318)]['videoWidth'],_0x1015c9=this[_0xb0335d(0x318)][_0xb0335d(0x257)],_0x484250=this[_0xb0335d(0x2fd)][_0xb0335d(0x2fb)]('2d');_0x484250[_0xb0335d(0x272)](),_0x484250[_0xb0335d(0x343)](0x1,0x1);this[_0xb0335d(0x2f6)][_0xb0335d(0x22a)]&&this[_0xb0335d(0x2f6)][_0xb0335d(0x227)]?_0x484250[_0xb0335d(0x292)](this[_0xb0335d(0x318)],(this['__canvas_original']['width']-_0x3bd0bc)/0x2,(this[_0xb0335d(0x2fd)][_0xb0335d(0x316)]-_0x1015c9)/0x2,_0x3bd0bc,_0x1015c9):_0x484250['drawImage'](this['video'],0x0,0x0,this['__canvas_original'][_0xb0335d(0x1ff)],this['__canvas_original']['height']);_0x484250[_0xb0335d(0x35f)]();let _0x3a68b0=this[_0xb0335d(0x2dc)]['getContext']('2d');_0x3a68b0['save'](),_0x3a68b0[_0xb0335d(0x343)](_0x270613,0x1);this[_0xb0335d(0x2f6)][_0xb0335d(0x22a)]&&this['options']['cutEdge']?_0x3a68b0[_0xb0335d(0x292)](this[_0xb0335d(0x318)],_0x270613*(this['__canvas'][_0xb0335d(0x1ff)]-_0x3bd0bc)/0x2+(_0x270613===-0x1?_0x270613*_0x3bd0bc:0x0),(this[_0xb0335d(0x2dc)][_0xb0335d(0x316)]-_0x1015c9)/0x2,_0x3bd0bc,_0x1015c9):_0x3a68b0[_0xb0335d(0x292)](this['video'],_0x270613===-0x1?_0x270613*_0x3bd0bc:0x0,0x0,this['__canvas']['width'],this[_0xb0335d(0x2dc)][_0xb0335d(0x316)]);_0x3a68b0['restore']();let _0x42ae74=this[_0xb0335d(0x1eb)][_0xb0335d(0x2fb)]('2d'),_0x5b03d6=(this[_0xb0335d(0x1eb)][_0xb0335d(0x1ff)]-this['sourceDim']['dw'])/0x2,_0x16c704=(this['canvas'][_0xb0335d(0x316)]-this[_0xb0335d(0x19e)]['dh'])/0x2;_0x42ae74[_0xb0335d(0x2cb)](0x0,0x0,this[_0xb0335d(0x1eb)][_0xb0335d(0x1ff)],this[_0xb0335d(0x1eb)]['height']),_0x42ae74[_0xb0335d(0x272)](),_0x42ae74[_0xb0335d(0x343)](_0x270613*0x1,0x1),_0x42ae74[_0xb0335d(0x292)](this[_0xb0335d(0x318)],_0x270613*_0x5b03d6+(_0x270613===-0x1?_0x270613*_0x5a0f59['dw']:0x0),_0x16c704,_0x5a0f59['dw'],_0x5a0f59['dh']),_0x42ae74[_0xb0335d(0x35f)]();if(this[_0xb0335d(0x1ee)]==null)return;this[_0xb0335d(0x23d)](),this[_0xb0335d(0x1a0)]=requestAnimationFrame(this[_0xb0335d(0x28c)][_0xb0335d(0x311)](this));}[_0x21dfaf(0x36d)](){const _0x5a5ffc=_0x21dfaf;let _0x1bf6b3=[];for(let _0x4e327c in this[_0x5a5ffc(0x2a5)]){this[_0x5a5ffc(0x2a5)][_0x4e327c][_0x5a5ffc(0x371)]===_0x5a5ffc(0x26e)&&_0x1bf6b3[_0x5a5ffc(0x204)](this[_0x5a5ffc(0x2a5)][_0x4e327c]);}let _0x56bb37=this['stream']?this[_0x5a5ffc(0x1ee)][_0x5a5ffc(0x363)]()[0x0][_0x5a5ffc(0x24c)]()['facingMode']||null:null;console[_0x5a5ffc(0x18e)](_0x5a5ffc(0x2a5),this[_0x5a5ffc(0x2a5)]),console[_0x5a5ffc(0x18e)]('facingMode',_0x56bb37);if(_0x56bb37===_0x5a5ffc(0x26a))return!![];return![];}[_0x21dfaf(0x2a3)](){const _0x592d0d=_0x21dfaf;return this['stream']&&this[_0x592d0d(0x318)]&&!this[_0x592d0d(0x318)][_0x592d0d(0x199)];}['getImageData'](){const _0x5c70a5=_0x21dfaf;let _0x438fd5=this[_0x5c70a5(0x2dc)][_0x5c70a5(0x2fb)]('2d');return _0x438fd5[_0x5c70a5(0x338)](0x0,0x0,this[_0x5c70a5(0x2dc)][_0x5c70a5(0x1ff)],this[_0x5c70a5(0x2dc)]['height']);}[_0x21dfaf(0x1b3)](){const _0x20e09c=_0x21dfaf;return this[_0x20e09c(0x2dc)][_0x20e09c(0x315)]();}[_0x21dfaf(0x290)](){const _0x48bcb0=_0x21dfaf;return this[_0x48bcb0(0x283)];}[_0x21dfaf(0x310)](){const _0x59a12c=_0x21dfaf;this[_0x59a12c(0x283)][_0x59a12c(0x204)](this[_0x59a12c(0x1b3)]());}['clearSnapshots'](){const _0x621169=_0x21dfaf;this[_0x621169(0x283)]=[];}['onError'](_0xef1613){const _0x1e55ca=_0x21dfaf;typeof this[_0x1e55ca(0x2f6)][_0x1e55ca(0x30c)]===_0x1e55ca(0x2af)&&this[_0x1e55ca(0x2f6)][_0x1e55ca(0x30c)](_0xef1613);}[_0x21dfaf(0x1fb)](){const _0x3a0414=_0x21dfaf;typeof this[_0x3a0414(0x2f6)][_0x3a0414(0x27c)]===_0x3a0414(0x2af)&&this[_0x3a0414(0x2f6)]['onLoaded'](this['video'],this[_0x3a0414(0x19e)]);}[_0x21dfaf(0x336)](){const _0x1f9dc0=_0x21dfaf;typeof this['options']['onStop']==='function'&&this[_0x1f9dc0(0x2f6)][_0x1f9dc0(0x336)]();}['onStart'](){const _0x3bfbf2=_0x21dfaf;typeof this[_0x3bfbf2(0x2f6)][_0x3bfbf2(0x2a6)]===_0x3bfbf2(0x2af)&&this[_0x3bfbf2(0x2f6)][_0x3bfbf2(0x2a6)]();}[_0x21dfaf(0x23d)](){const _0x5d2f66=_0x21dfaf;typeof this[_0x5d2f66(0x2f6)][_0x5d2f66(0x23d)]==='function'&&this[_0x5d2f66(0x2f6)]['onFrameUpdated']();}}const camera=DCCamera;;class CoordConverter{constructor(_0x24e1b0={'k':0x1,'dx':0x0,'dy':0x0,'dw':0x0,'dh':0x0}){const _0x1729c1=_0x21dfaf;this[_0x1729c1(0x2e1)]=_0x24e1b0;}[_0x21dfaf(0x2e0)](_0x5b5329){const _0x1e63d4=_0x21dfaf;this[_0x1e63d4(0x2e1)]=_0x5b5329;}[_0x21dfaf(0x322)](_0x3b3081,_0xf13155){const _0x339ebd=_0x21dfaf;return{'x':_0x3b3081*this[_0x339ebd(0x2e1)]['k']+this['dim']['dx'],'y':_0xf13155*this[_0x339ebd(0x2e1)]['k']+this[_0x339ebd(0x2e1)]['dy']};}['getCoordX'](_0x3e85cc){const _0x3f0282=_0x21dfaf;return _0x3e85cc*this[_0x3f0282(0x2e1)]['k']+this['dim']['dx'];}[_0x21dfaf(0x34a)](_0x74811d){const _0x51b94b=_0x21dfaf;return _0x74811d*this[_0x51b94b(0x2e1)]['k']+this[_0x51b94b(0x2e1)]['dy'];}['getSize'](_0x39d177){const _0x254d6e=_0x21dfaf;return _0x39d177*this[_0x254d6e(0x2e1)]['k'];}['toRealCoordX'](_0x105e01){const _0x87b606=_0x21dfaf;return _0x105e01/this['dim']['k']-this[_0x87b606(0x2e1)]['dx'];}[_0x21dfaf(0x26b)](_0x149755){const _0x14aebf=_0x21dfaf;return _0x149755/this[_0x14aebf(0x2e1)]['k']-this['dim']['dy'];}};class MaskLayer{constructor(_0x2dbec6,_0x44371b={'width':0x0,'height':0x0},_0x2bcb83={'width':0x0,'height':0x0}){const _0x2cd4c7=_0x21dfaf;this[_0x2cd4c7(0x368)]=_0x2dbec6,this['canvas']=null,this[_0x2cd4c7(0x25f)]=null,this['commandText']=null,this[_0x2cd4c7(0x2ce)]=null,this[_0x2cd4c7(0x349)]=_0x44371b,this[_0x2cd4c7(0x18d)]=_0x2bcb83,this[_0x2cd4c7(0x253)]=![],this['sizeKoef']={'h':0.4,'v':0.6},(this[_0x2cd4c7(0x18d)][_0x2cd4c7(0x1ff)]===0x0||this[_0x2cd4c7(0x18d)][_0x2cd4c7(0x316)]===0x0)&&(this[_0x2cd4c7(0x18d)]={'width':this[_0x2cd4c7(0x349)]['width']*this[_0x2cd4c7(0x347)]['h'],'height':this['videoSize'][_0x2cd4c7(0x1ff)]*this['sizeKoef']['v']}),this[_0x2cd4c7(0x27a)]();}[_0x21dfaf(0x27a)](){const _0x42550a=_0x21dfaf;this[_0x42550a(0x368)]!=null&&(this[_0x42550a(0x1eb)]=document[_0x42550a(0x219)](_0x42550a(0x18c)),this[_0x42550a(0x1eb)]['id']=_0x42550a(0x229),this[_0x42550a(0x1eb)][_0x42550a(0x1ff)]=this[_0x42550a(0x349)][_0x42550a(0x1ff)],this['canvas'][_0x42550a(0x316)]=this[_0x42550a(0x349)][_0x42550a(0x316)],this[_0x42550a(0x368)][_0x42550a(0x2d9)](this[_0x42550a(0x1eb)]),this['ctx']=this[_0x42550a(0x1eb)][_0x42550a(0x2fb)]('2d'));}[_0x21dfaf(0x1a6)](){const _0x4c53cf=_0x21dfaf;if(!this[_0x4c53cf(0x28f)]){this[_0x4c53cf(0x28f)]=document[_0x4c53cf(0x219)](_0x4c53cf(0x1a4)),this[_0x4c53cf(0x28f)]['id']=_0x4c53cf(0x373);let _0x509088=document['createElement']('P');_0x509088[_0x4c53cf(0x29c)]='',this[_0x4c53cf(0x28f)][_0x4c53cf(0x2d9)](_0x509088),this['dom'][_0x4c53cf(0x2d9)](this[_0x4c53cf(0x28f)]);let _0x55715b=((this[_0x4c53cf(0x1eb)][_0x4c53cf(0x316)]-this[_0x4c53cf(0x18d)][_0x4c53cf(0x316)])/0x2-this[_0x4c53cf(0x28f)][_0x4c53cf(0x284)])/0x2;this[_0x4c53cf(0x28f)]['style']['top']=_0x55715b+'px';}else this[_0x4c53cf(0x28f)][_0x4c53cf(0x2e2)][_0x4c53cf(0x30d)]=_0x4c53cf(0x18b);if(!this[_0x4c53cf(0x2ce)]){this[_0x4c53cf(0x2ce)]=document[_0x4c53cf(0x219)](_0x4c53cf(0x1a4)),this[_0x4c53cf(0x2ce)]['id']='actionArea';let _0x5dcbcf=document[_0x4c53cf(0x219)]('P');_0x5dcbcf['textContent']='',this[_0x4c53cf(0x2ce)][_0x4c53cf(0x2d9)](_0x5dcbcf),this['dom'][_0x4c53cf(0x2d9)](this['actionText']);let _0x41c6ef=((this[_0x4c53cf(0x1eb)][_0x4c53cf(0x316)]-this[_0x4c53cf(0x18d)][_0x4c53cf(0x316)])/0x2-this[_0x4c53cf(0x28f)][_0x4c53cf(0x284)])/0x2;this[_0x4c53cf(0x2ce)][_0x4c53cf(0x2e2)]['bottom']=_0x41c6ef+'px';}else this[_0x4c53cf(0x2ce)][_0x4c53cf(0x2e2)][_0x4c53cf(0x30d)]='block';}[_0x21dfaf(0x212)](){const _0x266be2=_0x21dfaf;if(this[_0x266be2(0x28f)])this['commandText']['style']['display']='';if(this['actionText'])this['actionText']['style'][_0x266be2(0x30d)]='';}[_0x21dfaf(0x1fc)](){const _0x5dd34a=_0x21dfaf;if(this[_0x5dd34a(0x28f)])this[_0x5dd34a(0x28f)]['style'][_0x5dd34a(0x30d)]='none';if(this[_0x5dd34a(0x2ce)])this[_0x5dd34a(0x2ce)][_0x5dd34a(0x2e2)]['display']=_0x5dd34a(0x2c5);}['setText'](_0x212559){const _0x5a559a=_0x21dfaf;if(this['actionText'])this['actionText'][_0x5a559a(0x2fe)]=_0x212559;}[_0x21dfaf(0x2d7)](_0x52f1f5){const _0x494286=_0x21dfaf;if(this[_0x494286(0x28f)])this[_0x494286(0x28f)][_0x494286(0x2fe)]=_0x52f1f5;}[_0x21dfaf(0x34b)](){const _0x5e962f=_0x21dfaf;return{'x':this[_0x5e962f(0x1eb)][_0x5e962f(0x1ff)]/0x2-this['maskSize'][_0x5e962f(0x1ff)]/0x2-0x14,'y':this[_0x5e962f(0x1eb)]['height']/0x2-this[_0x5e962f(0x18d)][_0x5e962f(0x1ff)]/0x2-0x14,'width':this[_0x5e962f(0x18d)][_0x5e962f(0x1ff)],'height':this[_0x5e962f(0x18d)][_0x5e962f(0x316)]};}['draw'](){const _0x554769=_0x21dfaf;if(!this['maskInited']){console['log'](_0x554769(0x2d5)),this[_0x554769(0x25f)][_0x554769(0x272)](),this['ctx'][_0x554769(0x358)](),this['ctx']['ellipse'](this[_0x554769(0x1eb)][_0x554769(0x1ff)]/0x2,this[_0x554769(0x1eb)]['height']/0x2,this[_0x554769(0x18d)][_0x554769(0x1ff)]/0x2,this[_0x554769(0x18d)]['height']/0x2,Math['PI'],0x0,0x2*Math['PI']),this[_0x554769(0x25f)]['fillStyle']=_0x554769(0x2de),this[_0x554769(0x25f)][_0x554769(0x22a)](),this['ctx'][_0x554769(0x20c)]=_0x554769(0x256),this[_0x554769(0x25f)][_0x554769(0x358)](),this[_0x554769(0x25f)][_0x554769(0x35e)](0x0,0x0,this[_0x554769(0x1eb)][_0x554769(0x1ff)],this[_0x554769(0x1eb)][_0x554769(0x316)]),this[_0x554769(0x25f)][_0x554769(0x1dd)]=_0x554769(0x2c8),this[_0x554769(0x25f)][_0x554769(0x1b8)](),this[_0x554769(0x25f)][_0x554769(0x22a)](),this['ctx'][_0x554769(0x301)]=0.5;let _0x5792dd=this[_0x554769(0x1eb)][_0x554769(0x315)]();this[_0x554769(0x25f)]['globalCompositeOperation']=_0x554769(0x21a);let _0x57bc32=new Image();_0x57bc32[_0x554769(0x1b9)]=()=>{const _0x25f472=_0x554769;this[_0x25f472(0x25f)][_0x25f472(0x2cb)](0x0,0x0,this[_0x25f472(0x1eb)]['width'],this['canvas'][_0x25f472(0x316)]),this[_0x25f472(0x25f)][_0x25f472(0x292)](_0x57bc32,0x0,0x0);},_0x57bc32[_0x554769(0x202)]=_0x5792dd,this[_0x554769(0x253)]=!![],this[_0x554769(0x1a6)]();}}['show'](){const _0x49c12f=_0x21dfaf;!this[_0x49c12f(0x253)]?(this['draw'](),this[_0x49c12f(0x1eb)][_0x49c12f(0x2e2)][_0x49c12f(0x30d)]=_0x49c12f(0x18b)):(this[_0x49c12f(0x212)](),this['canvas']['style'][_0x49c12f(0x30d)]=_0x49c12f(0x18b));}['hide'](){const _0x24511a=_0x21dfaf;this['hideTextArea'](),this[_0x24511a(0x1eb)][_0x24511a(0x2e2)][_0x24511a(0x30d)]=_0x24511a(0x2c5);}['delete'](){const _0x3c5a07=_0x21dfaf;this[_0x3c5a07(0x25f)][_0x3c5a07(0x2cb)](0x0,0x0,this[_0x3c5a07(0x1eb)][_0x3c5a07(0x1ff)],this[_0x3c5a07(0x1eb)]['height']),this[_0x3c5a07(0x25f)][_0x3c5a07(0x35f)]();}};class VisualLayer{constructor(_0x27798d,_0x50c9df={}){const _0x5bc2b1=_0x21dfaf;this[_0x5bc2b1(0x1eb)]=_0x27798d,this[_0x5bc2b1(0x2f6)]={'srcDim':{'k':0x1,'dx':0x0,'dy':0x0,'dw':0x0,'dh':0x0}},this['options']=deepMerge(this['options'],_0x50c9df),this['cc']=new CoordConverter(this[_0x5bc2b1(0x2f6)][_0x5bc2b1(0x275)]);}[_0x21dfaf(0x36e)](_0x507a67,_0xab2a86,_0x1cf8c9){const _0x297540=_0x21dfaf,_0x5e93a5=new Path2D();_0x5e93a5[_0x297540(0x279)](_0xab2a86[0x0][0x0],_0xab2a86[0x0][0x1]);for(let _0x7c487e=0x1;_0x7c487e<_0xab2a86[_0x297540(0x2a9)];_0x7c487e++){const _0x12f999=_0xab2a86[_0x7c487e];_0x5e93a5['lineTo'](_0x12f999[0x0],_0x12f999[0x1]);}_0x1cf8c9&&_0x5e93a5[_0x297540(0x1b8)](),_0x507a67[_0x297540(0x1d5)](_0x5e93a5);}[_0x21dfaf(0x2ff)](_0x2caebb){const _0x57ad31=_0x21dfaf;let _0x2ff278=this[_0x57ad31(0x2f6)][_0x57ad31(0x275)]['k'],_0x54e3a8=null,_0x418dca=null,_0x4769e1={'x':0x0,'y':0x0,'w':0x0,'h':0x0},_0x254148=this[_0x57ad31(0x1eb)][_0x57ad31(0x2fb)]('2d');_0x254148[_0x57ad31(0x272)]();for(let _0x4caccb=0x0;_0x4caccb<_0x2caebb['length'];_0x4caccb++){_0x418dca=_0x2caebb[_0x4caccb]['landMarks'];for(let _0xb72713=0x0;_0xb72713<_0x418dca['length'];_0xb72713++){const _0x449f28=_0x418dca[_0xb72713][0x0],_0xe8321b=_0x418dca[_0xb72713][0x1];_0x254148['beginPath'](),_0x254148[_0x57ad31(0x328)](this['cc']['getCoordX'](_0x449f28),this['cc']['getCoordY'](_0xe8321b),0x1,0x0,0x2*Math['PI']),_0x254148[_0x57ad31(0x22a)](),_0x254148['closePath']();}}_0x254148[_0x57ad31(0x35f)]();}};class PipeStream{constructor(_0x4c0639){const _0x18e226=_0x21dfaf;this[_0x18e226(0x20d)]=_0x4c0639,this[_0x18e226(0x2a8)]={};}['on'](_0x3ed7e7,_0x38c595){const _0x3084fb=_0x21dfaf;if(this[_0x3084fb(0x2a8)][_0x3ed7e7]===undefined)this[_0x3084fb(0x2a8)][_0x3ed7e7]=[];if(typeof _0x38c595==_0x3084fb(0x2af))this[_0x3084fb(0x2a8)][_0x3ed7e7][_0x3084fb(0x204)](_0x38c595);}['remove'](_0xb7325d,_0x564cd4){const _0xff96bb=_0x21dfaf;for(const _0x407148 in this[_0xff96bb(0x2a8)]){this[_0xff96bb(0x2a8)][_0x407148]=this['observers'][_0x407148][_0xff96bb(0x2b6)](_0x358cbd=>_0x358cbd!==_0x564cd4);}}[_0x21dfaf(0x340)](_0x4448ad,_0x27ae48){const _0x3deb76=_0x21dfaf;this[_0x3deb76(0x2a8)][_0x4448ad]&&this[_0x3deb76(0x2a8)][_0x4448ad]['forEach'](_0x20da57=>{const _0x8166db=_0x3deb76;if(typeof _0x20da57==_0x8166db(0x2af))_0x20da57(_0x27ae48);});}[_0x21dfaf(0x2f0)](_0x2ebfc8){const _0x320c32=_0x21dfaf;this[_0x320c32(0x2a8)][_0x320c32(0x2b4)](_0x1078f7=>{const _0x3f13dd=_0x320c32;_0x1078f7[_0x3f13dd(0x2b4)](_0x538b73=>{typeof _0x538b73=='function'&&_0x538b73(_0x2ebfc8);});});}};class Pipe{constructor(){this['streams']={};}[_0x21dfaf(0x1b1)](_0x9c352a){const _0x29bd60=_0x21dfaf;return!this[_0x29bd60(0x374)][_0x9c352a]&&(this[_0x29bd60(0x374)][_0x9c352a]=new PipeStream(_0x9c352a)),this[_0x29bd60(0x374)][_0x9c352a];}}const pipe=new Pipe(),stream=pipe;;class ImageProcessing{constructor(){}static[_0x21dfaf(0x21c)](_0x2c76f4,_0x558bbc,_0x440283,_0x5174b7,_0x4b1946){const _0x3dc9ed=_0x21dfaf;let _0x1fd179=document['createElement']('CANVAS');_0x1fd179['width']=_0x5174b7,_0x1fd179[_0x3dc9ed(0x316)]=_0x4b1946;let _0x354b54=_0x1fd179[_0x3dc9ed(0x2fb)]('2d');return _0x354b54[_0x3dc9ed(0x292)](_0x2c76f4,_0x558bbc,_0x440283,_0x5174b7,_0x4b1946,0x0,0x0,_0x5174b7,_0x4b1946),_0x1fd179;}static[_0x21dfaf(0x1b2)](_0x51fbe5,_0x5b1266={'w':null,'h':null}){const _0x28014e=_0x21dfaf;let _0x18608a=document['createElement'](_0x28014e(0x18c));if(_0x5b1266['w']==null&&_0x5b1266['h']==null)_0x18608a[_0x28014e(0x1ff)]=_0x51fbe5[_0x28014e(0x1ff)],_0x18608a[_0x28014e(0x316)]=_0x51fbe5[_0x28014e(0x316)];else{if(_0x5b1266['w']==null)_0x18608a[_0x28014e(0x316)]=_0x5b1266['h'],_0x18608a[_0x28014e(0x1ff)]=_0x5b1266['h']/_0x51fbe5[_0x28014e(0x316)]*_0x51fbe5['width'];else _0x5b1266['h']==null?(_0x18608a[_0x28014e(0x1ff)]=_0x5b1266['w'],_0x18608a[_0x28014e(0x316)]=_0x5b1266['w']/_0x51fbe5[_0x28014e(0x1ff)]*_0x51fbe5[_0x28014e(0x316)]):(_0x18608a[_0x28014e(0x1ff)]=_0x5b1266['w'],_0x18608a[_0x28014e(0x316)]=_0x5b1266['h']);}let _0xbbc9f2=_0x18608a['getContext']('2d');return _0xbbc9f2[_0x28014e(0x292)](_0x51fbe5,0x0,0x0,_0x18608a[_0x28014e(0x1ff)],_0x18608a[_0x28014e(0x316)]),_0x18608a;}static[_0x21dfaf(0x27f)](_0x3a07bd,_0x5f1963,_0x51c555,_0x70bf81,_0x2697a2,_0x2fa7e2,_0x477af2){const _0x4edd8e=_0x21dfaf;let _0x442094=document['createElement'](_0x4edd8e(0x18c));_0x442094[_0x4edd8e(0x1ff)]=_0x2fa7e2,_0x442094[_0x4edd8e(0x316)]=_0x477af2;let _0x151044=_0x442094[_0x4edd8e(0x2fb)]('2d');return _0x151044['drawImage'](_0x3a07bd,_0x5f1963,_0x51c555,_0x70bf81,_0x2697a2,0x0,0x0,_0x2fa7e2,_0x477af2),_0x442094;}static[_0x21dfaf(0x291)](_0xb3f03){const _0x35feb9=_0x21dfaf;let _0x37c29e=document['createElement']('CANVAS');_0x37c29e[_0x35feb9(0x1ff)]=_0xb3f03[_0x35feb9(0x1ff)],_0x37c29e[_0x35feb9(0x316)]=_0xb3f03[_0x35feb9(0x316)];let _0x4e054d=_0x37c29e['getContext']('2d');return _0x4e054d['putImageData'](_0xb3f03,0x0,0x0),_0x37c29e;}static[_0x21dfaf(0x326)](_0x348ff4){const _0x279099=_0x21dfaf;let _0x35e4cd=document[_0x279099(0x219)](_0x279099(0x18c));_0x35e4cd[_0x279099(0x1ff)]=_0x348ff4[_0x279099(0x1ff)],_0x35e4cd[_0x279099(0x316)]=_0x348ff4[_0x279099(0x316)];let _0x35ddf1=_0x35e4cd[_0x279099(0x2fb)]('2d');return _0x35ddf1[_0x279099(0x292)](_0x348ff4,0x0,0x0),_0x35e4cd;}static[_0x21dfaf(0x2bc)](_0x15cfb6){const _0x2d88c3=_0x21dfaf;let _0x126d5f=_0x15cfb6[_0x2d88c3(0x2fb)]('2d'),_0x1ce33d=_0x126d5f[_0x2d88c3(0x338)](0x0,0x0,_0x15cfb6[_0x2d88c3(0x1ff)],_0x15cfb6[_0x2d88c3(0x316)]);return _0x1ce33d;}static[_0x21dfaf(0x33b)](_0x182cdc,_0x30b3f2=_0x21dfaf(0x323),_0x3b2bb4=0.92){const _0x2b5b69=_0x21dfaf;return _0x182cdc[_0x2b5b69(0x315)](_0x30b3f2,_0x3b2bb4);}static[_0x21dfaf(0x205)](_0x3725a0,_0xe9d4e3=_0x21dfaf(0x323),_0x4150bf=0.92){return new Promise(function(_0x2b8ce4,_0x1f585d){const _0x26a366=_0x36e5;let _0x1c0dfb=new Image();_0x1c0dfb['setAttribute'](_0x26a366(0x235),_0x26a366(0x314)),_0x1c0dfb[_0x26a366(0x1b9)]=()=>{_0x2b8ce4(_0x1c0dfb);},_0x1c0dfb['onerror']=_0x446951=>{const _0x2e03c6=_0x26a366;_0x1f585d(_0x2e03c6(0x230)+_0x446951);},_0x1c0dfb[_0x26a366(0x202)]=ImageProcessing['canvasToBase64'](_0x3725a0,_0xe9d4e3,_0x4150bf);});}static[_0x21dfaf(0x190)](_0x1e13ae){const _0x36765d=_0x21dfaf;let _0x1cd281=_0x1e13ae[_0x36765d(0x2fb)]('2d'),_0x1e7449=_0x1cd281[_0x36765d(0x338)](0x0,0x0,_0x1e13ae[_0x36765d(0x1ff)],_0x1e13ae[_0x36765d(0x316)]),_0x1b6f88=_0x1e7449[_0x36765d(0x2ba)],_0x18043e=_0x1e13ae[_0x36765d(0x1ff)]*_0x1e13ae['height']*0x4;for(let _0x564556=_0x18043e-0x1;_0x564556>0x0;_0x564556-=0x4){let _0x8fd759=0.3*_0x1b6f88[_0x564556-0x3]+0.59*_0x1b6f88[_0x564556-0x2]+0.11*_0x1b6f88[_0x564556-0x1];_0x1b6f88[_0x564556-0x3]=_0x8fd759,_0x1b6f88[_0x564556-0x2]=_0x8fd759,_0x1b6f88[_0x564556-0x1]=_0x8fd759;}let _0x4a9f6d=document[_0x36765d(0x219)]('CANVAS'),_0x16a8cc=_0x4a9f6d[_0x36765d(0x2fb)]('2d');return _0x16a8cc[_0x36765d(0x1c4)](_0x1e7449,0x0,0x0),_0x4a9f6d;}static[_0x21dfaf(0x28d)](_0x286736,_0x50bc3b,_0x5a80b8=_0x21dfaf(0x2bd)){const _0x3229a1=_0x21dfaf;let _0x3977c6=document[_0x3229a1(0x219)]('CANVAS');_0x3977c6[_0x3229a1(0x1ff)]=_0x286736,_0x3977c6[_0x3229a1(0x316)]=_0x50bc3b;let _0x35485c=_0x3977c6[_0x3229a1(0x2fb)]('2d');return _0x35485c[_0x3229a1(0x1dd)]=_0x5a80b8,_0x35485c[_0x3229a1(0x298)](0x0,0x0,_0x286736,_0x50bc3b),_0x3977c6;}static['getLaplacianVariance'](_0x28289c,_0x5279a0=0x1e){const _0x1e8487=_0x21dfaf;let _0x2e7e23=_0x28289c['getContext']('2d'),_0x4eee35=_0x2e7e23[_0x1e8487(0x338)](0x0,0x0,_0x28289c[_0x1e8487(0x1ff)],_0x28289c[_0x1e8487(0x316)]),_0x26f28c=_0x4eee35[_0x1e8487(0x2ba)],_0x33c266=[[0x0,0x1,0x0],[0x1,-0x4,0x1],[0x0,0x1,0x0]],_0xab451e=_0x28289c['width']*0x4,_0x6429c6=0x0,_0x9473ec=0x3,_0x205ee2=Math['floor'](_0x9473ec/0x2),_0x3f61be=0x0,_0x25f665=0x0;for(let _0x386476=0x1;_0x386476<_0x28289c[_0x1e8487(0x316)]-0x1;_0x386476++){for(let _0x16ec50=0x4;_0x16ec50<_0xab451e-0x4;_0x16ec50+=0x4){_0x3f61be=0x0;for(let _0x20748a=0x0;_0x20748a<_0x9473ec;_0x20748a++){for(let _0x52842b=0x0;_0x52842b<_0x9473ec;_0x52842b++){_0x6429c6=_0xab451e*(_0x386476+_0x20748a-_0x205ee2)+_0x16ec50+(_0x52842b-_0x205ee2)*0x4;let _0x3922e0=0.3*_0x26f28c[_0x6429c6]+0.59*_0x26f28c[_0x6429c6+0x1]+0.11*_0x26f28c[_0x6429c6+0x2];_0x3f61be+=_0x3922e0*_0x33c266[_0x20748a][_0x52842b];}}_0x3f61be>_0x5279a0&&(_0x25f665+=0x1);}}return _0x25f665;}static[_0x21dfaf(0x2c6)](_0x18a39c){return new Promise(function(_0x230436,_0x4abe75){const _0x435e63=_0x36e5;let _0x11e64e=new Image();_0x11e64e['setAttribute'](_0x435e63(0x235),_0x435e63(0x314)),_0x11e64e['onload']=()=>{_0x230436(_0x11e64e);},_0x11e64e['onerror']=()=>{const _0x10b1ff=_0x435e63;_0x4abe75(_0x10b1ff(0x230)+_0x18a39c);},_0x11e64e[_0x435e63(0x202)]=_0x18a39c;});}};class WebWorker{constructor(_0x14d8e1={}){const _0x9a79f9=_0x21dfaf;this['worker']=null,this['stream']=null,this[_0x9a79f9(0x2f6)]={'path':null},this[_0x9a79f9(0x2f6)]=deepMerge(this[_0x9a79f9(0x2f6)],_0x14d8e1),this[_0x9a79f9(0x27a)]();}[_0x21dfaf(0x27a)](){const _0x42d3bd=_0x21dfaf;this[_0x42d3bd(0x1ee)]=stream['open'](_0x42d3bd(0x1f2)),this[_0x42d3bd(0x1ee)]['on']('getFace',this[_0x42d3bd(0x1b5)]['bind'](this)),this['stream']['on'](_0x42d3bd(0x313),this['getTinyFace'][_0x42d3bd(0x311)](this)),this[_0x42d3bd(0x1ee)]['on'](_0x42d3bd(0x294),this[_0x42d3bd(0x294)][_0x42d3bd(0x311)](this)),this['stream']['on'](_0x42d3bd(0x1af),this['getCard'][_0x42d3bd(0x311)](this)),window[_0x42d3bd(0x33d)]&&this[_0x42d3bd(0x2f6)][_0x42d3bd(0x2ec)]!=null?(this[_0x42d3bd(0x1f2)]=new Worker(this[_0x42d3bd(0x2f6)][_0x42d3bd(0x2ec)]),this[_0x42d3bd(0x1f2)][_0x42d3bd(0x1ba)]=this['onWorkerMessage']['bind'](this)):console[_0x42d3bd(0x18e)](_0x42d3bd(0x27e));}[_0x21dfaf(0x1b5)](_0x4484cd){const _0x56d89d=_0x21dfaf;let _0x1eed9b=null;if(_0x4484cd instanceof HTMLCanvasElement){let _0x508a88=_0x4484cd[_0x56d89d(0x2fb)]('2d');_0x1eed9b=_0x508a88[_0x56d89d(0x338)](0x0,0x0,_0x4484cd[_0x56d89d(0x1ff)],_0x4484cd[_0x56d89d(0x316)]);}else{if(_0x4484cd instanceof HTMLImageElement){let _0x4ea21b=document['createElement'](_0x56d89d(0x1eb)),_0x3cbccb=_0x4ea21b[_0x56d89d(0x2fb)]('2d');_0x4ea21b[_0x56d89d(0x1ff)]=_0x4484cd[_0x56d89d(0x1ff)],_0x4ea21b['height']=_0x4484cd['height'],_0x3cbccb[_0x56d89d(0x292)](_0x4484cd,0x0,0x0),_0x1eed9b=_0x3cbccb[_0x56d89d(0x338)](0x0,0x0,_0x4484cd[_0x56d89d(0x1ff)],_0x4484cd[_0x56d89d(0x316)]);}}this[_0x56d89d(0x1f2)][_0x56d89d(0x28a)]({'type':_0x56d89d(0x1e0),'action':'getFace','data':_0x1eed9b});}[_0x21dfaf(0x313)](_0x2b41f1){const _0x1a50a0=_0x21dfaf;let _0xa352f9=null;if(_0x2b41f1 instanceof HTMLCanvasElement){let _0x79731d=_0x2b41f1[_0x1a50a0(0x2fb)]('2d');_0xa352f9=_0x79731d['getImageData'](0x0,0x0,_0x2b41f1[_0x1a50a0(0x1ff)],_0x2b41f1[_0x1a50a0(0x316)]);}else{if(_0x2b41f1 instanceof HTMLImageElement){let _0x514535=document[_0x1a50a0(0x219)](_0x1a50a0(0x1eb)),_0x4ed6e8=_0x514535['getContext']('2d');_0x514535[_0x1a50a0(0x1ff)]=_0x2b41f1[_0x1a50a0(0x1ff)],_0x514535[_0x1a50a0(0x316)]=_0x2b41f1[_0x1a50a0(0x316)],_0x4ed6e8[_0x1a50a0(0x292)](_0x2b41f1,0x0,0x0),_0xa352f9=_0x4ed6e8[_0x1a50a0(0x338)](0x0,0x0,_0x2b41f1['width'],_0x2b41f1[_0x1a50a0(0x316)]);}}this[_0x1a50a0(0x1f2)][_0x1a50a0(0x28a)]({'type':_0x1a50a0(0x1e0),'action':'getTinyFace','data':_0xa352f9});}['getCard'](_0x36b2e2){const _0x3275cb=_0x21dfaf;let _0x254c9e=null;if(_0x36b2e2 instanceof HTMLCanvasElement)_0x254c9e=ImageProcessing[_0x3275cb(0x2bc)](_0x36b2e2);else _0x36b2e2 instanceof HTMLImageElement&&(_0x254c9e=ImageProcessing['imageToCanvas'](_0x36b2e2));this[_0x3275cb(0x1f2)][_0x3275cb(0x28a)]({'type':'scan','action':_0x3275cb(0x1af),'data':_0x254c9e});}[_0x21dfaf(0x294)](){const _0x154cb2=_0x21dfaf;this['worker'][_0x154cb2(0x28a)]({'type':_0x154cb2(0x2cf),'action':_0x154cb2(0x294)});}[_0x21dfaf(0x247)](_0x2bbdf2){const _0x5cd6b4=_0x21dfaf;let _0x51fd39=_0x2bbdf2[_0x5cd6b4(0x2ba)]['type'],_0x24f70a=_0x2bbdf2['data'][_0x5cd6b4(0x2db)],_0x268a59=_0x2bbdf2[_0x5cd6b4(0x2ba)]['data'];switch(_0x51fd39){case _0x5cd6b4(0x1e0):if(_0x24f70a==='faceDetected')this[_0x5cd6b4(0x1ee)][_0x5cd6b4(0x340)]('onFaceResult',_0x268a59);else _0x24f70a===_0x5cd6b4(0x300)&&this[_0x5cd6b4(0x1ee)][_0x5cd6b4(0x340)]('onTinyFaceResult',_0x268a59);break;case'scan':this[_0x5cd6b4(0x1ee)][_0x5cd6b4(0x340)]('onScanResult',_0x268a59);break;case'scanLoaded':this[_0x5cd6b4(0x1ee)][_0x5cd6b4(0x340)](_0x5cd6b4(0x232),_0x268a59);break;case'other':break;default:break;}}};class HeadPos{constructor(){const _0x4e62fd=_0x21dfaf;this[_0x4e62fd(0x22f)]=null,this[_0x4e62fd(0x2c7)]={'x':0x0,'y':0x0,'width':0x0,'height':0x0},this[_0x4e62fd(0x297)]=[],this[_0x4e62fd(0x1e0)]=null,this[_0x4e62fd(0x1d8)]=0x0,this['pitch']=0x0,this[_0x4e62fd(0x224)]=0x0;}[_0x21dfaf(0x2d8)](_0x5c9116){const _0x382fbb=_0x21dfaf;this[_0x382fbb(0x1e0)]=_0x5c9116,this[_0x382fbb(0x2c7)]={'x':_0x5c9116['x'],'y':_0x5c9116['y'],'height':_0x5c9116['height'],'width':_0x5c9116[_0x382fbb(0x1ff)]},this[_0x382fbb(0x297)]=_0x5c9116[_0x382fbb(0x319)],this[_0x382fbb(0x233)]();}['clear'](){const _0x47ccf8=_0x21dfaf;this[_0x47ccf8(0x22f)]=null,this[_0x47ccf8(0x2c7)]={'x':0x0,'y':0x0,'width':0x0,'height':0x0},this[_0x47ccf8(0x297)]=[],this['face']=null,this['yaw']=0x0,this[_0x47ccf8(0x307)]=0x0,this['roll']=0x0;}[_0x21dfaf(0x233)](){const _0x67c167=_0x21dfaf;let _0x303cba=this[_0x67c167(0x1e0)]['landMarks'][0xea],_0x29c099=this[_0x67c167(0x1e0)][_0x67c167(0x319)][0x1c6],_0x4ebc76=this[_0x67c167(0x1e0)]['landMarks'][0xa],_0xb44c65=this['face']['landMarks'][0x98];this[_0x67c167(0x1d8)]=Math[_0x67c167(0x225)](_0x29c099[0x2]-_0x303cba[0x2],_0x29c099[0x0]-_0x303cba[0x0])*0xb4/Math['PI'],this['pitch']=Math[_0x67c167(0x225)](_0xb44c65[0x0]-_0x4ebc76[0x0],_0xb44c65[0x2]-_0x4ebc76[0x2])*0xb4/Math['PI'],this[_0x67c167(0x224)]=Math[_0x67c167(0x225)](_0x29c099[0x1]-_0x303cba[0x1],_0x29c099[0x0]-_0x303cba[0x0])*0xb4/Math['PI'];}[_0x21dfaf(0x1ce)](){}[_0x21dfaf(0x2ed)](){const _0x499903=_0x21dfaf;return this[_0x499903(0x2c7)];}[_0x21dfaf(0x320)](){const _0xa9e782=_0x21dfaf;return this[_0xa9e782(0x297)];}}const headpos=HeadPos;;const FaceCommands={'FORWARD':_0x21dfaf(0x1e9),'LEFT':_0x21dfaf(0x19c),'RIGHT':_0x21dfaf(0x1fe),'UP':'up','DOWN':'down','SMILE':_0x21dfaf(0x2ea),'BLINKING':'blinking','NONE':_0x21dfaf(0x2c5)};class Commander{constructor(){const _0x983504=_0x21dfaf;this[_0x983504(0x369)]=[],this['count']=0x2,this[_0x983504(0x332)]=[FaceCommands[_0x983504(0x2ac)],FaceCommands[_0x983504(0x254)],FaceCommands['UP'],FaceCommands[_0x983504(0x2a0)],FaceCommands[_0x983504(0x348)]],this[_0x983504(0x2d0)]=0x0;}[_0x21dfaf(0x210)](){const _0x17b738=_0x21dfaf;this[_0x17b738(0x206)]();for(let _0x831ed5=0x0;_0x831ed5<this['count'];_0x831ed5++){this[_0x17b738(0x369)][_0x17b738(0x204)]({'name':FaceCommands[_0x17b738(0x30f)]});}return this[_0x17b738(0x369)];}[_0x21dfaf(0x218)](){const _0x2593f4=_0x21dfaf;return this[_0x2593f4(0x2d0)]<this[_0x2593f4(0x369)]['length']-0x1?(this[_0x2593f4(0x2d0)]++,this['commands'][this[_0x2593f4(0x2d0)]]):null;}[_0x21dfaf(0x195)](){const _0x3472b9=_0x21dfaf;return this[_0x3472b9(0x369)][this[_0x3472b9(0x2d0)]];}['hasCommand'](){const _0x38aa10=_0x21dfaf;return this[_0x38aa10(0x2d0)]<this[_0x38aa10(0x369)][_0x38aa10(0x2a9)]-0x1;}[_0x21dfaf(0x206)](){const _0x512565=_0x21dfaf;this[_0x512565(0x2d0)]=0x0,this['commands']=[];}};const DCFaceError={'NO_FACE':_0x21dfaf(0x237),'MANY_FACES':_0x21dfaf(0x262),'LOW_LIGHT':_0x21dfaf(0x2e3),'HIGH_LIGHT':_0x21dfaf(0x1e1),'OUT_OF_BOUNDS':_0x21dfaf(0x2f2)},DCFacePos={'NONE':'none','UP':'up','DOWN':_0x21dfaf(0x1f6),'FORWARD':_0x21dfaf(0x1e9),'LEFT':_0x21dfaf(0x19c),'RIGHT':_0x21dfaf(0x1fe)},FaceActionSteps={'NONE':_0x21dfaf(0x2c5),'INIT':_0x21dfaf(0x31d),'START':_0x21dfaf(0x1a2),'ACTIONS':'actions','FINISH':_0x21dfaf(0x33e)},CommandResult={'SUCCESS':_0x21dfaf(0x192),'NONE':'none','REJECT':_0x21dfaf(0x239)};class FaceAnalyser{constructor(_0x2e101d,_0x5b8b98={}){const _0x20f0ea=_0x21dfaf;this[_0x20f0ea(0x1eb)]=_0x2e101d,this[_0x20f0ea(0x2f6)]={'video':null,'area':{'x':0x0,'y':0x0,'width':0x0,'height':0x0},'detectTime':0x64,'startingWaitTime':0x7d0,'onFaceDetected':null,'onError':null,'onFinished':null,'onCommand':null,'onCommandResult':null,'onStep':null,'onStartDownCount':null},this[_0x20f0ea(0x2f6)]=deepMerge(this['options'],_0x5b8b98),this[_0x20f0ea(0x325)]=null,this[_0x20f0ea(0x2e5)]={'lowLight':![],'highLight':![],'noFace':![],'manyFace':![],'outOfBounds':![]},this[_0x20f0ea(0x1c1)]=DCFacePos[_0x20f0ea(0x1cd)],this[_0x20f0ea(0x1ee)]=null,this['headpos']=new headpos(),this['commander']=new Commander(),this[_0x20f0ea(0x203)]=![],this[_0x20f0ea(0x23a)]=[],this['step']=FaceActionSteps['NONE'],this['detectedFaceCountDownBeforeStart']=0x3,this[_0x20f0ea(0x24a)]=0x0,this['errorTime']=0x0,this[_0x20f0ea(0x1b0)]=0x7d0,this[_0x20f0ea(0x1e8)]=0x1770,this['actionWaitBeforeCheck']=0x3e8,this[_0x20f0ea(0x30b)]=0x7d0,this[_0x20f0ea(0x31c)]=![],this[_0x20f0ea(0x2ee)]=null,this[_0x20f0ea(0x263)]=[],this['currentCommand']=FaceCommands[_0x20f0ea(0x1cd)],this[_0x20f0ea(0x1d9)]=DCFacePos['NONE'],this[_0x20f0ea(0x1f0)]=[],this['cc']=null,this[_0x20f0ea(0x2aa)]();}[_0x21dfaf(0x2aa)](){const _0x277ff1=_0x21dfaf;this[_0x277ff1(0x1ee)]=stream['open'](_0x277ff1(0x1f2)),this[_0x277ff1(0x1ee)]['on'](_0x277ff1(0x29e),_0xa84ef2=>{const _0x1fff60=_0x277ff1;this['detectTimer']!=null&&(this[_0x1fff60(0x1f9)](_0xa84ef2),this[_0x1fff60(0x203)]=![]);});}['start'](){const _0x2b45d3=_0x21dfaf;this[_0x2b45d3(0x203)]=![],this[_0x2b45d3(0x23a)]=[],this[_0x2b45d3(0x31c)]=![],this[_0x2b45d3(0x1c9)]=FaceActionSteps['INIT'],this[_0x2b45d3(0x263)]=[],this['detectedFaceCountDownBeforeStart']=0x3,this[_0x2b45d3(0x2ee)]=new Date()[_0x2b45d3(0x26d)](),this[_0x2b45d3(0x1d1)](),this[_0x2b45d3(0x2ab)](this[_0x2b45d3(0x1c9)]),clearTimeout(this[_0x2b45d3(0x325)]),this[_0x2b45d3(0x325)]=setTimeout(this['observe'][_0x2b45d3(0x311)](this),this[_0x2b45d3(0x2f6)][_0x2b45d3(0x20f)]);}[_0x21dfaf(0x1f3)](){const _0x13d5a5=_0x21dfaf;this['tid']=null,clearTimeout(this['detectTimer']),this['detectTimer']=null,this['lock']=![],this[_0x13d5a5(0x206)]();}[_0x21dfaf(0x206)](){const _0x434385=_0x21dfaf;this[_0x434385(0x23a)]=[],this[_0x434385(0x1c9)]=FaceActionSteps[_0x434385(0x1cd)],this[_0x434385(0x21d)]=0x3,this[_0x434385(0x1d9)]=DCFacePos[_0x434385(0x1cd)],this['currentActionList']=[],this['currentStepActive']=![];}[_0x21dfaf(0x1d1)](){const _0x4444cf=_0x21dfaf;let _0x1a8428=this[_0x4444cf(0x2ca)]['shuffle']();for(let _0x57963 in _0x1a8428){this[_0x4444cf(0x263)][_0x4444cf(0x204)]({'pos':DCFacePos[_0x4444cf(0x1cd)],'image':null,'command':FaceCommands[_0x4444cf(0x1cd)],'status':![]});}console[_0x4444cf(0x18e)](_0x4444cf(0x1d1),_0x1a8428);}['observe'](){const _0x247618=_0x21dfaf;!this[_0x247618(0x203)]&&(this[_0x247618(0x1ee)][_0x247618(0x340)](_0x247618(0x1b5),this['canvas']),this[_0x247618(0x203)]=!![]),this['detectTimer']=setTimeout(this[_0x247618(0x27b)][_0x247618(0x311)](this),this[_0x247618(0x2f6)]['detectTime']);}[_0x21dfaf(0x1f9)](_0x110544){const _0x288a0a=_0x21dfaf;this[_0x288a0a(0x2e5)]['noFace']=![],this[_0x288a0a(0x2e5)][_0x288a0a(0x32e)]=![],this[_0x288a0a(0x1c1)]=DCFacePos[_0x288a0a(0x1cd)];if(_0x110544[_0x288a0a(0x2a9)]>0x1)this[_0x288a0a(0x2e5)][_0x288a0a(0x32e)]=!![];else{if(_0x110544[_0x288a0a(0x2a9)]===0x0){this[_0x288a0a(0x2e5)]['noFace']=!![];if(typeof this['options']['onFaceDetected']===_0x288a0a(0x2af))this[_0x288a0a(0x2f6)][_0x288a0a(0x1f9)]([]);this['lock']=![];return;}}this[_0x288a0a(0x23a)]=_0x110544;if(typeof this[_0x288a0a(0x2f6)][_0x288a0a(0x1f9)]===_0x288a0a(0x2af))this[_0x288a0a(0x2f6)]['onFaceDetected'](_0x110544);this['detectedFaceCountDownBeforeStart']>0x0?(this['detectedFaceCountDownBeforeStart']--,this[_0x288a0a(0x24a)]=new Date()[_0x288a0a(0x26d)](),this[_0x288a0a(0x34c)]=new Date()[_0x288a0a(0x26d)]()):(this[_0x288a0a(0x24d)][_0x288a0a(0x2d8)](_0x110544[0x0]),this[_0x288a0a(0x1e4)](),this[_0x288a0a(0x36a)]()),this[_0x288a0a(0x203)]=![];}[_0x21dfaf(0x33e)](_0x4972ec,_0xdb7588){const _0xc1e503=_0x21dfaf;if(this[_0xc1e503(0x2ee)]==null)return![];let _0x1ffcf6={'tid':this[_0xc1e503(0x2ee)],'status':_0xdb7588,'results':this[_0xc1e503(0x263)],'image':null};for(let _0x31c9b2 in this['results']){if(this[_0xc1e503(0x263)][_0x31c9b2][_0xc1e503(0x1c2)]===FaceCommands[_0xc1e503(0x30f)]&&this[_0xc1e503(0x263)][_0x31c9b2][_0xc1e503(0x2be)]===!![]){_0x1ffcf6[_0x31c9b2]['image']=this[_0xc1e503(0x263)][_0x31c9b2][_0xc1e503(0x1a7)];break;}}typeof this[_0xc1e503(0x2f6)][_0xc1e503(0x355)]===_0xc1e503(0x2af)&&this[_0xc1e503(0x2f6)][_0xc1e503(0x355)](_0x1ffcf6),this[_0xc1e503(0x1f3)]();}['defineCurrentAction'](){const _0x5ae8b0=_0x21dfaf;let _0x4ba5ff=this[_0x5ae8b0(0x24d)]['getBox'](),_0x25de4e={'x':this['cc'][_0x5ae8b0(0x243)](_0x4ba5ff['x']),'y':this['cc'][_0x5ae8b0(0x34a)](_0x4ba5ff['y']),'width':this['cc']['getSize'](_0x4ba5ff['width']),'height':this['cc'][_0x5ae8b0(0x2a1)](_0x4ba5ff['height'])},_0x29e9e3=this['options'][_0x5ae8b0(0x189)][_0x5ae8b0(0x1ff)]*0.3,_0x3e9675=this[_0x5ae8b0(0x2f6)][_0x5ae8b0(0x189)]['height']*0.3,_0x4217b8=_0x25de4e['x']+_0x25de4e['width'],_0x4de46b=_0x25de4e['y']+_0x25de4e[_0x5ae8b0(0x316)];if(_0x25de4e['x']>this[_0x5ae8b0(0x2f6)][_0x5ae8b0(0x189)]['x']-_0x29e9e3&&_0x25de4e['y']>this[_0x5ae8b0(0x2f6)][_0x5ae8b0(0x189)]['y']-_0x3e9675&&_0x4217b8<this[_0x5ae8b0(0x2f6)]['area']['x']+this['options']['area']['width']+_0x29e9e3&&_0x4de46b<this[_0x5ae8b0(0x2f6)]['area']['y']+this['options'][_0x5ae8b0(0x189)]['height']+_0x3e9675)this[_0x5ae8b0(0x2e5)][_0x5ae8b0(0x345)]=![];else return this[_0x5ae8b0(0x2e5)][_0x5ae8b0(0x345)]=!![],![];this[_0x5ae8b0(0x24d)][_0x5ae8b0(0x224)]<0xc&&this[_0x5ae8b0(0x24d)][_0x5ae8b0(0x224)]>-0xc&&this['headpos'][_0x5ae8b0(0x307)]<=-0x14&&this[_0x5ae8b0(0x24d)][_0x5ae8b0(0x307)]>=-0x82&&this[_0x5ae8b0(0x24d)][_0x5ae8b0(0x1d8)]>=-0xa&&this['headpos'][_0x5ae8b0(0x1d8)]<=0xa&&(this['currentAction']=DCFacePos['FORWARD']),this['headpos']['roll']<0xc&&this['headpos'][_0x5ae8b0(0x224)]>-0xc&&this[_0x5ae8b0(0x24d)][_0x5ae8b0(0x1d8)]<-0xa&&(this['currentAction']=DCFacePos[_0x5ae8b0(0x2ac)]),this['headpos'][_0x5ae8b0(0x224)]<0xc&&this[_0x5ae8b0(0x24d)]['roll']>-0xc&&this['headpos'][_0x5ae8b0(0x1d8)]>0xa&&(this[_0x5ae8b0(0x1d9)]=DCFacePos['RIGHT']),this[_0x5ae8b0(0x24d)]['roll']<0xc&&this[_0x5ae8b0(0x24d)]['roll']>-0xc&&this[_0x5ae8b0(0x24d)]['pitch']<-0x82&&(this[_0x5ae8b0(0x1d9)]=DCFacePos['UP']),this[_0x5ae8b0(0x24d)][_0x5ae8b0(0x224)]<0xc&&this[_0x5ae8b0(0x24d)][_0x5ae8b0(0x224)]>-0xc&&this[_0x5ae8b0(0x24d)][_0x5ae8b0(0x307)]>-0x14&&(this[_0x5ae8b0(0x1d9)]=DCFacePos['DOWN']);}[_0x21dfaf(0x36a)](){const _0xb86713=_0x21dfaf;let _0x10e795=this[_0xb86713(0x1d6)](),_0x53e97d=this['getTimeDiff'](this[_0xb86713(0x24a)]);_0x10e795?(this[_0xb86713(0x1c1)]=DCFacePos['NONE'],this['callError'](this[_0xb86713(0x2e5)])):this[_0xb86713(0x34c)]=new Date()[_0xb86713(0x26d)]();this['step']===FaceActionSteps['INIT']&&(this[_0xb86713(0x31c)]=![],this['step']=FaceActionSteps[_0xb86713(0x223)],this['callStepChange'](this['step']));if(this['step']===FaceActionSteps[_0xb86713(0x223)]){let _0x57f702=Math['round']((this[_0xb86713(0x2f6)][_0xb86713(0x2f5)]-_0x53e97d)/0x3e8);if(_0x57f702>0x0){if(typeof this[_0xb86713(0x2f6)][_0xb86713(0x1db)]==='function')this[_0xb86713(0x2f6)][_0xb86713(0x1db)](_0x57f702);}else this['step']=FaceActionSteps[_0xb86713(0x220)],this[_0xb86713(0x31c)]=![],this[_0xb86713(0x24a)]=new Date()['getTime'](),this['sessionTime']=new Date()['getTime'](),this[_0xb86713(0x2ab)](this[_0xb86713(0x1c9)]);}if(this[_0xb86713(0x1c9)]===FaceActionSteps[_0xb86713(0x220)]&&(_0x10e795===![]||this[_0xb86713(0x1b0)]===0x0)){let _0x32a888=this[_0xb86713(0x2ca)][_0xb86713(0x2d0)],_0x24e028=this['commander']['current']();this[_0xb86713(0x2f1)]!==_0x24e028[_0xb86713(0x20d)]&&(this['currentCommand']=_0x24e028[_0xb86713(0x20d)],this['currentActionList']=[],this[_0xb86713(0x25d)](_0x24e028[_0xb86713(0x20d)]));_0x53e97d>0x0&&this[_0xb86713(0x1f0)]['push']({'pos':this[_0xb86713(0x1d9)],'posPitch':this['headpos'][_0xb86713(0x307)],'posYaw':this['headpos']['yaw'],'time':new Date()[_0xb86713(0x26d)](),'valid':!![],'command':_0x24e028});let _0x2317fc=this[_0xb86713(0x1e8)]+this[_0xb86713(0x2f7)]-_0x53e97d,_0x4ac3c5=_0x53e97d>this[_0xb86713(0x2f7)]?this[_0xb86713(0x357)](_0x24e028[_0xb86713(0x20d)],this['currentAction']):CommandResult[_0xb86713(0x1cd)];if(_0x2317fc>0x0&&_0x4ac3c5===CommandResult[_0xb86713(0x1cd)]){}else{if(_0x53e97d>this[_0xb86713(0x2f7)]){let _0x1d4934=ImageProcessing[_0xb86713(0x21c)](this[_0xb86713(0x1eb)],this[_0xb86713(0x24d)][_0xb86713(0x2c7)]['x'],this[_0xb86713(0x24d)][_0xb86713(0x2c7)]['y'],this[_0xb86713(0x24d)]['box'][_0xb86713(0x1ff)],this[_0xb86713(0x24d)]['box'][_0xb86713(0x316)]);_0x4ac3c5===CommandResult[_0xb86713(0x30e)]?this[_0xb86713(0x263)][_0x32a888]={'pos':this[_0xb86713(0x1d9)],'command':_0x24e028,'status':!![],'image':_0x1d4934}:this[_0xb86713(0x263)][_0x32a888]={'pos':this['currentAction'],'command':_0x24e028,'status':![],'image':_0x1d4934},this['callCommandResult'](this[_0xb86713(0x263)][_0x32a888]),this[_0xb86713(0x2ca)][_0xb86713(0x2a7)]()?this[_0xb86713(0x2ca)]['next']():(this[_0xb86713(0x1c9)]=FaceActionSteps[_0xb86713(0x188)],this[_0xb86713(0x24d)][_0xb86713(0x206)](),this['callStepChange'](this[_0xb86713(0x1c9)])),this[_0xb86713(0x24a)]=new Date()[_0xb86713(0x26d)]();}}}if(this['step']===FaceActionSteps[_0xb86713(0x188)]){let _0x399643=this[_0xb86713(0x30b)]-_0x53e97d;if(_0x399643>0x0){}else this[_0xb86713(0x1c9)]=FaceActionSteps[_0xb86713(0x188)],this['fixedTime']=new Date()[_0xb86713(0x26d)](),this[_0xb86713(0x33e)](!![],!![]);}}[_0x21dfaf(0x357)](_0x350a3a,_0x2ab304){const _0x4ab206=_0x21dfaf;let _0xacdb99={},_0x4ab47a=FaceCommands['NONE'],_0x110de1=FaceCommands[_0x4ab206(0x1cd)],_0xf8c0dd={};for(let _0x5ec315 in this[_0x4ab206(0x1f0)]){let _0x520ab2=this[_0x4ab206(0x1f0)][_0x5ec315];_0x520ab2!=null&&_0x520ab2[_0x4ab206(0x2ae)]&&(_0x520ab2[_0x4ab206(0x241)]!=null&&(_0x4ab47a=this[_0x4ab206(0x23b)](_0x520ab2[_0x4ab206(0x241)])),_0xacdb99[_0x4ab47a]==null&&(_0xacdb99[_0x4ab47a]={'list':[],'max':0x0}),_0xacdb99[_0x4ab47a]=this[_0x4ab206(0x36b)](_0xacdb99[_0x4ab47a],_0x520ab2,_0x110de1!==_0x4ab47a),_0xf8c0dd[_0x4ab47a]=(_0xf8c0dd[_0x4ab47a]||0x0)+0x1,_0x110de1=_0x4ab47a);}let _0x49a5f0=_0xf8c0dd[_0x4ab206(0x2a9)];if(_0x350a3a===FaceCommands[_0x4ab206(0x2ac)]||_0x350a3a===FaceCommands['UP']||_0x350a3a===FaceCommands[_0x4ab206(0x254)]||_0x350a3a===FaceCommands[_0x4ab206(0x2a0)]){if(_0x49a5f0>0x3)return CommandResult[_0x4ab206(0x1c3)];if(_0xacdb99[_0x350a3a]!=null&&_0xacdb99[_0x350a3a]['max']>0x3e8)return CommandResult[_0x4ab206(0x30e)];}if(_0x350a3a===FaceCommands['FORWARD']){if(_0x49a5f0>=0x3)return CommandResult[_0x4ab206(0x1c3)];if(_0xacdb99[_0x350a3a]!=null&&_0xacdb99[_0x350a3a][_0x4ab206(0x21e)]>0x3e8)return CommandResult['SUCCESS'];}return CommandResult['NONE'];}['callStepChange'](_0x4ec2fd){const _0x54aea4=_0x21dfaf;typeof this[_0x54aea4(0x2f6)][_0x54aea4(0x2dd)]===_0x54aea4(0x2af)&&this['options']['onStep'](_0x4ec2fd);}['callError'](_0x2e529a){const _0x534e73=_0x21dfaf;typeof this[_0x534e73(0x2f6)][_0x534e73(0x30c)]===_0x534e73(0x2af)&&this['options'][_0x534e73(0x30c)](_0x2e529a);}[_0x21dfaf(0x25d)](_0x220566){const _0x15b116=_0x21dfaf;typeof this[_0x15b116(0x2f6)][_0x15b116(0x28b)]===_0x15b116(0x2af)&&this['options'][_0x15b116(0x28b)](_0x220566);}['callCommandResult'](_0x12e2d6){const _0x26b3ff=_0x21dfaf;typeof this[_0x26b3ff(0x2f6)][_0x26b3ff(0x1c8)]===_0x26b3ff(0x2af)&&this[_0x26b3ff(0x2f6)][_0x26b3ff(0x1c8)](_0x12e2d6);}[_0x21dfaf(0x216)](){const _0x9bdf00=_0x21dfaf;return this[_0x9bdf00(0x23a)];}[_0x21dfaf(0x1d6)](){const _0x263850=_0x21dfaf;for(const _0x127c6b in this[_0x263850(0x2e5)]){if(this[_0x263850(0x2e5)][_0x127c6b]===!![])return!![];}return![];}[_0x21dfaf(0x1c7)](_0x173117){const _0x582812=_0x21dfaf;let _0x18e623=new Date()[_0x582812(0x26d)]();return _0x18e623-_0x173117;}[_0x21dfaf(0x23b)](_0x18a9b2){const _0x58d297=_0x21dfaf;switch(_0x18a9b2){case DCFacePos['LEFT']:return FaceCommands['LEFT'];case DCFacePos['UP']:return FaceCommands['UP'];case DCFacePos[_0x58d297(0x254)]:return FaceCommands['RIGHT'];case DCFacePos['DOWN']:return FaceCommands[_0x58d297(0x2a0)];case DCFacePos[_0x58d297(0x30f)]:return FaceCommands[_0x58d297(0x30f)];default:return FaceCommands[_0x58d297(0x1cd)];}}['addActionTime'](_0x38a180,_0x16cd4a,_0x2f052f){const _0x2600c8=_0x21dfaf;let _0xf1cc20=_0x38a180,_0x76d24b=0x0;return _0xf1cc20[_0x2600c8(0x1ca)][_0x2600c8(0x2a9)]>0x0&&_0xf1cc20[_0x2600c8(0x1ca)][_0x76d24b]['start']!=null&&_0x2f052f?(_0x76d24b=_0xf1cc20[_0x2600c8(0x1ca)]['length']-0x1,_0x16cd4a[_0x2600c8(0x1da)]!=null&&(_0xf1cc20['list'][_0x76d24b][_0x2600c8(0x32b)]=_0x16cd4a[_0x2600c8(0x1da)],_0xf1cc20[_0x2600c8(0x1ca)][_0x76d24b][_0x2600c8(0x30a)]=_0x16cd4a[_0x2600c8(0x1da)]-_0xf1cc20[_0x2600c8(0x1ca)][_0x76d24b][_0x2600c8(0x1a2)],_0xf1cc20[_0x2600c8(0x21e)]=(_0xf1cc20['list'][_0x76d24b][_0x2600c8(0x30a)]||0x0)>_0xf1cc20[_0x2600c8(0x21e)]?_0xf1cc20[_0x2600c8(0x1ca)][_0x76d24b][_0x2600c8(0x30a)]||0x0:_0xf1cc20[_0x2600c8(0x21e)])):_0xf1cc20[_0x2600c8(0x1ca)][_0x2600c8(0x204)]({'start':_0x16cd4a['time'],'end':null,'interval':null}),_0xf1cc20;}};class DeepFace{constructor(_0x1b5ab0,_0x11d5ab={}){const _0x240298=_0x21dfaf;this[_0x240298(0x368)]=null,this['canvas']=null,this[_0x240298(0x296)]=null,this[_0x240298(0x23c)]={'start':![],'detectInit':![],'analyzeAfterOpen':![]},this[_0x240298(0x2f6)]={'src':null,'sourceType':null,'width':0x280,'height':0x1e0,'liveness':!![],'onFrameCaptured':null,'detectTime':0x64,'onFinished':null,'worker_path':_0x240298(0x1bb)},this[_0x240298(0x2f6)]=deepMerge(this[_0x240298(0x2f6)],_0x11d5ab),this[_0x240298(0x36f)](_0x1b5ab0),this[_0x240298(0x27a)]();}['initContainer'](_0x633c2e){const _0x216f73=_0x21dfaf;this[_0x216f73(0x296)]=new camera(_0x633c2e,{'src':this['options'][_0x216f73(0x202)],'width':this[_0x216f73(0x2f6)][_0x216f73(0x1ff)],'height':this[_0x216f73(0x2f6)][_0x216f73(0x316)],'onFrameUpdated':this[_0x216f73(0x23d)][_0x216f73(0x311)](this),'onLoaded':this[_0x216f73(0x33c)][_0x216f73(0x311)](this),'onStart':this[_0x216f73(0x1d0)][_0x216f73(0x311)](this),'onStop':this[_0x216f73(0x249)][_0x216f73(0x311)](this)}),this[_0x216f73(0x368)]=this[_0x216f73(0x296)]['dom'],this[_0x216f73(0x1eb)]=this[_0x216f73(0x296)]['canvas'];}[_0x21dfaf(0x27a)](){const _0x45c87c=_0x21dfaf;this['cc']=new CoordConverter(this['camera']['sourceDim']),this['faceMask']=new MaskLayer(this[_0x45c87c(0x368)],{'width':this[_0x45c87c(0x2f6)]['width'],'height':this[_0x45c87c(0x2f6)]['height']}),this['visual']=new VisualLayer(this[_0x45c87c(0x1eb)]),this[_0x45c87c(0x1b4)]=new WebWorker({'path':this[_0x45c87c(0x2f6)][_0x45c87c(0x339)]}),this['analyser']=new FaceAnalyser(this[_0x45c87c(0x296)][_0x45c87c(0x2dc)],{'area':this[_0x45c87c(0x238)]['getArea'](),'detectTime':this[_0x45c87c(0x2f6)]['detectTime'],'onFaceDetected':this[_0x45c87c(0x1f9)][_0x45c87c(0x311)](this),'onError':this[_0x45c87c(0x30c)][_0x45c87c(0x311)](this),'onFinished':this[_0x45c87c(0x355)][_0x45c87c(0x311)](this),'onCommand':this[_0x45c87c(0x28b)][_0x45c87c(0x311)](this),'onCommandResult':this['onCommandResult'][_0x45c87c(0x311)](this),'onStep':this[_0x45c87c(0x2dd)][_0x45c87c(0x311)](this),'onStartDownCount':this['onStartDownCount'][_0x45c87c(0x311)](this)}),this[_0x45c87c(0x1e7)]['cc']=this['cc'];}[_0x21dfaf(0x1b1)](){const _0xa3a5e1=_0x21dfaf;!this[_0xa3a5e1(0x296)]['isPlaying']()&&(this[_0xa3a5e1(0x296)]['start'](),this[_0xa3a5e1(0x238)][_0xa3a5e1(0x217)]());}[_0x21dfaf(0x2b9)](){const _0x582f62=_0x21dfaf;this['stop'](),this[_0x582f62(0x296)][_0x582f62(0x1f3)](),this[_0x582f62(0x238)][_0x582f62(0x306)]();}[_0x21dfaf(0x1a2)](){const _0xc44a96=_0x21dfaf;!this[_0xc44a96(0x296)][_0xc44a96(0x2a3)]()?(this[_0xc44a96(0x1b1)](),this[_0xc44a96(0x23c)][_0xc44a96(0x2d4)]=!![]):(this[_0xc44a96(0x23c)]['start']=!![],this[_0xc44a96(0x1e7)][_0xc44a96(0x1a2)]());}['stop'](){const _0x3e309a=_0x21dfaf;this[_0x3e309a(0x23c)][_0x3e309a(0x1a2)]=![],this[_0x3e309a(0x1e7)][_0x3e309a(0x1f3)](),this[_0x3e309a(0x23c)]['analyzeAfterOpen']=![];}[_0x21dfaf(0x355)](_0x2e8d61,_0x166369){const _0x11f1ad=_0x21dfaf;console['log']('finished'),this['faceMask'][_0x11f1ad(0x2d7)]('Finished'),typeof this[_0x11f1ad(0x2f6)]['onFinished']==_0x11f1ad(0x2af)&&this['options'][_0x11f1ad(0x355)](_0x2e8d61,_0x166369);}[_0x21dfaf(0x1f9)](_0x1fd1da){}['onCommand'](_0x276669){const _0x365c28=_0x21dfaf;console[_0x365c28(0x18e)]('onCommand',_0x276669);let _0x4a5b44='';switch(_0x276669){case FaceCommands[_0x365c28(0x30f)]:_0x4a5b44=_0x365c28(0x2d3);break;case FaceCommands[_0x365c28(0x2ac)]:_0x4a5b44=_0x365c28(0x2e8);break;case FaceCommands[_0x365c28(0x254)]:_0x4a5b44=_0x365c28(0x2ef);break;case FaceCommands['UP']:_0x4a5b44=_0x365c28(0x1e2);break;case FaceCommands[_0x365c28(0x2a0)]:_0x4a5b44=_0x365c28(0x302);break;default:_0x4a5b44='';}this[_0x365c28(0x238)][_0x365c28(0x2d7)](_0x4a5b44);}[_0x21dfaf(0x1c8)](){}['onStep'](_0x1493a7){const _0x574072=_0x21dfaf;console[_0x574072(0x18e)](_0x574072(0x305),_0x1493a7);let _0x5773d7='';switch(_0x1493a7){case FaceActionSteps[_0x574072(0x31b)]:_0x5773d7=_0x574072(0x207);break;case FaceActionSteps[_0x574072(0x223)]:_0x5773d7=_0x574072(0x23e);break;case FaceActionSteps[_0x574072(0x220)]:_0x5773d7=_0x574072(0x1ad);break;case FaceActionSteps[_0x574072(0x188)]:_0x5773d7=_0x574072(0x251);break;default:_0x5773d7='';}this[_0x574072(0x238)][_0x574072(0x2d7)](_0x5773d7);}['onStartDownCount'](_0x11c05c){const _0x2753d1=_0x21dfaf;console[_0x2753d1(0x18e)](_0x2753d1(0x1db),_0x11c05c);}[_0x21dfaf(0x30c)](_0x22dd97){const _0x58d8af=_0x21dfaf;console['log'](_0x58d8af(0x30c),_0x22dd97);}['onFrameUpdated'](){const _0x31aeb7=_0x21dfaf;let _0x181cd6=this[_0x31aeb7(0x1e7)][_0x31aeb7(0x216)]();this[_0x31aeb7(0x1cc)][_0x31aeb7(0x2ff)](_0x181cd6);}[_0x21dfaf(0x33c)](_0x233227,_0x13c1ba){const _0x33a207=_0x21dfaf;this['cc'][_0x33a207(0x2e0)](_0x13c1ba),this['visual']['cc'][_0x33a207(0x2e0)](_0x13c1ba),this[_0x33a207(0x1e7)][_0x33a207(0x2f6)]['video']=_0x233227;}[_0x21dfaf(0x1d0)](){const _0x448525=_0x21dfaf;this[_0x448525(0x23c)]['analyzeAfterOpen']&&(this[_0x448525(0x23c)][_0x448525(0x2d4)]=![],this['start']());}[_0x21dfaf(0x249)](){}[_0x21dfaf(0x289)](_0x32f69c){const _0x3617e0=_0x21dfaf;this[_0x3617e0(0x368)]&&(this['dom'][_0x3617e0(0x372)][_0x3617e0(0x335)](_0x3617e0(0x282)),this[_0x3617e0(0x368)][_0x3617e0(0x372)][_0x3617e0(0x335)]('blur'),_0x32f69c&&(this[_0x3617e0(0x368)][_0x3617e0(0x372)][_0x3617e0(0x231)](_0x3617e0(0x282)),this[_0x3617e0(0x368)][_0x3617e0(0x372)][_0x3617e0(0x231)]('blur')));}};class CardDetector{constructor(_0x375a21={}){const _0x27919c=_0x21dfaf;this['options']={'host':null,'headers':null,'serverSide':null,'modelUrl':null,'mirrored':!![],'single':!![]},this[_0x27919c(0x1df)]=null,this[_0x27919c(0x299)]=![],this[_0x27919c(0x2e9)]=null,this[_0x27919c(0x2f6)]=deepMerge(this[_0x27919c(0x2f6)],_0x375a21),this[_0x27919c(0x274)]={'width':0x0,'height':0x0},this['croppedSize']={'x':0x0,'y':0x0,'width':0x0,'height':0x0},this[_0x27919c(0x268)]={'width':0x12c,'height':0x12c};if(!this[_0x27919c(0x2f6)][_0x27919c(0x1a1)])this['initWorker']();else{}}[_0x21dfaf(0x35c)](){const _0x13acd4=_0x21dfaf;this[_0x13acd4(0x2f6)][_0x13acd4(0x1a1)]=OSPlus[_0x13acd4(0x214)]()||OSPlus[_0x13acd4(0x18f)]();}[_0x21dfaf(0x2aa)](){const _0x263c51=_0x21dfaf;this[_0x263c51(0x1ee)]=stream[_0x263c51(0x1b1)](_0x263c51(0x221)),this[_0x263c51(0x1ee)]['on'](_0x263c51(0x331),_0x3b39c8=>{const _0x44bcb5=_0x263c51;if(typeof this[_0x44bcb5(0x1df)]===_0x44bcb5(0x2af)){let _0x35447e=this[_0x44bcb5(0x18a)](_0x3b39c8,!![]);this[_0x44bcb5(0x1df)](_0x35447e);}}),this[_0x263c51(0x1ee)]['on'](_0x263c51(0x232),_0x35c25c=>{const _0x26731d=_0x263c51;console[_0x26731d(0x18e)](_0x26731d(0x278)),this[_0x26731d(0x299)]=_0x35c25c;});}[_0x21dfaf(0x209)](){const _0x49af40=_0x21dfaf;if(!this[_0x49af40(0x2f6)][_0x49af40(0x1a1)])this[_0x49af40(0x1ee)][_0x49af40(0x340)](_0x49af40(0x294));else{let _0x10d0a1=this[_0x49af40(0x2f6)][_0x49af40(0x1b7)]!=null?StringExtra[_0x49af40(0x2d2)](this['options'][_0x49af40(0x1b7)]):'',_0x4dcef0=_0x10d0a1+'/'+'card/ready',_0x562bbc=deepMerge({'Content-Type':'application/json'},this[_0x49af40(0x2f6)][_0x49af40(0x29d)]||{});fetch(_0x4dcef0,{'method':_0x49af40(0x226),'headers':_0x562bbc})['then'](_0x4e1f41=>_0x4e1f41[_0x49af40(0x1ef)]())[_0x49af40(0x295)](_0x1b3a40=>{const _0x5a26a4=_0x49af40;this[_0x5a26a4(0x299)]=_0x1b3a40['success'],console[_0x5a26a4(0x18e)](_0x5a26a4(0x1f8),_0x1b3a40);})[_0x49af40(0x2d1)](_0x5b326b=>{const _0x5bb241=_0x49af40;this[_0x5bb241(0x299)]=![],console[_0x5bb241(0x21f)](_0x5bb241(0x26c),_0x5b326b);});}}[_0x21dfaf(0x26f)](_0x29f12d=null){const _0x3b0b85=_0x21dfaf;let _0x1d6c60=this['options'][_0x3b0b85(0x1b7)]!=null?StringExtra['cutLastSlash'](this[_0x3b0b85(0x2f6)][_0x3b0b85(0x1b7)]):'',_0x593f0e=_0x1d6c60+'/'+_0x3b0b85(0x1a2),_0x2f65a0=deepMerge({'Content-Type':'application/json'},this[_0x3b0b85(0x2f6)]['headers']||{});fetch(_0x593f0e,{'method':_0x3b0b85(0x226),'headers':_0x2f65a0})[_0x3b0b85(0x295)](_0x21448e=>_0x21448e[_0x3b0b85(0x1ef)]())[_0x3b0b85(0x295)](_0x70995=>{const _0x56e5cb=_0x3b0b85;this[_0x56e5cb(0x2e9)]=_0x70995[_0x56e5cb(0x2ee)]||null,console[_0x56e5cb(0x18e)](_0x56e5cb(0x1f8),_0x70995),typeof _0x29f12d===_0x56e5cb(0x2af)&&_0x29f12d(this['loaded'],this[_0x56e5cb(0x2e9)]);})[_0x3b0b85(0x2d1)](_0x56978b=>{const _0x3355d4=_0x3b0b85;this[_0x3355d4(0x2e9)]=null,console['error'](_0x3355d4(0x26c),_0x56978b);});}['detect'](_0x638ad2,_0x3b0b53,_0x47ba0b){const _0x1607df=_0x21dfaf;if(!this['options'][_0x1607df(0x1a1)]){this[_0x1607df(0x1df)]=_0x47ba0b;let _0x524205=this[_0x1607df(0x273)](_0x638ad2);this[_0x1607df(0x1ee)][_0x1607df(0x340)]('getCard',_0x524205);}else{let _0x43a1d3=ImageProcessing[_0x1607df(0x33b)](_0x638ad2,_0x1607df(0x1be),0.95),_0x4585e9=new FormData();_0x4585e9[_0x1607df(0x1aa)](_0x1607df(0x1a7),_0x43a1d3),_0x4585e9[_0x1607df(0x1aa)](_0x1607df(0x19b),'0'),_0x4585e9[_0x1607df(0x1aa)](_0x1607df(0x2ee),_0x3b0b53);let _0x1ed464=this['options'][_0x1607df(0x1b7)]!=null?StringExtra[_0x1607df(0x2d2)](this[_0x1607df(0x2f6)][_0x1607df(0x1b7)]):'',_0x3b724=_0x1ed464+'/'+_0x1607df(0x19f),_0x15a704=deepMerge({},this['options']['headers']||{});fetch(_0x3b724,{'method':_0x1607df(0x24b),'body':_0x4585e9,'headers':_0x15a704})['then'](function(_0x9fa7f){const _0x291310=_0x1607df;if(_0x9fa7f['ok'])return _0x9fa7f[_0x291310(0x1ef)]();console[_0x291310(0x21f)](_0x291310(0x26c),_0x9fa7f),typeof _0x47ba0b===_0x291310(0x2af)&&_0x47ba0b(null);})[_0x1607df(0x295)](_0x5e0dc5=>{const _0x1b2cd7=_0x1607df;console['log'](_0x1b2cd7(0x2bb),_0x5e0dc5);let _0x595c5f=[];_0x5e0dc5['success']===!![]&&_0x5e0dc5['data']!==undefined&&(_0x595c5f=_0x5e0dc5['data']);if(_0x595c5f[_0x1b2cd7(0x2a9)]>0x0){}if(typeof _0x47ba0b===_0x1b2cd7(0x2af)){let _0x3af541=this[_0x1b2cd7(0x18a)](_0x595c5f);_0x47ba0b(_0x3af541);}})[_0x1607df(0x2d1)](_0x5d8d30=>{const _0x4181c6=_0x1607df;console[_0x4181c6(0x21f)]('Error:',_0x5d8d30),typeof _0x47ba0b===_0x4181c6(0x2af)&&_0x47ba0b(null);});}}[_0x21dfaf(0x346)](){const _0x6bb48c=_0x21dfaf;return this[_0x6bb48c(0x299)];}[_0x21dfaf(0x273)](_0x18dc29){const _0xca61c0=_0x21dfaf;let _0xc347cc={'x':0x0,'y':0x0,'w':_0x18dc29[_0xca61c0(0x1ff)],'h':_0x18dc29[_0xca61c0(0x316)]};return _0x18dc29[_0xca61c0(0x1ff)]>_0x18dc29[_0xca61c0(0x316)]?(_0xc347cc['w']=_0x18dc29[_0xca61c0(0x316)],_0xc347cc['x']=(_0x18dc29[_0xca61c0(0x1ff)]-_0xc347cc['w'])/0x2):(_0xc347cc['h']=_0x18dc29['width'],_0xc347cc['y']=(_0x18dc29[_0xca61c0(0x316)]-_0xc347cc['h'])/0x2),this[_0xca61c0(0x274)]={'x':_0x18dc29[_0xca61c0(0x1ff)],'y':_0x18dc29[_0xca61c0(0x316)]},this[_0xca61c0(0x19a)]=_0xc347cc,ImageProcessing['cropAndResizeCanvas'](_0x18dc29,_0xc347cc['x'],_0xc347cc['y'],_0xc347cc['w'],_0xc347cc['h'],this[_0xca61c0(0x268)][_0xca61c0(0x1ff)],this['inputSize'][_0xca61c0(0x316)]);}[_0x21dfaf(0x2c0)](_0x34901f,_0x5252ba){const _0x5c4878=_0x21dfaf;let _0x1d7156=0x1;switch(_0x5252ba){case'x':_0x1d7156=this[_0x5c4878(0x19a)]['w']/this[_0x5c4878(0x268)]['width'];return _0x34901f*_0x1d7156+this[_0x5c4878(0x19a)]['x'];case'y':_0x1d7156=this['croppedSize']['h']/this[_0x5c4878(0x268)][_0x5c4878(0x316)];return _0x34901f*_0x1d7156+this['croppedSize']['y'];case _0x5c4878(0x1ff):_0x1d7156=this[_0x5c4878(0x19a)]['w']/this[_0x5c4878(0x268)][_0x5c4878(0x1ff)];return _0x34901f*_0x1d7156;case'height':_0x1d7156=this[_0x5c4878(0x19a)]['h']/this[_0x5c4878(0x268)][_0x5c4878(0x316)];return _0x34901f*_0x1d7156;}}[_0x21dfaf(0x18a)](_0x4a7f05,_0x55667a=![]){const _0x10db87=_0x21dfaf;let _0x1f1542=[],_0x563249=null,_0xf84c47=![];for(let _0x47aeb0 in _0x4a7f05){_0x563249=_0x4a7f05[_0x47aeb0];_0x55667a&&(_0x563249[_0x10db87(0x1b6)][0x0]=this[_0x10db87(0x2c0)](_0x563249[_0x10db87(0x1b6)][0x0],'x'),_0x563249[_0x10db87(0x1b6)][0x1]=this[_0x10db87(0x2c0)](_0x563249[_0x10db87(0x1b6)][0x1],'y'),_0x563249[_0x10db87(0x1b6)][0x2]=this[_0x10db87(0x2c0)](_0x563249[_0x10db87(0x1b6)][0x2],_0x10db87(0x1ff)),_0x563249[_0x10db87(0x1b6)][0x3]=this[_0x10db87(0x2c0)](_0x563249[_0x10db87(0x1b6)][0x3],_0x10db87(0x316)));_0xf84c47=![];for(let _0xc97aa9 in _0x1f1542){if(_0x1f1542[_0xc97aa9][_0x10db87(0x2a2)]===_0x563249[_0x10db87(0x2a2)]){let _0x54af44=_0x1f1542[_0xc97aa9],_0x2b6b9f=_0x563249,_0x2e8915=0x0,_0x2f99e3=0x0;if(_0x2b6b9f[_0x10db87(0x1b6)][0x0]>_0x54af44[_0x10db87(0x1b6)][0x0]&&_0x2b6b9f[_0x10db87(0x1b6)][0x0]<_0x54af44['bbox'][0x0]+_0x54af44[_0x10db87(0x1b6)][0x2])_0x2e8915=_0x54af44['bbox'][0x0]+_0x54af44[_0x10db87(0x1b6)][0x2]-_0x2b6b9f['bbox'][0x0],_0x2f99e3=_0x2e8915/_0x2b6b9f[_0x10db87(0x1b6)][0x2];else _0x54af44['bbox'][0x0]>_0x2b6b9f[_0x10db87(0x1b6)][0x0]&&_0x54af44[_0x10db87(0x1b6)][0x0]<_0x2b6b9f[_0x10db87(0x1b6)][0x0]+_0x2b6b9f[_0x10db87(0x1b6)][0x2]&&(_0x2e8915=_0x2b6b9f[_0x10db87(0x1b6)][0x0]+_0x2b6b9f[_0x10db87(0x1b6)][0x2]-_0x54af44[_0x10db87(0x1b6)][0x0],_0x2f99e3=_0x2e8915/_0x54af44[_0x10db87(0x1b6)][0x2]);let _0x444f24=0x0,_0x3b93d4=0x0;if(_0x2b6b9f[_0x10db87(0x1b6)][0x1]>_0x54af44['bbox'][0x1]&&_0x2b6b9f[_0x10db87(0x1b6)][0x1]<_0x54af44[_0x10db87(0x1b6)][0x1]+_0x54af44[_0x10db87(0x1b6)][0x3])_0x444f24=_0x54af44[_0x10db87(0x1b6)][0x1]+_0x54af44[_0x10db87(0x1b6)][0x3]-_0x2b6b9f['bbox'][0x1],_0x3b93d4=_0x2e8915/_0x2b6b9f[_0x10db87(0x1b6)][0x3];else _0x54af44[_0x10db87(0x1b6)][0x1]>_0x2b6b9f['bbox'][0x1]&&_0x54af44['bbox'][0x1]<_0x2b6b9f[_0x10db87(0x1b6)][0x1]+_0x2b6b9f[_0x10db87(0x1b6)][0x3]&&(_0x444f24=_0x2b6b9f[_0x10db87(0x1b6)][0x1]+_0x2b6b9f[_0x10db87(0x1b6)][0x3]-_0x54af44['bbox'][0x1],_0x3b93d4=_0x2e8915/_0x54af44['bbox'][0x3]);_0x2f99e3>0.6&&_0x3b93d4>0.6&&(_0xf84c47=!![],_0x2b6b9f[_0x10db87(0x1cf)]>_0x54af44[_0x10db87(0x1cf)]&&(_0x1f1542[_0xc97aa9]=_0x563249));}}!_0xf84c47&&_0x1f1542[_0x10db87(0x204)](_0x4a7f05[_0x47aeb0]);}if(this[_0x10db87(0x2f6)][_0x10db87(0x2c3)]&&_0x1f1542[_0x10db87(0x2a9)]>0x0){let _0x433604=0x0,_0x2d730b=0x0;for(let _0x4925ac in _0x1f1542){_0x1f1542[_0x4925ac][_0x10db87(0x1cf)]>_0x433604&&(_0x433604=_0x1f1542[_0x4925ac]['score'],_0x2d730b=_0x4925ac);}return[_0x1f1542[_0x2d730b]];}return _0x1f1542;}[_0x21dfaf(0x2b1)](){const _0x73bb2d=_0x21dfaf;this[_0x73bb2d(0x2e9)]=null;}};class MRZReader{constructor(_0x1f36a4={}){const _0xd93a79=_0x21dfaf;this['options']={'server':!![],'url':null,'host':null,'checkURI':null},this[_0xd93a79(0x2f6)]=deepMerge(this['options'],_0x1f36a4);if(this[_0xd93a79(0x2f6)]['checkURI']==null)this[_0xd93a79(0x2f6)][_0xd93a79(0x265)]='mrzcheck';this[_0xd93a79(0x299)]=![],this[_0xd93a79(0x27a)]();}[_0x21dfaf(0x27a)](){const _0x4da6bf=_0x21dfaf;if(!this[_0x4da6bf(0x2f6)][_0x4da6bf(0x198)]){}}[_0x21dfaf(0x209)](){const _0xc3d68b=_0x21dfaf;if(this[_0xc3d68b(0x2f6)][_0xc3d68b(0x198)])this[_0xc3d68b(0x299)]=!![];else{}}[_0x21dfaf(0x1a8)](_0x2fff40,_0x5e73da,_0x4f3987){const _0x43a78b=_0x21dfaf;if(this[_0x43a78b(0x2f6)]['server'])this[_0x43a78b(0x208)](_0x2fff40,_0x5e73da,_0x4f3987);else{}}[_0x21dfaf(0x208)](_0x545ecd,_0x1a8951,_0x56a499){const _0x26445c=_0x21dfaf;let _0x29ef56=ImageProcessing['canvasToBase64'](_0x545ecd,_0x26445c(0x1be),0.9),_0x307eb2=new FormData();_0x307eb2['append'](_0x26445c(0x1a7),_0x29ef56),_0x307eb2[_0x26445c(0x1aa)]('tid',_0x1a8951);let _0x175b62=this[_0x26445c(0x2f6)]['host']!=null?StringExtra['cutLastSlash'](this[_0x26445c(0x2f6)][_0x26445c(0x1b7)]):'',_0x3aed9f=this[_0x26445c(0x2f6)][_0x26445c(0x258)]!=null?this[_0x26445c(0x2f6)][_0x26445c(0x258)]:_0x175b62+'/'+this['options'][_0x26445c(0x265)];fetch(_0x3aed9f,{'method':_0x26445c(0x24b),'body':_0x307eb2})[_0x26445c(0x295)](_0x53fcdb=>_0x53fcdb['json']())[_0x26445c(0x295)](_0x50644d=>{const _0x2ff79c=_0x26445c;console[_0x2ff79c(0x18e)](_0x2ff79c(0x2bb),_0x50644d);let _0x103bf3=MRZReader[_0x2ff79c(0x244)](_0x50644d[_0x2ff79c(0x2ba)]);_0x50644d[_0x2ff79c(0x192)]===![]&&(_0x103bf3[_0x2ff79c(0x19b)]=null),typeof _0x56a499===_0x2ff79c(0x2af)&&_0x56a499(_0x103bf3);})['catch'](_0x532ca1=>{const _0x36d81b=_0x26445c;console[_0x36d81b(0x21f)](_0x36d81b(0x26c),_0x532ca1),typeof _0x56a499===_0x36d81b(0x2af)&&_0x56a499(null);});}[_0x21dfaf(0x2b0)](_0x31fe22,_0x46df29){}['parse'](_0x5e41a4){const _0x1cad2d=_0x21dfaf;let _0x2412df={'type':null,'text':_0x5e41a4,'object':null};if(_0x2412df[_0x1cad2d(0x1ae)]>0x4b){const _0xf7f460=_0x5e41a4[_0x1cad2d(0x271)](0x0,0x3);if(_0xf7f460['includes']('I<')||_0xf7f460['includes']('1<'))_0x2412df[_0x1cad2d(0x19b)]='I';else(_0xf7f460['includes']('P<')||_0xf7f460[_0x1cad2d(0x1d2)]('PC'))&&(_0x2412df[_0x1cad2d(0x19b)]='P');}return _0x2412df;}static['parseObject'](_0x28df26){const _0x3c8f30=_0x21dfaf;let _0x315aed={'type':null,'text':_0x28df26[_0x3c8f30(0x1c5)][_0x3c8f30(0x27d)](''),'object':_0x28df26};if(_0x315aed['text'][_0x3c8f30(0x2a9)]>0x4b){const _0xe62b=_0x28df26[_0x3c8f30(0x25e)];if(_0xe62b[_0x3c8f30(0x1d2)]('I<')||_0xe62b[_0x3c8f30(0x1d2)]('1<'))_0x315aed[_0x3c8f30(0x19b)]='I';else(_0xe62b['includes']('P<')||_0xe62b['includes']('PC'))&&(_0x315aed[_0x3c8f30(0x19b)]='P');}return _0x315aed;}};const DCScanError={'NO_CARD':_0x21dfaf(0x362),'MANY_CARDS':'manycards','LOW_LIGHT':_0x21dfaf(0x2e3),'HIGH_LIGHT':_0x21dfaf(0x1e1),'TOO_SMALL':_0x21dfaf(0x20e)},DCScanDocType={'NONE':'none','ID':'id','PASSPORT':_0x21dfaf(0x2cc)},DCScanDocFaces={'NONE':_0x21dfaf(0x2c5),'ID_FRONT':_0x21dfaf(0x352),'ID_BACK':_0x21dfaf(0x2c9),'PASS_FRONT':'pass_front'},DCScanCommand={'NONE':_0x21dfaf(0x2c5),'SHOW':_0x21dfaf(0x217),'ID_BACK':_0x21dfaf(0x2c9),'FINISH':_0x21dfaf(0x33e)},DCScanSteps={'NONE':_0x21dfaf(0x2c5),'SCANNING':_0x21dfaf(0x23f),'FINISH':_0x21dfaf(0x33e)};class ScanAnalyser{constructor(_0x55fcd6,_0x2b0a06={}){const _0x4a2c22=_0x21dfaf;this[_0x4a2c22(0x1eb)]=_0x55fcd6,this[_0x4a2c22(0x2f6)]={'host':null,'headers':null,'mrzOptions':null,'detector':null,'video':null,'area':{'x':0x0,'y':0x0,'width':0x0,'height':0x0},'detectTime':0x64,'useServerSide':null,'onCardDetected':null,'onFaceDetected':null,'onMRZDetected':null,'onDetected':null,'onError':null,'onFinished':null,'onCommand':null,'onCommandResult':null,'onStepChanged':null,'mirrored':!![],'delay':0x1f4,'serverDelay':0x1f4,'cardMinSize':{'width':0x46,'height':0x37}},this[_0x4a2c22(0x2f6)]=deepMerge(this['options'],_0x2b0a06),this['stream']=null,this[_0x4a2c22(0x366)]=![],this[_0x4a2c22(0x1f1)]=null,this['step']=DCScanSteps['NONE'],this[_0x4a2c22(0x264)]=null,this[_0x4a2c22(0x1e5)]={},this[_0x4a2c22(0x1e6)]={},this[_0x4a2c22(0x365)]=null,this[_0x4a2c22(0x1ec)]=null,this[_0x4a2c22(0x252)]=null,this[_0x4a2c22(0x1c6)]=null,this[_0x4a2c22(0x255)]=null,this[_0x4a2c22(0x2e4)]=this['options'][_0x4a2c22(0x2e4)],this['tID']=null,this[_0x4a2c22(0x2f6)][_0x4a2c22(0x293)]&&(this[_0x4a2c22(0x2e4)]=this[_0x4a2c22(0x2f6)][_0x4a2c22(0x2eb)]),this[_0x4a2c22(0x33f)]=new CardDetector({'mirrored':this[_0x4a2c22(0x2f6)][_0x4a2c22(0x286)],'single':!![],'serverSide':this['options'][_0x4a2c22(0x293)],'host':this[_0x4a2c22(0x2f6)][_0x4a2c22(0x1b7)],'headers':this[_0x4a2c22(0x2f6)][_0x4a2c22(0x29d)]}),this[_0x4a2c22(0x2a4)]=new MRZReader({'host':this['options'][_0x4a2c22(0x1b7)],'url':this[_0x4a2c22(0x2f6)][_0x4a2c22(0x191)]?this[_0x4a2c22(0x2f6)]['mrzOptions'][_0x4a2c22(0x258)]||null:null}),this['cc']=null,this['reset'](),!this['options'][_0x4a2c22(0x293)]&&this[_0x4a2c22(0x2aa)]();}[_0x21dfaf(0x31d)](){const _0xea4cb7=_0x21dfaf;this[_0xea4cb7(0x33f)]['load'](),this['mrz']['load'](),this[_0xea4cb7(0x1ee)]!=null&&ImageProcessing['getImageFromURL']('/img/face.jpg')[_0xea4cb7(0x295)](_0x4a23f1=>{const _0x4362dd=_0xea4cb7;this[_0x4362dd(0x1ee)][_0x4362dd(0x340)](_0x4362dd(0x313),_0x4a23f1);});}[_0x21dfaf(0x2aa)](){const _0x20f4b6=_0x21dfaf;this[_0x20f4b6(0x1ee)]=stream[_0x20f4b6(0x1b1)](_0x20f4b6(0x1f2)),this['stream']['on'](_0x20f4b6(0x25c),_0x3069dd=>{const _0x43f769=_0x20f4b6;console[_0x43f769(0x18e)]('onFaceResult',_0x3069dd),this['step']===DCScanSteps[_0x43f769(0x29f)]&&this[_0x43f769(0x264)]!=null&&this[_0x43f769(0x1f9)](_0x3069dd);});}[_0x21dfaf(0x270)](_0x253971,_0x331bd5){const _0x426c83=_0x21dfaf;this['detector'][_0x426c83(0x346)]()&&this[_0x426c83(0x33f)][_0x426c83(0x1f4)](_0x253971,_0x1e3343=>{const _0x49e10f=_0x426c83;typeof _0x331bd5===_0x49e10f(0x2af)&&_0x331bd5(_0x1e3343);});}[_0x21dfaf(0x27b)](){const _0x5edf47=_0x21dfaf;if(!this['detector'][_0x5edf47(0x346)]()||this[_0x5edf47(0x213)]==null)return;else{let _0x177a9e=new Date()[_0x5edf47(0x26d)]();if(this['step']===DCScanSteps[_0x5edf47(0x1cd)]&&_0x177a9e-this[_0x5edf47(0x1c6)]>0x3e8)this[_0x5edf47(0x1c9)]=DCScanSteps[_0x5edf47(0x29f)],this[_0x5edf47(0x22d)](DCScanCommand[_0x5edf47(0x333)]);else{if(this['step']===DCScanSteps[_0x5edf47(0x1cd)])return;else{if(this[_0x5edf47(0x1c9)]===DCScanCommand[_0x5edf47(0x188)]){this['finishTime']!=null&&_0x177a9e-this['finishTime']>0x7d0&&(this[_0x5edf47(0x33e)](),this[_0x5edf47(0x255)]=null);return;}}}}!this['detectionLocked']&&(this[_0x5edf47(0x264)]=null,this['scanned']={'card':![],'face':![],'mrz':![]},this[_0x5edf47(0x366)]=!![],this[_0x5edf47(0x1ec)]=this[_0x5edf47(0x1eb)],this[_0x5edf47(0x365)]=ImageProcessing[_0x5edf47(0x2bc)](this[_0x5edf47(0x1ec)]),this[_0x5edf47(0x33f)][_0x5edf47(0x1f4)](this[_0x5edf47(0x1ec)],this[_0x5edf47(0x213)],_0x305cc1=>{const _0x56f40b=_0x5edf47;this[_0x56f40b(0x1f7)](_0x305cc1);}));}[_0x21dfaf(0x1f7)](_0x54dbee){const _0x47d6ce=_0x21dfaf;let _0x5307fb=_0x54dbee!=null&&_0x54dbee['length']>0x0?_0x54dbee[0x0]:null,_0x504fc3=null;this['scanned'][_0x47d6ce(0x2cd)]=!![];let _0x3c2cb2=_0x5307fb!=null?this[_0x47d6ce(0x312)](_0x5307fb[_0x47d6ce(0x1b6)]):![];_0x5307fb!=null&&!_0x3c2cb2&&this[_0x47d6ce(0x309)](DCScanError['TOO_SMALL']);if(_0x5307fb!=null&&_0x3c2cb2===!![]){console['log'](_0x47d6ce(0x288),_0x54dbee);let _0x232929={'docType':this['defineScanType'](_0x5307fb['class']),'docFace':this[_0x47d6ce(0x359)](_0x5307fb[_0x47d6ce(0x2a2)]),'card':_0x5307fb,'face':null,'mrz':null,'image':null};this['curScan']=_0x232929;let _0x188742=ImageProcessing[_0x47d6ce(0x291)](this[_0x47d6ce(0x365)]);_0x504fc3=ImageProcessing[_0x47d6ce(0x21c)](_0x188742,_0x5307fb['bbox'][0x0],_0x5307fb[_0x47d6ce(0x1b6)][0x1],_0x5307fb[_0x47d6ce(0x1b6)][0x2],_0x5307fb[_0x47d6ce(0x1b6)][0x3]),_0x232929[_0x47d6ce(0x1a7)]=_0x504fc3[_0x47d6ce(0x315)](_0x47d6ce(0x1be),0.9),this['cardImage']=_0x504fc3;if(this[_0x47d6ce(0x1e6)][_0x47d6ce(0x194)][_0x47d6ce(0x2a9)]===0x0&&(_0x232929[_0x47d6ce(0x35d)]===DCScanDocFaces[_0x47d6ce(0x2fc)]||_0x232929[_0x47d6ce(0x35d)]===DCScanDocFaces[_0x47d6ce(0x356)])){_0x5307fb[_0x47d6ce(0x1e0)]===undefined||_0x5307fb[_0x47d6ce(0x1e0)]==null?this[_0x47d6ce(0x1ee)][_0x47d6ce(0x340)](_0x47d6ce(0x313),_0x504fc3):this[_0x47d6ce(0x1f9)]([_0x5307fb[_0x47d6ce(0x1e0)]]);if(_0x232929[_0x47d6ce(0x35d)]===DCScanDocFaces[_0x47d6ce(0x356)]){let _0x4a12b0=_0x504fc3['height']*0.7,_0x13d22d=ImageProcessing[_0x47d6ce(0x21c)](_0x504fc3,0x0,_0x4a12b0,_0x504fc3['width'],_0x504fc3[_0x47d6ce(0x316)]-_0x4a12b0);if(_0x5307fb['mrz']===undefined||_0x5307fb[_0x47d6ce(0x2a4)]==null){let _0x238133=ImageProcessing[_0x47d6ce(0x1d4)](_0x13d22d);_0x238133>0x5?this[_0x47d6ce(0x2a4)][_0x47d6ce(0x1a8)](_0x13d22d,this[_0x47d6ce(0x213)],_0x13d1b1=>{this['onMRZDetected'](_0x13d1b1);}):this[_0x47d6ce(0x1de)](this[_0x47d6ce(0x2e4)]);}else this[_0x47d6ce(0x1fd)](_0x5307fb[_0x47d6ce(0x2a4)]);}else this['scanned'][_0x47d6ce(0x2a4)]=!![];}else{if(this[_0x47d6ce(0x1e6)][_0x47d6ce(0x194)][_0x47d6ce(0x2a9)]>0x0&&this[_0x47d6ce(0x1e6)]['docType']===DCScanDocType['ID']&&_0x232929[_0x47d6ce(0x35d)]===DCScanDocFaces[_0x47d6ce(0x31a)]){let _0x16be40=_0x504fc3[_0x47d6ce(0x316)]*0.6,_0x3b2f20=ImageProcessing[_0x47d6ce(0x21c)](_0x504fc3,0x0,_0x16be40,_0x504fc3[_0x47d6ce(0x1ff)],_0x504fc3['height']-_0x16be40);if(_0x5307fb[_0x47d6ce(0x2a4)]===undefined||_0x5307fb[_0x47d6ce(0x2a4)]==null){let _0x3a5e9f=ImageProcessing['getLaplacianVariance'](_0x3b2f20,0xa);_0x3a5e9f>0xa?this[_0x47d6ce(0x2a4)][_0x47d6ce(0x1a8)](_0x3b2f20,this[_0x47d6ce(0x213)],_0x4ad61c=>{const _0x1d0810=_0x47d6ce;this[_0x1d0810(0x1fd)](_0x4ad61c);}):this['unlock'](this[_0x47d6ce(0x2e4)]);}else this[_0x47d6ce(0x1fd)](_0x5307fb['mrz']);this[_0x47d6ce(0x1e5)][_0x47d6ce(0x1e0)]=!![];}else this[_0x47d6ce(0x1de)](this[_0x47d6ce(0x2e4)]);}this[_0x47d6ce(0x1ac)](_0x54dbee),this[_0x47d6ce(0x32c)]();}else this[_0x47d6ce(0x1ac)]([]),this[_0x47d6ce(0x1ab)]([]),this[_0x47d6ce(0x1de)](this[_0x47d6ce(0x2e4)]);}[_0x21dfaf(0x312)](_0x366aee){const _0x84ffcd=_0x21dfaf;let _0x4536df=this[_0x84ffcd(0x1ec)]['width'],_0x2b19cd=this[_0x84ffcd(0x1ec)][_0x84ffcd(0x316)],_0x4a667b=this['options'][_0x84ffcd(0x287)];if(_0x366aee!=null&&_0x366aee['length']>=0x4){if(_0x366aee[0x2]/_0x4536df*0x64>_0x4a667b[_0x84ffcd(0x1ff)]||_0x366aee[0x3]/_0x2b19cd*0x64>_0x4a667b['height'])return!![];}return![];}['onFaceDetected'](_0x1e6025){const _0x194542=_0x21dfaf;console[_0x194542(0x18e)](_0x194542(0x1f9),_0x1e6025),this[_0x194542(0x1e5)][_0x194542(0x1e0)]=!![];if(this[_0x194542(0x264)]!=null){this[_0x194542(0x264)][_0x194542(0x1e0)]=null;if(_0x1e6025[_0x194542(0x2a9)]>0x0){let _0x3b4285=ImageProcessing[_0x194542(0x21c)](this[_0x194542(0x252)],_0x1e6025[0x0]['x'],_0x1e6025[0x0]['y'],_0x1e6025[0x0][_0x194542(0x1ff)],_0x1e6025[0x0][_0x194542(0x316)]),_0x4b763d=ImageProcessing[_0x194542(0x1d4)](_0x3b4285,0xa);console[_0x194542(0x18e)]('face\x20laplacian',_0x4b763d),_0x4b763d>0xa&&(this[_0x194542(0x264)][_0x194542(0x1e0)]=_0x1e6025);}typeof this[_0x194542(0x2f6)][_0x194542(0x1f9)]===_0x194542(0x2af)&&this['options'][_0x194542(0x1f9)](_0x1e6025),this[_0x194542(0x32c)]();}}['onMRZDetected'](_0x1b0686){const _0x476a53=_0x21dfaf;console[_0x476a53(0x18e)]('onMRZDetected',_0x1b0686),this['scanned']['mrz']=!![];if(this[_0x476a53(0x264)]==null)return;if(_0x1b0686!=null&&_0x1b0686[_0x476a53(0x236)]!=null&&_0x1b0686[_0x476a53(0x236)][_0x476a53(0x24e)]===!![])this['curScan'][_0x476a53(0x2a4)]=_0x1b0686;else _0x1b0686!=null&&_0x1b0686[_0x476a53(0x24e)]===!![]?this['curScan'][_0x476a53(0x2a4)]=MRZReader[_0x476a53(0x244)](_0x1b0686):this['curScan']['mrz']=null;typeof this[_0x476a53(0x2f6)][_0x476a53(0x1fd)]===_0x476a53(0x2af)&&this[_0x476a53(0x2f6)][_0x476a53(0x1fd)](_0x1b0686),this[_0x476a53(0x32c)]();}['checkScanResult'](){const _0x638ba3=_0x21dfaf;if(!this[_0x638ba3(0x370)]())return;let _0x8166ed=this[_0x638ba3(0x264)],_0x2a2548=![];if(this['result'][_0x638ba3(0x194)][_0x638ba3(0x2a9)]===0x0&&(_0x8166ed['docFace']===DCScanDocFaces[_0x638ba3(0x2fc)]||_0x8166ed['docFace']===DCScanDocFaces[_0x638ba3(0x356)]))_0x8166ed['docFace']===DCScanDocFaces[_0x638ba3(0x2fc)]?_0x8166ed[_0x638ba3(0x2cd)]!=null&&_0x8166ed[_0x638ba3(0x1e0)]!=null&&_0x8166ed[_0x638ba3(0x1e0)][_0x638ba3(0x2a9)]===0x1&&(this['result'][_0x638ba3(0x194)][_0x638ba3(0x204)](_0x8166ed),this[_0x638ba3(0x1e6)][_0x638ba3(0x215)]=DCScanDocType['ID'],this[_0x638ba3(0x1e6)][_0x638ba3(0x2be)]=![],this['callDetectedEvent'](this['curScan']),this['fireCommand'](DCScanCommand['ID_BACK']),_0x2a2548=!![],this[_0x638ba3(0x1de)](this[_0x638ba3(0x2e4)])):_0x8166ed[_0x638ba3(0x2cd)]!=null&&_0x8166ed['face']!=null&&_0x8166ed[_0x638ba3(0x2a4)]!=null&&_0x8166ed['mrz'][_0x638ba3(0x19b)]!=null&&(this[_0x638ba3(0x1e6)][_0x638ba3(0x194)][_0x638ba3(0x204)](_0x8166ed),this['result']['docType']=DCScanDocType[_0x638ba3(0x22b)],this[_0x638ba3(0x1e6)][_0x638ba3(0x2be)]=!![],this[_0x638ba3(0x1ab)](this['curScan']),this['changeStep'](DCScanSteps[_0x638ba3(0x188)]),this[_0x638ba3(0x255)]=new Date()[_0x638ba3(0x26d)](),_0x2a2548=!![]);else this[_0x638ba3(0x1e6)]['scans']['length']===0x1&&this[_0x638ba3(0x1e6)]['docType']===DCScanDocType['ID']&&_0x8166ed[_0x638ba3(0x35d)]===DCScanDocFaces['ID_BACK']&&(_0x8166ed[_0x638ba3(0x2cd)]!=null&&_0x8166ed[_0x638ba3(0x2a4)]!=null&&_0x8166ed[_0x638ba3(0x2a4)]['type']!=null&&(this[_0x638ba3(0x1e6)][_0x638ba3(0x194)]['push'](_0x8166ed),this['result'][_0x638ba3(0x2be)]=!![],this[_0x638ba3(0x1ab)](this[_0x638ba3(0x264)]),this[_0x638ba3(0x240)](DCScanSteps['FINISH']),this[_0x638ba3(0x255)]=new Date()[_0x638ba3(0x26d)](),_0x2a2548=!![]));!_0x2a2548&&this[_0x638ba3(0x1e5)]['card']&&this[_0x638ba3(0x1e5)][_0x638ba3(0x1e0)]&&this[_0x638ba3(0x1e5)][_0x638ba3(0x2a4)]&&this[_0x638ba3(0x1de)](this[_0x638ba3(0x2e4)]);}[_0x21dfaf(0x370)](){const _0x53e0cc=_0x21dfaf;for(let _0x4108ed in this[_0x53e0cc(0x1e5)]){if(this[_0x53e0cc(0x1e5)][_0x4108ed]!==!![])return![];}return!![];}[_0x21dfaf(0x240)](_0x1d01f0){const _0x12adc1=_0x21dfaf;this[_0x12adc1(0x1c9)]!==_0x1d01f0&&(this[_0x12adc1(0x1c9)]=_0x1d01f0,typeof this[_0x12adc1(0x2f6)][_0x12adc1(0x305)]==_0x12adc1(0x2af)&&this[_0x12adc1(0x2f6)][_0x12adc1(0x305)](_0x1d01f0));}[_0x21dfaf(0x1ac)](_0x1b5e82){const _0xde206a=_0x21dfaf;_0x1b5e82!==null&&typeof this[_0xde206a(0x2f6)][_0xde206a(0x1f7)]===_0xde206a(0x2af)&&this[_0xde206a(0x2f6)][_0xde206a(0x1f7)](_0x1b5e82);}[_0x21dfaf(0x1ab)](_0x394d74){const _0x613e7a=_0x21dfaf;typeof this[_0x613e7a(0x2f6)]['onDetected']==='function'&&this[_0x613e7a(0x2f6)][_0x613e7a(0x1a9)](_0x394d74);}['callError'](_0x185c7a){const _0x4ec099=_0x21dfaf;typeof this[_0x4ec099(0x2f6)]['onError']==='function'&&this[_0x4ec099(0x2f6)][_0x4ec099(0x30c)](_0x185c7a);}[_0x21dfaf(0x2b7)](){const _0xb253b6=_0x21dfaf;return this[_0xb253b6(0x1c9)];}[_0x21dfaf(0x1de)](_0x424ee2=null){const _0x5c1c28=_0x21dfaf;_0x424ee2=_0x424ee2==null?this[_0x5c1c28(0x2e4)]:_0x424ee2,clearTimeout(this['timeID']),this[_0x5c1c28(0x1f1)]=setTimeout(()=>{const _0x20f428=_0x5c1c28;this[_0x20f428(0x366)]=![];},_0x424ee2);}['reset'](){const _0xf9c4ff=_0x21dfaf;this[_0xf9c4ff(0x1c9)]=DCScanCommand[_0xf9c4ff(0x1cd)],this[_0xf9c4ff(0x1e6)]={'status':![],'docType':DCScanDocType[_0xf9c4ff(0x1cd)],'scans':[],'tID':null},this[_0xf9c4ff(0x264)]=null,this[_0xf9c4ff(0x1e5)]={},this[_0xf9c4ff(0x366)]=![],this[_0xf9c4ff(0x252)]=null,this['tID']=null,this[_0xf9c4ff(0x33f)]['reset']();}[_0x21dfaf(0x1a2)](){const _0x32dcaf=_0x21dfaf;this[_0x32dcaf(0x1c9)]=DCScanSteps[_0x32dcaf(0x1cd)],this[_0x32dcaf(0x22d)](DCScanCommand[_0x32dcaf(0x1cd)]),this[_0x32dcaf(0x1c6)]=new Date()['getTime'](),!this[_0x32dcaf(0x33f)][_0x32dcaf(0x2f6)][_0x32dcaf(0x1a1)]?(this[_0x32dcaf(0x213)]=String(this[_0x32dcaf(0x1c6)]+Math['round'](Math['random']()*0x186a0)),this[_0x32dcaf(0x1e6)][_0x32dcaf(0x213)]=this['tID']):this[_0x32dcaf(0x33f)]['startSession']((_0x34e388,_0x2cb330)=>{const _0x55df62=_0x32dcaf;this['tID']=_0x2cb330,this[_0x55df62(0x1e6)][_0x55df62(0x213)]=this[_0x55df62(0x213)];});}[_0x21dfaf(0x33e)](){const _0x5617f2=_0x21dfaf;this[_0x5617f2(0x22d)](DCScanCommand[_0x5617f2(0x188)]),typeof this[_0x5617f2(0x2f6)]['onFinished']===_0x5617f2(0x2af)&&this['options'][_0x5617f2(0x355)](this[_0x5617f2(0x1e6)]);}['fireCommand'](_0x561eea){const _0x266f8b=_0x21dfaf;typeof this['options'][_0x266f8b(0x28b)]===_0x266f8b(0x2af)&&this[_0x266f8b(0x2f6)]['onCommand'](_0x561eea);}[_0x21dfaf(0x2b5)](_0x4a8e4c){const _0x4b7ac5=_0x21dfaf;switch(_0x4a8e4c){case _0x4b7ac5(0x352):case'id_back':return DCScanDocType['ID'];case _0x4b7ac5(0x261):return DCScanDocType[_0x4b7ac5(0x22b)];default:return DCScanDocType[_0x4b7ac5(0x1cd)];}}[_0x21dfaf(0x359)](_0x353bc3){const _0x20b0a4=_0x21dfaf;switch(_0x353bc3){case'id_front':return DCScanDocFaces[_0x20b0a4(0x2fc)];case _0x20b0a4(0x2c9):return DCScanDocFaces['ID_BACK'];case _0x20b0a4(0x261):return DCScanDocFaces[_0x20b0a4(0x356)];default:return DCScanDocFaces[_0x20b0a4(0x1cd)];}}[_0x21dfaf(0x34f)](){const _0x5859ea=_0x21dfaf;return this[_0x5859ea(0x1c9)];}};class vislayer_VisualLayer{constructor(_0xf7d4d6,_0x279aa5={}){const _0x424013=_0x21dfaf;this[_0x424013(0x1eb)]=_0xf7d4d6,this[_0x424013(0x2f6)]={'srcDim':{'k':0x1,'dx':0x0,'dy':0x0,'dw':0x0,'dh':0x0},'mirrored':!![]},this[_0x424013(0x2f6)]=deepMerge(this[_0x424013(0x2f6)],_0x279aa5),this['cc']=new CoordConverter(this['options'][_0x424013(0x275)]);}['drawPath'](_0x263a14,_0x72e1ed,_0x3a92b3){}[_0x21dfaf(0x2f3)](){}[_0x21dfaf(0x1ea)](_0x192f56){const _0x4b1643=_0x21dfaf;let _0x5c858e=_0x192f56['width']+0x14,_0x4c859a=_0x192f56[_0x4b1643(0x316)]+0x14,_0x2ab7ac=(this[_0x4b1643(0x1eb)]['width']-_0x5c858e*this['canvas']['width']/0x64)/0x2,_0x5fa2ee=(this[_0x4b1643(0x1eb)]['height']-_0x4c859a*this[_0x4b1643(0x1eb)][_0x4b1643(0x316)]/0x64)/0x2,_0x1d0edd=this[_0x4b1643(0x1eb)][_0x4b1643(0x2fb)]('2d');_0x1d0edd['save'](),_0x1d0edd[_0x4b1643(0x358)](),_0x1d0edd['lineWidth']='3',_0x1d0edd[_0x4b1643(0x20b)]=_0x4b1643(0x2d6),_0x1d0edd[_0x4b1643(0x35e)](_0x2ab7ac,_0x5fa2ee,this[_0x4b1643(0x1eb)][_0x4b1643(0x1ff)]-_0x2ab7ac*0x2,this[_0x4b1643(0x1eb)][_0x4b1643(0x316)]-_0x5fa2ee*0x2),_0x1d0edd[_0x4b1643(0x1d5)](),_0x1d0edd['closePath'](),_0x1d0edd['restore']();}[_0x21dfaf(0x321)](_0x2d32f9,_0x538722=_0x21dfaf(0x364),_0x15b4f3=''){const _0x29c855=_0x21dfaf;let _0x2f4fb1=this['canvas'][_0x29c855(0x2fb)]('2d'),_0x49efcf=null,_0xda4579=null,_0x356749=null;for(let _0x1be95e in _0x2d32f9){_0x356749=_0x2d32f9[_0x1be95e],this[_0x29c855(0x2f6)][_0x29c855(0x286)]?_0x49efcf=this[_0x29c855(0x1eb)]['width']-this['cc'][_0x29c855(0x243)](_0x356749[_0x29c855(0x1b6)][0x0])-this['cc']['getSize'](_0x356749['bbox'][0x2]):_0x49efcf=this['cc'][_0x29c855(0x243)](_0x356749[_0x29c855(0x1b6)][0x0]),_0xda4579=this['cc'][_0x29c855(0x34a)](_0x356749['bbox'][0x1]),_0x2f4fb1['beginPath'](),_0x2f4fb1[_0x29c855(0x2f4)]='2',_0x2f4fb1['strokeStyle']=_0x538722,_0x2f4fb1[_0x29c855(0x35e)](_0x49efcf,_0xda4579,this['cc']['getSize'](_0x356749['bbox'][0x2]),this['cc'][_0x29c855(0x2a1)](_0x356749['bbox'][0x3])),_0x2f4fb1[_0x29c855(0x1d5)](),_0x2f4fb1['lineWidth']='0',_0x2f4fb1[_0x29c855(0x1dd)]=_0x538722,_0x2f4fb1[_0x29c855(0x298)](_0x49efcf-0x1,_0xda4579-0x14,0x96,0x14),_0x2f4fb1['font']=_0x29c855(0x1fa),_0x2f4fb1['fillStyle']='white',_0x2f4fb1[_0x29c855(0x222)]=_0x29c855(0x19c),_0x2f4fb1[_0x29c855(0x1d7)](_0x356749[_0x29c855(0x2a2)]+'\x20'+Number(_0x356749['score'])[_0x29c855(0x330)](0x2),_0x49efcf+0x5,_0xda4579-0x5),_0x2f4fb1[_0x29c855(0x1d5)](),_0x2f4fb1[_0x29c855(0x25b)]=_0x29c855(0x228),_0x2f4fb1[_0x29c855(0x1dd)]=_0x538722,_0x2f4fb1[_0x29c855(0x222)]=_0x29c855(0x1f5),_0x2f4fb1['fillText'](_0x15b4f3,_0x49efcf+this['cc'][_0x29c855(0x2a1)](_0x356749[_0x29c855(0x1b6)][0x2])/0x2,_0xda4579+this['cc'][_0x29c855(0x2a1)](_0x356749['bbox'][0x3])/0x2),_0x2f4fb1[_0x29c855(0x1b8)]();}_0x2f4fb1[_0x29c855(0x35f)]();}};class ScanWebWorker{constructor(_0x1efac9={}){const _0x78d27e=_0x21dfaf;this[_0x78d27e(0x1f2)]=null,this[_0x78d27e(0x1ee)]=null,this[_0x78d27e(0x2f6)]={'path':null},this[_0x78d27e(0x2f6)]=deepMerge(this[_0x78d27e(0x2f6)],_0x1efac9),this['setup']();}[_0x21dfaf(0x27a)](){const _0x81380a=_0x21dfaf;this['stream']=stream[_0x81380a(0x1b1)](_0x81380a(0x221)),this[_0x81380a(0x1ee)]['on'](_0x81380a(0x294),this['loadCard'][_0x81380a(0x311)](this)),this[_0x81380a(0x1ee)]['on'](_0x81380a(0x1af),this[_0x81380a(0x1af)]['bind'](this)),window['Worker']&&this[_0x81380a(0x2f6)][_0x81380a(0x2ec)]!=null?(this[_0x81380a(0x1f2)]=new Worker(this[_0x81380a(0x2f6)][_0x81380a(0x2ec)]),this[_0x81380a(0x1f2)]['onmessage']=this[_0x81380a(0x247)][_0x81380a(0x311)](this)):console[_0x81380a(0x18e)](_0x81380a(0x27e));}[_0x21dfaf(0x1af)](_0x6d4e03){const _0xa3b4e5=_0x21dfaf;let _0x1a635e=null;if(_0x6d4e03 instanceof HTMLCanvasElement)_0x1a635e=ImageProcessing['canvasToImageData'](_0x6d4e03);else _0x6d4e03 instanceof HTMLImageElement&&(_0x1a635e=ImageProcessing[_0xa3b4e5(0x326)](_0x6d4e03));this[_0xa3b4e5(0x1f2)][_0xa3b4e5(0x28a)]({'type':_0xa3b4e5(0x2cf),'action':_0xa3b4e5(0x1af),'data':_0x1a635e});}[_0x21dfaf(0x294)](){const _0x5bfa1c=_0x21dfaf;this['worker'][_0x5bfa1c(0x28a)]({'type':'scan','action':_0x5bfa1c(0x294)});}['onWorkerMessage'](_0x2c35d3){const _0x363f6a=_0x21dfaf;let _0x656d7a=_0x2c35d3[_0x363f6a(0x2ba)][_0x363f6a(0x19b)],_0x5a5fcc=_0x2c35d3['data'][_0x363f6a(0x2db)],_0x36f337=_0x2c35d3[_0x363f6a(0x2ba)][_0x363f6a(0x2ba)];switch(_0x656d7a){case _0x363f6a(0x2cf):this[_0x363f6a(0x1ee)][_0x363f6a(0x340)](_0x363f6a(0x331),_0x36f337);break;case _0x363f6a(0x285):this[_0x363f6a(0x1ee)][_0x363f6a(0x340)]('onScanLoaded',_0x36f337);break;default:break;}}};class DeepScanner{constructor(_0x2d2ae0,_0x53c965={}){const _0x1c7ee3=_0x21dfaf;this['dom']=null,this['canvas']=null,this['camera']=null,this[_0x1c7ee3(0x23c)]={'start':![],'detectInit':![],'analyzeAfterOpen':![]},this[_0x1c7ee3(0x1f2)]=null,this[_0x1c7ee3(0x2f6)]={'url':null,'headers':null,'src':null,'sourceType':null,'width':0x780,'height':0x438,'onInit':null,'onFrameCaptured':null,'onCardDetected':null,'onDetected':null,'onCommand':null,'sessionTime':0xea60,'detectTime':0x64,'onFinished':null,'mirrored':!![],'scan_worker_path':'js/deepscanworker.min.js','face_worker_path':_0x1c7ee3(0x245),'testURL':null,'mrzOptions':null,'useServerSide':null,'serverRequestDelay':0x1f4,'detector':{},'camera':{'fillOnMobile':!![],'fill':!![],'cutEdge':!![]}},this[_0x1c7ee3(0x260)]=null,this[_0x1c7ee3(0x1cc)]=null,this['faceWebWorker']=null,this[_0x1c7ee3(0x2b2)]=null,this[_0x1c7ee3(0x23a)]=null,this[_0x1c7ee3(0x267)]=null,this['lastScanned']=null,this[_0x1c7ee3(0x360)]=null,this[_0x1c7ee3(0x361)]=DCScanCommand[_0x1c7ee3(0x1cd)],this[_0x1c7ee3(0x342)]=null,this[_0x1c7ee3(0x246)]=0x0,this[_0x1c7ee3(0x2f6)]=deepMerge(this[_0x1c7ee3(0x2f6)],_0x53c965),(this[_0x1c7ee3(0x2f6)]['useServerSide']==null&&OSPlus[_0x1c7ee3(0x214)]()||OSPlus[_0x1c7ee3(0x18f)]())&&(this[_0x1c7ee3(0x2f6)][_0x1c7ee3(0x293)]=!![]),this[_0x1c7ee3(0x36f)](_0x2d2ae0),this['setup']();}[_0x21dfaf(0x36f)](_0x5b324d){const _0x574862=_0x21dfaf;this[_0x574862(0x296)]=new camera(_0x5b324d,{'src':this[_0x574862(0x2f6)][_0x574862(0x202)],'width':this[_0x574862(0x2f6)][_0x574862(0x1ff)],'height':this[_0x574862(0x2f6)][_0x574862(0x316)],'fill':this['options'][_0x574862(0x296)][_0x574862(0x22a)],'fillOnMobile':this['options'][_0x574862(0x296)][_0x574862(0x2e7)],'cutEdge':this[_0x574862(0x2f6)][_0x574862(0x296)]['cutEdge'],'onFrameUpdated':this[_0x574862(0x23d)]['bind'](this),'onLoaded':this[_0x574862(0x33c)][_0x574862(0x311)](this),'onStart':this[_0x574862(0x1d0)][_0x574862(0x311)](this),'onStop':this[_0x574862(0x249)][_0x574862(0x311)](this)}),this[_0x574862(0x368)]=this[_0x574862(0x296)]['dom'],this[_0x574862(0x1eb)]=this[_0x574862(0x296)]['canvas'];}[_0x21dfaf(0x27a)](){const _0x80c957=_0x21dfaf;this['cc']=new CoordConverter(this[_0x80c957(0x296)]['sourceDim']),this[_0x80c957(0x1cc)]=new vislayer_VisualLayer(this[_0x80c957(0x1eb)],{'srcDim':this[_0x80c957(0x296)]['sourceDim'],'mirrored':this[_0x80c957(0x2f6)][_0x80c957(0x286)]}),this[_0x80c957(0x260)]=new ScanAnalyser(this[_0x80c957(0x296)]['__canvas_original'],{'host':this[_0x80c957(0x2f6)][_0x80c957(0x258)],'headers':this['options'][_0x80c957(0x29d)],'mrzOptions':this[_0x80c957(0x2f6)][_0x80c957(0x191)],'detector':this[_0x80c957(0x2f6)][_0x80c957(0x33f)],'useServerSide':this[_0x80c957(0x2f6)]['useServerSide'],'onCommand':this[_0x80c957(0x28b)]['bind'](this),'onCardDetected':this[_0x80c957(0x1f7)][_0x80c957(0x311)](this),'onDetected':this['onDetected'][_0x80c957(0x311)](this),'onFinished':this[_0x80c957(0x355)]['bind'](this),'onError':this[_0x80c957(0x30c)][_0x80c957(0x311)](this),'mirrored':this[_0x80c957(0x2f6)][_0x80c957(0x286)],'serverDelay':this[_0x80c957(0x2f6)][_0x80c957(0x1bd)]});if(!this[_0x80c957(0x2f6)][_0x80c957(0x293)]){let _0x84d052=_0x80c957(0x2c2)+new Date()[_0x80c957(0x26d)]();this[_0x80c957(0x29b)]=new WebWorker({'path':this[_0x80c957(0x2f6)][_0x80c957(0x341)]+_0x84d052}),this[_0x80c957(0x2b2)]=new ScanWebWorker({'path':this[_0x80c957(0x2f6)]['scan_worker_path']+_0x84d052});}this[_0x80c957(0x260)]['cc']=this['cc'],typeof this[_0x80c957(0x2f6)][_0x80c957(0x33a)]=='function'&&this[_0x80c957(0x2f6)][_0x80c957(0x33a)]();}[_0x21dfaf(0x1b1)](){const _0xa3280e=_0x21dfaf;!this[_0xa3280e(0x296)][_0xa3280e(0x2a3)]()&&(this[_0xa3280e(0x296)][_0xa3280e(0x1a2)](),this[_0xa3280e(0x260)][_0xa3280e(0x31d)]());}[_0x21dfaf(0x2b9)](){const _0x3cd780=_0x21dfaf;this['stop'](),this[_0x3cd780(0x296)][_0x3cd780(0x1f3)]();}['start'](){const _0xce1a49=_0x21dfaf;this['lastResult']=null,this[_0xce1a49(0x361)]=DCScanCommand[_0xce1a49(0x1cd)],!this['camera'][_0xce1a49(0x2a3)]()?(this[_0xce1a49(0x1b1)](),this['state'][_0xce1a49(0x2d4)]=!![]):(this[_0xce1a49(0x23c)][_0xce1a49(0x1a2)]=!![],this[_0xce1a49(0x260)][_0xce1a49(0x1a2)]()),this['clear'](),this['sessionTimeCount']=new Date()[_0xce1a49(0x26d)]();}['stop'](){const _0x5b31d5=_0x21dfaf;this['state'][_0x5b31d5(0x1a2)]=![],this[_0x5b31d5(0x23c)][_0x5b31d5(0x2d4)]=![],this[_0x5b31d5(0x260)][_0x5b31d5(0x2b1)](),this[_0x5b31d5(0x206)]();}[_0x21dfaf(0x2bf)](_0x44f7e8,_0xe88d13){const _0x31b15e=_0x21dfaf;ImageProcessing['getImageFromURL'](_0x44f7e8)[_0x31b15e(0x295)](_0x27b7a4=>{const _0x3e1aee=_0x31b15e;let _0x286f3a=ImageProcessing[_0x3e1aee(0x326)](_0x27b7a4);this['analizer']['testDetect'](_0x286f3a,_0xe88d13);});}[_0x21dfaf(0x206)](){const _0x4bf8ba=_0x21dfaf;this[_0x4bf8ba(0x23a)]=[],this[_0x4bf8ba(0x329)]=null,this['lastScannedTime']=null,this[_0x4bf8ba(0x267)]=null,this[_0x4bf8ba(0x246)]=0x0;}[_0x21dfaf(0x355)](_0x11e0bd){const _0x2bfb47=_0x21dfaf;this['lastDetected']=[],this[_0x2bfb47(0x329)]=null,this[_0x2bfb47(0x1cc)][_0x2bfb47(0x321)]([]),this[_0x2bfb47(0x1f3)](),typeof this[_0x2bfb47(0x2f6)]['onFinished']==_0x2bfb47(0x2af)&&this[_0x2bfb47(0x2f6)]['onFinished'](_0x11e0bd);}['onCardDetected'](_0x3e0eab){const _0xe41bec=_0x21dfaf;this[_0xe41bec(0x23a)]=_0x3e0eab,this[_0xe41bec(0x267)]=new Date()[_0xe41bec(0x26d)](),typeof this[_0xe41bec(0x2f6)]['onCardDetected']===_0xe41bec(0x2af)&&this[_0xe41bec(0x2f6)]['onCardDetected'](_0x3e0eab);}[_0x21dfaf(0x1a9)](_0x24e176){const _0x3eb70d=_0x21dfaf;this[_0x3eb70d(0x329)]=_0x24e176,this['lastScannedTime']=new Date()['getTime'](),console['log'](_0x3eb70d(0x353),_0x24e176),typeof this[_0x3eb70d(0x2f6)][_0x3eb70d(0x1a9)]===_0x3eb70d(0x2af)&&this[_0x3eb70d(0x2f6)][_0x3eb70d(0x1a9)](this[_0x3eb70d(0x329)]);}[_0x21dfaf(0x28b)](_0x311ce7){const _0x58cdee=_0x21dfaf;this['lastCommand']=_0x311ce7;if(!this[_0x58cdee(0x23c)][_0x58cdee(0x1a2)])return;typeof this['options'][_0x58cdee(0x28b)]===_0x58cdee(0x2af)&&this[_0x58cdee(0x2f6)][_0x58cdee(0x28b)](_0x311ce7);}[_0x21dfaf(0x1c8)](){}[_0x21dfaf(0x30c)](_0x459c5f){const _0x338852=_0x21dfaf;switch(_0x459c5f){case DCScanError[_0x338852(0x2b3)]:console[_0x338852(0x18e)](_0x338852(0x24f));break;default:}}[_0x21dfaf(0x23d)](){const _0x151ec7=_0x21dfaf;if(this[_0x151ec7(0x23c)][_0x151ec7(0x1a2)]){let _0x180295=this[_0x151ec7(0x329)]&&this[_0x151ec7(0x329)][_0x151ec7(0x2cd)]?[this['lastScanned'][_0x151ec7(0x2cd)]]:[];if(_0x180295[_0x151ec7(0x2a9)]===0x0&&this[_0x151ec7(0x23a)]!=null&&this[_0x151ec7(0x23a)][_0x151ec7(0x2a9)]>0x0){_0x180295=this['lastDetected'];let _0x39b048='';if(this[_0x151ec7(0x361)]===DCScanCommand[_0x151ec7(0x31a)]&&this[_0x151ec7(0x23a)][0x0][_0x151ec7(0x2a2)]==='id_back')_0x39b048='data\x20processing,\x20please\x20wait...',this['visual'][_0x151ec7(0x321)](_0x180295,_0x151ec7(0x327),_0x39b048);else this[_0x151ec7(0x361)]===DCScanCommand[_0x151ec7(0x333)]&&this[_0x151ec7(0x23a)][0x0][_0x151ec7(0x2a2)]===_0x151ec7(0x261)&&(_0x39b048=_0x151ec7(0x201),this[_0x151ec7(0x1cc)][_0x151ec7(0x321)](_0x180295,_0x151ec7(0x327),_0x39b048));}else{let _0x17b74e=this[_0x151ec7(0x196)](this[_0x151ec7(0x360)]);_0x17b74e!=null&&_0x17b74e<0x7d0&&this[_0x151ec7(0x1cc)][_0x151ec7(0x321)](_0x180295);}this[_0x151ec7(0x260)][_0x151ec7(0x34f)]()===DCScanSteps[_0x151ec7(0x29f)]&&this[_0x151ec7(0x1cc)]['drawArea'](this['analizer'][_0x151ec7(0x2f6)][_0x151ec7(0x287)]);let _0x20ab29=new Date()[_0x151ec7(0x26d)]();_0x20ab29-this[_0x151ec7(0x246)]>this[_0x151ec7(0x2f6)]['sessionTime']?this[_0x151ec7(0x355)]({'status':![],'msg':_0x151ec7(0x1ed)}):this[_0x151ec7(0x260)][_0x151ec7(0x27b)]();}}[_0x21dfaf(0x33c)](_0x1ce060,_0x355bd2){const _0x28f629=_0x21dfaf;this['cc'][_0x28f629(0x2e0)](_0x355bd2);}[_0x21dfaf(0x1d0)](){const _0x1d75d3=_0x21dfaf;this[_0x1d75d3(0x23c)][_0x1d75d3(0x2d4)]&&(this[_0x1d75d3(0x23c)][_0x1d75d3(0x2d4)]=![],this[_0x1d75d3(0x1a2)]());}[_0x21dfaf(0x249)](){}[_0x21dfaf(0x196)](_0x16dad3){if(_0x16dad3==null)return null;return new Date()['getTime']()-_0x16dad3;}};const DCAnalyzer={'FACE':_0x21dfaf(0x1e0),'SCANNER':_0x21dfaf(0x22e)};class DCFaceID{constructor(_0x124961={}){const _0x37ed03=_0x21dfaf;this['options']={'url':null,'headers':null},this[_0x37ed03(0x2f6)]=deepMerge(this[_0x37ed03(0x2f6)],_0x124961),this[_0x37ed03(0x2ba)]=new DataModel(_0x124961[_0x37ed03(0x258)]||null,this['options']);}[_0x21dfaf(0x2c4)](_0x37e3c9,_0x295d79){let _0x5435ef=new DeepFace(_0x37e3c9,_0x295d79);return _0x5435ef;}[_0x21dfaf(0x211)](_0x2177a0,_0xa47a68){const _0x4422b2=_0x21dfaf;let _0x1d0f38=deepMerge({'url':this[_0x4422b2(0x2f6)]['url'],'headers':this[_0x4422b2(0x2f6)][_0x4422b2(0x29d)]},_0xa47a68),_0x58c74b=new DeepScanner(_0x2177a0,_0x1d0f38);return _0x58c74b;}[_0x21dfaf(0x269)](_0x230125,_0x3dc6e4){}[_0x21dfaf(0x1a5)](_0x5ee9c6,_0x283dce){const _0x471190=_0x21dfaf;this[_0x471190(0x2ba)][_0x471190(0x1cb)](_0x5ee9c6,_0x1da842=>{typeof _0x283dce==='function'&&_0x283dce(_0x1da842);});}[_0x21dfaf(0x214)](){return OSPlus['isMobile']();}}

/* harmony default export */ const dcfaceid = (DCFaceID);


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		if(__webpack_module_cache__[moduleId]) {
/******/ 			return __webpack_module_cache__[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)
/******/ 	})();
/******/
/************************************************************************/
/******/ 	// module exports must be returned from runtime so entry inlining is disabled
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(614);
/******/ })()
.default;
});
